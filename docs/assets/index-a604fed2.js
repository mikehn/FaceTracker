var S2=(t,r)=>()=>(r||t((r={exports:{}}).exports,r),r.exports);var P4=S2((O4,n2)=>{(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))e(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&e(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function e(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();var Wu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Mv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Nl={},E2={get exports(){return Nl},set exports(t){Nl=t}},Ic={},gn={},j2={get exports(){return gn},set exports(t){gn=t}},At={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Su=Symbol.for("react.element"),C2=Symbol.for("react.portal"),k2=Symbol.for("react.fragment"),T2=Symbol.for("react.strict_mode"),M2=Symbol.for("react.profiler"),R2=Symbol.for("react.provider"),I2=Symbol.for("react.context"),A2=Symbol.for("react.forward_ref"),P2=Symbol.for("react.suspense"),D2=Symbol.for("react.memo"),O2=Symbol.for("react.lazy"),yy=Symbol.iterator;function L2(t){return t===null||typeof t!="object"?null:(t=yy&&t[yy]||t["@@iterator"],typeof t=="function"?t:null)}var Rv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Iv=Object.assign,Av={};function ds(t,r,n){this.props=t,this.context=r,this.refs=Av,this.updater=n||Rv}ds.prototype.isReactComponent={};ds.prototype.setState=function(t,r){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,r,"setState")};ds.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Pv(){}Pv.prototype=ds.prototype;function Lh(t,r,n){this.props=t,this.context=r,this.refs=Av,this.updater=n||Rv}var Nh=Lh.prototype=new Pv;Nh.constructor=Lh;Iv(Nh,ds.prototype);Nh.isPureReactComponent=!0;var gy=Array.isArray,Dv=Object.prototype.hasOwnProperty,Fh={current:null},Ov={key:!0,ref:!0,__self:!0,__source:!0};function Lv(t,r,n){var e,o={},i=null,u=null;if(r!=null)for(e in r.ref!==void 0&&(u=r.ref),r.key!==void 0&&(i=""+r.key),r)Dv.call(r,e)&&!Ov.hasOwnProperty(e)&&(o[e]=r[e]);var a=arguments.length-2;if(a===1)o.children=n;else if(1<a){for(var s=Array(a),l=0;l<a;l++)s[l]=arguments[l+2];o.children=s}if(t&&t.defaultProps)for(e in a=t.defaultProps,a)o[e]===void 0&&(o[e]=a[e]);return{$$typeof:Su,type:t,key:i,ref:u,props:o,_owner:Fh.current}}function N2(t,r){return{$$typeof:Su,type:t.type,key:r,ref:t.ref,props:t.props,_owner:t._owner}}function Bh(t){return typeof t=="object"&&t!==null&&t.$$typeof===Su}function F2(t){var r={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return r[n]})}var vy=/\/+/g;function yd(t,r){return typeof t=="object"&&t!==null&&t.key!=null?F2(""+t.key):r.toString(36)}function El(t,r,n,e,o){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var u=!1;if(t===null)u=!0;else switch(i){case"string":case"number":u=!0;break;case"object":switch(t.$$typeof){case Su:case C2:u=!0}}if(u)return u=t,o=o(u),t=e===""?"."+yd(u,0):e,gy(o)?(n="",t!=null&&(n=t.replace(vy,"$&/")+"/"),El(o,r,n,"",function(l){return l})):o!=null&&(Bh(o)&&(o=N2(o,n+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(vy,"$&/")+"/")+t)),r.push(o)),1;if(u=0,e=e===""?".":e+":",gy(t))for(var a=0;a<t.length;a++){i=t[a];var s=e+yd(i,a);u+=El(i,r,n,s,o)}else if(s=L2(t),typeof s=="function")for(t=s.call(t),a=0;!(i=t.next()).done;)i=i.value,s=e+yd(i,a++),u+=El(i,r,n,s,o);else if(i==="object")throw r=String(t),Error("Objects are not valid as a React child (found: "+(r==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":r)+"). If you meant to render a collection of children, use an array instead.");return u}function Hu(t,r,n){if(t==null)return t;var e=[],o=0;return El(t,e,"","",function(i){return r.call(n,i,o++)}),e}function B2(t){if(t._status===-1){var r=t._result;r=r(),r.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=r)}if(t._status===1)return t._result.default;throw t._result}var hn={current:null},jl={transition:null},U2={ReactCurrentDispatcher:hn,ReactCurrentBatchConfig:jl,ReactCurrentOwner:Fh};At.Children={map:Hu,forEach:function(t,r,n){Hu(t,function(){r.apply(this,arguments)},n)},count:function(t){var r=0;return Hu(t,function(){r++}),r},toArray:function(t){return Hu(t,function(r){return r})||[]},only:function(t){if(!Bh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};At.Component=ds;At.Fragment=k2;At.Profiler=M2;At.PureComponent=Lh;At.StrictMode=T2;At.Suspense=P2;At.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U2;At.cloneElement=function(t,r,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var e=Iv({},t.props),o=t.key,i=t.ref,u=t._owner;if(r!=null){if(r.ref!==void 0&&(i=r.ref,u=Fh.current),r.key!==void 0&&(o=""+r.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(s in r)Dv.call(r,s)&&!Ov.hasOwnProperty(s)&&(e[s]=r[s]===void 0&&a!==void 0?a[s]:r[s])}var s=arguments.length-2;if(s===1)e.children=n;else if(1<s){a=Array(s);for(var l=0;l<s;l++)a[l]=arguments[l+2];e.children=a}return{$$typeof:Su,type:t.type,key:o,ref:i,props:e,_owner:u}};At.createContext=function(t){return t={$$typeof:I2,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:R2,_context:t},t.Consumer=t};At.createElement=Lv;At.createFactory=function(t){var r=Lv.bind(null,t);return r.type=t,r};At.createRef=function(){return{current:null}};At.forwardRef=function(t){return{$$typeof:A2,render:t}};At.isValidElement=Bh;At.lazy=function(t){return{$$typeof:O2,_payload:{_status:-1,_result:t},_init:B2}};At.memo=function(t,r){return{$$typeof:D2,type:t,compare:r===void 0?null:r}};At.startTransition=function(t){var r=jl.transition;jl.transition={};try{t()}finally{jl.transition=r}};At.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};At.useCallback=function(t,r){return hn.current.useCallback(t,r)};At.useContext=function(t){return hn.current.useContext(t)};At.useDebugValue=function(){};At.useDeferredValue=function(t){return hn.current.useDeferredValue(t)};At.useEffect=function(t,r){return hn.current.useEffect(t,r)};At.useId=function(){return hn.current.useId()};At.useImperativeHandle=function(t,r,n){return hn.current.useImperativeHandle(t,r,n)};At.useInsertionEffect=function(t,r){return hn.current.useInsertionEffect(t,r)};At.useLayoutEffect=function(t,r){return hn.current.useLayoutEffect(t,r)};At.useMemo=function(t,r){return hn.current.useMemo(t,r)};At.useReducer=function(t,r,n){return hn.current.useReducer(t,r,n)};At.useRef=function(t){return hn.current.useRef(t)};At.useState=function(t){return hn.current.useState(t)};At.useSyncExternalStore=function(t,r,n){return hn.current.useSyncExternalStore(t,r,n)};At.useTransition=function(){return hn.current.useTransition()};At.version="18.2.0";(function(t){t.exports=At})(j2);const Nv=Mv(gn);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G2=gn,z2=Symbol.for("react.element"),V2=Symbol.for("react.fragment"),W2=Object.prototype.hasOwnProperty,H2=G2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,q2={key:!0,ref:!0,__self:!0,__source:!0};function Fv(t,r,n){var e,o={},i=null,u=null;n!==void 0&&(i=""+n),r.key!==void 0&&(i=""+r.key),r.ref!==void 0&&(u=r.ref);for(e in r)W2.call(r,e)&&!q2.hasOwnProperty(e)&&(o[e]=r[e]);if(t&&t.defaultProps)for(e in r=t.defaultProps,r)o[e]===void 0&&(o[e]=r[e]);return{$$typeof:z2,type:t,key:i,ref:u,props:o,_owner:H2.current}}Ic.Fragment=V2;Ic.jsx=Fv;Ic.jsxs=Fv;(function(t){t.exports=Ic})(E2);const ui=Nl.jsx,mo=Nl.jsxs;var yf={},gf={},$2={get exports(){return gf},set exports(t){gf=t}},Nn={},vf={},X2={get exports(){return vf},set exports(t){vf=t}},Bv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function r(B,G){var V=B.length;B.push(G);e:for(;0<V;){var X=V-1>>>1,te=B[X];if(0<o(te,G))B[X]=G,B[V]=te,V=X;else break e}}function n(B){return B.length===0?null:B[0]}function e(B){if(B.length===0)return null;var G=B[0],V=B.pop();if(V!==G){B[0]=V;e:for(var X=0,te=B.length,A=te>>>1;X<A;){var O=2*(X+1)-1,U=B[O],Y=O+1,J=B[Y];if(0>o(U,V))Y<te&&0>o(J,U)?(B[X]=J,B[Y]=V,X=Y):(B[X]=U,B[O]=V,X=O);else if(Y<te&&0>o(J,V))B[X]=J,B[Y]=V,X=Y;else break e}}return G}function o(B,G){var V=B.sortIndex-G.sortIndex;return V!==0?V:B.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var u=Date,a=u.now();t.unstable_now=function(){return u.now()-a}}var s=[],l=[],h=1,p=null,c=3,d=!1,f=!1,m=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(B){for(var G=n(l);G!==null;){if(G.callback===null)e(l);else if(G.startTime<=B)e(l),G.sortIndex=G.expirationTime,r(s,G);else break;G=n(l)}}function w(B){if(m=!1,b(B),!f)if(n(s)!==null)f=!0,q(_);else{var G=n(l);G!==null&&H(w,G.startTime-B)}}function _(B,G){f=!1,m&&(m=!1,g(T),T=-1),d=!0;var V=c;try{for(b(G),p=n(s);p!==null&&(!(p.expirationTime>G)||B&&!I());){var X=p.callback;if(typeof X=="function"){p.callback=null,c=p.priorityLevel;var te=X(p.expirationTime<=G);G=t.unstable_now(),typeof te=="function"?p.callback=te:p===n(s)&&e(s),b(G)}else e(s);p=n(s)}if(p!==null)var A=!0;else{var O=n(l);O!==null&&H(w,O.startTime-G),A=!1}return A}finally{p=null,c=V,d=!1}}var j=!1,E=null,T=-1,R=5,M=-1;function I(){return!(t.unstable_now()-M<R)}function D(){if(E!==null){var B=t.unstable_now();M=B;var G=!0;try{G=E(!0,B)}finally{G?L():(j=!1,E=null)}}else j=!1}var L;if(typeof v=="function")L=function(){v(D)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,W=N.port2;N.port1.onmessage=D,L=function(){W.postMessage(null)}}else L=function(){y(D,0)};function q(B){E=B,j||(j=!0,L())}function H(B,G){T=y(function(){B(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){f||d||(f=!0,q(_))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return c},t.unstable_getFirstCallbackNode=function(){return n(s)},t.unstable_next=function(B){switch(c){case 1:case 2:case 3:var G=3;break;default:G=c}var V=c;c=G;try{return B()}finally{c=V}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,G){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var V=c;c=B;try{return G()}finally{c=V}},t.unstable_scheduleCallback=function(B,G,V){var X=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?X+V:X):V=X,B){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=V+te,B={id:h++,callback:G,priorityLevel:B,startTime:V,expirationTime:te,sortIndex:-1},V>X?(B.sortIndex=V,r(l,B),n(s)===null&&B===n(l)&&(m?(g(T),T=-1):m=!0,H(w,V-X))):(B.sortIndex=te,r(s,B),f||d||(f=!0,q(_))),B},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(B){var G=c;return function(){var V=c;c=G;try{return B.apply(this,arguments)}finally{c=V}}}})(Bv);(function(t){t.exports=Bv})(X2);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uv=gn,Ln=vf;function Xe(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)r+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Gv=new Set,Js={};function sa(t,r){es(t,r),es(t+"Capture",r)}function es(t,r){for(Js[t]=r,t=0;t<r.length;t++)Gv.add(r[t])}var Ho=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bf=Object.prototype.hasOwnProperty,Y2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,by={},xy={};function K2(t){return bf.call(xy,t)?!0:bf.call(by,t)?!1:Y2.test(t)?xy[t]=!0:(by[t]=!0,!1)}function Q2(t,r,n,e){if(n!==null&&n.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return e?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Z2(t,r,n,e){if(r===null||typeof r>"u"||Q2(t,r,n,e))return!0;if(e)return!1;if(n!==null)switch(n.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function pn(t,r,n,e,o,i,u){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=e,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=t,this.type=r,this.sanitizeURL=i,this.removeEmptyString=u}var Yr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Yr[t]=new pn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var r=t[0];Yr[r]=new pn(r,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Yr[t]=new pn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Yr[t]=new pn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Yr[t]=new pn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Yr[t]=new pn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Yr[t]=new pn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Yr[t]=new pn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Yr[t]=new pn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Uh=/[\-:]([a-z])/g;function Gh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var r=t.replace(Uh,Gh);Yr[r]=new pn(r,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var r=t.replace(Uh,Gh);Yr[r]=new pn(r,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var r=t.replace(Uh,Gh);Yr[r]=new pn(r,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Yr[t]=new pn(t,1,!1,t.toLowerCase(),null,!1,!1)});Yr.xlinkHref=new pn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Yr[t]=new pn(t,1,!1,t.toLowerCase(),null,!0,!0)});function zh(t,r,n,e){var o=Yr.hasOwnProperty(r)?Yr[r]:null;(o!==null?o.type!==0:e||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(Z2(r,n,o,e)&&(n=null),e||o===null?K2(r)&&(n===null?t.removeAttribute(r):t.setAttribute(r,""+n)):o.mustUseProperty?t[o.propertyName]=n===null?o.type===3?!1:"":n:(r=o.attributeName,e=o.attributeNamespace,n===null?t.removeAttribute(r):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,e?t.setAttributeNS(e,r,n):t.setAttribute(r,n))))}var Yo=Uv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,qu=Symbol.for("react.element"),ka=Symbol.for("react.portal"),Ta=Symbol.for("react.fragment"),Vh=Symbol.for("react.strict_mode"),xf=Symbol.for("react.profiler"),zv=Symbol.for("react.provider"),Vv=Symbol.for("react.context"),Wh=Symbol.for("react.forward_ref"),wf=Symbol.for("react.suspense"),_f=Symbol.for("react.suspense_list"),Hh=Symbol.for("react.memo"),li=Symbol.for("react.lazy"),Wv=Symbol.for("react.offscreen"),wy=Symbol.iterator;function js(t){return t===null||typeof t!="object"?null:(t=wy&&t[wy]||t["@@iterator"],typeof t=="function"?t:null)}var ur=Object.assign,gd;function Ns(t){if(gd===void 0)try{throw Error()}catch(n){var r=n.stack.trim().match(/\n( *(at )?)/);gd=r&&r[1]||""}return`
`+gd+t}var vd=!1;function bd(t,r){if(!t||vd)return"";vd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(l){var e=l}Reflect.construct(t,[],r)}else{try{r.call()}catch(l){e=l}t.call(r.prototype)}else{try{throw Error()}catch(l){e=l}t()}}catch(l){if(l&&e&&typeof l.stack=="string"){for(var o=l.stack.split(`
`),i=e.stack.split(`
`),u=o.length-1,a=i.length-1;1<=u&&0<=a&&o[u]!==i[a];)a--;for(;1<=u&&0<=a;u--,a--)if(o[u]!==i[a]){if(u!==1||a!==1)do if(u--,a--,0>a||o[u]!==i[a]){var s=`
`+o[u].replace(" at new "," at ");return t.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",t.displayName)),s}while(1<=u&&0<=a);break}}}finally{vd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ns(t):""}function J2(t){switch(t.tag){case 5:return Ns(t.type);case 16:return Ns("Lazy");case 13:return Ns("Suspense");case 19:return Ns("SuspenseList");case 0:case 2:case 15:return t=bd(t.type,!1),t;case 11:return t=bd(t.type.render,!1),t;case 1:return t=bd(t.type,!0),t;default:return""}}function Sf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ta:return"Fragment";case ka:return"Portal";case xf:return"Profiler";case Vh:return"StrictMode";case wf:return"Suspense";case _f:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Vv:return(t.displayName||"Context")+".Consumer";case zv:return(t._context.displayName||"Context")+".Provider";case Wh:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Hh:return r=t.displayName||null,r!==null?r:Sf(t.type)||"Memo";case li:r=t._payload,t=t._init;try{return Sf(t(r))}catch{}}return null}function ew(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=r.render,t=t.displayName||t.name||"",r.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Sf(r);case 8:return r===Vh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Ti(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Hv(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function tw(t){var r=Hv(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),e=""+t[r];if(!t.hasOwnProperty(r)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,i=n.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return o.call(this)},set:function(u){e=""+u,i.call(this,u)}}),Object.defineProperty(t,r,{enumerable:n.enumerable}),{getValue:function(){return e},setValue:function(u){e=""+u},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function $u(t){t._valueTracker||(t._valueTracker=tw(t))}function qv(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var n=r.getValue(),e="";return t&&(e=Hv(t)?t.checked?"true":"false":t.value),t=e,t!==n?(r.setValue(t),!0):!1}function Fl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ef(t,r){var n=r.checked;return ur({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function _y(t,r){var n=r.defaultValue==null?"":r.defaultValue,e=r.checked!=null?r.checked:r.defaultChecked;n=Ti(r.value!=null?r.value:n),t._wrapperState={initialChecked:e,initialValue:n,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function $v(t,r){r=r.checked,r!=null&&zh(t,"checked",r,!1)}function jf(t,r){$v(t,r);var n=Ti(r.value),e=r.type;if(n!=null)e==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(e==="submit"||e==="reset"){t.removeAttribute("value");return}r.hasOwnProperty("value")?Cf(t,r.type,n):r.hasOwnProperty("defaultValue")&&Cf(t,r.type,Ti(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(t.defaultChecked=!!r.defaultChecked)}function Sy(t,r,n){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var e=r.type;if(!(e!=="submit"&&e!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+t._wrapperState.initialValue,n||r===t.value||(t.value=r),t.defaultValue=r}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Cf(t,r,n){(r!=="number"||Fl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Fs=Array.isArray;function Ua(t,r,n,e){if(t=t.options,r){r={};for(var o=0;o<n.length;o++)r["$"+n[o]]=!0;for(n=0;n<t.length;n++)o=r.hasOwnProperty("$"+t[n].value),t[n].selected!==o&&(t[n].selected=o),o&&e&&(t[n].defaultSelected=!0)}else{for(n=""+Ti(n),r=null,o=0;o<t.length;o++){if(t[o].value===n){t[o].selected=!0,e&&(t[o].defaultSelected=!0);return}r!==null||t[o].disabled||(r=t[o])}r!==null&&(r.selected=!0)}}function kf(t,r){if(r.dangerouslySetInnerHTML!=null)throw Error(Xe(91));return ur({},r,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ey(t,r){var n=r.value;if(n==null){if(n=r.children,r=r.defaultValue,n!=null){if(r!=null)throw Error(Xe(92));if(Fs(n)){if(1<n.length)throw Error(Xe(93));n=n[0]}r=n}r==null&&(r=""),n=r}t._wrapperState={initialValue:Ti(n)}}function Xv(t,r){var n=Ti(r.value),e=Ti(r.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),r.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),e!=null&&(t.defaultValue=""+e)}function jy(t){var r=t.textContent;r===t._wrapperState.initialValue&&r!==""&&r!==null&&(t.value=r)}function Yv(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Tf(t,r){return t==null||t==="http://www.w3.org/1999/xhtml"?Yv(r):t==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Xu,Kv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,n,e,o){MSApp.execUnsafeLocalFunction(function(){return t(r,n,e,o)})}:t}(function(t,r){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=r;else{for(Xu=Xu||document.createElement("div"),Xu.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=Xu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;r.firstChild;)t.appendChild(r.firstChild)}});function eu(t,r){if(r){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=r;return}}t.textContent=r}var Gs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rw=["Webkit","ms","Moz","O"];Object.keys(Gs).forEach(function(t){rw.forEach(function(r){r=r+t.charAt(0).toUpperCase()+t.substring(1),Gs[r]=Gs[t]})});function Qv(t,r,n){return r==null||typeof r=="boolean"||r===""?"":n||typeof r!="number"||r===0||Gs.hasOwnProperty(t)&&Gs[t]?(""+r).trim():r+"px"}function Zv(t,r){t=t.style;for(var n in r)if(r.hasOwnProperty(n)){var e=n.indexOf("--")===0,o=Qv(n,r[n],e);n==="float"&&(n="cssFloat"),e?t.setProperty(n,o):t[n]=o}}var nw=ur({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Mf(t,r){if(r){if(nw[t]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(Xe(137,t));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(Xe(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(Xe(61))}if(r.style!=null&&typeof r.style!="object")throw Error(Xe(62))}}function Rf(t,r){if(t.indexOf("-")===-1)return typeof r.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var If=null;function qh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Af=null,Ga=null,za=null;function Cy(t){if(t=Cu(t)){if(typeof Af!="function")throw Error(Xe(280));var r=t.stateNode;r&&(r=Lc(r),Af(t.stateNode,t.type,r))}}function Jv(t){Ga?za?za.push(t):za=[t]:Ga=t}function e0(){if(Ga){var t=Ga,r=za;if(za=Ga=null,Cy(t),r)for(t=0;t<r.length;t++)Cy(r[t])}}function t0(t,r){return t(r)}function r0(){}var xd=!1;function n0(t,r,n){if(xd)return t(r,n);xd=!0;try{return t0(t,r,n)}finally{xd=!1,(Ga!==null||za!==null)&&(r0(),e0())}}function tu(t,r){var n=t.stateNode;if(n===null)return null;var e=Lc(n);if(e===null)return null;n=e[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(e=!e.disabled)||(t=t.type,e=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!e;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Xe(231,r,typeof n));return n}var Pf=!1;if(Ho)try{var Cs={};Object.defineProperty(Cs,"passive",{get:function(){Pf=!0}}),window.addEventListener("test",Cs,Cs),window.removeEventListener("test",Cs,Cs)}catch{Pf=!1}function ow(t,r,n,e,o,i,u,a,s){var l=Array.prototype.slice.call(arguments,3);try{r.apply(n,l)}catch(h){this.onError(h)}}var zs=!1,Bl=null,Ul=!1,Df=null,iw={onError:function(t){zs=!0,Bl=t}};function aw(t,r,n,e,o,i,u,a,s){zs=!1,Bl=null,ow.apply(iw,arguments)}function sw(t,r,n,e,o,i,u,a,s){if(aw.apply(this,arguments),zs){if(zs){var l=Bl;zs=!1,Bl=null}else throw Error(Xe(198));Ul||(Ul=!0,Df=l)}}function ua(t){var r=t,n=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,r.flags&4098&&(n=r.return),t=r.return;while(t)}return r.tag===3?n:null}function o0(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function ky(t){if(ua(t)!==t)throw Error(Xe(188))}function uw(t){var r=t.alternate;if(!r){if(r=ua(t),r===null)throw Error(Xe(188));return r!==t?null:t}for(var n=t,e=r;;){var o=n.return;if(o===null)break;var i=o.alternate;if(i===null){if(e=o.return,e!==null){n=e;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return ky(o),t;if(i===e)return ky(o),r;i=i.sibling}throw Error(Xe(188))}if(n.return!==e.return)n=o,e=i;else{for(var u=!1,a=o.child;a;){if(a===n){u=!0,n=o,e=i;break}if(a===e){u=!0,e=o,n=i;break}a=a.sibling}if(!u){for(a=i.child;a;){if(a===n){u=!0,n=i,e=o;break}if(a===e){u=!0,e=i,n=o;break}a=a.sibling}if(!u)throw Error(Xe(189))}}if(n.alternate!==e)throw Error(Xe(190))}if(n.tag!==3)throw Error(Xe(188));return n.stateNode.current===n?t:r}function i0(t){return t=uw(t),t!==null?a0(t):null}function a0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var r=a0(t);if(r!==null)return r;t=t.sibling}return null}var s0=Ln.unstable_scheduleCallback,Ty=Ln.unstable_cancelCallback,lw=Ln.unstable_shouldYield,cw=Ln.unstable_requestPaint,yr=Ln.unstable_now,dw=Ln.unstable_getCurrentPriorityLevel,$h=Ln.unstable_ImmediatePriority,u0=Ln.unstable_UserBlockingPriority,Gl=Ln.unstable_NormalPriority,fw=Ln.unstable_LowPriority,l0=Ln.unstable_IdlePriority,Ac=null,jo=null;function hw(t){if(jo&&typeof jo.onCommitFiberRoot=="function")try{jo.onCommitFiberRoot(Ac,t,void 0,(t.current.flags&128)===128)}catch{}}var oo=Math.clz32?Math.clz32:yw,pw=Math.log,mw=Math.LN2;function yw(t){return t>>>=0,t===0?32:31-(pw(t)/mw|0)|0}var Yu=64,Ku=4194304;function Bs(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function zl(t,r){var n=t.pendingLanes;if(n===0)return 0;var e=0,o=t.suspendedLanes,i=t.pingedLanes,u=n&268435455;if(u!==0){var a=u&~o;a!==0?e=Bs(a):(i&=u,i!==0&&(e=Bs(i)))}else u=n&~o,u!==0?e=Bs(u):i!==0&&(e=Bs(i));if(e===0)return 0;if(r!==0&&r!==e&&!(r&o)&&(o=e&-e,i=r&-r,o>=i||o===16&&(i&4194240)!==0))return r;if(e&4&&(e|=n&16),r=t.entangledLanes,r!==0)for(t=t.entanglements,r&=e;0<r;)n=31-oo(r),o=1<<n,e|=t[n],r&=~o;return e}function gw(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vw(t,r){for(var n=t.suspendedLanes,e=t.pingedLanes,o=t.expirationTimes,i=t.pendingLanes;0<i;){var u=31-oo(i),a=1<<u,s=o[u];s===-1?(!(a&n)||a&e)&&(o[u]=gw(a,r)):s<=r&&(t.expiredLanes|=a),i&=~a}}function Of(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function c0(){var t=Yu;return Yu<<=1,!(Yu&4194240)&&(Yu=64),t}function wd(t){for(var r=[],n=0;31>n;n++)r.push(t);return r}function Eu(t,r,n){t.pendingLanes|=r,r!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,r=31-oo(r),t[r]=n}function bw(t,r){var n=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var e=t.eventTimes;for(t=t.expirationTimes;0<n;){var o=31-oo(n),i=1<<o;r[o]=0,e[o]=-1,t[o]=-1,n&=~i}}function Xh(t,r){var n=t.entangledLanes|=r;for(t=t.entanglements;n;){var e=31-oo(n),o=1<<e;o&r|t[e]&r&&(t[e]|=r),n&=~o}}var zt=0;function d0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var f0,Yh,h0,p0,m0,Lf=!1,Qu=[],gi=null,vi=null,bi=null,ru=new Map,nu=new Map,di=[],xw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function My(t,r){switch(t){case"focusin":case"focusout":gi=null;break;case"dragenter":case"dragleave":vi=null;break;case"mouseover":case"mouseout":bi=null;break;case"pointerover":case"pointerout":ru.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":nu.delete(r.pointerId)}}function ks(t,r,n,e,o,i){return t===null||t.nativeEvent!==i?(t={blockedOn:r,domEventName:n,eventSystemFlags:e,nativeEvent:i,targetContainers:[o]},r!==null&&(r=Cu(r),r!==null&&Yh(r)),t):(t.eventSystemFlags|=e,r=t.targetContainers,o!==null&&r.indexOf(o)===-1&&r.push(o),t)}function ww(t,r,n,e,o){switch(r){case"focusin":return gi=ks(gi,t,r,n,e,o),!0;case"dragenter":return vi=ks(vi,t,r,n,e,o),!0;case"mouseover":return bi=ks(bi,t,r,n,e,o),!0;case"pointerover":var i=o.pointerId;return ru.set(i,ks(ru.get(i)||null,t,r,n,e,o)),!0;case"gotpointercapture":return i=o.pointerId,nu.set(i,ks(nu.get(i)||null,t,r,n,e,o)),!0}return!1}function y0(t){var r=qi(t.target);if(r!==null){var n=ua(r);if(n!==null){if(r=n.tag,r===13){if(r=o0(n),r!==null){t.blockedOn=r,m0(t.priority,function(){h0(n)});return}}else if(r===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Cl(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var n=Nf(t.domEventName,t.eventSystemFlags,r[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var e=new n.constructor(n.type,n);If=e,n.target.dispatchEvent(e),If=null}else return r=Cu(n),r!==null&&Yh(r),t.blockedOn=n,!1;r.shift()}return!0}function Ry(t,r,n){Cl(t)&&n.delete(r)}function _w(){Lf=!1,gi!==null&&Cl(gi)&&(gi=null),vi!==null&&Cl(vi)&&(vi=null),bi!==null&&Cl(bi)&&(bi=null),ru.forEach(Ry),nu.forEach(Ry)}function Ts(t,r){t.blockedOn===r&&(t.blockedOn=null,Lf||(Lf=!0,Ln.unstable_scheduleCallback(Ln.unstable_NormalPriority,_w)))}function ou(t){function r(o){return Ts(o,t)}if(0<Qu.length){Ts(Qu[0],t);for(var n=1;n<Qu.length;n++){var e=Qu[n];e.blockedOn===t&&(e.blockedOn=null)}}for(gi!==null&&Ts(gi,t),vi!==null&&Ts(vi,t),bi!==null&&Ts(bi,t),ru.forEach(r),nu.forEach(r),n=0;n<di.length;n++)e=di[n],e.blockedOn===t&&(e.blockedOn=null);for(;0<di.length&&(n=di[0],n.blockedOn===null);)y0(n),n.blockedOn===null&&di.shift()}var Va=Yo.ReactCurrentBatchConfig,Vl=!0;function Sw(t,r,n,e){var o=zt,i=Va.transition;Va.transition=null;try{zt=1,Kh(t,r,n,e)}finally{zt=o,Va.transition=i}}function Ew(t,r,n,e){var o=zt,i=Va.transition;Va.transition=null;try{zt=4,Kh(t,r,n,e)}finally{zt=o,Va.transition=i}}function Kh(t,r,n,e){if(Vl){var o=Nf(t,r,n,e);if(o===null)Id(t,r,e,Wl,n),My(t,e);else if(ww(o,t,r,n,e))e.stopPropagation();else if(My(t,e),r&4&&-1<xw.indexOf(t)){for(;o!==null;){var i=Cu(o);if(i!==null&&f0(i),i=Nf(t,r,n,e),i===null&&Id(t,r,e,Wl,n),i===o)break;o=i}o!==null&&e.stopPropagation()}else Id(t,r,e,null,n)}}var Wl=null;function Nf(t,r,n,e){if(Wl=null,t=qh(e),t=qi(t),t!==null)if(r=ua(t),r===null)t=null;else if(n=r.tag,n===13){if(t=o0(r),t!==null)return t;t=null}else if(n===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null);return Wl=t,null}function g0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dw()){case $h:return 1;case u0:return 4;case Gl:case fw:return 16;case l0:return 536870912;default:return 16}default:return 16}}var hi=null,Qh=null,kl=null;function v0(){if(kl)return kl;var t,r=Qh,n=r.length,e,o="value"in hi?hi.value:hi.textContent,i=o.length;for(t=0;t<n&&r[t]===o[t];t++);var u=n-t;for(e=1;e<=u&&r[n-e]===o[i-e];e++);return kl=o.slice(t,1<e?1-e:void 0)}function Tl(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Zu(){return!0}function Iy(){return!1}function Fn(t){function r(n,e,o,i,u){this._reactName=n,this._targetInst=o,this.type=e,this.nativeEvent=i,this.target=u,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Zu:Iy,this.isPropagationStopped=Iy,this}return ur(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Zu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Zu)},persist:function(){},isPersistent:Zu}),r}var fs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zh=Fn(fs),ju=ur({},fs,{view:0,detail:0}),jw=Fn(ju),_d,Sd,Ms,Pc=ur({},ju,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ms&&(Ms&&t.type==="mousemove"?(_d=t.screenX-Ms.screenX,Sd=t.screenY-Ms.screenY):Sd=_d=0,Ms=t),_d)},movementY:function(t){return"movementY"in t?t.movementY:Sd}}),Ay=Fn(Pc),Cw=ur({},Pc,{dataTransfer:0}),kw=Fn(Cw),Tw=ur({},ju,{relatedTarget:0}),Ed=Fn(Tw),Mw=ur({},fs,{animationName:0,elapsedTime:0,pseudoElement:0}),Rw=Fn(Mw),Iw=ur({},fs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Aw=Fn(Iw),Pw=ur({},fs,{data:0}),Py=Fn(Pw),Dw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ow={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nw(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Lw[t])?!!r[t]:!1}function Jh(){return Nw}var Fw=ur({},ju,{key:function(t){if(t.key){var r=Dw[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Tl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ow[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jh,charCode:function(t){return t.type==="keypress"?Tl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Tl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Bw=Fn(Fw),Uw=ur({},Pc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Dy=Fn(Uw),Gw=ur({},ju,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jh}),zw=Fn(Gw),Vw=ur({},fs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ww=Fn(Vw),Hw=ur({},Pc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),qw=Fn(Hw),$w=[9,13,27,32],ep=Ho&&"CompositionEvent"in window,Vs=null;Ho&&"documentMode"in document&&(Vs=document.documentMode);var Xw=Ho&&"TextEvent"in window&&!Vs,b0=Ho&&(!ep||Vs&&8<Vs&&11>=Vs),Oy=String.fromCharCode(32),Ly=!1;function x0(t,r){switch(t){case"keyup":return $w.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function w0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ma=!1;function Yw(t,r){switch(t){case"compositionend":return w0(r);case"keypress":return r.which!==32?null:(Ly=!0,Oy);case"textInput":return t=r.data,t===Oy&&Ly?null:t;default:return null}}function Kw(t,r){if(Ma)return t==="compositionend"||!ep&&x0(t,r)?(t=v0(),kl=Qh=hi=null,Ma=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return b0&&r.locale!=="ko"?null:r.data;default:return null}}var Qw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ny(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!Qw[t.type]:r==="textarea"}function _0(t,r,n,e){Jv(e),r=Hl(r,"onChange"),0<r.length&&(n=new Zh("onChange","change",null,n,e),t.push({event:n,listeners:r}))}var Ws=null,iu=null;function Zw(t){P0(t,0)}function Dc(t){var r=Aa(t);if(qv(r))return t}function Jw(t,r){if(t==="change")return r}var S0=!1;if(Ho){var jd;if(Ho){var Cd="oninput"in document;if(!Cd){var Fy=document.createElement("div");Fy.setAttribute("oninput","return;"),Cd=typeof Fy.oninput=="function"}jd=Cd}else jd=!1;S0=jd&&(!document.documentMode||9<document.documentMode)}function By(){Ws&&(Ws.detachEvent("onpropertychange",E0),iu=Ws=null)}function E0(t){if(t.propertyName==="value"&&Dc(iu)){var r=[];_0(r,iu,t,qh(t)),n0(Zw,r)}}function e_(t,r,n){t==="focusin"?(By(),Ws=r,iu=n,Ws.attachEvent("onpropertychange",E0)):t==="focusout"&&By()}function t_(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Dc(iu)}function r_(t,r){if(t==="click")return Dc(r)}function n_(t,r){if(t==="input"||t==="change")return Dc(r)}function o_(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var so=typeof Object.is=="function"?Object.is:o_;function au(t,r){if(so(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var n=Object.keys(t),e=Object.keys(r);if(n.length!==e.length)return!1;for(e=0;e<n.length;e++){var o=n[e];if(!bf.call(r,o)||!so(t[o],r[o]))return!1}return!0}function Uy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Gy(t,r){var n=Uy(t);t=0;for(var e;n;){if(n.nodeType===3){if(e=t+n.textContent.length,t<=r&&e>=r)return{node:n,offset:r-t};t=e}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Uy(n)}}function j0(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?j0(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function C0(){for(var t=window,r=Fl();r instanceof t.HTMLIFrameElement;){try{var n=typeof r.contentWindow.location.href=="string"}catch{n=!1}if(n)t=r.contentWindow;else break;r=Fl(t.document)}return r}function tp(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}function i_(t){var r=C0(),n=t.focusedElem,e=t.selectionRange;if(r!==n&&n&&n.ownerDocument&&j0(n.ownerDocument.documentElement,n)){if(e!==null&&tp(n)){if(r=e.start,t=e.end,t===void 0&&(t=r),"selectionStart"in n)n.selectionStart=r,n.selectionEnd=Math.min(t,n.value.length);else if(t=(r=n.ownerDocument||document)&&r.defaultView||window,t.getSelection){t=t.getSelection();var o=n.textContent.length,i=Math.min(e.start,o);e=e.end===void 0?i:Math.min(e.end,o),!t.extend&&i>e&&(o=e,e=i,i=o),o=Gy(n,i);var u=Gy(n,e);o&&u&&(t.rangeCount!==1||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==u.node||t.focusOffset!==u.offset)&&(r=r.createRange(),r.setStart(o.node,o.offset),t.removeAllRanges(),i>e?(t.addRange(r),t.extend(u.node,u.offset)):(r.setEnd(u.node,u.offset),t.addRange(r)))}}for(r=[],t=n;t=t.parentNode;)t.nodeType===1&&r.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<r.length;n++)t=r[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var a_=Ho&&"documentMode"in document&&11>=document.documentMode,Ra=null,Ff=null,Hs=null,Bf=!1;function zy(t,r,n){var e=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Bf||Ra==null||Ra!==Fl(e)||(e=Ra,"selectionStart"in e&&tp(e)?e={start:e.selectionStart,end:e.selectionEnd}:(e=(e.ownerDocument&&e.ownerDocument.defaultView||window).getSelection(),e={anchorNode:e.anchorNode,anchorOffset:e.anchorOffset,focusNode:e.focusNode,focusOffset:e.focusOffset}),Hs&&au(Hs,e)||(Hs=e,e=Hl(Ff,"onSelect"),0<e.length&&(r=new Zh("onSelect","select",null,r,n),t.push({event:r,listeners:e}),r.target=Ra)))}function Ju(t,r){var n={};return n[t.toLowerCase()]=r.toLowerCase(),n["Webkit"+t]="webkit"+r,n["Moz"+t]="moz"+r,n}var Ia={animationend:Ju("Animation","AnimationEnd"),animationiteration:Ju("Animation","AnimationIteration"),animationstart:Ju("Animation","AnimationStart"),transitionend:Ju("Transition","TransitionEnd")},kd={},k0={};Ho&&(k0=document.createElement("div").style,"AnimationEvent"in window||(delete Ia.animationend.animation,delete Ia.animationiteration.animation,delete Ia.animationstart.animation),"TransitionEvent"in window||delete Ia.transitionend.transition);function Oc(t){if(kd[t])return kd[t];if(!Ia[t])return t;var r=Ia[t],n;for(n in r)if(r.hasOwnProperty(n)&&n in k0)return kd[t]=r[n];return t}var T0=Oc("animationend"),M0=Oc("animationiteration"),R0=Oc("animationstart"),I0=Oc("transitionend"),A0=new Map,Vy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ai(t,r){A0.set(t,r),sa(r,[t])}for(var Td=0;Td<Vy.length;Td++){var Md=Vy[Td],s_=Md.toLowerCase(),u_=Md[0].toUpperCase()+Md.slice(1);Ai(s_,"on"+u_)}Ai(T0,"onAnimationEnd");Ai(M0,"onAnimationIteration");Ai(R0,"onAnimationStart");Ai("dblclick","onDoubleClick");Ai("focusin","onFocus");Ai("focusout","onBlur");Ai(I0,"onTransitionEnd");es("onMouseEnter",["mouseout","mouseover"]);es("onMouseLeave",["mouseout","mouseover"]);es("onPointerEnter",["pointerout","pointerover"]);es("onPointerLeave",["pointerout","pointerover"]);sa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));sa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));sa("onBeforeInput",["compositionend","keypress","textInput","paste"]);sa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));sa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));sa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Us="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),l_=new Set("cancel close invalid load scroll toggle".split(" ").concat(Us));function Wy(t,r,n){var e=t.type||"unknown-event";t.currentTarget=n,sw(e,r,void 0,t),t.currentTarget=null}function P0(t,r){r=(r&4)!==0;for(var n=0;n<t.length;n++){var e=t[n],o=e.event;e=e.listeners;e:{var i=void 0;if(r)for(var u=e.length-1;0<=u;u--){var a=e[u],s=a.instance,l=a.currentTarget;if(a=a.listener,s!==i&&o.isPropagationStopped())break e;Wy(o,a,l),i=s}else for(u=0;u<e.length;u++){if(a=e[u],s=a.instance,l=a.currentTarget,a=a.listener,s!==i&&o.isPropagationStopped())break e;Wy(o,a,l),i=s}}}if(Ul)throw t=Df,Ul=!1,Df=null,t}function Jt(t,r){var n=r[Wf];n===void 0&&(n=r[Wf]=new Set);var e=t+"__bubble";n.has(e)||(D0(r,t,2,!1),n.add(e))}function Rd(t,r,n){var e=0;r&&(e|=4),D0(n,t,e,r)}var el="_reactListening"+Math.random().toString(36).slice(2);function su(t){if(!t[el]){t[el]=!0,Gv.forEach(function(n){n!=="selectionchange"&&(l_.has(n)||Rd(n,!1,t),Rd(n,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[el]||(r[el]=!0,Rd("selectionchange",!1,r))}}function D0(t,r,n,e){switch(g0(r)){case 1:var o=Sw;break;case 4:o=Ew;break;default:o=Kh}n=o.bind(null,r,n,t),o=void 0,!Pf||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(o=!0),e?o!==void 0?t.addEventListener(r,n,{capture:!0,passive:o}):t.addEventListener(r,n,!0):o!==void 0?t.addEventListener(r,n,{passive:o}):t.addEventListener(r,n,!1)}function Id(t,r,n,e,o){var i=e;if(!(r&1)&&!(r&2)&&e!==null)e:for(;;){if(e===null)return;var u=e.tag;if(u===3||u===4){var a=e.stateNode.containerInfo;if(a===o||a.nodeType===8&&a.parentNode===o)break;if(u===4)for(u=e.return;u!==null;){var s=u.tag;if((s===3||s===4)&&(s=u.stateNode.containerInfo,s===o||s.nodeType===8&&s.parentNode===o))return;u=u.return}for(;a!==null;){if(u=qi(a),u===null)return;if(s=u.tag,s===5||s===6){e=i=u;continue e}a=a.parentNode}}e=e.return}n0(function(){var l=i,h=qh(n),p=[];e:{var c=A0.get(t);if(c!==void 0){var d=Zh,f=t;switch(t){case"keypress":if(Tl(n)===0)break e;case"keydown":case"keyup":d=Bw;break;case"focusin":f="focus",d=Ed;break;case"focusout":f="blur",d=Ed;break;case"beforeblur":case"afterblur":d=Ed;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=Ay;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=kw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=zw;break;case T0:case M0:case R0:d=Rw;break;case I0:d=Ww;break;case"scroll":d=jw;break;case"wheel":d=qw;break;case"copy":case"cut":case"paste":d=Aw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=Dy}var m=(r&4)!==0,y=!m&&t==="scroll",g=m?c!==null?c+"Capture":null:c;m=[];for(var v=l,b;v!==null;){b=v;var w=b.stateNode;if(b.tag===5&&w!==null&&(b=w,g!==null&&(w=tu(v,g),w!=null&&m.push(uu(v,w,b)))),y)break;v=v.return}0<m.length&&(c=new d(c,f,null,n,h),p.push({event:c,listeners:m}))}}if(!(r&7)){e:{if(c=t==="mouseover"||t==="pointerover",d=t==="mouseout"||t==="pointerout",c&&n!==If&&(f=n.relatedTarget||n.fromElement)&&(qi(f)||f[qo]))break e;if((d||c)&&(c=h.window===h?h:(c=h.ownerDocument)?c.defaultView||c.parentWindow:window,d?(f=n.relatedTarget||n.toElement,d=l,f=f?qi(f):null,f!==null&&(y=ua(f),f!==y||f.tag!==5&&f.tag!==6)&&(f=null)):(d=null,f=l),d!==f)){if(m=Ay,w="onMouseLeave",g="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(m=Dy,w="onPointerLeave",g="onPointerEnter",v="pointer"),y=d==null?c:Aa(d),b=f==null?c:Aa(f),c=new m(w,v+"leave",d,n,h),c.target=y,c.relatedTarget=b,w=null,qi(h)===l&&(m=new m(g,v+"enter",f,n,h),m.target=b,m.relatedTarget=y,w=m),y=w,d&&f)t:{for(m=d,g=f,v=0,b=m;b;b=va(b))v++;for(b=0,w=g;w;w=va(w))b++;for(;0<v-b;)m=va(m),v--;for(;0<b-v;)g=va(g),b--;for(;v--;){if(m===g||g!==null&&m===g.alternate)break t;m=va(m),g=va(g)}m=null}else m=null;d!==null&&Hy(p,c,d,m,!1),f!==null&&y!==null&&Hy(p,y,f,m,!0)}}e:{if(c=l?Aa(l):window,d=c.nodeName&&c.nodeName.toLowerCase(),d==="select"||d==="input"&&c.type==="file")var _=Jw;else if(Ny(c))if(S0)_=n_;else{_=t_;var j=e_}else(d=c.nodeName)&&d.toLowerCase()==="input"&&(c.type==="checkbox"||c.type==="radio")&&(_=r_);if(_&&(_=_(t,l))){_0(p,_,n,h);break e}j&&j(t,c,l),t==="focusout"&&(j=c._wrapperState)&&j.controlled&&c.type==="number"&&Cf(c,"number",c.value)}switch(j=l?Aa(l):window,t){case"focusin":(Ny(j)||j.contentEditable==="true")&&(Ra=j,Ff=l,Hs=null);break;case"focusout":Hs=Ff=Ra=null;break;case"mousedown":Bf=!0;break;case"contextmenu":case"mouseup":case"dragend":Bf=!1,zy(p,n,h);break;case"selectionchange":if(a_)break;case"keydown":case"keyup":zy(p,n,h)}var E;if(ep)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Ma?x0(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(b0&&n.locale!=="ko"&&(Ma||T!=="onCompositionStart"?T==="onCompositionEnd"&&Ma&&(E=v0()):(hi=h,Qh="value"in hi?hi.value:hi.textContent,Ma=!0)),j=Hl(l,T),0<j.length&&(T=new Py(T,t,null,n,h),p.push({event:T,listeners:j}),E?T.data=E:(E=w0(n),E!==null&&(T.data=E)))),(E=Xw?Yw(t,n):Kw(t,n))&&(l=Hl(l,"onBeforeInput"),0<l.length&&(h=new Py("onBeforeInput","beforeinput",null,n,h),p.push({event:h,listeners:l}),h.data=E))}P0(p,r)})}function uu(t,r,n){return{instance:t,listener:r,currentTarget:n}}function Hl(t,r){for(var n=r+"Capture",e=[];t!==null;){var o=t,i=o.stateNode;o.tag===5&&i!==null&&(o=i,i=tu(t,n),i!=null&&e.unshift(uu(t,i,o)),i=tu(t,r),i!=null&&e.push(uu(t,i,o))),t=t.return}return e}function va(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Hy(t,r,n,e,o){for(var i=r._reactName,u=[];n!==null&&n!==e;){var a=n,s=a.alternate,l=a.stateNode;if(s!==null&&s===e)break;a.tag===5&&l!==null&&(a=l,o?(s=tu(n,i),s!=null&&u.unshift(uu(n,s,a))):o||(s=tu(n,i),s!=null&&u.push(uu(n,s,a)))),n=n.return}u.length!==0&&t.push({event:r,listeners:u})}var c_=/\r\n?/g,d_=/\u0000|\uFFFD/g;function qy(t){return(typeof t=="string"?t:""+t).replace(c_,`
`).replace(d_,"")}function tl(t,r,n){if(r=qy(r),qy(t)!==r&&n)throw Error(Xe(425))}function ql(){}var Uf=null,Gf=null;function zf(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Vf=typeof setTimeout=="function"?setTimeout:void 0,f_=typeof clearTimeout=="function"?clearTimeout:void 0,$y=typeof Promise=="function"?Promise:void 0,h_=typeof queueMicrotask=="function"?queueMicrotask:typeof $y<"u"?function(t){return $y.resolve(null).then(t).catch(p_)}:Vf;function p_(t){setTimeout(function(){throw t})}function Ad(t,r){var n=r,e=0;do{var o=n.nextSibling;if(t.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(e===0){t.removeChild(o),ou(r);return}e--}else n!=="$"&&n!=="$?"&&n!=="$!"||e++;n=o}while(n);ou(r)}function xi(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return t}function Xy(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(r===0)return t;r--}else n==="/$"&&r++}t=t.previousSibling}return null}var hs=Math.random().toString(36).slice(2),wo="__reactFiber$"+hs,lu="__reactProps$"+hs,qo="__reactContainer$"+hs,Wf="__reactEvents$"+hs,m_="__reactListeners$"+hs,y_="__reactHandles$"+hs;function qi(t){var r=t[wo];if(r)return r;for(var n=t.parentNode;n;){if(r=n[qo]||n[wo]){if(n=r.alternate,r.child!==null||n!==null&&n.child!==null)for(t=Xy(t);t!==null;){if(n=t[wo])return n;t=Xy(t)}return r}t=n,n=t.parentNode}return null}function Cu(t){return t=t[wo]||t[qo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Aa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Xe(33))}function Lc(t){return t[lu]||null}var Hf=[],Pa=-1;function Pi(t){return{current:t}}function tr(t){0>Pa||(t.current=Hf[Pa],Hf[Pa]=null,Pa--)}function Xt(t,r){Pa++,Hf[Pa]=t.current,t.current=r}var Mi={},ln=Pi(Mi),xn=Pi(!1),ea=Mi;function ts(t,r){var n=t.type.contextTypes;if(!n)return Mi;var e=t.stateNode;if(e&&e.__reactInternalMemoizedUnmaskedChildContext===r)return e.__reactInternalMemoizedMaskedChildContext;var o={},i;for(i in n)o[i]=r[i];return e&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),o}function wn(t){return t=t.childContextTypes,t!=null}function $l(){tr(xn),tr(ln)}function Yy(t,r,n){if(ln.current!==Mi)throw Error(Xe(168));Xt(ln,r),Xt(xn,n)}function O0(t,r,n){var e=t.stateNode;if(r=r.childContextTypes,typeof e.getChildContext!="function")return n;e=e.getChildContext();for(var o in e)if(!(o in r))throw Error(Xe(108,ew(t)||"Unknown",o));return ur({},n,e)}function Xl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Mi,ea=ln.current,Xt(ln,t),Xt(xn,xn.current),!0}function Ky(t,r,n){var e=t.stateNode;if(!e)throw Error(Xe(169));n?(t=O0(t,r,ea),e.__reactInternalMemoizedMergedChildContext=t,tr(xn),tr(ln),Xt(ln,t)):tr(xn),Xt(xn,n)}var Uo=null,Nc=!1,Pd=!1;function L0(t){Uo===null?Uo=[t]:Uo.push(t)}function g_(t){Nc=!0,L0(t)}function Di(){if(!Pd&&Uo!==null){Pd=!0;var t=0,r=zt;try{var n=Uo;for(zt=1;t<n.length;t++){var e=n[t];do e=e(!0);while(e!==null)}Uo=null,Nc=!1}catch(o){throw Uo!==null&&(Uo=Uo.slice(t+1)),s0($h,Di),o}finally{zt=r,Pd=!1}}return null}var Da=[],Oa=0,Yl=null,Kl=0,Bn=[],Un=0,ta=null,zo=1,Vo="";function Gi(t,r){Da[Oa++]=Kl,Da[Oa++]=Yl,Yl=t,Kl=r}function N0(t,r,n){Bn[Un++]=zo,Bn[Un++]=Vo,Bn[Un++]=ta,ta=t;var e=zo;t=Vo;var o=32-oo(e)-1;e&=~(1<<o),n+=1;var i=32-oo(r)+o;if(30<i){var u=o-o%5;i=(e&(1<<u)-1).toString(32),e>>=u,o-=u,zo=1<<32-oo(r)+o|n<<o|e,Vo=i+t}else zo=1<<i|n<<o|e,Vo=t}function rp(t){t.return!==null&&(Gi(t,1),N0(t,1,0))}function np(t){for(;t===Yl;)Yl=Da[--Oa],Da[Oa]=null,Kl=Da[--Oa],Da[Oa]=null;for(;t===ta;)ta=Bn[--Un],Bn[Un]=null,Vo=Bn[--Un],Bn[Un]=null,zo=Bn[--Un],Bn[Un]=null}var Dn=null,Rn=null,rr=!1,to=null;function F0(t,r){var n=Vn(5,null,null,0);n.elementType="DELETED",n.stateNode=r,n.return=t,r=t.deletions,r===null?(t.deletions=[n],t.flags|=16):r.push(n)}function Qy(t,r){switch(t.tag){case 5:var n=t.type;return r=r.nodeType!==1||n.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(t.stateNode=r,Dn=t,Rn=xi(r.firstChild),!0):!1;case 6:return r=t.pendingProps===""||r.nodeType!==3?null:r,r!==null?(t.stateNode=r,Dn=t,Rn=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(n=ta!==null?{id:zo,overflow:Vo}:null,t.memoizedState={dehydrated:r,treeContext:n,retryLane:1073741824},n=Vn(18,null,null,0),n.stateNode=r,n.return=t,t.child=n,Dn=t,Rn=null,!0):!1;default:return!1}}function qf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function $f(t){if(rr){var r=Rn;if(r){var n=r;if(!Qy(t,r)){if(qf(t))throw Error(Xe(418));r=xi(n.nextSibling);var e=Dn;r&&Qy(t,r)?F0(e,n):(t.flags=t.flags&-4097|2,rr=!1,Dn=t)}}else{if(qf(t))throw Error(Xe(418));t.flags=t.flags&-4097|2,rr=!1,Dn=t}}}function Zy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Dn=t}function rl(t){if(t!==Dn)return!1;if(!rr)return Zy(t),rr=!0,!1;var r;if((r=t.tag!==3)&&!(r=t.tag!==5)&&(r=t.type,r=r!=="head"&&r!=="body"&&!zf(t.type,t.memoizedProps)),r&&(r=Rn)){if(qf(t))throw B0(),Error(Xe(418));for(;r;)F0(t,r),r=xi(r.nextSibling)}if(Zy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Xe(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(r===0){Rn=xi(t.nextSibling);break e}r--}else n!=="$"&&n!=="$!"&&n!=="$?"||r++}t=t.nextSibling}Rn=null}}else Rn=Dn?xi(t.stateNode.nextSibling):null;return!0}function B0(){for(var t=Rn;t;)t=xi(t.nextSibling)}function rs(){Rn=Dn=null,rr=!1}function op(t){to===null?to=[t]:to.push(t)}var v_=Yo.ReactCurrentBatchConfig;function Jn(t,r){if(t&&t.defaultProps){r=ur({},r),t=t.defaultProps;for(var n in t)r[n]===void 0&&(r[n]=t[n]);return r}return r}var Ql=Pi(null),Zl=null,La=null,ip=null;function ap(){ip=La=Zl=null}function sp(t){var r=Ql.current;tr(Ql),t._currentValue=r}function Xf(t,r,n){for(;t!==null;){var e=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,e!==null&&(e.childLanes|=r)):e!==null&&(e.childLanes&r)!==r&&(e.childLanes|=r),t===n)break;t=t.return}}function Wa(t,r){Zl=t,ip=La=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&r&&(bn=!0),t.firstContext=null)}function qn(t){var r=t._currentValue;if(ip!==t)if(t={context:t,memoizedValue:r,next:null},La===null){if(Zl===null)throw Error(Xe(308));La=t,Zl.dependencies={lanes:0,firstContext:t}}else La=La.next=t;return r}var $i=null;function up(t){$i===null?$i=[t]:$i.push(t)}function U0(t,r,n,e){var o=r.interleaved;return o===null?(n.next=n,up(r)):(n.next=o.next,o.next=n),r.interleaved=n,$o(t,e)}function $o(t,r){t.lanes|=r;var n=t.alternate;for(n!==null&&(n.lanes|=r),n=t,t=t.return;t!==null;)t.childLanes|=r,n=t.alternate,n!==null&&(n.childLanes|=r),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ci=!1;function lp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function G0(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Wo(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function wi(t,r,n){var e=t.updateQueue;if(e===null)return null;if(e=e.shared,Nt&2){var o=e.pending;return o===null?r.next=r:(r.next=o.next,o.next=r),e.pending=r,$o(t,n)}return o=e.interleaved,o===null?(r.next=r,up(e)):(r.next=o.next,o.next=r),e.interleaved=r,$o(t,n)}function Ml(t,r,n){if(r=r.updateQueue,r!==null&&(r=r.shared,(n&4194240)!==0)){var e=r.lanes;e&=t.pendingLanes,n|=e,r.lanes=n,Xh(t,n)}}function Jy(t,r){var n=t.updateQueue,e=t.alternate;if(e!==null&&(e=e.updateQueue,n===e)){var o=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var u={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?o=i=u:i=i.next=u,n=n.next}while(n!==null);i===null?o=i=r:i=i.next=r}else o=i=r;n={baseState:e.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:e.shared,effects:e.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=r:t.next=r,n.lastBaseUpdate=r}function Jl(t,r,n,e){var o=t.updateQueue;ci=!1;var i=o.firstBaseUpdate,u=o.lastBaseUpdate,a=o.shared.pending;if(a!==null){o.shared.pending=null;var s=a,l=s.next;s.next=null,u===null?i=l:u.next=l,u=s;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==u&&(a===null?h.firstBaseUpdate=l:a.next=l,h.lastBaseUpdate=s))}if(i!==null){var p=o.baseState;u=0,h=l=s=null,a=i;do{var c=a.lane,d=a.eventTime;if((e&c)===c){h!==null&&(h=h.next={eventTime:d,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var f=t,m=a;switch(c=r,d=n,m.tag){case 1:if(f=m.payload,typeof f=="function"){p=f.call(d,p,c);break e}p=f;break e;case 3:f.flags=f.flags&-65537|128;case 0:if(f=m.payload,c=typeof f=="function"?f.call(d,p,c):f,c==null)break e;p=ur({},p,c);break e;case 2:ci=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,c=o.effects,c===null?o.effects=[a]:c.push(a))}else d={eventTime:d,lane:c,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(l=h=d,s=p):h=h.next=d,u|=c;if(a=a.next,a===null){if(a=o.shared.pending,a===null)break;c=a,a=c.next,c.next=null,o.lastBaseUpdate=c,o.shared.pending=null}}while(1);if(h===null&&(s=p),o.baseState=s,o.firstBaseUpdate=l,o.lastBaseUpdate=h,r=o.shared.interleaved,r!==null){o=r;do u|=o.lane,o=o.next;while(o!==r)}else i===null&&(o.shared.lanes=0);na|=u,t.lanes=u,t.memoizedState=p}}function eg(t,r,n){if(t=r.effects,r.effects=null,t!==null)for(r=0;r<t.length;r++){var e=t[r],o=e.callback;if(o!==null){if(e.callback=null,e=n,typeof o!="function")throw Error(Xe(191,o));o.call(e)}}}var z0=new Uv.Component().refs;function Yf(t,r,n,e){r=t.memoizedState,n=n(e,r),n=n==null?r:ur({},r,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Fc={isMounted:function(t){return(t=t._reactInternals)?ua(t)===t:!1},enqueueSetState:function(t,r,n){t=t._reactInternals;var e=fn(),o=Si(t),i=Wo(e,o);i.payload=r,n!=null&&(i.callback=n),r=wi(t,i,o),r!==null&&(io(r,t,o,e),Ml(r,t,o))},enqueueReplaceState:function(t,r,n){t=t._reactInternals;var e=fn(),o=Si(t),i=Wo(e,o);i.tag=1,i.payload=r,n!=null&&(i.callback=n),r=wi(t,i,o),r!==null&&(io(r,t,o,e),Ml(r,t,o))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var n=fn(),e=Si(t),o=Wo(n,e);o.tag=2,r!=null&&(o.callback=r),r=wi(t,o,e),r!==null&&(io(r,t,e,n),Ml(r,t,e))}};function tg(t,r,n,e,o,i,u){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(e,i,u):r.prototype&&r.prototype.isPureReactComponent?!au(n,e)||!au(o,i):!0}function V0(t,r,n){var e=!1,o=Mi,i=r.contextType;return typeof i=="object"&&i!==null?i=qn(i):(o=wn(r)?ea:ln.current,e=r.contextTypes,i=(e=e!=null)?ts(t,o):Mi),r=new r(n,i),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Fc,t.stateNode=r,r._reactInternals=t,e&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=i),r}function rg(t,r,n,e){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(n,e),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(n,e),r.state!==t&&Fc.enqueueReplaceState(r,r.state,null)}function Kf(t,r,n,e){var o=t.stateNode;o.props=n,o.state=t.memoizedState,o.refs=z0,lp(t);var i=r.contextType;typeof i=="object"&&i!==null?o.context=qn(i):(i=wn(r)?ea:ln.current,o.context=ts(t,i)),o.state=t.memoizedState,i=r.getDerivedStateFromProps,typeof i=="function"&&(Yf(t,r,i,n),o.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(r=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),r!==o.state&&Fc.enqueueReplaceState(o,o.state,null),Jl(t,n,o,e),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308)}function Rs(t,r,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Xe(309));var e=n.stateNode}if(!e)throw Error(Xe(147,t));var o=e,i=""+t;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===i?r.ref:(r=function(u){var a=o.refs;a===z0&&(a=o.refs={}),u===null?delete a[i]:a[i]=u},r._stringRef=i,r)}if(typeof t!="string")throw Error(Xe(284));if(!n._owner)throw Error(Xe(290,t))}return t}function nl(t,r){throw t=Object.prototype.toString.call(r),Error(Xe(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function ng(t){var r=t._init;return r(t._payload)}function W0(t){function r(g,v){if(t){var b=g.deletions;b===null?(g.deletions=[v],g.flags|=16):b.push(v)}}function n(g,v){if(!t)return null;for(;v!==null;)r(g,v),v=v.sibling;return null}function e(g,v){for(g=new Map;v!==null;)v.key!==null?g.set(v.key,v):g.set(v.index,v),v=v.sibling;return g}function o(g,v){return g=Ei(g,v),g.index=0,g.sibling=null,g}function i(g,v,b){return g.index=b,t?(b=g.alternate,b!==null?(b=b.index,b<v?(g.flags|=2,v):b):(g.flags|=2,v)):(g.flags|=1048576,v)}function u(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,v,b,w){return v===null||v.tag!==6?(v=Ud(b,g.mode,w),v.return=g,v):(v=o(v,b),v.return=g,v)}function s(g,v,b,w){var _=b.type;return _===Ta?h(g,v,b.props.children,w,b.key):v!==null&&(v.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===li&&ng(_)===v.type)?(w=o(v,b.props),w.ref=Rs(g,v,b),w.return=g,w):(w=Ol(b.type,b.key,b.props,null,g.mode,w),w.ref=Rs(g,v,b),w.return=g,w)}function l(g,v,b,w){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=Gd(b,g.mode,w),v.return=g,v):(v=o(v,b.children||[]),v.return=g,v)}function h(g,v,b,w,_){return v===null||v.tag!==7?(v=Zi(b,g.mode,w,_),v.return=g,v):(v=o(v,b),v.return=g,v)}function p(g,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Ud(""+v,g.mode,b),v.return=g,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case qu:return b=Ol(v.type,v.key,v.props,null,g.mode,b),b.ref=Rs(g,null,v),b.return=g,b;case ka:return v=Gd(v,g.mode,b),v.return=g,v;case li:var w=v._init;return p(g,w(v._payload),b)}if(Fs(v)||js(v))return v=Zi(v,g.mode,b,null),v.return=g,v;nl(g,v)}return null}function c(g,v,b,w){var _=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return _!==null?null:a(g,v,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case qu:return b.key===_?s(g,v,b,w):null;case ka:return b.key===_?l(g,v,b,w):null;case li:return _=b._init,c(g,v,_(b._payload),w)}if(Fs(b)||js(b))return _!==null?null:h(g,v,b,w,null);nl(g,b)}return null}function d(g,v,b,w,_){if(typeof w=="string"&&w!==""||typeof w=="number")return g=g.get(b)||null,a(v,g,""+w,_);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case qu:return g=g.get(w.key===null?b:w.key)||null,s(v,g,w,_);case ka:return g=g.get(w.key===null?b:w.key)||null,l(v,g,w,_);case li:var j=w._init;return d(g,v,b,j(w._payload),_)}if(Fs(w)||js(w))return g=g.get(b)||null,h(v,g,w,_,null);nl(v,w)}return null}function f(g,v,b,w){for(var _=null,j=null,E=v,T=v=0,R=null;E!==null&&T<b.length;T++){E.index>T?(R=E,E=null):R=E.sibling;var M=c(g,E,b[T],w);if(M===null){E===null&&(E=R);break}t&&E&&M.alternate===null&&r(g,E),v=i(M,v,T),j===null?_=M:j.sibling=M,j=M,E=R}if(T===b.length)return n(g,E),rr&&Gi(g,T),_;if(E===null){for(;T<b.length;T++)E=p(g,b[T],w),E!==null&&(v=i(E,v,T),j===null?_=E:j.sibling=E,j=E);return rr&&Gi(g,T),_}for(E=e(g,E);T<b.length;T++)R=d(E,g,T,b[T],w),R!==null&&(t&&R.alternate!==null&&E.delete(R.key===null?T:R.key),v=i(R,v,T),j===null?_=R:j.sibling=R,j=R);return t&&E.forEach(function(I){return r(g,I)}),rr&&Gi(g,T),_}function m(g,v,b,w){var _=js(b);if(typeof _!="function")throw Error(Xe(150));if(b=_.call(b),b==null)throw Error(Xe(151));for(var j=_=null,E=v,T=v=0,R=null,M=b.next();E!==null&&!M.done;T++,M=b.next()){E.index>T?(R=E,E=null):R=E.sibling;var I=c(g,E,M.value,w);if(I===null){E===null&&(E=R);break}t&&E&&I.alternate===null&&r(g,E),v=i(I,v,T),j===null?_=I:j.sibling=I,j=I,E=R}if(M.done)return n(g,E),rr&&Gi(g,T),_;if(E===null){for(;!M.done;T++,M=b.next())M=p(g,M.value,w),M!==null&&(v=i(M,v,T),j===null?_=M:j.sibling=M,j=M);return rr&&Gi(g,T),_}for(E=e(g,E);!M.done;T++,M=b.next())M=d(E,g,T,M.value,w),M!==null&&(t&&M.alternate!==null&&E.delete(M.key===null?T:M.key),v=i(M,v,T),j===null?_=M:j.sibling=M,j=M);return t&&E.forEach(function(D){return r(g,D)}),rr&&Gi(g,T),_}function y(g,v,b,w){if(typeof b=="object"&&b!==null&&b.type===Ta&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case qu:e:{for(var _=b.key,j=v;j!==null;){if(j.key===_){if(_=b.type,_===Ta){if(j.tag===7){n(g,j.sibling),v=o(j,b.props.children),v.return=g,g=v;break e}}else if(j.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===li&&ng(_)===j.type){n(g,j.sibling),v=o(j,b.props),v.ref=Rs(g,j,b),v.return=g,g=v;break e}n(g,j);break}else r(g,j);j=j.sibling}b.type===Ta?(v=Zi(b.props.children,g.mode,w,b.key),v.return=g,g=v):(w=Ol(b.type,b.key,b.props,null,g.mode,w),w.ref=Rs(g,v,b),w.return=g,g=w)}return u(g);case ka:e:{for(j=b.key;v!==null;){if(v.key===j)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(g,v.sibling),v=o(v,b.children||[]),v.return=g,g=v;break e}else{n(g,v);break}else r(g,v);v=v.sibling}v=Gd(b,g.mode,w),v.return=g,g=v}return u(g);case li:return j=b._init,y(g,v,j(b._payload),w)}if(Fs(b))return f(g,v,b,w);if(js(b))return m(g,v,b,w);nl(g,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(g,v.sibling),v=o(v,b),v.return=g,g=v):(n(g,v),v=Ud(b,g.mode,w),v.return=g,g=v),u(g)):n(g,v)}return y}var ns=W0(!0),H0=W0(!1),ku={},Co=Pi(ku),cu=Pi(ku),du=Pi(ku);function Xi(t){if(t===ku)throw Error(Xe(174));return t}function cp(t,r){switch(Xt(du,r),Xt(cu,t),Xt(Co,ku),t=r.nodeType,t){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:Tf(null,"");break;default:t=t===8?r.parentNode:r,r=t.namespaceURI||null,t=t.tagName,r=Tf(r,t)}tr(Co),Xt(Co,r)}function os(){tr(Co),tr(cu),tr(du)}function q0(t){Xi(du.current);var r=Xi(Co.current),n=Tf(r,t.type);r!==n&&(Xt(cu,t),Xt(Co,n))}function dp(t){cu.current===t&&(tr(Co),tr(cu))}var or=Pi(0);function ec(t){for(var r=t;r!==null;){if(r.tag===13){var n=r.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if(r.flags&128)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Dd=[];function fp(){for(var t=0;t<Dd.length;t++)Dd[t]._workInProgressVersionPrimary=null;Dd.length=0}var Rl=Yo.ReactCurrentDispatcher,Od=Yo.ReactCurrentBatchConfig,ra=0,sr=null,Er=null,Lr=null,tc=!1,qs=!1,fu=0,b_=0;function en(){throw Error(Xe(321))}function hp(t,r){if(r===null)return!1;for(var n=0;n<r.length&&n<t.length;n++)if(!so(t[n],r[n]))return!1;return!0}function pp(t,r,n,e,o,i){if(ra=i,sr=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Rl.current=t===null||t.memoizedState===null?S_:E_,t=n(e,o),qs){i=0;do{if(qs=!1,fu=0,25<=i)throw Error(Xe(301));i+=1,Lr=Er=null,r.updateQueue=null,Rl.current=j_,t=n(e,o)}while(qs)}if(Rl.current=rc,r=Er!==null&&Er.next!==null,ra=0,Lr=Er=sr=null,tc=!1,r)throw Error(Xe(300));return t}function mp(){var t=fu!==0;return fu=0,t}function vo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lr===null?sr.memoizedState=Lr=t:Lr=Lr.next=t,Lr}function $n(){if(Er===null){var t=sr.alternate;t=t!==null?t.memoizedState:null}else t=Er.next;var r=Lr===null?sr.memoizedState:Lr.next;if(r!==null)Lr=r,Er=t;else{if(t===null)throw Error(Xe(310));Er=t,t={memoizedState:Er.memoizedState,baseState:Er.baseState,baseQueue:Er.baseQueue,queue:Er.queue,next:null},Lr===null?sr.memoizedState=Lr=t:Lr=Lr.next=t}return Lr}function hu(t,r){return typeof r=="function"?r(t):r}function Ld(t){var r=$n(),n=r.queue;if(n===null)throw Error(Xe(311));n.lastRenderedReducer=t;var e=Er,o=e.baseQueue,i=n.pending;if(i!==null){if(o!==null){var u=o.next;o.next=i.next,i.next=u}e.baseQueue=o=i,n.pending=null}if(o!==null){i=o.next,e=e.baseState;var a=u=null,s=null,l=i;do{var h=l.lane;if((ra&h)===h)s!==null&&(s=s.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),e=l.hasEagerState?l.eagerState:t(e,l.action);else{var p={lane:h,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};s===null?(a=s=p,u=e):s=s.next=p,sr.lanes|=h,na|=h}l=l.next}while(l!==null&&l!==i);s===null?u=e:s.next=a,so(e,r.memoizedState)||(bn=!0),r.memoizedState=e,r.baseState=u,r.baseQueue=s,n.lastRenderedState=e}if(t=n.interleaved,t!==null){o=t;do i=o.lane,sr.lanes|=i,na|=i,o=o.next;while(o!==t)}else o===null&&(n.lanes=0);return[r.memoizedState,n.dispatch]}function Nd(t){var r=$n(),n=r.queue;if(n===null)throw Error(Xe(311));n.lastRenderedReducer=t;var e=n.dispatch,o=n.pending,i=r.memoizedState;if(o!==null){n.pending=null;var u=o=o.next;do i=t(i,u.action),u=u.next;while(u!==o);so(i,r.memoizedState)||(bn=!0),r.memoizedState=i,r.baseQueue===null&&(r.baseState=i),n.lastRenderedState=i}return[i,e]}function $0(){}function X0(t,r){var n=sr,e=$n(),o=r(),i=!so(e.memoizedState,o);if(i&&(e.memoizedState=o,bn=!0),e=e.queue,yp(Q0.bind(null,n,e,t),[t]),e.getSnapshot!==r||i||Lr!==null&&Lr.memoizedState.tag&1){if(n.flags|=2048,pu(9,K0.bind(null,n,e,o,r),void 0,null),Fr===null)throw Error(Xe(349));ra&30||Y0(n,r,o)}return o}function Y0(t,r,n){t.flags|=16384,t={getSnapshot:r,value:n},r=sr.updateQueue,r===null?(r={lastEffect:null,stores:null},sr.updateQueue=r,r.stores=[t]):(n=r.stores,n===null?r.stores=[t]:n.push(t))}function K0(t,r,n,e){r.value=n,r.getSnapshot=e,Z0(r)&&J0(t)}function Q0(t,r,n){return n(function(){Z0(r)&&J0(t)})}function Z0(t){var r=t.getSnapshot;t=t.value;try{var n=r();return!so(t,n)}catch{return!0}}function J0(t){var r=$o(t,1);r!==null&&io(r,t,1,-1)}function og(t){var r=vo();return typeof t=="function"&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hu,lastRenderedState:t},r.queue=t,t=t.dispatch=__.bind(null,sr,t),[r.memoizedState,t]}function pu(t,r,n,e){return t={tag:t,create:r,destroy:n,deps:e,next:null},r=sr.updateQueue,r===null?(r={lastEffect:null,stores:null},sr.updateQueue=r,r.lastEffect=t.next=t):(n=r.lastEffect,n===null?r.lastEffect=t.next=t:(e=n.next,n.next=t,t.next=e,r.lastEffect=t)),t}function e1(){return $n().memoizedState}function Il(t,r,n,e){var o=vo();sr.flags|=t,o.memoizedState=pu(1|r,n,void 0,e===void 0?null:e)}function Bc(t,r,n,e){var o=$n();e=e===void 0?null:e;var i=void 0;if(Er!==null){var u=Er.memoizedState;if(i=u.destroy,e!==null&&hp(e,u.deps)){o.memoizedState=pu(r,n,i,e);return}}sr.flags|=t,o.memoizedState=pu(1|r,n,i,e)}function ig(t,r){return Il(8390656,8,t,r)}function yp(t,r){return Bc(2048,8,t,r)}function t1(t,r){return Bc(4,2,t,r)}function r1(t,r){return Bc(4,4,t,r)}function n1(t,r){if(typeof r=="function")return t=t(),r(t),function(){r(null)};if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function o1(t,r,n){return n=n!=null?n.concat([t]):null,Bc(4,4,n1.bind(null,r,t),n)}function gp(){}function i1(t,r){var n=$n();r=r===void 0?null:r;var e=n.memoizedState;return e!==null&&r!==null&&hp(r,e[1])?e[0]:(n.memoizedState=[t,r],t)}function a1(t,r){var n=$n();r=r===void 0?null:r;var e=n.memoizedState;return e!==null&&r!==null&&hp(r,e[1])?e[0]:(t=t(),n.memoizedState=[t,r],t)}function s1(t,r,n){return ra&21?(so(n,r)||(n=c0(),sr.lanes|=n,na|=n,t.baseState=!0),r):(t.baseState&&(t.baseState=!1,bn=!0),t.memoizedState=n)}function x_(t,r){var n=zt;zt=n!==0&&4>n?n:4,t(!0);var e=Od.transition;Od.transition={};try{t(!1),r()}finally{zt=n,Od.transition=e}}function u1(){return $n().memoizedState}function w_(t,r,n){var e=Si(t);if(n={lane:e,action:n,hasEagerState:!1,eagerState:null,next:null},l1(t))c1(r,n);else if(n=U0(t,r,n,e),n!==null){var o=fn();io(n,t,e,o),d1(n,r,e)}}function __(t,r,n){var e=Si(t),o={lane:e,action:n,hasEagerState:!1,eagerState:null,next:null};if(l1(t))c1(r,o);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=r.lastRenderedReducer,i!==null))try{var u=r.lastRenderedState,a=i(u,n);if(o.hasEagerState=!0,o.eagerState=a,so(a,u)){var s=r.interleaved;s===null?(o.next=o,up(r)):(o.next=s.next,s.next=o),r.interleaved=o;return}}catch{}finally{}n=U0(t,r,o,e),n!==null&&(o=fn(),io(n,t,e,o),d1(n,r,e))}}function l1(t){var r=t.alternate;return t===sr||r!==null&&r===sr}function c1(t,r){qs=tc=!0;var n=t.pending;n===null?r.next=r:(r.next=n.next,n.next=r),t.pending=r}function d1(t,r,n){if(n&4194240){var e=r.lanes;e&=t.pendingLanes,n|=e,r.lanes=n,Xh(t,n)}}var rc={readContext:qn,useCallback:en,useContext:en,useEffect:en,useImperativeHandle:en,useInsertionEffect:en,useLayoutEffect:en,useMemo:en,useReducer:en,useRef:en,useState:en,useDebugValue:en,useDeferredValue:en,useTransition:en,useMutableSource:en,useSyncExternalStore:en,useId:en,unstable_isNewReconciler:!1},S_={readContext:qn,useCallback:function(t,r){return vo().memoizedState=[t,r===void 0?null:r],t},useContext:qn,useEffect:ig,useImperativeHandle:function(t,r,n){return n=n!=null?n.concat([t]):null,Il(4194308,4,n1.bind(null,r,t),n)},useLayoutEffect:function(t,r){return Il(4194308,4,t,r)},useInsertionEffect:function(t,r){return Il(4,2,t,r)},useMemo:function(t,r){var n=vo();return r=r===void 0?null:r,t=t(),n.memoizedState=[t,r],t},useReducer:function(t,r,n){var e=vo();return r=n!==void 0?n(r):r,e.memoizedState=e.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},e.queue=t,t=t.dispatch=w_.bind(null,sr,t),[e.memoizedState,t]},useRef:function(t){var r=vo();return t={current:t},r.memoizedState=t},useState:og,useDebugValue:gp,useDeferredValue:function(t){return vo().memoizedState=t},useTransition:function(){var t=og(!1),r=t[0];return t=x_.bind(null,t[1]),vo().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,n){var e=sr,o=vo();if(rr){if(n===void 0)throw Error(Xe(407));n=n()}else{if(n=r(),Fr===null)throw Error(Xe(349));ra&30||Y0(e,r,n)}o.memoizedState=n;var i={value:n,getSnapshot:r};return o.queue=i,ig(Q0.bind(null,e,i,t),[t]),e.flags|=2048,pu(9,K0.bind(null,e,i,n,r),void 0,null),n},useId:function(){var t=vo(),r=Fr.identifierPrefix;if(rr){var n=Vo,e=zo;n=(e&~(1<<32-oo(e)-1)).toString(32)+n,r=":"+r+"R"+n,n=fu++,0<n&&(r+="H"+n.toString(32)),r+=":"}else n=b_++,r=":"+r+"r"+n.toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},E_={readContext:qn,useCallback:i1,useContext:qn,useEffect:yp,useImperativeHandle:o1,useInsertionEffect:t1,useLayoutEffect:r1,useMemo:a1,useReducer:Ld,useRef:e1,useState:function(){return Ld(hu)},useDebugValue:gp,useDeferredValue:function(t){var r=$n();return s1(r,Er.memoizedState,t)},useTransition:function(){var t=Ld(hu)[0],r=$n().memoizedState;return[t,r]},useMutableSource:$0,useSyncExternalStore:X0,useId:u1,unstable_isNewReconciler:!1},j_={readContext:qn,useCallback:i1,useContext:qn,useEffect:yp,useImperativeHandle:o1,useInsertionEffect:t1,useLayoutEffect:r1,useMemo:a1,useReducer:Nd,useRef:e1,useState:function(){return Nd(hu)},useDebugValue:gp,useDeferredValue:function(t){var r=$n();return Er===null?r.memoizedState=t:s1(r,Er.memoizedState,t)},useTransition:function(){var t=Nd(hu)[0],r=$n().memoizedState;return[t,r]},useMutableSource:$0,useSyncExternalStore:X0,useId:u1,unstable_isNewReconciler:!1};function is(t,r){try{var n="",e=r;do n+=J2(e),e=e.return;while(e);var o=n}catch(i){o=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:r,stack:o,digest:null}}function Fd(t,r,n){return{value:t,source:null,stack:n??null,digest:r??null}}function Qf(t,r){try{console.error(r.value)}catch(n){setTimeout(function(){throw n})}}var C_=typeof WeakMap=="function"?WeakMap:Map;function f1(t,r,n){n=Wo(-1,n),n.tag=3,n.payload={element:null};var e=r.value;return n.callback=function(){oc||(oc=!0,sh=e),Qf(t,r)},n}function h1(t,r,n){n=Wo(-1,n),n.tag=3;var e=t.type.getDerivedStateFromError;if(typeof e=="function"){var o=r.value;n.payload=function(){return e(o)},n.callback=function(){Qf(t,r)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Qf(t,r),typeof e!="function"&&(_i===null?_i=new Set([this]):_i.add(this));var u=r.stack;this.componentDidCatch(r.value,{componentStack:u!==null?u:""})}),n}function ag(t,r,n){var e=t.pingCache;if(e===null){e=t.pingCache=new C_;var o=new Set;e.set(r,o)}else o=e.get(r),o===void 0&&(o=new Set,e.set(r,o));o.has(n)||(o.add(n),t=U_.bind(null,t,r,n),r.then(t,t))}function sg(t){do{var r;if((r=t.tag===13)&&(r=t.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return t;t=t.return}while(t!==null);return null}function ug(t,r,n,e,o){return t.mode&1?(t.flags|=65536,t.lanes=o,t):(t===r?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(r=Wo(-1,1),r.tag=2,wi(n,r,1))),n.lanes|=1),t)}var k_=Yo.ReactCurrentOwner,bn=!1;function dn(t,r,n,e){r.child=t===null?H0(r,null,n,e):ns(r,t.child,n,e)}function lg(t,r,n,e,o){n=n.render;var i=r.ref;return Wa(r,o),e=pp(t,r,n,e,i,o),n=mp(),t!==null&&!bn?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~o,Xo(t,r,o)):(rr&&n&&rp(r),r.flags|=1,dn(t,r,e,o),r.child)}function cg(t,r,n,e,o){if(t===null){var i=n.type;return typeof i=="function"&&!jp(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(r.tag=15,r.type=i,p1(t,r,i,e,o)):(t=Ol(n.type,null,e,r,r.mode,o),t.ref=r.ref,t.return=r,r.child=t)}if(i=t.child,!(t.lanes&o)){var u=i.memoizedProps;if(n=n.compare,n=n!==null?n:au,n(u,e)&&t.ref===r.ref)return Xo(t,r,o)}return r.flags|=1,t=Ei(i,e),t.ref=r.ref,t.return=r,r.child=t}function p1(t,r,n,e,o){if(t!==null){var i=t.memoizedProps;if(au(i,e)&&t.ref===r.ref)if(bn=!1,r.pendingProps=e=i,(t.lanes&o)!==0)t.flags&131072&&(bn=!0);else return r.lanes=t.lanes,Xo(t,r,o)}return Zf(t,r,n,e,o)}function m1(t,r,n){var e=r.pendingProps,o=e.children,i=t!==null?t.memoizedState:null;if(e.mode==="hidden")if(!(r.mode&1))r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xt(Fa,kn),kn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:t,cachePool:null,transitions:null},r.updateQueue=null,Xt(Fa,kn),kn|=t,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},e=i!==null?i.baseLanes:n,Xt(Fa,kn),kn|=e}else i!==null?(e=i.baseLanes|n,r.memoizedState=null):e=n,Xt(Fa,kn),kn|=e;return dn(t,r,o,n),r.child}function y1(t,r){var n=r.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(r.flags|=512,r.flags|=2097152)}function Zf(t,r,n,e,o){var i=wn(n)?ea:ln.current;return i=ts(r,i),Wa(r,o),n=pp(t,r,n,e,i,o),e=mp(),t!==null&&!bn?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~o,Xo(t,r,o)):(rr&&e&&rp(r),r.flags|=1,dn(t,r,n,o),r.child)}function dg(t,r,n,e,o){if(wn(n)){var i=!0;Xl(r)}else i=!1;if(Wa(r,o),r.stateNode===null)Al(t,r),V0(r,n,e),Kf(r,n,e,o),e=!0;else if(t===null){var u=r.stateNode,a=r.memoizedProps;u.props=a;var s=u.context,l=n.contextType;typeof l=="object"&&l!==null?l=qn(l):(l=wn(n)?ea:ln.current,l=ts(r,l));var h=n.getDerivedStateFromProps,p=typeof h=="function"||typeof u.getSnapshotBeforeUpdate=="function";p||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(a!==e||s!==l)&&rg(r,u,e,l),ci=!1;var c=r.memoizedState;u.state=c,Jl(r,e,u,o),s=r.memoizedState,a!==e||c!==s||xn.current||ci?(typeof h=="function"&&(Yf(r,n,h,e),s=r.memoizedState),(a=ci||tg(r,n,a,e,c,s,l))?(p||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(r.flags|=4194308)):(typeof u.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=e,r.memoizedState=s),u.props=e,u.state=s,u.context=l,e=a):(typeof u.componentDidMount=="function"&&(r.flags|=4194308),e=!1)}else{u=r.stateNode,G0(t,r),a=r.memoizedProps,l=r.type===r.elementType?a:Jn(r.type,a),u.props=l,p=r.pendingProps,c=u.context,s=n.contextType,typeof s=="object"&&s!==null?s=qn(s):(s=wn(n)?ea:ln.current,s=ts(r,s));var d=n.getDerivedStateFromProps;(h=typeof d=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(a!==p||c!==s)&&rg(r,u,e,s),ci=!1,c=r.memoizedState,u.state=c,Jl(r,e,u,o);var f=r.memoizedState;a!==p||c!==f||xn.current||ci?(typeof d=="function"&&(Yf(r,n,d,e),f=r.memoizedState),(l=ci||tg(r,n,l,e,c,f,s)||!1)?(h||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(e,f,s),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(e,f,s)),typeof u.componentDidUpdate=="function"&&(r.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof u.componentDidUpdate!="function"||a===t.memoizedProps&&c===t.memoizedState||(r.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&c===t.memoizedState||(r.flags|=1024),r.memoizedProps=e,r.memoizedState=f),u.props=e,u.state=f,u.context=s,e=l):(typeof u.componentDidUpdate!="function"||a===t.memoizedProps&&c===t.memoizedState||(r.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&c===t.memoizedState||(r.flags|=1024),e=!1)}return Jf(t,r,n,e,i,o)}function Jf(t,r,n,e,o,i){y1(t,r);var u=(r.flags&128)!==0;if(!e&&!u)return o&&Ky(r,n,!1),Xo(t,r,i);e=r.stateNode,k_.current=r;var a=u&&typeof n.getDerivedStateFromError!="function"?null:e.render();return r.flags|=1,t!==null&&u?(r.child=ns(r,t.child,null,i),r.child=ns(r,null,a,i)):dn(t,r,a,i),r.memoizedState=e.state,o&&Ky(r,n,!0),r.child}function g1(t){var r=t.stateNode;r.pendingContext?Yy(t,r.pendingContext,r.pendingContext!==r.context):r.context&&Yy(t,r.context,!1),cp(t,r.containerInfo)}function fg(t,r,n,e,o){return rs(),op(o),r.flags|=256,dn(t,r,n,e),r.child}var eh={dehydrated:null,treeContext:null,retryLane:0};function th(t){return{baseLanes:t,cachePool:null,transitions:null}}function v1(t,r,n){var e=r.pendingProps,o=or.current,i=!1,u=(r.flags&128)!==0,a;if((a=u)||(a=t!==null&&t.memoizedState===null?!1:(o&2)!==0),a?(i=!0,r.flags&=-129):(t===null||t.memoizedState!==null)&&(o|=1),Xt(or,o&1),t===null)return $f(r),t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(r.mode&1?t.data==="$!"?r.lanes=8:r.lanes=1073741824:r.lanes=1,null):(u=e.children,t=e.fallback,i?(e=r.mode,i=r.child,u={mode:"hidden",children:u},!(e&1)&&i!==null?(i.childLanes=0,i.pendingProps=u):i=zc(u,e,0,null),t=Zi(t,e,n,null),i.return=r,t.return=r,i.sibling=t,r.child=i,r.child.memoizedState=th(n),r.memoizedState=eh,t):vp(r,u));if(o=t.memoizedState,o!==null&&(a=o.dehydrated,a!==null))return T_(t,r,u,e,a,o,n);if(i){i=e.fallback,u=r.mode,o=t.child,a=o.sibling;var s={mode:"hidden",children:e.children};return!(u&1)&&r.child!==o?(e=r.child,e.childLanes=0,e.pendingProps=s,r.deletions=null):(e=Ei(o,s),e.subtreeFlags=o.subtreeFlags&14680064),a!==null?i=Ei(a,i):(i=Zi(i,u,n,null),i.flags|=2),i.return=r,e.return=r,e.sibling=i,r.child=e,e=i,i=r.child,u=t.child.memoizedState,u=u===null?th(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},i.memoizedState=u,i.childLanes=t.childLanes&~n,r.memoizedState=eh,e}return i=t.child,t=i.sibling,e=Ei(i,{mode:"visible",children:e.children}),!(r.mode&1)&&(e.lanes=n),e.return=r,e.sibling=null,t!==null&&(n=r.deletions,n===null?(r.deletions=[t],r.flags|=16):n.push(t)),r.child=e,r.memoizedState=null,e}function vp(t,r){return r=zc({mode:"visible",children:r},t.mode,0,null),r.return=t,t.child=r}function ol(t,r,n,e){return e!==null&&op(e),ns(r,t.child,null,n),t=vp(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function T_(t,r,n,e,o,i,u){if(n)return r.flags&256?(r.flags&=-257,e=Fd(Error(Xe(422))),ol(t,r,u,e)):r.memoizedState!==null?(r.child=t.child,r.flags|=128,null):(i=e.fallback,o=r.mode,e=zc({mode:"visible",children:e.children},o,0,null),i=Zi(i,o,u,null),i.flags|=2,e.return=r,i.return=r,e.sibling=i,r.child=e,r.mode&1&&ns(r,t.child,null,u),r.child.memoizedState=th(u),r.memoizedState=eh,i);if(!(r.mode&1))return ol(t,r,u,null);if(o.data==="$!"){if(e=o.nextSibling&&o.nextSibling.dataset,e)var a=e.dgst;return e=a,i=Error(Xe(419)),e=Fd(i,e,void 0),ol(t,r,u,e)}if(a=(u&t.childLanes)!==0,bn||a){if(e=Fr,e!==null){switch(u&-u){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(e.suspendedLanes|u)?0:o,o!==0&&o!==i.retryLane&&(i.retryLane=o,$o(t,o),io(e,t,o,-1))}return Ep(),e=Fd(Error(Xe(421))),ol(t,r,u,e)}return o.data==="$?"?(r.flags|=128,r.child=t.child,r=G_.bind(null,t),o._reactRetry=r,null):(t=i.treeContext,Rn=xi(o.nextSibling),Dn=r,rr=!0,to=null,t!==null&&(Bn[Un++]=zo,Bn[Un++]=Vo,Bn[Un++]=ta,zo=t.id,Vo=t.overflow,ta=r),r=vp(r,e.children),r.flags|=4096,r)}function hg(t,r,n){t.lanes|=r;var e=t.alternate;e!==null&&(e.lanes|=r),Xf(t.return,r,n)}function Bd(t,r,n,e,o){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:e,tail:n,tailMode:o}:(i.isBackwards=r,i.rendering=null,i.renderingStartTime=0,i.last=e,i.tail=n,i.tailMode=o)}function b1(t,r,n){var e=r.pendingProps,o=e.revealOrder,i=e.tail;if(dn(t,r,e.children,n),e=or.current,e&2)e=e&1|2,r.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&hg(t,n,r);else if(t.tag===19)hg(t,n,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}e&=1}if(Xt(or,e),!(r.mode&1))r.memoizedState=null;else switch(o){case"forwards":for(n=r.child,o=null;n!==null;)t=n.alternate,t!==null&&ec(t)===null&&(o=n),n=n.sibling;n=o,n===null?(o=r.child,r.child=null):(o=n.sibling,n.sibling=null),Bd(r,!1,o,n,i);break;case"backwards":for(n=null,o=r.child,r.child=null;o!==null;){if(t=o.alternate,t!==null&&ec(t)===null){r.child=o;break}t=o.sibling,o.sibling=n,n=o,o=t}Bd(r,!0,n,null,i);break;case"together":Bd(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Al(t,r){!(r.mode&1)&&t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2)}function Xo(t,r,n){if(t!==null&&(r.dependencies=t.dependencies),na|=r.lanes,!(n&r.childLanes))return null;if(t!==null&&r.child!==t.child)throw Error(Xe(153));if(r.child!==null){for(t=r.child,n=Ei(t,t.pendingProps),r.child=n,n.return=r;t.sibling!==null;)t=t.sibling,n=n.sibling=Ei(t,t.pendingProps),n.return=r;n.sibling=null}return r.child}function M_(t,r,n){switch(r.tag){case 3:g1(r),rs();break;case 5:q0(r);break;case 1:wn(r.type)&&Xl(r);break;case 4:cp(r,r.stateNode.containerInfo);break;case 10:var e=r.type._context,o=r.memoizedProps.value;Xt(Ql,e._currentValue),e._currentValue=o;break;case 13:if(e=r.memoizedState,e!==null)return e.dehydrated!==null?(Xt(or,or.current&1),r.flags|=128,null):n&r.child.childLanes?v1(t,r,n):(Xt(or,or.current&1),t=Xo(t,r,n),t!==null?t.sibling:null);Xt(or,or.current&1);break;case 19:if(e=(n&r.childLanes)!==0,t.flags&128){if(e)return b1(t,r,n);r.flags|=128}if(o=r.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Xt(or,or.current),e)break;return null;case 22:case 23:return r.lanes=0,m1(t,r,n)}return Xo(t,r,n)}var x1,rh,w1,_1;x1=function(t,r){for(var n=r.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break;for(;n.sibling===null;){if(n.return===null||n.return===r)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};rh=function(){};w1=function(t,r,n,e){var o=t.memoizedProps;if(o!==e){t=r.stateNode,Xi(Co.current);var i=null;switch(n){case"input":o=Ef(t,o),e=Ef(t,e),i=[];break;case"select":o=ur({},o,{value:void 0}),e=ur({},e,{value:void 0}),i=[];break;case"textarea":o=kf(t,o),e=kf(t,e),i=[];break;default:typeof o.onClick!="function"&&typeof e.onClick=="function"&&(t.onclick=ql)}Mf(n,e);var u;n=null;for(l in o)if(!e.hasOwnProperty(l)&&o.hasOwnProperty(l)&&o[l]!=null)if(l==="style"){var a=o[l];for(u in a)a.hasOwnProperty(u)&&(n||(n={}),n[u]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Js.hasOwnProperty(l)?i||(i=[]):(i=i||[]).push(l,null));for(l in e){var s=e[l];if(a=o!=null?o[l]:void 0,e.hasOwnProperty(l)&&s!==a&&(s!=null||a!=null))if(l==="style")if(a){for(u in a)!a.hasOwnProperty(u)||s&&s.hasOwnProperty(u)||(n||(n={}),n[u]="");for(u in s)s.hasOwnProperty(u)&&a[u]!==s[u]&&(n||(n={}),n[u]=s[u])}else n||(i||(i=[]),i.push(l,n)),n=s;else l==="dangerouslySetInnerHTML"?(s=s?s.__html:void 0,a=a?a.__html:void 0,s!=null&&a!==s&&(i=i||[]).push(l,s)):l==="children"?typeof s!="string"&&typeof s!="number"||(i=i||[]).push(l,""+s):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(Js.hasOwnProperty(l)?(s!=null&&l==="onScroll"&&Jt("scroll",t),i||a===s||(i=[])):(i=i||[]).push(l,s))}n&&(i=i||[]).push("style",n);var l=i;(r.updateQueue=l)&&(r.flags|=4)}};_1=function(t,r,n,e){n!==e&&(r.flags|=4)};function Is(t,r){if(!rr)switch(t.tailMode){case"hidden":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var e=null;n!==null;)n.alternate!==null&&(e=n),n=n.sibling;e===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:e.sibling=null}}function tn(t){var r=t.alternate!==null&&t.alternate.child===t.child,n=0,e=0;if(r)for(var o=t.child;o!==null;)n|=o.lanes|o.childLanes,e|=o.subtreeFlags&14680064,e|=o.flags&14680064,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)n|=o.lanes|o.childLanes,e|=o.subtreeFlags,e|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=e,t.childLanes=n,r}function R_(t,r,n){var e=r.pendingProps;switch(np(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tn(r),null;case 1:return wn(r.type)&&$l(),tn(r),null;case 3:return e=r.stateNode,os(),tr(xn),tr(ln),fp(),e.pendingContext&&(e.context=e.pendingContext,e.pendingContext=null),(t===null||t.child===null)&&(rl(r)?r.flags|=4:t===null||t.memoizedState.isDehydrated&&!(r.flags&256)||(r.flags|=1024,to!==null&&(ch(to),to=null))),rh(t,r),tn(r),null;case 5:dp(r);var o=Xi(du.current);if(n=r.type,t!==null&&r.stateNode!=null)w1(t,r,n,e,o),t.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!e){if(r.stateNode===null)throw Error(Xe(166));return tn(r),null}if(t=Xi(Co.current),rl(r)){e=r.stateNode,n=r.type;var i=r.memoizedProps;switch(e[wo]=r,e[lu]=i,t=(r.mode&1)!==0,n){case"dialog":Jt("cancel",e),Jt("close",e);break;case"iframe":case"object":case"embed":Jt("load",e);break;case"video":case"audio":for(o=0;o<Us.length;o++)Jt(Us[o],e);break;case"source":Jt("error",e);break;case"img":case"image":case"link":Jt("error",e),Jt("load",e);break;case"details":Jt("toggle",e);break;case"input":_y(e,i),Jt("invalid",e);break;case"select":e._wrapperState={wasMultiple:!!i.multiple},Jt("invalid",e);break;case"textarea":Ey(e,i),Jt("invalid",e)}Mf(n,i),o=null;for(var u in i)if(i.hasOwnProperty(u)){var a=i[u];u==="children"?typeof a=="string"?e.textContent!==a&&(i.suppressHydrationWarning!==!0&&tl(e.textContent,a,t),o=["children",a]):typeof a=="number"&&e.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&tl(e.textContent,a,t),o=["children",""+a]):Js.hasOwnProperty(u)&&a!=null&&u==="onScroll"&&Jt("scroll",e)}switch(n){case"input":$u(e),Sy(e,i,!0);break;case"textarea":$u(e),jy(e);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(e.onclick=ql)}e=o,r.updateQueue=e,e!==null&&(r.flags|=4)}else{u=o.nodeType===9?o:o.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Yv(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=u.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof e.is=="string"?t=u.createElement(n,{is:e.is}):(t=u.createElement(n),n==="select"&&(u=t,e.multiple?u.multiple=!0:e.size&&(u.size=e.size))):t=u.createElementNS(t,n),t[wo]=r,t[lu]=e,x1(t,r,!1,!1),r.stateNode=t;e:{switch(u=Rf(n,e),n){case"dialog":Jt("cancel",t),Jt("close",t),o=e;break;case"iframe":case"object":case"embed":Jt("load",t),o=e;break;case"video":case"audio":for(o=0;o<Us.length;o++)Jt(Us[o],t);o=e;break;case"source":Jt("error",t),o=e;break;case"img":case"image":case"link":Jt("error",t),Jt("load",t),o=e;break;case"details":Jt("toggle",t),o=e;break;case"input":_y(t,e),o=Ef(t,e),Jt("invalid",t);break;case"option":o=e;break;case"select":t._wrapperState={wasMultiple:!!e.multiple},o=ur({},e,{value:void 0}),Jt("invalid",t);break;case"textarea":Ey(t,e),o=kf(t,e),Jt("invalid",t);break;default:o=e}Mf(n,o),a=o;for(i in a)if(a.hasOwnProperty(i)){var s=a[i];i==="style"?Zv(t,s):i==="dangerouslySetInnerHTML"?(s=s?s.__html:void 0,s!=null&&Kv(t,s)):i==="children"?typeof s=="string"?(n!=="textarea"||s!=="")&&eu(t,s):typeof s=="number"&&eu(t,""+s):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Js.hasOwnProperty(i)?s!=null&&i==="onScroll"&&Jt("scroll",t):s!=null&&zh(t,i,s,u))}switch(n){case"input":$u(t),Sy(t,e,!1);break;case"textarea":$u(t),jy(t);break;case"option":e.value!=null&&t.setAttribute("value",""+Ti(e.value));break;case"select":t.multiple=!!e.multiple,i=e.value,i!=null?Ua(t,!!e.multiple,i,!1):e.defaultValue!=null&&Ua(t,!!e.multiple,e.defaultValue,!0);break;default:typeof o.onClick=="function"&&(t.onclick=ql)}switch(n){case"button":case"input":case"select":case"textarea":e=!!e.autoFocus;break e;case"img":e=!0;break e;default:e=!1}}e&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return tn(r),null;case 6:if(t&&r.stateNode!=null)_1(t,r,t.memoizedProps,e);else{if(typeof e!="string"&&r.stateNode===null)throw Error(Xe(166));if(n=Xi(du.current),Xi(Co.current),rl(r)){if(e=r.stateNode,n=r.memoizedProps,e[wo]=r,(i=e.nodeValue!==n)&&(t=Dn,t!==null))switch(t.tag){case 3:tl(e.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&tl(e.nodeValue,n,(t.mode&1)!==0)}i&&(r.flags|=4)}else e=(n.nodeType===9?n:n.ownerDocument).createTextNode(e),e[wo]=r,r.stateNode=e}return tn(r),null;case 13:if(tr(or),e=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(rr&&Rn!==null&&r.mode&1&&!(r.flags&128))B0(),rs(),r.flags|=98560,i=!1;else if(i=rl(r),e!==null&&e.dehydrated!==null){if(t===null){if(!i)throw Error(Xe(318));if(i=r.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Xe(317));i[wo]=r}else rs(),!(r.flags&128)&&(r.memoizedState=null),r.flags|=4;tn(r),i=!1}else to!==null&&(ch(to),to=null),i=!0;if(!i)return r.flags&65536?r:null}return r.flags&128?(r.lanes=n,r):(e=e!==null,e!==(t!==null&&t.memoizedState!==null)&&e&&(r.child.flags|=8192,r.mode&1&&(t===null||or.current&1?jr===0&&(jr=3):Ep())),r.updateQueue!==null&&(r.flags|=4),tn(r),null);case 4:return os(),rh(t,r),t===null&&su(r.stateNode.containerInfo),tn(r),null;case 10:return sp(r.type._context),tn(r),null;case 17:return wn(r.type)&&$l(),tn(r),null;case 19:if(tr(or),i=r.memoizedState,i===null)return tn(r),null;if(e=(r.flags&128)!==0,u=i.rendering,u===null)if(e)Is(i,!1);else{if(jr!==0||t!==null&&t.flags&128)for(t=r.child;t!==null;){if(u=ec(t),u!==null){for(r.flags|=128,Is(i,!1),e=u.updateQueue,e!==null&&(r.updateQueue=e,r.flags|=4),r.subtreeFlags=0,e=n,n=r.child;n!==null;)i=n,t=e,i.flags&=14680066,u=i.alternate,u===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=u.childLanes,i.lanes=u.lanes,i.child=u.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=u.memoizedProps,i.memoizedState=u.memoizedState,i.updateQueue=u.updateQueue,i.type=u.type,t=u.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Xt(or,or.current&1|2),r.child}t=t.sibling}i.tail!==null&&yr()>as&&(r.flags|=128,e=!0,Is(i,!1),r.lanes=4194304)}else{if(!e)if(t=ec(u),t!==null){if(r.flags|=128,e=!0,n=t.updateQueue,n!==null&&(r.updateQueue=n,r.flags|=4),Is(i,!0),i.tail===null&&i.tailMode==="hidden"&&!u.alternate&&!rr)return tn(r),null}else 2*yr()-i.renderingStartTime>as&&n!==1073741824&&(r.flags|=128,e=!0,Is(i,!1),r.lanes=4194304);i.isBackwards?(u.sibling=r.child,r.child=u):(n=i.last,n!==null?n.sibling=u:r.child=u,i.last=u)}return i.tail!==null?(r=i.tail,i.rendering=r,i.tail=r.sibling,i.renderingStartTime=yr(),r.sibling=null,n=or.current,Xt(or,e?n&1|2:n&1),r):(tn(r),null);case 22:case 23:return Sp(),e=r.memoizedState!==null,t!==null&&t.memoizedState!==null!==e&&(r.flags|=8192),e&&r.mode&1?kn&1073741824&&(tn(r),r.subtreeFlags&6&&(r.flags|=8192)):tn(r),null;case 24:return null;case 25:return null}throw Error(Xe(156,r.tag))}function I_(t,r){switch(np(r),r.tag){case 1:return wn(r.type)&&$l(),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return os(),tr(xn),tr(ln),fp(),t=r.flags,t&65536&&!(t&128)?(r.flags=t&-65537|128,r):null;case 5:return dp(r),null;case 13:if(tr(or),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(Xe(340));rs()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return tr(or),null;case 4:return os(),null;case 10:return sp(r.type._context),null;case 22:case 23:return Sp(),null;case 24:return null;default:return null}}var il=!1,nn=!1,A_=typeof WeakSet=="function"?WeakSet:Set,st=null;function Na(t,r){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(e){hr(t,r,e)}else n.current=null}function nh(t,r,n){try{n()}catch(e){hr(t,r,e)}}var pg=!1;function P_(t,r){if(Uf=Vl,t=C0(),tp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var e=n.getSelection&&n.getSelection();if(e&&e.rangeCount!==0){n=e.anchorNode;var o=e.anchorOffset,i=e.focusNode;e=e.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var u=0,a=-1,s=-1,l=0,h=0,p=t,c=null;t:for(;;){for(var d;p!==n||o!==0&&p.nodeType!==3||(a=u+o),p!==i||e!==0&&p.nodeType!==3||(s=u+e),p.nodeType===3&&(u+=p.nodeValue.length),(d=p.firstChild)!==null;)c=p,p=d;for(;;){if(p===t)break t;if(c===n&&++l===o&&(a=u),c===i&&++h===e&&(s=u),(d=p.nextSibling)!==null)break;p=c,c=p.parentNode}p=d}n=a===-1||s===-1?null:{start:a,end:s}}else n=null}n=n||{start:0,end:0}}else n=null;for(Gf={focusedElem:t,selectionRange:n},Vl=!1,st=r;st!==null;)if(r=st,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,st=t;else for(;st!==null;){r=st;try{var f=r.alternate;if(r.flags&1024)switch(r.tag){case 0:case 11:case 15:break;case 1:if(f!==null){var m=f.memoizedProps,y=f.memoizedState,g=r.stateNode,v=g.getSnapshotBeforeUpdate(r.elementType===r.type?m:Jn(r.type,m),y);g.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=r.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Xe(163))}}catch(w){hr(r,r.return,w)}if(t=r.sibling,t!==null){t.return=r.return,st=t;break}st=r.return}return f=pg,pg=!1,f}function $s(t,r,n){var e=r.updateQueue;if(e=e!==null?e.lastEffect:null,e!==null){var o=e=e.next;do{if((o.tag&t)===t){var i=o.destroy;o.destroy=void 0,i!==void 0&&nh(r,n,i)}o=o.next}while(o!==e)}}function Uc(t,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var n=r=r.next;do{if((n.tag&t)===t){var e=n.create;n.destroy=e()}n=n.next}while(n!==r)}}function oh(t){var r=t.ref;if(r!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof r=="function"?r(t):r.current=t}}function S1(t){var r=t.alternate;r!==null&&(t.alternate=null,S1(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&(delete r[wo],delete r[lu],delete r[Wf],delete r[m_],delete r[y_])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function E1(t){return t.tag===5||t.tag===3||t.tag===4}function mg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||E1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ih(t,r,n){var e=t.tag;if(e===5||e===6)t=t.stateNode,r?n.nodeType===8?n.parentNode.insertBefore(t,r):n.insertBefore(t,r):(n.nodeType===8?(r=n.parentNode,r.insertBefore(t,n)):(r=n,r.appendChild(t)),n=n._reactRootContainer,n!=null||r.onclick!==null||(r.onclick=ql));else if(e!==4&&(t=t.child,t!==null))for(ih(t,r,n),t=t.sibling;t!==null;)ih(t,r,n),t=t.sibling}function ah(t,r,n){var e=t.tag;if(e===5||e===6)t=t.stateNode,r?n.insertBefore(t,r):n.appendChild(t);else if(e!==4&&(t=t.child,t!==null))for(ah(t,r,n),t=t.sibling;t!==null;)ah(t,r,n),t=t.sibling}var Wr=null,eo=!1;function ii(t,r,n){for(n=n.child;n!==null;)j1(t,r,n),n=n.sibling}function j1(t,r,n){if(jo&&typeof jo.onCommitFiberUnmount=="function")try{jo.onCommitFiberUnmount(Ac,n)}catch{}switch(n.tag){case 5:nn||Na(n,r);case 6:var e=Wr,o=eo;Wr=null,ii(t,r,n),Wr=e,eo=o,Wr!==null&&(eo?(t=Wr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Wr.removeChild(n.stateNode));break;case 18:Wr!==null&&(eo?(t=Wr,n=n.stateNode,t.nodeType===8?Ad(t.parentNode,n):t.nodeType===1&&Ad(t,n),ou(t)):Ad(Wr,n.stateNode));break;case 4:e=Wr,o=eo,Wr=n.stateNode.containerInfo,eo=!0,ii(t,r,n),Wr=e,eo=o;break;case 0:case 11:case 14:case 15:if(!nn&&(e=n.updateQueue,e!==null&&(e=e.lastEffect,e!==null))){o=e=e.next;do{var i=o,u=i.destroy;i=i.tag,u!==void 0&&(i&2||i&4)&&nh(n,r,u),o=o.next}while(o!==e)}ii(t,r,n);break;case 1:if(!nn&&(Na(n,r),e=n.stateNode,typeof e.componentWillUnmount=="function"))try{e.props=n.memoizedProps,e.state=n.memoizedState,e.componentWillUnmount()}catch(a){hr(n,r,a)}ii(t,r,n);break;case 21:ii(t,r,n);break;case 22:n.mode&1?(nn=(e=nn)||n.memoizedState!==null,ii(t,r,n),nn=e):ii(t,r,n);break;default:ii(t,r,n)}}function yg(t){var r=t.updateQueue;if(r!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new A_),r.forEach(function(e){var o=z_.bind(null,t,e);n.has(e)||(n.add(e),e.then(o,o))})}}function Zn(t,r){var n=r.deletions;if(n!==null)for(var e=0;e<n.length;e++){var o=n[e];try{var i=t,u=r,a=u;e:for(;a!==null;){switch(a.tag){case 5:Wr=a.stateNode,eo=!1;break e;case 3:Wr=a.stateNode.containerInfo,eo=!0;break e;case 4:Wr=a.stateNode.containerInfo,eo=!0;break e}a=a.return}if(Wr===null)throw Error(Xe(160));j1(i,u,o),Wr=null,eo=!1;var s=o.alternate;s!==null&&(s.return=null),o.return=null}catch(l){hr(o,r,l)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)C1(r,t),r=r.sibling}function C1(t,r){var n=t.alternate,e=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Zn(r,t),yo(t),e&4){try{$s(3,t,t.return),Uc(3,t)}catch(m){hr(t,t.return,m)}try{$s(5,t,t.return)}catch(m){hr(t,t.return,m)}}break;case 1:Zn(r,t),yo(t),e&512&&n!==null&&Na(n,n.return);break;case 5:if(Zn(r,t),yo(t),e&512&&n!==null&&Na(n,n.return),t.flags&32){var o=t.stateNode;try{eu(o,"")}catch(m){hr(t,t.return,m)}}if(e&4&&(o=t.stateNode,o!=null)){var i=t.memoizedProps,u=n!==null?n.memoizedProps:i,a=t.type,s=t.updateQueue;if(t.updateQueue=null,s!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&$v(o,i),Rf(a,u);var l=Rf(a,i);for(u=0;u<s.length;u+=2){var h=s[u],p=s[u+1];h==="style"?Zv(o,p):h==="dangerouslySetInnerHTML"?Kv(o,p):h==="children"?eu(o,p):zh(o,h,p,l)}switch(a){case"input":jf(o,i);break;case"textarea":Xv(o,i);break;case"select":var c=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!i.multiple;var d=i.value;d!=null?Ua(o,!!i.multiple,d,!1):c!==!!i.multiple&&(i.defaultValue!=null?Ua(o,!!i.multiple,i.defaultValue,!0):Ua(o,!!i.multiple,i.multiple?[]:"",!1))}o[lu]=i}catch(m){hr(t,t.return,m)}}break;case 6:if(Zn(r,t),yo(t),e&4){if(t.stateNode===null)throw Error(Xe(162));o=t.stateNode,i=t.memoizedProps;try{o.nodeValue=i}catch(m){hr(t,t.return,m)}}break;case 3:if(Zn(r,t),yo(t),e&4&&n!==null&&n.memoizedState.isDehydrated)try{ou(r.containerInfo)}catch(m){hr(t,t.return,m)}break;case 4:Zn(r,t),yo(t);break;case 13:Zn(r,t),yo(t),o=t.child,o.flags&8192&&(i=o.memoizedState!==null,o.stateNode.isHidden=i,!i||o.alternate!==null&&o.alternate.memoizedState!==null||(wp=yr())),e&4&&yg(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(nn=(l=nn)||h,Zn(r,t),nn=l):Zn(r,t),yo(t),e&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!h&&t.mode&1)for(st=t,h=t.child;h!==null;){for(p=st=h;st!==null;){switch(c=st,d=c.child,c.tag){case 0:case 11:case 14:case 15:$s(4,c,c.return);break;case 1:Na(c,c.return);var f=c.stateNode;if(typeof f.componentWillUnmount=="function"){e=c,n=c.return;try{r=e,f.props=r.memoizedProps,f.state=r.memoizedState,f.componentWillUnmount()}catch(m){hr(e,n,m)}}break;case 5:Na(c,c.return);break;case 22:if(c.memoizedState!==null){vg(p);continue}}d!==null?(d.return=c,st=d):vg(p)}h=h.sibling}e:for(h=null,p=t;;){if(p.tag===5){if(h===null){h=p;try{o=p.stateNode,l?(i=o.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=p.stateNode,s=p.memoizedProps.style,u=s!=null&&s.hasOwnProperty("display")?s.display:null,a.style.display=Qv("display",u))}catch(m){hr(t,t.return,m)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=l?"":p.memoizedProps}catch(m){hr(t,t.return,m)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Zn(r,t),yo(t),e&4&&yg(t);break;case 21:break;default:Zn(r,t),yo(t)}}function yo(t){var r=t.flags;if(r&2){try{e:{for(var n=t.return;n!==null;){if(E1(n)){var e=n;break e}n=n.return}throw Error(Xe(160))}switch(e.tag){case 5:var o=e.stateNode;e.flags&32&&(eu(o,""),e.flags&=-33);var i=mg(t);ah(t,i,o);break;case 3:case 4:var u=e.stateNode.containerInfo,a=mg(t);ih(t,a,u);break;default:throw Error(Xe(161))}}catch(s){hr(t,t.return,s)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function D_(t,r,n){st=t,k1(t)}function k1(t,r,n){for(var e=(t.mode&1)!==0;st!==null;){var o=st,i=o.child;if(o.tag===22&&e){var u=o.memoizedState!==null||il;if(!u){var a=o.alternate,s=a!==null&&a.memoizedState!==null||nn;a=il;var l=nn;if(il=u,(nn=s)&&!l)for(st=o;st!==null;)u=st,s=u.child,u.tag===22&&u.memoizedState!==null?bg(o):s!==null?(s.return=u,st=s):bg(o);for(;i!==null;)st=i,k1(i),i=i.sibling;st=o,il=a,nn=l}gg(t)}else o.subtreeFlags&8772&&i!==null?(i.return=o,st=i):gg(t)}}function gg(t){for(;st!==null;){var r=st;if(r.flags&8772){var n=r.alternate;try{if(r.flags&8772)switch(r.tag){case 0:case 11:case 15:nn||Uc(5,r);break;case 1:var e=r.stateNode;if(r.flags&4&&!nn)if(n===null)e.componentDidMount();else{var o=r.elementType===r.type?n.memoizedProps:Jn(r.type,n.memoizedProps);e.componentDidUpdate(o,n.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}var i=r.updateQueue;i!==null&&eg(r,i,e);break;case 3:var u=r.updateQueue;if(u!==null){if(n=null,r.child!==null)switch(r.child.tag){case 5:n=r.child.stateNode;break;case 1:n=r.child.stateNode}eg(r,u,n)}break;case 5:var a=r.stateNode;if(n===null&&r.flags&4){n=a;var s=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":s.autoFocus&&n.focus();break;case"img":s.src&&(n.src=s.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var l=r.alternate;if(l!==null){var h=l.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&ou(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Xe(163))}nn||r.flags&512&&oh(r)}catch(c){hr(r,r.return,c)}}if(r===t){st=null;break}if(n=r.sibling,n!==null){n.return=r.return,st=n;break}st=r.return}}function vg(t){for(;st!==null;){var r=st;if(r===t){st=null;break}var n=r.sibling;if(n!==null){n.return=r.return,st=n;break}st=r.return}}function bg(t){for(;st!==null;){var r=st;try{switch(r.tag){case 0:case 11:case 15:var n=r.return;try{Uc(4,r)}catch(s){hr(r,n,s)}break;case 1:var e=r.stateNode;if(typeof e.componentDidMount=="function"){var o=r.return;try{e.componentDidMount()}catch(s){hr(r,o,s)}}var i=r.return;try{oh(r)}catch(s){hr(r,i,s)}break;case 5:var u=r.return;try{oh(r)}catch(s){hr(r,u,s)}}}catch(s){hr(r,r.return,s)}if(r===t){st=null;break}var a=r.sibling;if(a!==null){a.return=r.return,st=a;break}st=r.return}}var O_=Math.ceil,nc=Yo.ReactCurrentDispatcher,bp=Yo.ReactCurrentOwner,Hn=Yo.ReactCurrentBatchConfig,Nt=0,Fr=null,xr=null,Xr=0,kn=0,Fa=Pi(0),jr=0,mu=null,na=0,Gc=0,xp=0,Xs=null,mn=null,wp=0,as=1/0,Bo=null,oc=!1,sh=null,_i=null,al=!1,pi=null,ic=0,Ys=0,uh=null,Pl=-1,Dl=0;function fn(){return Nt&6?yr():Pl!==-1?Pl:Pl=yr()}function Si(t){return t.mode&1?Nt&2&&Xr!==0?Xr&-Xr:v_.transition!==null?(Dl===0&&(Dl=c0()),Dl):(t=zt,t!==0||(t=window.event,t=t===void 0?16:g0(t.type)),t):1}function io(t,r,n,e){if(50<Ys)throw Ys=0,uh=null,Error(Xe(185));Eu(t,n,e),(!(Nt&2)||t!==Fr)&&(t===Fr&&(!(Nt&2)&&(Gc|=n),jr===4&&fi(t,Xr)),_n(t,e),n===1&&Nt===0&&!(r.mode&1)&&(as=yr()+500,Nc&&Di()))}function _n(t,r){var n=t.callbackNode;vw(t,r);var e=zl(t,t===Fr?Xr:0);if(e===0)n!==null&&Ty(n),t.callbackNode=null,t.callbackPriority=0;else if(r=e&-e,t.callbackPriority!==r){if(n!=null&&Ty(n),r===1)t.tag===0?g_(xg.bind(null,t)):L0(xg.bind(null,t)),h_(function(){!(Nt&6)&&Di()}),n=null;else{switch(d0(e)){case 1:n=$h;break;case 4:n=u0;break;case 16:n=Gl;break;case 536870912:n=l0;break;default:n=Gl}n=O1(n,T1.bind(null,t))}t.callbackPriority=r,t.callbackNode=n}}function T1(t,r){if(Pl=-1,Dl=0,Nt&6)throw Error(Xe(327));var n=t.callbackNode;if(Ha()&&t.callbackNode!==n)return null;var e=zl(t,t===Fr?Xr:0);if(e===0)return null;if(e&30||e&t.expiredLanes||r)r=ac(t,e);else{r=e;var o=Nt;Nt|=2;var i=R1();(Fr!==t||Xr!==r)&&(Bo=null,as=yr()+500,Qi(t,r));do try{F_();break}catch(a){M1(t,a)}while(1);ap(),nc.current=i,Nt=o,xr!==null?r=0:(Fr=null,Xr=0,r=jr)}if(r!==0){if(r===2&&(o=Of(t),o!==0&&(e=o,r=lh(t,o))),r===1)throw n=mu,Qi(t,0),fi(t,e),_n(t,yr()),n;if(r===6)fi(t,e);else{if(o=t.current.alternate,!(e&30)&&!L_(o)&&(r=ac(t,e),r===2&&(i=Of(t),i!==0&&(e=i,r=lh(t,i))),r===1))throw n=mu,Qi(t,0),fi(t,e),_n(t,yr()),n;switch(t.finishedWork=o,t.finishedLanes=e,r){case 0:case 1:throw Error(Xe(345));case 2:zi(t,mn,Bo);break;case 3:if(fi(t,e),(e&130023424)===e&&(r=wp+500-yr(),10<r)){if(zl(t,0)!==0)break;if(o=t.suspendedLanes,(o&e)!==e){fn(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=Vf(zi.bind(null,t,mn,Bo),r);break}zi(t,mn,Bo);break;case 4:if(fi(t,e),(e&4194240)===e)break;for(r=t.eventTimes,o=-1;0<e;){var u=31-oo(e);i=1<<u,u=r[u],u>o&&(o=u),e&=~i}if(e=o,e=yr()-e,e=(120>e?120:480>e?480:1080>e?1080:1920>e?1920:3e3>e?3e3:4320>e?4320:1960*O_(e/1960))-e,10<e){t.timeoutHandle=Vf(zi.bind(null,t,mn,Bo),e);break}zi(t,mn,Bo);break;case 5:zi(t,mn,Bo);break;default:throw Error(Xe(329))}}}return _n(t,yr()),t.callbackNode===n?T1.bind(null,t):null}function lh(t,r){var n=Xs;return t.current.memoizedState.isDehydrated&&(Qi(t,r).flags|=256),t=ac(t,r),t!==2&&(r=mn,mn=n,r!==null&&ch(r)),t}function ch(t){mn===null?mn=t:mn.push.apply(mn,t)}function L_(t){for(var r=t;;){if(r.flags&16384){var n=r.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var e=0;e<n.length;e++){var o=n[e],i=o.getSnapshot;o=o.value;try{if(!so(i(),o))return!1}catch{return!1}}}if(n=r.child,r.subtreeFlags&16384&&n!==null)n.return=r,r=n;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function fi(t,r){for(r&=~xp,r&=~Gc,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var n=31-oo(r),e=1<<n;t[n]=-1,r&=~e}}function xg(t){if(Nt&6)throw Error(Xe(327));Ha();var r=zl(t,0);if(!(r&1))return _n(t,yr()),null;var n=ac(t,r);if(t.tag!==0&&n===2){var e=Of(t);e!==0&&(r=e,n=lh(t,e))}if(n===1)throw n=mu,Qi(t,0),fi(t,r),_n(t,yr()),n;if(n===6)throw Error(Xe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,zi(t,mn,Bo),_n(t,yr()),null}function _p(t,r){var n=Nt;Nt|=1;try{return t(r)}finally{Nt=n,Nt===0&&(as=yr()+500,Nc&&Di())}}function oa(t){pi!==null&&pi.tag===0&&!(Nt&6)&&Ha();var r=Nt;Nt|=1;var n=Hn.transition,e=zt;try{if(Hn.transition=null,zt=1,t)return t()}finally{zt=e,Hn.transition=n,Nt=r,!(Nt&6)&&Di()}}function Sp(){kn=Fa.current,tr(Fa)}function Qi(t,r){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,f_(n)),xr!==null)for(n=xr.return;n!==null;){var e=n;switch(np(e),e.tag){case 1:e=e.type.childContextTypes,e!=null&&$l();break;case 3:os(),tr(xn),tr(ln),fp();break;case 5:dp(e);break;case 4:os();break;case 13:tr(or);break;case 19:tr(or);break;case 10:sp(e.type._context);break;case 22:case 23:Sp()}n=n.return}if(Fr=t,xr=t=Ei(t.current,null),Xr=kn=r,jr=0,mu=null,xp=Gc=na=0,mn=Xs=null,$i!==null){for(r=0;r<$i.length;r++)if(n=$i[r],e=n.interleaved,e!==null){n.interleaved=null;var o=e.next,i=n.pending;if(i!==null){var u=i.next;i.next=o,e.next=u}n.pending=e}$i=null}return t}function M1(t,r){do{var n=xr;try{if(ap(),Rl.current=rc,tc){for(var e=sr.memoizedState;e!==null;){var o=e.queue;o!==null&&(o.pending=null),e=e.next}tc=!1}if(ra=0,Lr=Er=sr=null,qs=!1,fu=0,bp.current=null,n===null||n.return===null){jr=1,mu=r,xr=null;break}e:{var i=t,u=n.return,a=n,s=r;if(r=Xr,a.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){var l=s,h=a,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var c=h.alternate;c?(h.updateQueue=c.updateQueue,h.memoizedState=c.memoizedState,h.lanes=c.lanes):(h.updateQueue=null,h.memoizedState=null)}var d=sg(u);if(d!==null){d.flags&=-257,ug(d,u,a,i,r),d.mode&1&&ag(i,l,r),r=d,s=l;var f=r.updateQueue;if(f===null){var m=new Set;m.add(s),r.updateQueue=m}else f.add(s);break e}else{if(!(r&1)){ag(i,l,r),Ep();break e}s=Error(Xe(426))}}else if(rr&&a.mode&1){var y=sg(u);if(y!==null){!(y.flags&65536)&&(y.flags|=256),ug(y,u,a,i,r),op(is(s,a));break e}}i=s=is(s,a),jr!==4&&(jr=2),Xs===null?Xs=[i]:Xs.push(i),i=u;do{switch(i.tag){case 3:i.flags|=65536,r&=-r,i.lanes|=r;var g=f1(i,s,r);Jy(i,g);break e;case 1:a=s;var v=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(_i===null||!_i.has(b)))){i.flags|=65536,r&=-r,i.lanes|=r;var w=h1(i,a,r);Jy(i,w);break e}}i=i.return}while(i!==null)}A1(n)}catch(_){r=_,xr===n&&n!==null&&(xr=n=n.return);continue}break}while(1)}function R1(){var t=nc.current;return nc.current=rc,t===null?rc:t}function Ep(){(jr===0||jr===3||jr===2)&&(jr=4),Fr===null||!(na&268435455)&&!(Gc&268435455)||fi(Fr,Xr)}function ac(t,r){var n=Nt;Nt|=2;var e=R1();(Fr!==t||Xr!==r)&&(Bo=null,Qi(t,r));do try{N_();break}catch(o){M1(t,o)}while(1);if(ap(),Nt=n,nc.current=e,xr!==null)throw Error(Xe(261));return Fr=null,Xr=0,jr}function N_(){for(;xr!==null;)I1(xr)}function F_(){for(;xr!==null&&!lw();)I1(xr)}function I1(t){var r=D1(t.alternate,t,kn);t.memoizedProps=t.pendingProps,r===null?A1(t):xr=r,bp.current=null}function A1(t){var r=t;do{var n=r.alternate;if(t=r.return,r.flags&32768){if(n=I_(n,r),n!==null){n.flags&=32767,xr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{jr=6,xr=null;return}}else if(n=R_(n,r,kn),n!==null){xr=n;return}if(r=r.sibling,r!==null){xr=r;return}xr=r=t}while(r!==null);jr===0&&(jr=5)}function zi(t,r,n){var e=zt,o=Hn.transition;try{Hn.transition=null,zt=1,B_(t,r,n,e)}finally{Hn.transition=o,zt=e}return null}function B_(t,r,n,e){do Ha();while(pi!==null);if(Nt&6)throw Error(Xe(327));n=t.finishedWork;var o=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Xe(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(bw(t,i),t===Fr&&(xr=Fr=null,Xr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||al||(al=!0,O1(Gl,function(){return Ha(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Hn.transition,Hn.transition=null;var u=zt;zt=1;var a=Nt;Nt|=4,bp.current=null,P_(t,n),C1(n,t),i_(Gf),Vl=!!Uf,Gf=Uf=null,t.current=n,D_(n),cw(),Nt=a,zt=u,Hn.transition=i}else t.current=n;if(al&&(al=!1,pi=t,ic=o),i=t.pendingLanes,i===0&&(_i=null),hw(n.stateNode),_n(t,yr()),r!==null)for(e=t.onRecoverableError,n=0;n<r.length;n++)o=r[n],e(o.value,{componentStack:o.stack,digest:o.digest});if(oc)throw oc=!1,t=sh,sh=null,t;return ic&1&&t.tag!==0&&Ha(),i=t.pendingLanes,i&1?t===uh?Ys++:(Ys=0,uh=t):Ys=0,Di(),null}function Ha(){if(pi!==null){var t=d0(ic),r=Hn.transition,n=zt;try{if(Hn.transition=null,zt=16>t?16:t,pi===null)var e=!1;else{if(t=pi,pi=null,ic=0,Nt&6)throw Error(Xe(331));var o=Nt;for(Nt|=4,st=t.current;st!==null;){var i=st,u=i.child;if(st.flags&16){var a=i.deletions;if(a!==null){for(var s=0;s<a.length;s++){var l=a[s];for(st=l;st!==null;){var h=st;switch(h.tag){case 0:case 11:case 15:$s(8,h,i)}var p=h.child;if(p!==null)p.return=h,st=p;else for(;st!==null;){h=st;var c=h.sibling,d=h.return;if(S1(h),h===l){st=null;break}if(c!==null){c.return=d,st=c;break}st=d}}}var f=i.alternate;if(f!==null){var m=f.child;if(m!==null){f.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(m!==null)}}st=i}}if(i.subtreeFlags&2064&&u!==null)u.return=i,st=u;else e:for(;st!==null;){if(i=st,i.flags&2048)switch(i.tag){case 0:case 11:case 15:$s(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,st=g;break e}st=i.return}}var v=t.current;for(st=v;st!==null;){u=st;var b=u.child;if(u.subtreeFlags&2064&&b!==null)b.return=u,st=b;else e:for(u=v;st!==null;){if(a=st,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Uc(9,a)}}catch(_){hr(a,a.return,_)}if(a===u){st=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,st=w;break e}st=a.return}}if(Nt=o,Di(),jo&&typeof jo.onPostCommitFiberRoot=="function")try{jo.onPostCommitFiberRoot(Ac,t)}catch{}e=!0}return e}finally{zt=n,Hn.transition=r}}return!1}function wg(t,r,n){r=is(n,r),r=f1(t,r,1),t=wi(t,r,1),r=fn(),t!==null&&(Eu(t,1,r),_n(t,r))}function hr(t,r,n){if(t.tag===3)wg(t,t,n);else for(;r!==null;){if(r.tag===3){wg(r,t,n);break}else if(r.tag===1){var e=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof e.componentDidCatch=="function"&&(_i===null||!_i.has(e))){t=is(n,t),t=h1(r,t,1),r=wi(r,t,1),t=fn(),r!==null&&(Eu(r,1,t),_n(r,t));break}}r=r.return}}function U_(t,r,n){var e=t.pingCache;e!==null&&e.delete(r),r=fn(),t.pingedLanes|=t.suspendedLanes&n,Fr===t&&(Xr&n)===n&&(jr===4||jr===3&&(Xr&130023424)===Xr&&500>yr()-wp?Qi(t,0):xp|=n),_n(t,r)}function P1(t,r){r===0&&(t.mode&1?(r=Ku,Ku<<=1,!(Ku&130023424)&&(Ku=4194304)):r=1);var n=fn();t=$o(t,r),t!==null&&(Eu(t,r,n),_n(t,n))}function G_(t){var r=t.memoizedState,n=0;r!==null&&(n=r.retryLane),P1(t,n)}function z_(t,r){var n=0;switch(t.tag){case 13:var e=t.stateNode,o=t.memoizedState;o!==null&&(n=o.retryLane);break;case 19:e=t.stateNode;break;default:throw Error(Xe(314))}e!==null&&e.delete(r),P1(t,n)}var D1;D1=function(t,r,n){if(t!==null)if(t.memoizedProps!==r.pendingProps||xn.current)bn=!0;else{if(!(t.lanes&n)&&!(r.flags&128))return bn=!1,M_(t,r,n);bn=!!(t.flags&131072)}else bn=!1,rr&&r.flags&1048576&&N0(r,Kl,r.index);switch(r.lanes=0,r.tag){case 2:var e=r.type;Al(t,r),t=r.pendingProps;var o=ts(r,ln.current);Wa(r,n),o=pp(null,r,e,t,o,n);var i=mp();return r.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,wn(e)?(i=!0,Xl(r)):i=!1,r.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,lp(r),o.updater=Fc,r.stateNode=o,o._reactInternals=r,Kf(r,e,t,n),r=Jf(null,r,e,!0,i,n)):(r.tag=0,rr&&i&&rp(r),dn(null,r,o,n),r=r.child),r;case 16:e=r.elementType;e:{switch(Al(t,r),t=r.pendingProps,o=e._init,e=o(e._payload),r.type=e,o=r.tag=W_(e),t=Jn(e,t),o){case 0:r=Zf(null,r,e,t,n);break e;case 1:r=dg(null,r,e,t,n);break e;case 11:r=lg(null,r,e,t,n);break e;case 14:r=cg(null,r,e,Jn(e.type,t),n);break e}throw Error(Xe(306,e,""))}return r;case 0:return e=r.type,o=r.pendingProps,o=r.elementType===e?o:Jn(e,o),Zf(t,r,e,o,n);case 1:return e=r.type,o=r.pendingProps,o=r.elementType===e?o:Jn(e,o),dg(t,r,e,o,n);case 3:e:{if(g1(r),t===null)throw Error(Xe(387));e=r.pendingProps,i=r.memoizedState,o=i.element,G0(t,r),Jl(r,e,null,n);var u=r.memoizedState;if(e=u.element,i.isDehydrated)if(i={element:e,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},r.updateQueue.baseState=i,r.memoizedState=i,r.flags&256){o=is(Error(Xe(423)),r),r=fg(t,r,e,n,o);break e}else if(e!==o){o=is(Error(Xe(424)),r),r=fg(t,r,e,n,o);break e}else for(Rn=xi(r.stateNode.containerInfo.firstChild),Dn=r,rr=!0,to=null,n=H0(r,null,e,n),r.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(rs(),e===o){r=Xo(t,r,n);break e}dn(t,r,e,n)}r=r.child}return r;case 5:return q0(r),t===null&&$f(r),e=r.type,o=r.pendingProps,i=t!==null?t.memoizedProps:null,u=o.children,zf(e,o)?u=null:i!==null&&zf(e,i)&&(r.flags|=32),y1(t,r),dn(t,r,u,n),r.child;case 6:return t===null&&$f(r),null;case 13:return v1(t,r,n);case 4:return cp(r,r.stateNode.containerInfo),e=r.pendingProps,t===null?r.child=ns(r,null,e,n):dn(t,r,e,n),r.child;case 11:return e=r.type,o=r.pendingProps,o=r.elementType===e?o:Jn(e,o),lg(t,r,e,o,n);case 7:return dn(t,r,r.pendingProps,n),r.child;case 8:return dn(t,r,r.pendingProps.children,n),r.child;case 12:return dn(t,r,r.pendingProps.children,n),r.child;case 10:e:{if(e=r.type._context,o=r.pendingProps,i=r.memoizedProps,u=o.value,Xt(Ql,e._currentValue),e._currentValue=u,i!==null)if(so(i.value,u)){if(i.children===o.children&&!xn.current){r=Xo(t,r,n);break e}}else for(i=r.child,i!==null&&(i.return=r);i!==null;){var a=i.dependencies;if(a!==null){u=i.child;for(var s=a.firstContext;s!==null;){if(s.context===e){if(i.tag===1){s=Wo(-1,n&-n),s.tag=2;var l=i.updateQueue;if(l!==null){l=l.shared;var h=l.pending;h===null?s.next=s:(s.next=h.next,h.next=s),l.pending=s}}i.lanes|=n,s=i.alternate,s!==null&&(s.lanes|=n),Xf(i.return,n,r),a.lanes|=n;break}s=s.next}}else if(i.tag===10)u=i.type===r.type?null:i.child;else if(i.tag===18){if(u=i.return,u===null)throw Error(Xe(341));u.lanes|=n,a=u.alternate,a!==null&&(a.lanes|=n),Xf(u,n,r),u=i.sibling}else u=i.child;if(u!==null)u.return=i;else for(u=i;u!==null;){if(u===r){u=null;break}if(i=u.sibling,i!==null){i.return=u.return,u=i;break}u=u.return}i=u}dn(t,r,o.children,n),r=r.child}return r;case 9:return o=r.type,e=r.pendingProps.children,Wa(r,n),o=qn(o),e=e(o),r.flags|=1,dn(t,r,e,n),r.child;case 14:return e=r.type,o=Jn(e,r.pendingProps),o=Jn(e.type,o),cg(t,r,e,o,n);case 15:return p1(t,r,r.type,r.pendingProps,n);case 17:return e=r.type,o=r.pendingProps,o=r.elementType===e?o:Jn(e,o),Al(t,r),r.tag=1,wn(e)?(t=!0,Xl(r)):t=!1,Wa(r,n),V0(r,e,o),Kf(r,e,o,n),Jf(null,r,e,!0,t,n);case 19:return b1(t,r,n);case 22:return m1(t,r,n)}throw Error(Xe(156,r.tag))};function O1(t,r){return s0(t,r)}function V_(t,r,n,e){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=e,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vn(t,r,n,e){return new V_(t,r,n,e)}function jp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function W_(t){if(typeof t=="function")return jp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Wh)return 11;if(t===Hh)return 14}return 2}function Ei(t,r){var n=t.alternate;return n===null?(n=Vn(t.tag,r,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=r,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,r=t.dependencies,n.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ol(t,r,n,e,o,i){var u=2;if(e=t,typeof t=="function")jp(t)&&(u=1);else if(typeof t=="string")u=5;else e:switch(t){case Ta:return Zi(n.children,o,i,r);case Vh:u=8,o|=8;break;case xf:return t=Vn(12,n,r,o|2),t.elementType=xf,t.lanes=i,t;case wf:return t=Vn(13,n,r,o),t.elementType=wf,t.lanes=i,t;case _f:return t=Vn(19,n,r,o),t.elementType=_f,t.lanes=i,t;case Wv:return zc(n,o,i,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case zv:u=10;break e;case Vv:u=9;break e;case Wh:u=11;break e;case Hh:u=14;break e;case li:u=16,e=null;break e}throw Error(Xe(130,t==null?t:typeof t,""))}return r=Vn(u,n,r,o),r.elementType=t,r.type=e,r.lanes=i,r}function Zi(t,r,n,e){return t=Vn(7,t,e,r),t.lanes=n,t}function zc(t,r,n,e){return t=Vn(22,t,e,r),t.elementType=Wv,t.lanes=n,t.stateNode={isHidden:!1},t}function Ud(t,r,n){return t=Vn(6,t,null,r),t.lanes=n,t}function Gd(t,r,n){return r=Vn(4,t.children!==null?t.children:[],t.key,r),r.lanes=n,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function H_(t,r,n,e,o){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wd(0),this.expirationTimes=wd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wd(0),this.identifierPrefix=e,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Cp(t,r,n,e,o,i,u,a,s){return t=new H_(t,r,n,a,s),r===1?(r=1,i===!0&&(r|=8)):r=0,i=Vn(3,null,null,r),t.current=i,i.stateNode=t,i.memoizedState={element:e,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},lp(i),t}function q_(t,r,n){var e=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ka,key:e==null?null:""+e,children:t,containerInfo:r,implementation:n}}function L1(t){if(!t)return Mi;t=t._reactInternals;e:{if(ua(t)!==t||t.tag!==1)throw Error(Xe(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(wn(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(Xe(171))}if(t.tag===1){var n=t.type;if(wn(n))return O0(t,n,r)}return r}function N1(t,r,n,e,o,i,u,a,s){return t=Cp(n,e,!0,t,o,i,u,a,s),t.context=L1(null),n=t.current,e=fn(),o=Si(n),i=Wo(e,o),i.callback=r??null,wi(n,i,o),t.current.lanes=o,Eu(t,o,e),_n(t,e),t}function Vc(t,r,n,e){var o=r.current,i=fn(),u=Si(o);return n=L1(n),r.context===null?r.context=n:r.pendingContext=n,r=Wo(i,u),r.payload={element:t},e=e===void 0?null:e,e!==null&&(r.callback=e),t=wi(o,r,u),t!==null&&(io(t,o,u,i),Ml(t,o,u)),u}function sc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function _g(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<r?n:r}}function kp(t,r){_g(t,r),(t=t.alternate)&&_g(t,r)}function $_(){return null}var F1=typeof reportError=="function"?reportError:function(t){console.error(t)};function Tp(t){this._internalRoot=t}Wc.prototype.render=Tp.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(Xe(409));Vc(t,r,null,null)};Wc.prototype.unmount=Tp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;oa(function(){Vc(null,t,null,null)}),r[qo]=null}};function Wc(t){this._internalRoot=t}Wc.prototype.unstable_scheduleHydration=function(t){if(t){var r=p0();t={blockedOn:null,target:t,priority:r};for(var n=0;n<di.length&&r!==0&&r<di[n].priority;n++);di.splice(n,0,t),n===0&&y0(t)}};function Mp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Hc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Sg(){}function X_(t,r,n,e,o){if(o){if(typeof e=="function"){var i=e;e=function(){var l=sc(u);i.call(l)}}var u=N1(r,e,t,0,null,!1,!1,"",Sg);return t._reactRootContainer=u,t[qo]=u.current,su(t.nodeType===8?t.parentNode:t),oa(),u}for(;o=t.lastChild;)t.removeChild(o);if(typeof e=="function"){var a=e;e=function(){var l=sc(s);a.call(l)}}var s=Cp(t,0,!1,null,null,!1,!1,"",Sg);return t._reactRootContainer=s,t[qo]=s.current,su(t.nodeType===8?t.parentNode:t),oa(function(){Vc(r,s,n,e)}),s}function qc(t,r,n,e,o){var i=n._reactRootContainer;if(i){var u=i;if(typeof o=="function"){var a=o;o=function(){var s=sc(u);a.call(s)}}Vc(r,u,t,o)}else u=X_(n,r,t,o,e);return sc(u)}f0=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var n=Bs(r.pendingLanes);n!==0&&(Xh(r,n|1),_n(r,yr()),!(Nt&6)&&(as=yr()+500,Di()))}break;case 13:oa(function(){var e=$o(t,1);if(e!==null){var o=fn();io(e,t,1,o)}}),kp(t,1)}};Yh=function(t){if(t.tag===13){var r=$o(t,134217728);if(r!==null){var n=fn();io(r,t,134217728,n)}kp(t,134217728)}};h0=function(t){if(t.tag===13){var r=Si(t),n=$o(t,r);if(n!==null){var e=fn();io(n,t,r,e)}kp(t,r)}};p0=function(){return zt};m0=function(t,r){var n=zt;try{return zt=t,r()}finally{zt=n}};Af=function(t,r,n){switch(r){case"input":if(jf(t,n),r=n.name,n.type==="radio"&&r!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<n.length;r++){var e=n[r];if(e!==t&&e.form===t.form){var o=Lc(e);if(!o)throw Error(Xe(90));qv(e),jf(e,o)}}}break;case"textarea":Xv(t,n);break;case"select":r=n.value,r!=null&&Ua(t,!!n.multiple,r,!1)}};t0=_p;r0=oa;var Y_={usingClientEntryPoint:!1,Events:[Cu,Aa,Lc,Jv,e0,_p]},As={findFiberByHostInstance:qi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},K_={bundleType:As.bundleType,version:As.version,rendererPackageName:As.rendererPackageName,rendererConfig:As.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Yo.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=i0(t),t===null?null:t.stateNode},findFiberByHostInstance:As.findFiberByHostInstance||$_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sl.isDisabled&&sl.supportsFiber)try{Ac=sl.inject(K_),jo=sl}catch{}}Nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y_;Nn.createPortal=function(t,r){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Mp(r))throw Error(Xe(200));return q_(t,r,null,n)};Nn.createRoot=function(t,r){if(!Mp(t))throw Error(Xe(299));var n=!1,e="",o=F1;return r!=null&&(r.unstable_strictMode===!0&&(n=!0),r.identifierPrefix!==void 0&&(e=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),r=Cp(t,1,!1,null,null,n,!1,e,o),t[qo]=r.current,su(t.nodeType===8?t.parentNode:t),new Tp(r)};Nn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(Xe(188)):(t=Object.keys(t).join(","),Error(Xe(268,t)));return t=i0(r),t=t===null?null:t.stateNode,t};Nn.flushSync=function(t){return oa(t)};Nn.hydrate=function(t,r,n){if(!Hc(r))throw Error(Xe(200));return qc(null,t,r,!0,n)};Nn.hydrateRoot=function(t,r,n){if(!Mp(t))throw Error(Xe(405));var e=n!=null&&n.hydratedSources||null,o=!1,i="",u=F1;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(u=n.onRecoverableError)),r=N1(r,null,t,1,n??null,o,!1,i,u),t[qo]=r.current,su(t),e)for(t=0;t<e.length;t++)n=e[t],o=n._getVersion,o=o(n._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[n,o]:r.mutableSourceEagerHydrationData.push(n,o);return new Wc(r)};Nn.render=function(t,r,n){if(!Hc(r))throw Error(Xe(200));return qc(null,t,r,!1,n)};Nn.unmountComponentAtNode=function(t){if(!Hc(t))throw Error(Xe(40));return t._reactRootContainer?(oa(function(){qc(null,null,t,!1,function(){t._reactRootContainer=null,t[qo]=null})}),!0):!1};Nn.unstable_batchedUpdates=_p;Nn.unstable_renderSubtreeIntoContainer=function(t,r,n,e){if(!Hc(n))throw Error(Xe(200));if(t==null||t._reactInternals===void 0)throw Error(Xe(38));return qc(t,r,n,!1,e)};Nn.version="18.2.0-next-9e3b772b8-20220608";(function(t){function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(n){console.error(n)}}r(),t.exports=Nn})($2);var Eg=gf;yf.createRoot=Eg.createRoot,yf.hydrateRoot=Eg.hydrateRoot;const Q_={Date:!0,RegExp:!0,String:!0,Number:!0};function B1(t,r,n={cyclesFix:!0},e=[]){let o=[];const i=Array.isArray(t);for(const a in t){const s=t[a],l=i?+a:a;if(!(a in r)){o.push({type:"REMOVE",path:[l],oldValue:t[a]});continue}const h=r[a],p=typeof s=="object"&&typeof h=="object";if(s&&h&&p&&!Q_[Object.getPrototypeOf(s).constructor.name]&&(!n.cyclesFix||!e.includes(s))){const c=B1(s,h,n,n.cyclesFix?e.concat([s]):[]);o.push.apply(o,c.map(d=>(d.path.unshift(l),d)))}else s!==h&&!(p&&(isNaN(s)?s+""==h+"":+s==+h))&&o.push({path:[l],type:"CHANGE",value:h,oldValue:s})}const u=Array.isArray(r);for(const a in r)a in t||o.push({type:"CREATE",path:[u?+a:a],value:r[a]});return o}function ul(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var dh={},Z_={get exports(){return dh},set exports(t){dh=t}};/*! p5.js v1.5.0 October 18, 2022 */(function(t,r){(function(n){t.exports=n()})(function(){var n;return function e(o,i,u){function a(h,p){if(!i[h]){if(!o[h]){var c=typeof ul=="function"&&ul;if(!p&&c)return c(h,!0);if(s)return s(h,!0);throw(p=new Error("Cannot find module '"+h+"'")).code="MODULE_NOT_FOUND",p}c=i[h]={exports:{}},o[h][0].call(c.exports,function(d){return a(o[h][1][d]||d)},c,c.exports,e,o,i,u)}return i[h].exports}for(var s=typeof ul=="function"&&ul,l=0;l<u.length;l++)a(u[l]);return a}({1:[function(e,o,i){i.byteLength=function(m){var m=c(m),f=m[0],m=m[1];return 3*(f+m)/4-m},i.toByteArray=function(d){var f,m,g=c(d),y=g[0],g=g[1],v=new s(function(_,j){return 3*(_+j)/4-j}(y,g)),b=0,w=0<g?y-4:y;for(m=0;m<w;m+=4)f=a[d.charCodeAt(m)]<<18|a[d.charCodeAt(m+1)]<<12|a[d.charCodeAt(m+2)]<<6|a[d.charCodeAt(m+3)],v[b++]=f>>16&255,v[b++]=f>>8&255,v[b++]=255&f;return g===2&&(f=a[d.charCodeAt(m)]<<2|a[d.charCodeAt(m+1)]>>4,v[b++]=255&f),g===1&&(f=a[d.charCodeAt(m)]<<10|a[d.charCodeAt(m+1)]<<4|a[d.charCodeAt(m+2)]>>2,v[b++]=f>>8&255,v[b++]=255&f),v},i.fromByteArray=function(d){for(var f,m=d.length,y=m%3,g=[],v=0,b=m-y;v<b;v+=16383)g.push(function(w,_,j){for(var E,T=[],R=_;R<j;R+=3)E=(w[R]<<16&16711680)+(w[R+1]<<8&65280)+(255&w[R+2]),T.push(function(M){return u[M>>18&63]+u[M>>12&63]+u[M>>6&63]+u[63&M]}(E));return T.join("")}(d,v,b<v+16383?b:v+16383));return y==1?(f=d[m-1],g.push(u[f>>2]+u[f<<4&63]+"==")):y==2&&(f=(d[m-2]<<8)+d[m-1],g.push(u[f>>10]+u[f>>4&63]+u[f<<2&63]+"=")),g.join("")};for(var u=[],a=[],s=typeof Uint8Array<"u"?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,p=l.length;h<p;++h)u[h]=l[h],a[l.charCodeAt(h)]=h;function c(d){var f=d.length;if(0<f%4)throw new Error("Invalid string. Length must be a multiple of 4");return d=d.indexOf("="),f=(d=d===-1?f:d)===f?0:4-d%4,[d,f]}a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},{}],2:[function(e,o,i){},{}],3:[function(e,o,i){arguments[4][2][0].apply(i,arguments)},{dup:2}],4:[function(e,o,i){(function(c){var a=e("base64-js"),s=e("ieee754"),l=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null,h=(i.Buffer=c,i.SlowBuffer=function(A){return+A!=A&&(A=0),c.alloc(+A)},i.INSPECT_MAX_BYTES=50,2147483647);function p(A){if(h<A)throw new RangeError('The value "'+A+'" is invalid for option "size"');return A=new Uint8Array(A),Object.setPrototypeOf(A,c.prototype),A}function c(A,O,U){if(typeof A!="number")return d(A,O,U);if(typeof O=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(A)}function d(A,O,U){if(typeof A=="string"){var Y=A,J=O;if(c.isEncoding(J=typeof J=="string"&&J!==""?J:"utf8"))return ae=0|v(Y,J),ue=p(ae),ue=(Y=ue.write(Y,J))!==ae?ue.slice(0,Y):ue;throw new TypeError("Unknown encoding: "+J)}if(ArrayBuffer.isView(A))return y(A);if(A!=null){if(V(A,ArrayBuffer)||A&&V(A.buffer,ArrayBuffer)){var ae=A,Y=O,ue=U;if(Y<0||ae.byteLength<Y)throw new RangeError('"offset" is outside of buffer bounds');if(ae.byteLength<Y+(ue||0))throw new RangeError('"length" is outside of buffer bounds');return ae=Y===void 0&&ue===void 0?new Uint8Array(ae):ue===void 0?new Uint8Array(ae,Y):new Uint8Array(ae,Y,ue),Object.setPrototypeOf(ae,c.prototype),ae}if(typeof A=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');if(J=A.valueOf&&A.valueOf(),J!=null&&J!==A)return c.from(J,O,U);var de=function(ne){{var le,me;if(c.isBuffer(ne))return le=0|g(ne.length),(me=p(le)).length!==0&&ne.copy(me,0,0,le),me}if(ne.length!==void 0)return typeof ne.length!="number"||X(ne.length)?p(0):y(ne);if(ne.type==="Buffer"&&Array.isArray(ne.data))return y(ne.data)}(A);if(de)return de;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof A[Symbol.toPrimitive]=="function")return c.from(A[Symbol.toPrimitive]("string"),O,U)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof A)}function f(A){if(typeof A!="number")throw new TypeError('"size" argument must be of type number');if(A<0)throw new RangeError('The value "'+A+'" is invalid for option "size"')}function m(A){return f(A),p(A<0?0:0|g(A))}function y(A){for(var O=A.length<0?0:0|g(A.length),U=p(O),Y=0;Y<O;Y+=1)U[Y]=255&A[Y];return U}function g(A){if(h<=A)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+h.toString(16)+" bytes");return 0|A}function v(A,O){if(c.isBuffer(A))return A.length;if(ArrayBuffer.isView(A)||V(A,ArrayBuffer))return A.byteLength;if(typeof A!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof A);var U=A.length,Y=2<arguments.length&&arguments[2]===!0;if(!Y&&U===0)return 0;for(var J=!1;;)switch(O){case"ascii":case"latin1":case"binary":return U;case"utf8":case"utf-8":return H(A).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*U;case"hex":return U>>>1;case"base64":return B(A).length;default:if(J)return Y?-1:H(A).length;O=(""+O).toLowerCase(),J=!0}}function b(A,O,U){var Y,J=!1;if((O=O===void 0||O<0?0:O)>this.length||(U=U===void 0||U>this.length?this.length:U)<=0||(U>>>=0)<=(O>>>=0))return"";for(A=A||"utf8";;)switch(A){case"hex":var ae=this,ge=O,ue=U,me=ae.length;(!ue||ue<0||me<ue)&&(ue=me);for(var de="",ne=ge=!ge||ge<0?0:ge;ne<ue;++ne)de+=te[ae[ne]];return de;case"utf8":case"utf-8":return R(this,O,U);case"ascii":var le=this,me=O,Q=U,pe="";Q=Math.min(le.length,Q);for(var ye=me;ye<Q;++ye)pe+=String.fromCharCode(127&le[ye]);return pe;case"latin1":case"binary":var we=this,ge=O,Pe=U,Ie="";Pe=Math.min(we.length,Pe);for(var Fe=ge;Fe<Pe;++Fe)Ie+=String.fromCharCode(we[Fe]);return Ie;case"base64":return Te=this,Y=U,($e=O)===0&&Y===Te.length?a.fromByteArray(Te):a.fromByteArray(Te.slice($e,Y));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var Te=O,$e=U,Je=this.slice(Te,$e),Ke="",at=0;at<Je.length;at+=2)Ke+=String.fromCharCode(Je[at]+256*Je[at+1]);return Ke;default:if(J)throw new TypeError("Unknown encoding: "+A);A=(A+"").toLowerCase(),J=!0}}function w(A,O,U){var Y=A[O];A[O]=A[U],A[U]=Y}function _(A,O,U,Y,J){if(A.length===0)return-1;if(typeof U=="string"?(Y=U,U=0):2147483647<U?U=2147483647:U<-2147483648&&(U=-2147483648),(U=(U=X(U=+U)?J?0:A.length-1:U)<0?A.length+U:U)>=A.length){if(J)return-1;U=A.length-1}else if(U<0){if(!J)return-1;U=0}if(typeof O=="string"&&(O=c.from(O,Y)),c.isBuffer(O))return O.length===0?-1:j(A,O,U,Y,J);if(typeof O=="number")return O&=255,typeof Uint8Array.prototype.indexOf=="function"?(J?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(A,O,U):j(A,[O],U,Y,J);throw new TypeError("val must be string, number or Buffer")}function j(A,O,U,Y,J){var ae=1,ue=A.length,de=O.length;if(Y!==void 0&&((Y=String(Y).toLowerCase())==="ucs2"||Y==="ucs-2"||Y==="utf16le"||Y==="utf-16le")){if(A.length<2||O.length<2)return-1;ue/=ae=2,de/=2,U/=2}function ne(ye,we){return ae===1?ye[we]:ye.readUInt16BE(we*ae)}if(J)for(var le=-1,me=U;me<ue;me++)if(ne(A,me)===ne(O,le===-1?0:me-le)){if(me-(le=le===-1?me:le)+1===de)return le*ae}else le!==-1&&(me-=me-le),le=-1;else for(me=U=ue<U+de?ue-de:U;0<=me;me--){for(var Q=!0,pe=0;pe<de;pe++)if(ne(A,me+pe)!==ne(O,pe)){Q=!1;break}if(Q)return me}return-1}function E(A,O,U,Y){return G(function(J){for(var ae=[],ue=0;ue<J.length;++ue)ae.push(255&J.charCodeAt(ue));return ae}(O),A,U,Y)}function T(A,O,U,Y){return G(function(J,ae){for(var ue,de,ne=[],le=0;le<J.length&&!((ae-=2)<0);++le)de=J.charCodeAt(le),ue=de>>8,de=de%256,ne.push(de),ne.push(ue);return ne}(O,A.length-U),A,U,Y)}function R(A,O,U){U=Math.min(A.length,U);for(var Y=[],J=O;J<U;){var ae,ue,de,ne,le=A[J],me=null,Q=239<le?4:223<le?3:191<le?2:1;if(J+Q<=U)switch(Q){case 1:le<128&&(me=le);break;case 2:(192&(ae=A[J+1]))==128&&127<(ne=(31&le)<<6|63&ae)&&(me=ne);break;case 3:ae=A[J+1],ue=A[J+2],(192&ae)==128&&(192&ue)==128&&2047<(ne=(15&le)<<12|(63&ae)<<6|63&ue)&&(ne<55296||57343<ne)&&(me=ne);break;case 4:ae=A[J+1],ue=A[J+2],de=A[J+3],(192&ae)==128&&(192&ue)==128&&(192&de)==128&&65535<(ne=(15&le)<<18|(63&ae)<<12|(63&ue)<<6|63&de)&&ne<1114112&&(me=ne)}me===null?(me=65533,Q=1):65535<me&&(me-=65536,Y.push(me>>>10&1023|55296),me=56320|1023&me),Y.push(me),J+=Q}var pe=Y,ye=pe.length;if(ye<=M)return String.fromCharCode.apply(String,pe);for(var we="",ge=0;ge<ye;)we+=String.fromCharCode.apply(String,pe.slice(ge,ge+=M));return we}i.kMaxLength=h,(c.TYPED_ARRAY_SUPPORT=function(){try{var A=new Uint8Array(1),O={foo:function(){return 42}};return Object.setPrototypeOf(O,Uint8Array.prototype),Object.setPrototypeOf(A,O),A.foo()===42}catch{return!1}}())||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),c.poolSize=8192,c.from=d,Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(A,O,U){return O=O,U=U,f(A=A),!(A<=0)&&O!==void 0?typeof U=="string"?p(A).fill(O,U):p(A).fill(O):p(A)},c.allocUnsafe=m,c.allocUnsafeSlow=m,c.isBuffer=function(A){return A!=null&&A._isBuffer===!0&&A!==c.prototype},c.compare=function(A,O){if(V(A,Uint8Array)&&(A=c.from(A,A.offset,A.byteLength)),V(O,Uint8Array)&&(O=c.from(O,O.offset,O.byteLength)),!c.isBuffer(A)||!c.isBuffer(O))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(A===O)return 0;for(var U=A.length,Y=O.length,J=0,ae=Math.min(U,Y);J<ae;++J)if(A[J]!==O[J]){U=A[J],Y=O[J];break}return U<Y?-1:Y<U?1:0},c.isEncoding=function(A){switch(String(A).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(A,O){if(!Array.isArray(A))throw new TypeError('"list" argument must be an Array of Buffers');if(A.length===0)return c.alloc(0);if(O===void 0)for(J=O=0;J<A.length;++J)O+=A[J].length;for(var U=c.allocUnsafe(O),Y=0,J=0;J<A.length;++J){var ae=A[J];if(V(ae,Uint8Array)&&(ae=c.from(ae)),!c.isBuffer(ae))throw new TypeError('"list" argument must be an Array of Buffers');ae.copy(U,Y),Y+=ae.length}return U},c.byteLength=v,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var A=this.length;if(A%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var O=0;O<A;O+=2)w(this,O,O+1);return this},c.prototype.swap32=function(){var A=this.length;if(A%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var O=0;O<A;O+=4)w(this,O,O+3),w(this,O+1,O+2);return this},c.prototype.swap64=function(){var A=this.length;if(A%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var O=0;O<A;O+=8)w(this,O,O+7),w(this,O+1,O+6),w(this,O+2,O+5),w(this,O+3,O+4);return this},c.prototype.toLocaleString=c.prototype.toString=function(){var A=this.length;return A===0?"":arguments.length===0?R(this,0,A):b.apply(this,arguments)},c.prototype.equals=function(A){if(c.isBuffer(A))return this===A||c.compare(this,A)===0;throw new TypeError("Argument must be a Buffer")},c.prototype.inspect=function(){var O="",A=i.INSPECT_MAX_BYTES,O=this.toString("hex",0,A).replace(/(.{2})/g,"$1 ").trim();return this.length>A&&(O+=" ... "),"<Buffer "+O+">"},l&&(c.prototype[l]=c.prototype.inspect),c.prototype.compare=function(A,O,U,Y,J){if(V(A,Uint8Array)&&(A=c.from(A,A.offset,A.byteLength)),!c.isBuffer(A))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof A);if(U===void 0&&(U=A?A.length:0),Y===void 0&&(Y=0),J===void 0&&(J=this.length),(O=O===void 0?0:O)<0||U>A.length||Y<0||J>this.length)throw new RangeError("out of range index");if(J<=Y&&U<=O)return 0;if(J<=Y)return-1;if(U<=O)return 1;if(this===A)return 0;for(var ae=(J>>>=0)-(Y>>>=0),ue=(U>>>=0)-(O>>>=0),de=Math.min(ae,ue),ne=this.slice(Y,J),le=A.slice(O,U),me=0;me<de;++me)if(ne[me]!==le[me]){ae=ne[me],ue=le[me];break}return ae<ue?-1:ue<ae?1:0},c.prototype.includes=function(A,O,U){return this.indexOf(A,O,U)!==-1},c.prototype.indexOf=function(A,O,U){return _(this,A,O,U,!0)},c.prototype.lastIndexOf=function(A,O,U){return _(this,A,O,U,!1)},c.prototype.write=function(A,O,U,Y){if(O===void 0)Y="utf8",U=this.length,O=0;else if(U===void 0&&typeof O=="string")Y=O,U=this.length,O=0;else{if(!isFinite(O))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");O>>>=0,isFinite(U)?(U>>>=0,Y===void 0&&(Y="utf8")):(Y=U,U=void 0)}var J=this.length-O;if((U===void 0||J<U)&&(U=J),0<A.length&&(U<0||O<0)||O>this.length)throw new RangeError("Attempt to write outside buffer bounds");Y=Y||"utf8";for(var ae,ue,de,ne=!1;;)switch(Y){case"hex":var le=this,me=A,Q=O,pe=U,ye=(Q=Number(Q)||0,le.length-Q);(!pe||ye<(pe=Number(pe)))&&(pe=ye),(ye=me.length)/2<pe&&(pe=ye/2);for(var we=0;we<pe;++we){var ge=parseInt(me.substr(2*we,2),16);if(X(ge))return we;le[Q+we]=ge}return we;case"utf8":case"utf-8":return ye=O,de=U,G(H(A,(ue=this).length-ye),ue,ye,de);case"ascii":return E(this,A,O,U);case"latin1":case"binary":return E(this,A,O,U);case"base64":return ue=this,de=O,ae=U,G(B(A),ue,de,ae);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,A,O,U);default:if(ne)throw new TypeError("Unknown encoding: "+Y);Y=(""+Y).toLowerCase(),ne=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var M=4096;function I(A,O,U){if(A%1!=0||A<0)throw new RangeError("offset is not uint");if(U<A+O)throw new RangeError("Trying to access beyond buffer length")}function D(A,O,U,Y,J,ae){if(!c.isBuffer(A))throw new TypeError('"buffer" argument must be a Buffer instance');if(J<O||O<ae)throw new RangeError('"value" argument is out of bounds');if(U+Y>A.length)throw new RangeError("Index out of range")}function L(A,O,U,Y){if(U+Y>A.length)throw new RangeError("Index out of range");if(U<0)throw new RangeError("Index out of range")}function N(A,O,U,Y,J){return O=+O,U>>>=0,J||L(A,0,U,4),s.write(A,O,U,Y,23,4),U+4}function W(A,O,U,Y,J){return O=+O,U>>>=0,J||L(A,0,U,8),s.write(A,O,U,Y,52,8),U+8}c.prototype.slice=function(A,O){var U=this.length,U=((A=~~A)<0?(A+=U)<0&&(A=0):U<A&&(A=U),(O=O===void 0?U:~~O)<0?(O+=U)<0&&(O=0):U<O&&(O=U),O<A&&(O=A),this.subarray(A,O));return Object.setPrototypeOf(U,c.prototype),U},c.prototype.readUIntLE=function(A,O,U){A>>>=0,O>>>=0,U||I(A,O,this.length);for(var Y=this[A],J=1,ae=0;++ae<O&&(J*=256);)Y+=this[A+ae]*J;return Y},c.prototype.readUIntBE=function(A,O,U){A>>>=0,O>>>=0,U||I(A,O,this.length);for(var Y=this[A+--O],J=1;0<O&&(J*=256);)Y+=this[A+--O]*J;return Y},c.prototype.readUInt8=function(A,O){return A>>>=0,O||I(A,1,this.length),this[A]},c.prototype.readUInt16LE=function(A,O){return A>>>=0,O||I(A,2,this.length),this[A]|this[A+1]<<8},c.prototype.readUInt16BE=function(A,O){return A>>>=0,O||I(A,2,this.length),this[A]<<8|this[A+1]},c.prototype.readUInt32LE=function(A,O){return A>>>=0,O||I(A,4,this.length),(this[A]|this[A+1]<<8|this[A+2]<<16)+16777216*this[A+3]},c.prototype.readUInt32BE=function(A,O){return A>>>=0,O||I(A,4,this.length),16777216*this[A]+(this[A+1]<<16|this[A+2]<<8|this[A+3])},c.prototype.readIntLE=function(A,O,U){A>>>=0,O>>>=0,U||I(A,O,this.length);for(var Y=this[A],J=1,ae=0;++ae<O&&(J*=256);)Y+=this[A+ae]*J;return(J*=128)<=Y&&(Y-=Math.pow(2,8*O)),Y},c.prototype.readIntBE=function(A,O,U){A>>>=0,O>>>=0,U||I(A,O,this.length);for(var Y=O,J=1,ae=this[A+--Y];0<Y&&(J*=256);)ae+=this[A+--Y]*J;return(J*=128)<=ae&&(ae-=Math.pow(2,8*O)),ae},c.prototype.readInt8=function(A,O){return A>>>=0,O||I(A,1,this.length),128&this[A]?-1*(255-this[A]+1):this[A]},c.prototype.readInt16LE=function(A,O){return A>>>=0,O||I(A,2,this.length),O=this[A]|this[A+1]<<8,32768&O?4294901760|O:O},c.prototype.readInt16BE=function(A,O){return A>>>=0,O||I(A,2,this.length),O=this[A+1]|this[A]<<8,32768&O?4294901760|O:O},c.prototype.readInt32LE=function(A,O){return A>>>=0,O||I(A,4,this.length),this[A]|this[A+1]<<8|this[A+2]<<16|this[A+3]<<24},c.prototype.readInt32BE=function(A,O){return A>>>=0,O||I(A,4,this.length),this[A]<<24|this[A+1]<<16|this[A+2]<<8|this[A+3]},c.prototype.readFloatLE=function(A,O){return A>>>=0,O||I(A,4,this.length),s.read(this,A,!0,23,4)},c.prototype.readFloatBE=function(A,O){return A>>>=0,O||I(A,4,this.length),s.read(this,A,!1,23,4)},c.prototype.readDoubleLE=function(A,O){return A>>>=0,O||I(A,8,this.length),s.read(this,A,!0,52,8)},c.prototype.readDoubleBE=function(A,O){return A>>>=0,O||I(A,8,this.length),s.read(this,A,!1,52,8)},c.prototype.writeUIntLE=function(A,O,U,Y){A=+A,O>>>=0,U>>>=0,Y||D(this,A,O,U,Math.pow(2,8*U)-1,0);var J=1,ae=0;for(this[O]=255&A;++ae<U&&(J*=256);)this[O+ae]=A/J&255;return O+U},c.prototype.writeUIntBE=function(A,O,U,Y){A=+A,O>>>=0,U>>>=0,Y||D(this,A,O,U,Math.pow(2,8*U)-1,0);var J=U-1,ae=1;for(this[O+J]=255&A;0<=--J&&(ae*=256);)this[O+J]=A/ae&255;return O+U},c.prototype.writeUInt8=function(A,O,U){return A=+A,O>>>=0,U||D(this,A,O,1,255,0),this[O]=255&A,O+1},c.prototype.writeUInt16LE=function(A,O,U){return A=+A,O>>>=0,U||D(this,A,O,2,65535,0),this[O]=255&A,this[O+1]=A>>>8,O+2},c.prototype.writeUInt16BE=function(A,O,U){return A=+A,O>>>=0,U||D(this,A,O,2,65535,0),this[O]=A>>>8,this[O+1]=255&A,O+2},c.prototype.writeUInt32LE=function(A,O,U){return A=+A,O>>>=0,U||D(this,A,O,4,4294967295,0),this[O+3]=A>>>24,this[O+2]=A>>>16,this[O+1]=A>>>8,this[O]=255&A,O+4},c.prototype.writeUInt32BE=function(A,O,U){return A=+A,O>>>=0,U||D(this,A,O,4,4294967295,0),this[O]=A>>>24,this[O+1]=A>>>16,this[O+2]=A>>>8,this[O+3]=255&A,O+4},c.prototype.writeIntLE=function(A,O,U,Y){A=+A,O>>>=0,Y||D(this,A,O,U,(Y=Math.pow(2,8*U-1))-1,-Y);var J=0,ae=1,ue=0;for(this[O]=255&A;++J<U&&(ae*=256);)A<0&&ue===0&&this[O+J-1]!==0&&(ue=1),this[O+J]=(A/ae>>0)-ue&255;return O+U},c.prototype.writeIntBE=function(A,O,U,Y){A=+A,O>>>=0,Y||D(this,A,O,U,(Y=Math.pow(2,8*U-1))-1,-Y);var J=U-1,ae=1,ue=0;for(this[O+J]=255&A;0<=--J&&(ae*=256);)A<0&&ue===0&&this[O+J+1]!==0&&(ue=1),this[O+J]=(A/ae>>0)-ue&255;return O+U},c.prototype.writeInt8=function(A,O,U){return A=+A,O>>>=0,U||D(this,A,O,1,127,-128),this[O]=255&(A=A<0?255+A+1:A),O+1},c.prototype.writeInt16LE=function(A,O,U){return A=+A,O>>>=0,U||D(this,A,O,2,32767,-32768),this[O]=255&A,this[O+1]=A>>>8,O+2},c.prototype.writeInt16BE=function(A,O,U){return A=+A,O>>>=0,U||D(this,A,O,2,32767,-32768),this[O]=A>>>8,this[O+1]=255&A,O+2},c.prototype.writeInt32LE=function(A,O,U){return A=+A,O>>>=0,U||D(this,A,O,4,2147483647,-2147483648),this[O]=255&A,this[O+1]=A>>>8,this[O+2]=A>>>16,this[O+3]=A>>>24,O+4},c.prototype.writeInt32BE=function(A,O,U){return A=+A,O>>>=0,U||D(this,A,O,4,2147483647,-2147483648),this[O]=(A=A<0?4294967295+A+1:A)>>>24,this[O+1]=A>>>16,this[O+2]=A>>>8,this[O+3]=255&A,O+4},c.prototype.writeFloatLE=function(A,O,U){return N(this,A,O,!0,U)},c.prototype.writeFloatBE=function(A,O,U){return N(this,A,O,!1,U)},c.prototype.writeDoubleLE=function(A,O,U){return W(this,A,O,!0,U)},c.prototype.writeDoubleBE=function(A,O,U){return W(this,A,O,!1,U)},c.prototype.copy=function(A,O,U,Y){if(!c.isBuffer(A))throw new TypeError("argument should be a Buffer");if(U=U||0,Y||Y===0||(Y=this.length),O>=A.length&&(O=A.length),(Y=0<Y&&Y<U?U:Y)===U||A.length===0||this.length===0)return 0;if((O=O||0)<0)throw new RangeError("targetStart out of bounds");if(U<0||U>=this.length)throw new RangeError("Index out of range");if(Y<0)throw new RangeError("sourceEnd out of bounds");Y>this.length&&(Y=this.length);var J=(Y=A.length-O<Y-U?A.length-O+U:Y)-U;if(this===A&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(O,U,Y);else if(this===A&&U<O&&O<Y)for(var ae=J-1;0<=ae;--ae)A[ae+O]=this[ae+U];else Uint8Array.prototype.set.call(A,this.subarray(U,Y),O);return J},c.prototype.fill=function(A,O,U,Y){if(typeof A=="string"){if(typeof O=="string"?(Y=O,O=0,U=this.length):typeof U=="string"&&(Y=U,U=this.length),Y!==void 0&&typeof Y!="string")throw new TypeError("encoding must be a string");if(typeof Y=="string"&&!c.isEncoding(Y))throw new TypeError("Unknown encoding: "+Y);var J;A.length===1&&(J=A.charCodeAt(0),(Y==="utf8"&&J<128||Y==="latin1")&&(A=J))}else typeof A=="number"?A&=255:typeof A=="boolean"&&(A=Number(A));if(O<0||this.length<O||this.length<U)throw new RangeError("Out of range index");var ae;if(!(U<=O))if(O>>>=0,U=U===void 0?this.length:U>>>0,typeof(A=A||0)=="number")for(ae=O;ae<U;++ae)this[ae]=A;else{var ue=c.isBuffer(A)?A:c.from(A,Y),de=ue.length;if(de===0)throw new TypeError('The value "'+A+'" is invalid for argument "value"');for(ae=0;ae<U-O;++ae)this[ae+O]=ue[ae%de]}return this};var q=/[^+/0-9A-Za-z-_]/g;function H(A,O){O=O||1/0;for(var U,Y=A.length,J=null,ae=[],ue=0;ue<Y;++ue){if(55295<(U=A.charCodeAt(ue))&&U<57344){if(!J){if(56319<U){-1<(O-=3)&&ae.push(239,191,189);continue}if(ue+1===Y){-1<(O-=3)&&ae.push(239,191,189);continue}J=U;continue}if(U<56320){-1<(O-=3)&&ae.push(239,191,189),J=U;continue}U=65536+(J-55296<<10|U-56320)}else J&&-1<(O-=3)&&ae.push(239,191,189);if(J=null,U<128){if(--O<0)break;ae.push(U)}else if(U<2048){if((O-=2)<0)break;ae.push(U>>6|192,63&U|128)}else if(U<65536){if((O-=3)<0)break;ae.push(U>>12|224,U>>6&63|128,63&U|128)}else{if(!(U<1114112))throw new Error("Invalid code point");if((O-=4)<0)break;ae.push(U>>18|240,U>>12&63|128,U>>6&63|128,63&U|128)}}return ae}function B(A){return a.toByteArray(function(O){if((O=(O=O.split("=")[0]).trim().replace(q,"")).length<2)return"";for(;O.length%4!=0;)O+="=";return O}(A))}function G(A,O,U,Y){for(var J=0;J<Y&&!(J+U>=O.length||J>=A.length);++J)O[J+U]=A[J];return J}function V(A,O){return A instanceof O||A!=null&&A.constructor!=null&&A.constructor.name!=null&&A.constructor.name===O.name}function X(A){return A!=A}var te=function(){for(var A="0123456789abcdef",O=new Array(256),U=0;U<16;++U)for(var Y=16*U,J=0;J<16;++J)O[Y+J]=A[U]+A[J];return O}()}).call(this,e("buffer").Buffer)},{"base64-js":1,buffer:4,ieee754:238}],5:[function(e,o,i){o.exports=function(u){if(typeof u!="function")throw TypeError(String(u)+" is not a function");return u}},{}],6:[function(e,o,i){var u=e("../internals/is-object");o.exports=function(a){if(u(a)||a===null)return a;throw TypeError("Can't set "+String(a)+" as a prototype")}},{"../internals/is-object":74}],7:[function(s,o,i){var u=s("../internals/well-known-symbol"),a=s("../internals/object-create"),s=s("../internals/object-define-property"),l=u("unscopables"),h=Array.prototype;h[l]==null&&s.f(h,l,{configurable:!0,value:a(null)}),o.exports=function(p){h[l][p]=!0}},{"../internals/object-create":90,"../internals/object-define-property":92,"../internals/well-known-symbol":146}],8:[function(e,o,i){var u=e("../internals/string-multibyte").charAt;o.exports=function(a,s,l){return s+(l?u(a,s).length:1)}},{"../internals/string-multibyte":123}],9:[function(e,o,i){o.exports=function(u,a,s){if(u instanceof a)return u;throw TypeError("Incorrect "+(s?s+" ":"")+"invocation")}},{}],10:[function(e,o,i){var u=e("../internals/is-object");o.exports=function(a){if(u(a))return a;throw TypeError(String(a)+" is not an object")}},{"../internals/is-object":74}],11:[function(e,o,i){o.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},{}],12:[function(L,o,i){function u(W){return p(W)&&c(N,d(W))}var a,s=L("../internals/array-buffer-native"),l=L("../internals/descriptors"),h=L("../internals/global"),p=L("../internals/is-object"),c=L("../internals/has"),d=L("../internals/classof"),f=L("../internals/create-non-enumerable-property"),m=L("../internals/redefine"),y=L("../internals/object-define-property").f,g=L("../internals/object-get-prototype-of"),v=L("../internals/object-set-prototype-of"),M=L("../internals/well-known-symbol"),L=L("../internals/uid"),b=h.Int8Array,w=b&&b.prototype,_=h.Uint8ClampedArray,_=_&&_.prototype,j=b&&g(b),E=w&&g(w),T=Object.prototype,R=T.isPrototypeOf,M=M("toStringTag"),I=L("TYPED_ARRAY_TAG"),D=s&&!!v&&d(h.opera)!=="Opera",L=!1,N={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};for(a in N)h[a]||(D=!1);if((!D||typeof j!="function"||j===Function.prototype)&&(j=function(){throw TypeError("Incorrect invocation")},D))for(a in N)h[a]&&v(h[a],j);if((!D||!E||E===T)&&(E=j.prototype,D))for(a in N)h[a]&&v(h[a].prototype,E);if(D&&g(_)!==E&&v(_,E),l&&!c(E,M))for(a in L=!0,y(E,M,{get:function(){return p(this)?this[I]:void 0}}),N)h[a]&&f(h[a],I,a);o.exports={NATIVE_ARRAY_BUFFER_VIEWS:D,TYPED_ARRAY_TAG:L&&I,aTypedArray:function(W){if(u(W))return W;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(W){if(v){if(R.call(j,W))return W}else for(var q in N)if(c(N,a)&&(q=h[q],q&&(W===q||R.call(q,W))))return W;throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(W,q,H){if(l){if(H)for(var B in N)B=h[B],B&&c(B.prototype,W)&&delete B.prototype[W];E[W]&&!H||m(E,W,!H&&D&&w[W]||q)}},exportTypedArrayStaticMethod:function(W,q,H){var B,G;if(l){if(v){if(H)for(B in N)(G=h[B])&&c(G,W)&&delete G[W];if(j[W]&&!H)return;try{return m(j,W,!H&&D&&b[W]||q)}catch{}}for(B in N)!(G=h[B])||G[W]&&!H||m(G,W,q)}},isView:function(W){return W=d(W),W==="DataView"||c(N,W)},isTypedArray:u,TypedArray:j,TypedArrayPrototype:E}},{"../internals/array-buffer-native":11,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/global":59,"../internals/has":60,"../internals/is-object":74,"../internals/object-define-property":92,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine":108,"../internals/uid":143,"../internals/well-known-symbol":146}],13:[function(U,o,i){function u(Q){return[255&Q]}function a(Q){return[255&Q,Q>>8&255]}function s(Q){return[255&Q,Q>>8&255,Q>>16&255,Q>>24&255]}function l(Q){return Q[3]<<24|Q[2]<<16|Q[1]<<8|Q[0]}function h(Q){return ae(Q,23,4)}function p(Q){return ae(Q,52,8)}function c(Q,pe){L(Q[V],pe,{get:function(){return q(this)[pe]}})}function d(Ie,pe,Pe,we){if(Pe=T(Pe),Ie=q(Ie),Pe+pe>Ie.byteLength)throw J(X);var ge=q(Ie.buffer).bytes,Pe=Pe+Ie.byteOffset,Ie=ge.slice(Pe,Pe+pe);return we?Ie:Ie.reverse()}function f(Q,pe,ye,we,ge,Pe){if(ye=T(ye),Q=q(Q),ye+pe>Q.byteLength)throw J(X);for(var Ie=q(Q.buffer).bytes,Fe=ye+Q.byteOffset,Te=we(+ge),$e=0;$e<pe;$e++)Ie[Fe+$e]=Te[Pe?$e:pe-$e-1]}var m=U("../internals/global"),y=U("../internals/descriptors"),g=U("../internals/array-buffer-native"),v=U("../internals/create-non-enumerable-property"),b=U("../internals/redefine-all"),w=U("../internals/fails"),_=U("../internals/an-instance"),j=U("../internals/to-integer"),E=U("../internals/to-length"),T=U("../internals/to-index"),R=U("../internals/ieee754"),M=U("../internals/object-get-prototype-of"),I=U("../internals/object-set-prototype-of"),D=U("../internals/object-get-own-property-names").f,L=U("../internals/object-define-property").f,N=U("../internals/array-fill"),W=U("../internals/set-to-string-tag"),U=U("../internals/internal-state"),q=U.get,H=U.set,B="ArrayBuffer",G="DataView",V="prototype",X="Wrong index",te=m[B],A=te,O=m[G],U=O&&O[V],Y=Object.prototype,J=m.RangeError,ae=R.pack,ue=R.unpack;if(g){if(!w(function(){te(1)})||!w(function(){new te(-1)})||w(function(){return new te,new te(1.5),new te(NaN),te.name!=B})){for(var de,m=(A=function(ye){return _(this,A),new te(T(ye))})[V]=te[V],ne=D(te),le=0;ne.length>le;)(de=ne[le++])in A||v(A,de,te[de]);m.constructor=A}I&&M(U)!==Y&&I(U,Y);var R=new O(new A(2)),me=U.setInt8;R.setInt8(0,2147483648),R.setInt8(1,2147483649),!R.getInt8(0)&&R.getInt8(1)||b(U,{setInt8:function(pe,ye){me.call(this,pe,ye<<24>>24)},setUint8:function(pe,ye){me.call(this,pe,ye<<24>>24)}},{unsafe:!0})}else A=function(Q){_(this,A,B),Q=T(Q),H(this,{bytes:N.call(new Array(Q),0),byteLength:Q}),y||(this.byteLength=Q)},O=function(Q,ge,ye){_(this,O,G),_(Q,A,G);var we=q(Q).byteLength,ge=j(ge);if(ge<0||we<ge)throw J("Wrong offset");if(we<ge+(ye=ye===void 0?we-ge:E(ye)))throw J("Wrong length");H(this,{buffer:Q,byteLength:ye,byteOffset:ge}),y||(this.buffer=Q,this.byteLength=ye,this.byteOffset=ge)},y&&(c(A,"byteLength"),c(O,"buffer"),c(O,"byteLength"),c(O,"byteOffset")),b(O[V],{getInt8:function(Q){return d(this,1,Q)[0]<<24>>24},getUint8:function(Q){return d(this,1,Q)[0]},getInt16:function(Q){return Q=d(this,2,Q,1<arguments.length?arguments[1]:void 0),(Q[1]<<8|Q[0])<<16>>16},getUint16:function(Q){return Q=d(this,2,Q,1<arguments.length?arguments[1]:void 0),Q[1]<<8|Q[0]},getInt32:function(Q){return l(d(this,4,Q,1<arguments.length?arguments[1]:void 0))},getUint32:function(Q){return l(d(this,4,Q,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(Q){return ue(d(this,4,Q,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(Q){return ue(d(this,8,Q,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(Q,pe){f(this,1,Q,u,pe)},setUint8:function(Q,pe){f(this,1,Q,u,pe)},setInt16:function(Q,pe){f(this,2,Q,a,pe,2<arguments.length?arguments[2]:void 0)},setUint16:function(Q,pe){f(this,2,Q,a,pe,2<arguments.length?arguments[2]:void 0)},setInt32:function(Q,pe){f(this,4,Q,s,pe,2<arguments.length?arguments[2]:void 0)},setUint32:function(Q,pe){f(this,4,Q,s,pe,2<arguments.length?arguments[2]:void 0)},setFloat32:function(Q,pe){f(this,4,Q,h,pe,2<arguments.length?arguments[2]:void 0)},setFloat64:function(Q,pe){f(this,8,Q,p,pe,2<arguments.length?arguments[2]:void 0)}});W(A,B),W(O,G),o.exports={ArrayBuffer:A,DataView:O}},{"../internals/an-instance":9,"../internals/array-buffer-native":11,"../internals/array-fill":15,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":59,"../internals/ieee754":65,"../internals/internal-state":70,"../internals/object-define-property":92,"../internals/object-get-own-property-names":95,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine-all":107,"../internals/set-to-string-tag":117,"../internals/to-index":131,"../internals/to-integer":133,"../internals/to-length":134}],14:[function(e,o,i){var u=e("../internals/to-object"),a=e("../internals/to-absolute-index"),s=e("../internals/to-length"),l=Math.min;o.exports=[].copyWithin||function(y,p){var c=u(this),d=s(c.length),f=a(y,d),m=a(p,d),y=2<arguments.length?arguments[2]:void 0,g=l((y===void 0?d:a(y,d))-m,d-f),v=1;for(m<f&&f<m+g&&(v=-1,m+=g-1,f+=g-1);0<g--;)m in c?c[f]=c[m]:delete c[f],f+=v,m+=v;return c}},{"../internals/to-absolute-index":130,"../internals/to-length":134,"../internals/to-object":135}],15:[function(e,o,i){var u=e("../internals/to-object"),a=e("../internals/to-absolute-index"),s=e("../internals/to-length");o.exports=function(l){for(var h=u(this),p=s(h.length),d=arguments.length,c=a(1<d?arguments[1]:void 0,p),d=2<d?arguments[2]:void 0,f=d===void 0?p:a(d,p);c<f;)h[c++]=l;return h}},{"../internals/to-absolute-index":130,"../internals/to-length":134,"../internals/to-object":135}],16:[function(s,o,i){var u=s("../internals/array-iteration").forEach,a=s("../internals/array-method-is-strict"),s=s("../internals/array-method-uses-to-length"),a=a("forEach"),s=s("forEach");o.exports=a&&s?[].forEach:function(l){return u(this,l,1<arguments.length?arguments[1]:void 0)}},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23}],17:[function(e,o,i){var u=e("../internals/function-bind-context"),a=e("../internals/to-object"),s=e("../internals/call-with-safe-iteration-closing"),l=e("../internals/is-array-iterator-method"),h=e("../internals/to-length"),p=e("../internals/create-property"),c=e("../internals/get-iterator-method");o.exports=function(_){var f,m,y,g,v,b,w=a(_),_=typeof this=="function"?this:Array,j=arguments.length,E=1<j?arguments[1]:void 0,T=E!==void 0,R=c(w),M=0;if(T&&(E=u(E,2<j?arguments[2]:void 0,2)),R==null||_==Array&&l(R))for(m=new _(f=h(w.length));M<f;M++)b=T?E(w[M],M):w[M],p(m,M,b);else for(v=(g=R.call(w)).next,m=new _;!(y=v.call(g)).done;M++)b=T?s(g,E,[y.value,M],!0):y.value,p(m,M,b);return m.length=M,m}},{"../internals/call-with-safe-iteration-closing":26,"../internals/create-property":40,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":134,"../internals/to-object":135}],18:[function(e,o,i){function u(h){return function(p,c,d){var f,m=a(p),y=s(m.length),g=l(d,y);if(h&&c!=c){for(;g<y;)if((f=m[g++])!=f)return!0}else for(;g<y;g++)if((h||g in m)&&m[g]===c)return h||g||0;return!h&&-1}}var a=e("../internals/to-indexed-object"),s=e("../internals/to-length"),l=e("../internals/to-absolute-index");o.exports={includes:u(!0),indexOf:u(!1)}},{"../internals/to-absolute-index":130,"../internals/to-indexed-object":132,"../internals/to-length":134}],19:[function(e,o,i){function u(d){var f=d==1,m=d==2,y=d==3,g=d==4,v=d==6,b=d==5||v;return function(w,_,j,E){for(var T,R,M=l(w),I=s(M),D=a(_,j,3),L=h(I.length),N=0,_=E||p,W=f?_(w,L):m?_(w,0):void 0;N<L;N++)if((b||N in I)&&(R=D(T=I[N],N,M),d)){if(f)W[N]=R;else if(R)switch(d){case 3:return!0;case 5:return T;case 6:return N;case 2:c.call(W,T)}else if(g)return!1}return v?-1:y||g?g:W}}var a=e("../internals/function-bind-context"),s=e("../internals/indexed-object"),l=e("../internals/to-object"),h=e("../internals/to-length"),p=e("../internals/array-species-create"),c=[].push;o.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6)}},{"../internals/array-species-create":25,"../internals/function-bind-context":54,"../internals/indexed-object":66,"../internals/to-length":134,"../internals/to-object":135}],20:[function(d,o,i){var u=d("../internals/to-indexed-object"),a=d("../internals/to-integer"),s=d("../internals/to-length"),c=d("../internals/array-method-is-strict"),d=d("../internals/array-method-uses-to-length"),l=Math.min,h=[].lastIndexOf,p=!!h&&1/[1].lastIndexOf(1,-0)<0,c=c("lastIndexOf"),d=d("indexOf",{ACCESSORS:!0,1:0});o.exports=p||!c||!d?function(f){if(p)return h.apply(this,arguments)||0;var m=u(this),y=s(m.length),g=y-1;for((g=1<arguments.length?l(g,a(arguments[1])):g)<0&&(g=y+g);0<=g;g--)if(g in m&&m[g]===f)return g||0;return-1}:h},{"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/to-indexed-object":132,"../internals/to-integer":133,"../internals/to-length":134}],21:[function(e,o,i){var u=e("../internals/fails"),a=e("../internals/well-known-symbol"),s=e("../internals/engine-v8-version"),l=a("species");o.exports=function(h){return 51<=s||!u(function(){var p=[];return(p.constructor={})[l]=function(){return{foo:1}},p[h](Boolean).foo!==1})}},{"../internals/engine-v8-version":48,"../internals/fails":51,"../internals/well-known-symbol":146}],22:[function(e,o,i){var u=e("../internals/fails");o.exports=function(a,s){var l=[][a];return!!l&&u(function(){l.call(null,s||function(){throw 1},1)})}},{"../internals/fails":51}],23:[function(e,o,i){function u(c){throw c}var a=e("../internals/descriptors"),s=e("../internals/fails"),l=e("../internals/has"),h=Object.defineProperty,p={};o.exports=function(c,d){var f,m,y,g;return l(p,c)?p[c]:(f=[][c],m=!!l(d=d||{},"ACCESSORS")&&d.ACCESSORS,y=l(d,0)?d[0]:u,g=l(d,1)?d[1]:void 0,p[c]=!!f&&!s(function(){if(m&&!a)return!0;var v={length:-1};m?h(v,1,{enumerable:!0,get:u}):v[1]=1,f.call(v,y,g)}))}},{"../internals/descriptors":43,"../internals/fails":51,"../internals/has":60}],24:[function(e,o,i){function u(p){return function(c,d,f,m){a(d);var y=s(c),g=l(y),v=h(y.length),b=p?v-1:0,w=p?-1:1;if(f<2)for(;;){if(b in g){m=g[b],b+=w;break}if(b+=w,p?b<0:v<=b)throw TypeError("Reduce of empty array with no initial value")}for(;p?0<=b:b<v;b+=w)b in g&&(m=d(m,g[b],b,y));return m}}var a=e("../internals/a-function"),s=e("../internals/to-object"),l=e("../internals/indexed-object"),h=e("../internals/to-length");o.exports={left:u(!1),right:u(!0)}},{"../internals/a-function":5,"../internals/indexed-object":66,"../internals/to-length":134,"../internals/to-object":135}],25:[function(e,o,i){var u=e("../internals/is-object"),a=e("../internals/is-array"),s=e("../internals/well-known-symbol")("species");o.exports=function(l,h){var p;return new((p=a(l)&&(typeof(p=l.constructor)=="function"&&(p===Array||a(p.prototype))||u(p)&&(p=p[s])===null)?void 0:p)===void 0?Array:p)(h===0?0:h)}},{"../internals/is-array":72,"../internals/is-object":74,"../internals/well-known-symbol":146}],26:[function(e,o,i){var u=e("../internals/an-object");o.exports=function(a,s,l,h){try{return h?s(u(l)[0],l[1]):s(l)}catch(p){throw h=a.return,h!==void 0&&u(h.call(a)),p}}},{"../internals/an-object":10}],27:[function(e,o,i){var u=e("../internals/well-known-symbol")("iterator"),a=!1;try{var s=0,l={next:function(){return{done:!!s++}},return:function(){a=!0}};l[u]=function(){return this},Array.from(l,function(){throw 2})}catch{}o.exports=function(h,p){if(!p&&!a)return!1;var c=!1;try{var d={};d[u]=function(){return{next:function(){return{done:c=!0}}}},h(d)}catch{}return c}},{"../internals/well-known-symbol":146}],28:[function(e,o,i){var u={}.toString;o.exports=function(a){return u.call(a).slice(8,-1)}},{}],29:[function(e,o,i){var u=e("../internals/to-string-tag-support"),a=e("../internals/classof-raw"),s=e("../internals/well-known-symbol")("toStringTag"),l=a(function(){return arguments}())=="Arguments";o.exports=u?a:function(h){var p;return h===void 0?"Undefined":h===null?"Null":typeof(p=function(c,d){try{return c[d]}catch{}}(h=Object(h),s))=="string"?p:l?a(h):(p=a(h))=="Object"&&typeof h.callee=="function"?"Arguments":p}},{"../internals/classof-raw":28,"../internals/to-string-tag-support":139,"../internals/well-known-symbol":146}],30:[function(y,o,i){var u=y("../internals/object-define-property").f,a=y("../internals/object-create"),s=y("../internals/redefine-all"),l=y("../internals/function-bind-context"),h=y("../internals/an-instance"),p=y("../internals/iterate"),c=y("../internals/define-iterator"),d=y("../internals/set-species"),f=y("../internals/descriptors"),m=y("../internals/internal-metadata").fastKey,y=y("../internals/internal-state"),g=y.set,v=y.getterFor;o.exports={getConstructor:function(b,w,_,j){function E(I,D,L){var N,W=M(I),q=T(I,D);return q?q.value=L:(W.last=q={index:N=m(D,!0),key:D,value:L,previous:D=W.last,next:void 0,removed:!1},W.first||(W.first=q),D&&(D.next=q),f?W.size++:I.size++,N!=="F"&&(W.index[N]=q)),I}function T(N,D){var L,N=M(N),W=m(D);if(W!=="F")return N.index[W];for(L=N.first;L;L=L.next)if(L.key==D)return L}var R=b(function(I,D){h(I,R,w),g(I,{type:w,index:a(null),first:void 0,last:void 0,size:0}),f||(I.size=0),D!=null&&p(D,I[j],I,_)}),M=v(w);return s(R.prototype,{clear:function(){for(var I=M(this),D=I.index,L=I.first;L;)L.removed=!0,L.previous&&(L.previous=L.previous.next=void 0),delete D[L.index],L=L.next;I.first=I.last=void 0,f?I.size=0:this.size=0},delete:function(W){var D,L,N=M(this),W=T(this,W);return W&&(D=W.next,L=W.previous,delete N.index[W.index],W.removed=!0,L&&(L.next=D),D&&(D.previous=L),N.first==W&&(N.first=D),N.last==W&&(N.last=L),f?N.size--:this.size--),!!W},forEach:function(I){for(var D,L=M(this),N=l(I,1<arguments.length?arguments[1]:void 0,3);D=D?D.next:L.first;)for(N(D.value,D.key,this);D&&D.removed;)D=D.previous},has:function(I){return!!T(this,I)}}),s(R.prototype,_?{get:function(I){return I=T(this,I),I&&I.value},set:function(I,D){return E(this,I===0?0:I,D)}}:{add:function(I){return E(this,I=I===0?0:I,I)}}),f&&u(R.prototype,"size",{get:function(){return M(this).size}}),R},setStrong:function(b,w,_){var j=w+" Iterator",E=v(w),T=v(j);c(b,w,function(R,M){g(this,{type:j,target:R,state:E(R),kind:M,last:void 0})},function(){for(var R=T(this),M=R.kind,I=R.last;I&&I.removed;)I=I.previous;return R.target&&(R.last=I=I?I.next:R.state.first)?M=="keys"?{value:I.key,done:!1}:M=="values"?{value:I.value,done:!1}:{value:[I.key,I.value],done:!1}:{value:R.target=void 0,done:!0}},_?"entries":"values",!_,!0),d(w)}}},{"../internals/an-instance":9,"../internals/define-iterator":41,"../internals/descriptors":43,"../internals/function-bind-context":54,"../internals/internal-metadata":69,"../internals/internal-state":70,"../internals/iterate":77,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/redefine-all":107,"../internals/set-species":116}],31:[function(g,o,i){function u(E){return E.frozen||(E.frozen=new a)}function a(){this.entries=[]}function s(E,T){return w(E.entries,function(R){return R[0]===T})}var l=g("../internals/redefine-all"),h=g("../internals/internal-metadata").getWeakData,p=g("../internals/an-object"),c=g("../internals/is-object"),d=g("../internals/an-instance"),f=g("../internals/iterate"),m=g("../internals/array-iteration"),y=g("../internals/has"),g=g("../internals/internal-state"),v=g.set,b=g.getterFor,w=m.find,_=m.findIndex,j=0;a.prototype={get:function(E){if(E=s(this,E),E)return E[1]},has:function(E){return!!s(this,E)},set:function(E,T){var R=s(this,E);R?R[1]=T:this.entries.push([E,T])},delete:function(E){var T=_(this.entries,function(R){return R[0]===E});return~T&&this.entries.splice(T,1),!!~T}},o.exports={getConstructor:function(E,T,R,M){function I(N,W,q){var H=L(N),B=h(p(W),!0);return B===!0?u(H).set(W,q):B[H.id]=q,N}var D=E(function(N,W){d(N,D,T),v(N,{type:T,id:j++,frozen:void 0}),W!=null&&f(W,N[M],N,R)}),L=b(T);return l(D.prototype,{delete:function(N){var W,q=L(this);return!!c(N)&&((W=h(N))===!0?u(q).delete(N):W&&y(W,q.id)&&delete W[q.id])},has:function(N){var W,q=L(this);return!!c(N)&&((W=h(N))===!0?u(q).has(N):W&&y(W,q.id))}}),l(D.prototype,R?{get:function(N){var W,q=L(this);if(c(N))return(W=h(N))===!0?u(q).get(N):W?W[q.id]:void 0},set:function(N,W){return I(this,N,W)}}:{add:function(N){return I(this,N,!0)}}),D}}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/array-iteration":19,"../internals/has":60,"../internals/internal-metadata":69,"../internals/internal-state":70,"../internals/is-object":74,"../internals/iterate":77,"../internals/redefine-all":107}],32:[function(e,o,i){var u=e("../internals/export"),a=e("../internals/global"),s=e("../internals/is-forced"),l=e("../internals/redefine"),h=e("../internals/internal-metadata"),p=e("../internals/iterate"),c=e("../internals/an-instance"),d=e("../internals/is-object"),f=e("../internals/fails"),m=e("../internals/check-correctness-of-iteration"),y=e("../internals/set-to-string-tag"),g=e("../internals/inherit-if-required");o.exports=function(v,b,w){function _(B){var G=W[B];l(W,B,B=="add"?function(V){return G.call(this,V===0?0:V),this}:B=="delete"?function(V){return!(D&&!d(V))&&G.call(this,V===0?0:V)}:B=="get"?function(V){return D&&!d(V)?void 0:G.call(this,V===0?0:V)}:B=="has"?function(V){return!(D&&!d(V))&&G.call(this,V===0?0:V)}:function(V,X){return G.call(this,V===0?0:V,X),this})}var j,E,T,R,M,I=v.indexOf("Map")!==-1,D=v.indexOf("Weak")!==-1,L=I?"set":"add",N=a[v],W=N&&N.prototype,q=N,H={};return s(v,typeof N!="function"||!(D||W.forEach&&!f(function(){new N().entries().next()})))?(q=w.getConstructor(b,v,I,L),h.REQUIRED=!0):s(v,!0)&&(E=(j=new q)[L](D?{}:-0,1)!=j,T=f(function(){j.has(1)}),R=m(function(B){new N(B)}),M=!D&&f(function(){for(var B=new N,G=5;G--;)B[L](G,G);return!B.has(-0)}),R||(((q=b(function(B,G){return c(B,q,v),B=g(new N,B,q),G!=null&&p(G,B[L],B,I),B})).prototype=W).constructor=q),(T||M)&&(_("delete"),_("has"),I&&_("get")),(M||E)&&_(L),D&&W.clear&&delete W.clear),H[v]=q,u({global:!0,forced:q!=N},H),y(q,v),D||w.setStrong(q,v,I),q}},{"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/export":50,"../internals/fails":51,"../internals/global":59,"../internals/inherit-if-required":67,"../internals/internal-metadata":69,"../internals/is-forced":73,"../internals/is-object":74,"../internals/iterate":77,"../internals/redefine":108,"../internals/set-to-string-tag":117}],33:[function(e,o,i){var u=e("../internals/has"),a=e("../internals/own-keys"),s=e("../internals/object-get-own-property-descriptor"),l=e("../internals/object-define-property");o.exports=function(h,p){for(var c=a(p),d=l.f,f=s.f,m=0;m<c.length;m++){var y=c[m];u(h,y)||d(h,y,f(p,y))}}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/own-keys":103}],34:[function(e,o,i){var u=e("../internals/well-known-symbol")("match");o.exports=function(a){var s=/./;try{"/./"[a](s)}catch{try{return s[u]=!1,"/./"[a](s)}catch{}}return!1}},{"../internals/well-known-symbol":146}],35:[function(e,o,i){e=e("../internals/fails"),o.exports=!e(function(){function u(){}return u.prototype.constructor=null,Object.getPrototypeOf(new u)!==u.prototype})},{"../internals/fails":51}],36:[function(e,o,i){var u=e("../internals/require-object-coercible"),a=/"/g;o.exports=function(c,l,h,p){var c=String(u(c)),d="<"+l;return h!==""&&(d+=" "+h+'="'+String(p).replace(a,"&quot;")+'"'),d+">"+c+"</"+l+">"}},{"../internals/require-object-coercible":113}],37:[function(e,o,i){function u(){return this}var a=e("../internals/iterators-core").IteratorPrototype,s=e("../internals/object-create"),l=e("../internals/create-property-descriptor"),h=e("../internals/set-to-string-tag"),p=e("../internals/iterators");o.exports=function(c,d,f){return d+=" Iterator",c.prototype=s(a,{next:l(1,f)}),h(c,d,!1,!0),p[d]=u,c}},{"../internals/create-property-descriptor":39,"../internals/iterators":79,"../internals/iterators-core":78,"../internals/object-create":90,"../internals/set-to-string-tag":117}],38:[function(e,o,i){var u=e("../internals/descriptors"),a=e("../internals/object-define-property"),s=e("../internals/create-property-descriptor");o.exports=u?function(l,h,p){return a.f(l,h,s(1,p))}:function(l,h,p){return l[h]=p,l}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/object-define-property":92}],39:[function(e,o,i){o.exports=function(u,a){return{enumerable:!(1&u),configurable:!(2&u),writable:!(4&u),value:a}}},{}],40:[function(e,o,i){var u=e("../internals/to-primitive"),a=e("../internals/object-define-property"),s=e("../internals/create-property-descriptor");o.exports=function(l,h,p){h=u(h),h in l?a.f(l,h,s(0,p)):l[h]=p}},{"../internals/create-property-descriptor":39,"../internals/object-define-property":92,"../internals/to-primitive":138}],41:[function(g,o,i){function u(){return this}var a=g("../internals/export"),s=g("../internals/create-iterator-constructor"),l=g("../internals/object-get-prototype-of"),h=g("../internals/object-set-prototype-of"),p=g("../internals/set-to-string-tag"),c=g("../internals/create-non-enumerable-property"),d=g("../internals/redefine"),f=g("../internals/well-known-symbol"),m=g("../internals/is-pure"),y=g("../internals/iterators"),g=g("../internals/iterators-core"),v=g.IteratorPrototype,b=g.BUGGY_SAFARI_ITERATORS,w=f("iterator"),_="values",j="entries";o.exports=function(E,T,R,H,I,D,L){s(R,T,H);function N(A){if(A===I&&X)return X;if(!b&&A in G)return G[A];switch(A){case"keys":case _:case j:return function(){return new R(this,A)}}return function(){return new R(this)}}var W,q,H=T+" Iterator",B=!1,G=E.prototype,V=G[w]||G["@@iterator"]||I&&G[I],X=!b&&V||N(I),te=T=="Array"&&G.entries||V;if(te&&(te=l(te.call(new E)),v!==Object.prototype&&te.next&&(m||l(te)===v||(h?h(te,v):typeof te[w]!="function"&&c(te,w,u)),p(te,H,!0,!0),m&&(y[H]=u))),I==_&&V&&V.name!==_&&(B=!0,X=function(){return V.call(this)}),m&&!L||G[w]===X||c(G,w,X),y[T]=X,I)if(W={values:N(_),keys:D?X:N("keys"),entries:N(j)},L)for(q in W)!b&&!B&&q in G||d(G,q,W[q]);else a({target:T,proto:!0,forced:b||B},W);return W}},{"../internals/create-iterator-constructor":37,"../internals/create-non-enumerable-property":38,"../internals/export":50,"../internals/is-pure":75,"../internals/iterators":79,"../internals/iterators-core":78,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/well-known-symbol":146}],42:[function(e,o,i){var u=e("../internals/path"),a=e("../internals/has"),s=e("../internals/well-known-symbol-wrapped"),l=e("../internals/object-define-property").f;o.exports=function(h){var p=u.Symbol||(u.Symbol={});a(p,h)||l(p,h,{value:s.f(h)})}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/path":104,"../internals/well-known-symbol-wrapped":145}],43:[function(e,o,i){e=e("../internals/fails"),o.exports=!e(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},{"../internals/fails":51}],44:[function(a,o,i){var u=a("../internals/global"),a=a("../internals/is-object"),s=u.document,l=a(s)&&a(s.createElement);o.exports=function(h){return l?s.createElement(h):{}}},{"../internals/global":59,"../internals/is-object":74}],45:[function(e,o,i){o.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},{}],46:[function(e,o,i){e=e("../internals/engine-user-agent"),o.exports=/(iphone|ipod|ipad).*applewebkit/i.test(e)},{"../internals/engine-user-agent":47}],47:[function(e,o,i){e=e("../internals/get-built-in"),o.exports=e("navigator","userAgent")||""},{"../internals/get-built-in":56}],48:[function(s,o,i){var u,a,l=s("../internals/global"),s=s("../internals/engine-user-agent"),l=l.process,l=l&&l.versions,l=l&&l.v8;l?a=(u=l.split("."))[0]+u[1]:s&&(!(u=s.match(/Edge\/(\d+)/))||74<=u[1])&&(u=s.match(/Chrome\/(\d+)/))&&(a=u[1]),o.exports=a&&+a},{"../internals/engine-user-agent":47,"../internals/global":59}],49:[function(e,o,i){o.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],50:[function(e,o,i){var u=e("../internals/global"),a=e("../internals/object-get-own-property-descriptor").f,s=e("../internals/create-non-enumerable-property"),l=e("../internals/redefine"),h=e("../internals/set-global"),p=e("../internals/copy-constructor-properties"),c=e("../internals/is-forced");o.exports=function(d,f){var m,y,g,v=d.target,b=d.global,w=d.stat,_=b?u:w?u[v]||h(v,{}):(u[v]||{}).prototype;if(_)for(m in f){if(y=f[m],g=d.noTargetGet?(g=a(_,m))&&g.value:_[m],!c(b?m:v+(w?".":"#")+m,d.forced)&&g!==void 0){if(typeof y==typeof g)continue;p(y,g)}(d.sham||g&&g.sham)&&s(y,"sham",!0),l(_,m,y,d)}}},{"../internals/copy-constructor-properties":33,"../internals/create-non-enumerable-property":38,"../internals/global":59,"../internals/is-forced":73,"../internals/object-get-own-property-descriptor":93,"../internals/redefine":108,"../internals/set-global":115}],51:[function(e,o,i){o.exports=function(u){try{return!!u()}catch{return!0}}},{}],52:[function(f,o,i){f("../modules/es.regexp.exec");var u=f("../internals/redefine"),a=f("../internals/fails"),s=f("../internals/well-known-symbol"),l=f("../internals/regexp-exec"),h=f("../internals/create-non-enumerable-property"),p=s("species"),c=!a(function(){var g=/./;return g.exec=function(){var v=[];return v.groups={a:"7"},v},"".replace(g,"$<a>")!=="7"}),d="a".replace(/./,"$0")==="$0",f=s("replace"),m=!!/./[f]&&/./[f]("a","$0")==="",y=!a(function(){var v=/(?:)/,g=v.exec,v=(v.exec=function(){return g.apply(this,arguments)},"ab".split(v));return v.length!==2||v[0]!=="a"||v[1]!=="b"});o.exports=function(g,v,b,w){var _,j,E=s(g),T=!a(function(){var M={};return M[E]=function(){return 7},""[g](M)!=7}),R=T&&!a(function(){var M=!1,I=/a/;return g==="split"&&((I={constructor:{}}).constructor[p]=function(){return I},I.flags="",I[E]=/./[E]),I.exec=function(){return M=!0,null},I[E](""),!M});T&&R&&(g!=="replace"||c&&d&&!m)&&(g!=="split"||y)||(_=/./[E],b=(R=b(E,""[g],function(M,I,D,L,N){return I.exec===l?T&&!N?{done:!0,value:_.call(I,D,L)}:{done:!0,value:M.call(D,I,L)}:{done:!1}},{REPLACE_KEEPS_$0:d,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:m}))[0],j=R[1],u(String.prototype,g,b),u(RegExp.prototype,E,v==2?function(M,I){return j.call(M,this,I)}:function(M){return j.call(M,this)})),w&&h(RegExp.prototype[E],"sham",!0)}},{"../internals/create-non-enumerable-property":38,"../internals/fails":51,"../internals/redefine":108,"../internals/regexp-exec":110,"../internals/well-known-symbol":146,"../modules/es.regexp.exec":181}],53:[function(e,o,i){e=e("../internals/fails"),o.exports=!e(function(){return Object.isExtensible(Object.preventExtensions({}))})},{"../internals/fails":51}],54:[function(e,o,i){var u=e("../internals/a-function");o.exports=function(a,s,l){if(u(a),s===void 0)return a;switch(l){case 0:return function(){return a.call(s)};case 1:return function(h){return a.call(s,h)};case 2:return function(h,p){return a.call(s,h,p)};case 3:return function(h,p,c){return a.call(s,h,p,c)}}return function(){return a.apply(s,arguments)}}},{"../internals/a-function":5}],55:[function(e,o,i){var u=e("../internals/a-function"),a=e("../internals/is-object"),s=[].slice,l={};o.exports=Function.bind||function(h){var p=u(this),c=s.call(arguments,1),d=function(){var f=c.concat(s.call(arguments));if(this instanceof d){var m=p,y=f.length,g=f;if(!(y in l)){for(var v=[],b=0;b<y;b++)v[b]="a["+b+"]";l[y]=Function("C,a","return new C("+v.join(",")+")")}return l[y](m,g)}return p.apply(h,f)};return a(p.prototype)&&(d.prototype=p.prototype),d}},{"../internals/a-function":5,"../internals/is-object":74}],56:[function(e,o,i){function u(l){return typeof l=="function"?l:void 0}var a=e("../internals/path"),s=e("../internals/global");o.exports=function(l,h){return arguments.length<2?u(a[l])||u(s[l]):a[l]&&a[l][h]||s[l]&&s[l][h]}},{"../internals/global":59,"../internals/path":104}],57:[function(e,o,i){var u=e("../internals/classof"),a=e("../internals/iterators"),s=e("../internals/well-known-symbol")("iterator");o.exports=function(l){if(l!=null)return l[s]||l["@@iterator"]||a[u(l)]}},{"../internals/classof":29,"../internals/iterators":79,"../internals/well-known-symbol":146}],58:[function(e,o,i){var u=e("../internals/an-object"),a=e("../internals/get-iterator-method");o.exports=function(s){var l=a(s);if(typeof l!="function")throw TypeError(String(s)+" is not iterable");return u(l.call(s))}},{"../internals/an-object":10,"../internals/get-iterator-method":57}],59:[function(e,o,i){(function(u){function a(s){return s&&s.Math==Math&&s}o.exports=a(typeof globalThis=="object"&&globalThis)||a(typeof window=="object"&&window)||a(typeof self=="object"&&self)||a(typeof u=="object"&&u)||Function("return this")()}).call(this,typeof Wu<"u"?Wu:typeof self<"u"?self:typeof window<"u"?window:{})},{}],60:[function(e,o,i){var u={}.hasOwnProperty;o.exports=function(a,s){return u.call(a,s)}},{}],61:[function(e,o,i){o.exports={}},{}],62:[function(e,o,i){var u=e("../internals/global");o.exports=function(a,s){var l=u.console;l&&l.error&&(arguments.length===1?l.error(a):l.error(a,s))}},{"../internals/global":59}],63:[function(e,o,i){e=e("../internals/get-built-in"),o.exports=e("document","documentElement")},{"../internals/get-built-in":56}],64:[function(e,o,i){var u=e("../internals/descriptors"),a=e("../internals/fails"),s=e("../internals/document-create-element");o.exports=!u&&!a(function(){return Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a!=7})},{"../internals/descriptors":43,"../internals/document-create-element":44,"../internals/fails":51}],65:[function(e,o,i){var u=Math.abs,a=Math.pow,s=Math.floor,l=Math.log,h=Math.LN2;o.exports={pack:function(p,c,b){var f,m,y,g=new Array(b),v=8*b-c-1,b=(1<<v)-1,w=b>>1,_=c===23?a(2,-24)-a(2,-77):0,j=p<0||p===0&&1/p<0?1:0,E=0;for((p=u(p))!=p||p===1/0?(m=p!=p?1:0,f=b):(f=s(l(p)/h),p*(y=a(2,-f))<1&&(f--,y*=2),2<=(p+=1<=f+w?_/y:_*a(2,1-w))*y&&(f++,y/=2),b<=f+w?(m=0,f=b):1<=f+w?(m=(p*y-1)*a(2,c),f+=w):(m=p*a(2,w-1)*a(2,c),f=0));8<=c;g[E++]=255&m,m/=256,c-=8);for(f=f<<c|m,v+=c;0<v;g[E++]=255&f,f/=256,v-=8);return g[--E]|=128*j,g},unpack:function(p,c){var d,f=p.length,b=8*f-c-1,m=(1<<b)-1,y=m>>1,g=b-7,v=f-1,b=p[v--],w=127&b;for(b>>=7;0<g;w=256*w+p[v],v--,g-=8);for(d=w&(1<<-g)-1,w>>=-g,g+=c;0<g;d=256*d+p[v],v--,g-=8);if(w===0)w=1-y;else{if(w===m)return d?NaN:b?-1/0:1/0;d+=a(2,c),w-=y}return(b?-1:1)*d*a(2,w-c)}}},{}],66:[function(e,o,i){var u=e("../internals/fails"),a=e("../internals/classof-raw"),s="".split;o.exports=u(function(){return!Object("z").propertyIsEnumerable(0)})?function(l){return a(l)=="String"?s.call(l,""):Object(l)}:Object},{"../internals/classof-raw":28,"../internals/fails":51}],67:[function(e,o,i){var u=e("../internals/is-object"),a=e("../internals/object-set-prototype-of");o.exports=function(s,l,h){return a&&typeof(l=l.constructor)=="function"&&l!==h&&u(l=l.prototype)&&l!==h.prototype&&a(s,l),s}},{"../internals/is-object":74,"../internals/object-set-prototype-of":101}],68:[function(u,o,i){var u=u("../internals/shared-store"),a=Function.toString;typeof u.inspectSource!="function"&&(u.inspectSource=function(s){return a.call(s)}),o.exports=u.inspectSource},{"../internals/shared-store":119}],69:[function(e,o,i){function u(g){h(g,d,{value:{objectID:"O"+ ++f,weakData:{}}})}var a=e("../internals/hidden-keys"),s=e("../internals/is-object"),l=e("../internals/has"),h=e("../internals/object-define-property").f,p=e("../internals/uid"),c=e("../internals/freezing"),d=p("meta"),f=0,m=Object.isExtensible||function(){return!0},y=o.exports={REQUIRED:!1,fastKey:function(g,v){if(!s(g))return typeof g=="symbol"?g:(typeof g=="string"?"S":"P")+g;if(!l(g,d)){if(!m(g))return"F";if(!v)return"E";u(g)}return g[d].objectID},getWeakData:function(g,v){if(!l(g,d)){if(!m(g))return!0;if(!v)return!1;u(g)}return g[d].weakData},onFreeze:function(g){return c&&y.REQUIRED&&m(g)&&!l(g,d)&&u(g),g}};a[d]=!0},{"../internals/freezing":53,"../internals/has":60,"../internals/hidden-keys":61,"../internals/is-object":74,"../internals/object-define-property":92,"../internals/uid":143}],70:[function(b,o,i){var u,a,s,l,h,p,c,d,f=b("../internals/native-weak-map"),w=b("../internals/global"),m=b("../internals/is-object"),y=b("../internals/create-non-enumerable-property"),g=b("../internals/has"),v=b("../internals/shared-key"),b=b("../internals/hidden-keys"),w=w.WeakMap;c=f?(u=new w,a=u.get,s=u.has,l=u.set,h=function(_,j){return l.call(u,_,j),j},p=function(_){return a.call(u,_)||{}},function(_){return s.call(u,_)}):(b[d=v("state")]=!0,h=function(_,j){return y(_,d,j),j},p=function(_){return g(_,d)?_[d]:{}},function(_){return g(_,d)}),o.exports={set:h,get:p,has:c,enforce:function(_){return c(_)?p(_):h(_,{})},getterFor:function(_){return function(j){if(m(j)&&(j=p(j)).type===_)return j;throw TypeError("Incompatible receiver, "+_+" required")}}}},{"../internals/create-non-enumerable-property":38,"../internals/global":59,"../internals/has":60,"../internals/hidden-keys":61,"../internals/is-object":74,"../internals/native-weak-map":85,"../internals/shared-key":118}],71:[function(e,o,i){var u=e("../internals/well-known-symbol"),a=e("../internals/iterators"),s=u("iterator"),l=Array.prototype;o.exports=function(h){return h!==void 0&&(a.Array===h||l[s]===h)}},{"../internals/iterators":79,"../internals/well-known-symbol":146}],72:[function(e,o,i){var u=e("../internals/classof-raw");o.exports=Array.isArray||function(a){return u(a)=="Array"}},{"../internals/classof-raw":28}],73:[function(e,o,i){function u(d,f){return(d=h[l(d)])==c||d!=p&&(typeof f=="function"?a(f):!!f)}var a=e("../internals/fails"),s=/#|\.prototype\./,l=u.normalize=function(d){return String(d).replace(s,".").toLowerCase()},h=u.data={},p=u.NATIVE="N",c=u.POLYFILL="P";o.exports=u},{"../internals/fails":51}],74:[function(e,o,i){o.exports=function(u){return typeof u=="object"?u!==null:typeof u=="function"}},{}],75:[function(e,o,i){o.exports=!1},{}],76:[function(e,o,i){var u=e("../internals/is-object"),a=e("../internals/classof-raw"),s=e("../internals/well-known-symbol")("match");o.exports=function(l){var h;return u(l)&&((h=l[s])!==void 0?!!h:a(l)=="RegExp")}},{"../internals/classof-raw":28,"../internals/is-object":74,"../internals/well-known-symbol":146}],77:[function(e,o,i){function u(d,f){this.stopped=d,this.result=f}var a=e("../internals/an-object"),s=e("../internals/is-array-iterator-method"),l=e("../internals/to-length"),h=e("../internals/function-bind-context"),p=e("../internals/get-iterator-method"),c=e("../internals/call-with-safe-iteration-closing");(o.exports=function(d,f,m,y,g){var v,b,w,_,j,E,T=h(f,m,y?2:1);if(g)v=d;else{if(typeof(f=p(d))!="function")throw TypeError("Target is not iterable");if(s(f)){for(b=0,w=l(d.length);b<w;b++)if((_=y?T(a(E=d[b])[0],E[1]):T(d[b]))&&_ instanceof u)return _;return new u(!1)}v=f.call(d)}for(j=v.next;!(E=j.call(v)).done;)if(typeof(_=c(v,T,E.value,y))=="object"&&_&&_ instanceof u)return _;return new u(!1)}).stop=function(d){return new u(!0,d)}},{"../internals/an-object":10,"../internals/call-with-safe-iteration-closing":26,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":134}],78:[function(p,o,i){var u,a,s=p("../internals/object-get-prototype-of"),l=p("../internals/create-non-enumerable-property"),h=p("../internals/has"),c=p("../internals/well-known-symbol"),p=p("../internals/is-pure"),c=c("iterator"),d=!1;[].keys&&("next"in(a=[].keys())?(s=s(s(a)))!==Object.prototype&&(u=s):d=!0),u==null&&(u={}),p||h(u,c)||l(u,c,function(){return this}),o.exports={IteratorPrototype:u,BUGGY_SAFARI_ITERATORS:d}},{"../internals/create-non-enumerable-property":38,"../internals/has":60,"../internals/is-pure":75,"../internals/object-get-prototype-of":97,"../internals/well-known-symbol":146}],79:[function(e,o,i){o.exports={}},{}],80:[function(e,o,i){o.exports=Math.sign||function(u){return(u=+u)==0||u!=u?u:u<0?-1:1}},{}],81:[function(y,o,i){var u,a,s,l,h,p,c,d,f=y("../internals/global"),j=y("../internals/object-get-own-property-descriptor").f,_=y("../internals/classof-raw"),m=y("../internals/task").set,y=y("../internals/engine-is-ios"),g=f.MutationObserver||f.WebKitMutationObserver,v=f.process,b=f.Promise,w=_(v)=="process",_=j(f,"queueMicrotask"),j=_&&_.value;j||(u=function(){var E,T;for(w&&(E=v.domain)&&E.exit();a;){T=a.fn,a=a.next;try{T()}catch(R){throw a?l():s=void 0,R}}s=void 0,E&&E.enter()},l=w?function(){v.nextTick(u)}:g&&!y?(h=!0,p=document.createTextNode(""),new g(u).observe(p,{characterData:!0}),function(){p.data=h=!h}):b&&b.resolve?(c=b.resolve(void 0),d=c.then,function(){d.call(c,u)}):function(){m.call(f,u)}),o.exports=j||function(E){E={fn:E,next:void 0},s&&(s.next=E),a||(a=E,l()),s=E}},{"../internals/classof-raw":28,"../internals/engine-is-ios":46,"../internals/global":59,"../internals/object-get-own-property-descriptor":93,"../internals/task":128}],82:[function(e,o,i){e=e("../internals/global"),o.exports=e.Promise},{"../internals/global":59}],83:[function(e,o,i){e=e("../internals/fails"),o.exports=!!Object.getOwnPropertySymbols&&!e(function(){return!String(Symbol())})},{"../internals/fails":51}],84:[function(e,o,i){var u=e("../internals/fails"),a=e("../internals/well-known-symbol"),s=e("../internals/is-pure"),l=a("iterator");o.exports=!u(function(){var h=new URL("b?a=1&b=2&c=3","http://a"),p=h.searchParams,c="";return h.pathname="c%20d",p.forEach(function(d,f){p.delete("b"),c+=f+d}),s&&!h.toJSON||!p.sort||h.href!=="http://a/c%20d?a=1&c=3"||p.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!p[l]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://").host!=="xn--e1aybc"||new URL("http://a#").hash!=="#%D0%B1"||c!=="a1c3"||new URL("http://x",void 0).host!=="x"})},{"../internals/fails":51,"../internals/is-pure":75,"../internals/well-known-symbol":146}],85:[function(u,o,i){var a=u("../internals/global"),u=u("../internals/inspect-source"),a=a.WeakMap;o.exports=typeof a=="function"&&/native code/.test(u(a))},{"../internals/global":59,"../internals/inspect-source":68}],86:[function(e,o,i){function u(s){var l,h;this.promise=new s(function(p,c){if(l!==void 0||h!==void 0)throw TypeError("Bad Promise constructor");l=p,h=c}),this.resolve=a(l),this.reject=a(h)}var a=e("../internals/a-function");o.exports.f=function(s){return new u(s)}},{"../internals/a-function":5}],87:[function(e,o,i){var u=e("../internals/is-regexp");o.exports=function(a){if(u(a))throw TypeError("The method doesn't accept regular expressions");return a}},{"../internals/is-regexp":76}],88:[function(e,o,i){var u=e("../internals/global").isFinite;o.exports=Number.isFinite||function(a){return typeof a=="number"&&u(a)}},{"../internals/global":59}],89:[function(e,o,i){var u=e("../internals/descriptors"),a=e("../internals/fails"),s=e("../internals/object-keys"),l=e("../internals/object-get-own-property-symbols"),h=e("../internals/object-property-is-enumerable"),p=e("../internals/to-object"),c=e("../internals/indexed-object"),d=Object.assign,f=Object.defineProperty;o.exports=!d||a(function(){var m,y,g,v;return!(!u||d({b:1},d(f({},"a",{enumerable:!0,get:function(){f(this,"b",{value:3,enumerable:!1})}}),{b:2})).b===1)||(y={},v="abcdefghijklmnopqrst",(m={})[g=Symbol()]=7,v.split("").forEach(function(b){y[b]=b}),d({},m)[g]!=7||s(d({},y)).join("")!=v)})?function(m,y){for(var g=p(m),v=arguments.length,b=1,w=l.f,_=h.f;b<v;)for(var j,E=c(arguments[b++]),T=w?s(E).concat(w(E)):s(E),R=T.length,M=0;M<R;)j=T[M++],u&&!_.call(E,j)||(g[j]=E[j]);return g}:d},{"../internals/descriptors":43,"../internals/fails":51,"../internals/indexed-object":66,"../internals/object-get-own-property-symbols":96,"../internals/object-keys":99,"../internals/object-property-is-enumerable":100,"../internals/to-object":135}],90:[function(f,o,i){function u(){}var a,s=f("../internals/an-object"),l=f("../internals/object-define-properties"),h=f("../internals/enum-bug-keys"),p=f("../internals/hidden-keys"),c=f("../internals/html"),d=f("../internals/document-create-element"),f=f("../internals/shared-key"),m="prototype",y="script",g=f("IE_PROTO"),v=function(w){return"<"+y+">"+w+"</"+y+">"},b=function(){try{a=document.domain&&new ActiveXObject("htmlfile")}catch{}b=a?((w=a).write(v("")),w.close(),_=w.parentWindow.Object,w=null,_):(w=d("iframe"),_="java"+y+":",w.style.display="none",c.appendChild(w),w.src=String(_),(_=w.contentWindow.document).open(),_.write(v("document.F=Object")),_.close(),_.F);for(var w,_,j=h.length;j--;)delete b[m][h[j]];return b()};p[g]=!0,o.exports=Object.create||function(w,_){var j;return w!==null?(u[m]=s(w),j=new u,u[m]=null,j[g]=w):j=b(),_===void 0?j:l(j,_)}},{"../internals/an-object":10,"../internals/document-create-element":44,"../internals/enum-bug-keys":49,"../internals/hidden-keys":61,"../internals/html":63,"../internals/object-define-properties":91,"../internals/shared-key":118}],91:[function(e,o,i){var u=e("../internals/descriptors"),a=e("../internals/object-define-property"),s=e("../internals/an-object"),l=e("../internals/object-keys");o.exports=u?Object.defineProperties:function(h,p){s(h);for(var c,d=l(p),f=d.length,m=0;m<f;)a.f(h,c=d[m++],p[c]);return h}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/object-define-property":92,"../internals/object-keys":99}],92:[function(e,o,i){var u=e("../internals/descriptors"),a=e("../internals/ie8-dom-define"),s=e("../internals/an-object"),l=e("../internals/to-primitive"),h=Object.defineProperty;i.f=u?h:function(p,c,d){if(s(p),c=l(c,!0),s(d),a)try{return h(p,c,d)}catch{}if("get"in d||"set"in d)throw TypeError("Accessors not supported");return"value"in d&&(p[c]=d.value),p}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/ie8-dom-define":64,"../internals/to-primitive":138}],93:[function(e,o,i){var u=e("../internals/descriptors"),a=e("../internals/object-property-is-enumerable"),s=e("../internals/create-property-descriptor"),l=e("../internals/to-indexed-object"),h=e("../internals/to-primitive"),p=e("../internals/has"),c=e("../internals/ie8-dom-define"),d=Object.getOwnPropertyDescriptor;i.f=u?d:function(f,m){if(f=l(f),m=h(m,!0),c)try{return d(f,m)}catch{}if(p(f,m))return s(!a.f.call(f,m),f[m])}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/has":60,"../internals/ie8-dom-define":64,"../internals/object-property-is-enumerable":100,"../internals/to-indexed-object":132,"../internals/to-primitive":138}],94:[function(e,o,i){var u=e("../internals/to-indexed-object"),a=e("../internals/object-get-own-property-names").f,s={}.toString,l=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];o.exports.f=function(h){if(!l||s.call(h)!="[object Window]")return a(u(h));try{return a(h)}catch{return l.slice()}}},{"../internals/object-get-own-property-names":95,"../internals/to-indexed-object":132}],95:[function(e,o,i){var u=e("../internals/object-keys-internal"),a=e("../internals/enum-bug-keys").concat("length","prototype");i.f=Object.getOwnPropertyNames||function(s){return u(s,a)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":98}],96:[function(e,o,i){i.f=Object.getOwnPropertySymbols},{}],97:[function(l,o,i){var u=l("../internals/has"),a=l("../internals/to-object"),s=l("../internals/shared-key"),l=l("../internals/correct-prototype-getter"),h=s("IE_PROTO"),p=Object.prototype;o.exports=l?Object.getPrototypeOf:function(c){return c=a(c),u(c,h)?c[h]:typeof c.constructor=="function"&&c instanceof c.constructor?c.constructor.prototype:c instanceof Object?p:null}},{"../internals/correct-prototype-getter":35,"../internals/has":60,"../internals/shared-key":118,"../internals/to-object":135}],98:[function(e,o,i){var u=e("../internals/has"),a=e("../internals/to-indexed-object"),s=e("../internals/array-includes").indexOf,l=e("../internals/hidden-keys");o.exports=function(h,p){var c,d=a(h),f=0,m=[];for(c in d)!u(l,c)&&u(d,c)&&m.push(c);for(;p.length>f;)!u(d,c=p[f++])||~s(m,c)||m.push(c);return m}},{"../internals/array-includes":18,"../internals/has":60,"../internals/hidden-keys":61,"../internals/to-indexed-object":132}],99:[function(e,o,i){var u=e("../internals/object-keys-internal"),a=e("../internals/enum-bug-keys");o.exports=Object.keys||function(s){return u(s,a)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":98}],100:[function(e,o,i){var u={}.propertyIsEnumerable,a=Object.getOwnPropertyDescriptor,s=a&&!u.call({1:2},1);i.f=s?function(l){return l=a(this,l),!!l&&l.enumerable}:u},{}],101:[function(e,o,i){var u=e("../internals/an-object"),a=e("../internals/a-possible-prototype");o.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var s,l=!1,h={};try{(s=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(h,[]),l=h instanceof Array}catch{}return function(p,c){return u(p),a(c),l?s.call(p,c):p.__proto__=c,p}}():void 0)},{"../internals/a-possible-prototype":6,"../internals/an-object":10}],102:[function(e,o,i){var u=e("../internals/to-string-tag-support"),a=e("../internals/classof");o.exports=u?{}.toString:function(){return"[object "+a(this)+"]"}},{"../internals/classof":29,"../internals/to-string-tag-support":139}],103:[function(e,o,i){var u=e("../internals/get-built-in"),a=e("../internals/object-get-own-property-names"),s=e("../internals/object-get-own-property-symbols"),l=e("../internals/an-object");o.exports=u("Reflect","ownKeys")||function(h){var p=a.f(l(h)),c=s.f;return c?p.concat(c(h)):p}},{"../internals/an-object":10,"../internals/get-built-in":56,"../internals/object-get-own-property-names":95,"../internals/object-get-own-property-symbols":96}],104:[function(e,o,i){e=e("../internals/global"),o.exports=e},{"../internals/global":59}],105:[function(e,o,i){o.exports=function(u){try{return{error:!1,value:u()}}catch(a){return{error:!0,value:a}}}},{}],106:[function(e,o,i){var u=e("../internals/an-object"),a=e("../internals/is-object"),s=e("../internals/new-promise-capability");o.exports=function(l,h){return u(l),a(h)&&h.constructor===l?h:((0,(l=s.f(l)).resolve)(h),l.promise)}},{"../internals/an-object":10,"../internals/is-object":74,"../internals/new-promise-capability":86}],107:[function(e,o,i){var u=e("../internals/redefine");o.exports=function(a,s,l){for(var h in s)u(a,h,s[h],l);return a}},{"../internals/redefine":108}],108:[function(p,o,i){var u=p("../internals/global"),a=p("../internals/create-non-enumerable-property"),s=p("../internals/has"),l=p("../internals/set-global"),h=p("../internals/inspect-source"),p=p("../internals/internal-state"),c=p.get,d=p.enforce,f=String(String).split("String");(o.exports=function(m,y,g,_){var b=!!_&&!!_.unsafe,w=!!_&&!!_.enumerable,_=!!_&&!!_.noTargetGet;typeof g=="function"&&(typeof y!="string"||s(g,"name")||a(g,"name",y),d(g).source=f.join(typeof y=="string"?y:"")),m===u?w?m[y]=g:l(y,g):(b?!_&&m[y]&&(w=!0):delete m[y],w?m[y]=g:a(m,y,g))})(Function.prototype,"toString",function(){return typeof this=="function"&&c(this).source||h(this)})},{"../internals/create-non-enumerable-property":38,"../internals/global":59,"../internals/has":60,"../internals/inspect-source":68,"../internals/internal-state":70,"../internals/set-global":115}],109:[function(e,o,i){var u=e("./classof-raw"),a=e("./regexp-exec");o.exports=function(s,l){var h=s.exec;if(typeof h=="function"){if(h=h.call(s,l),typeof h!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return h}if(u(s)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return a.call(s,l)}},{"./classof-raw":28,"./regexp-exec":110}],110:[function(l,o,i){var u,a,s=l("./regexp-flags"),l=l("./regexp-sticky-helpers"),h=RegExp.prototype.exec,p=String.prototype.replace,c=h,d=(u=/a/,a=/b*/g,h.call(u,"a"),h.call(a,"a"),u.lastIndex!==0||a.lastIndex!==0),f=l.UNSUPPORTED_Y||l.BROKEN_CARET,m=/()??/.exec("")[1]!==void 0;o.exports=c=d||m||f?function(y){var g,v,b,w,_=this,j=f&&_.sticky,E=s.call(_),T=_.source,R=0,M=y;return j&&((E=E.replace("y","")).indexOf("g")===-1&&(E+="g"),M=String(y).slice(_.lastIndex),0<_.lastIndex&&(!_.multiline||_.multiline&&y[_.lastIndex-1]!==`
`)&&(T="(?: "+T+")",M=" "+M,R++),v=new RegExp("^(?:"+T+")",E)),m&&(v=new RegExp("^"+T+"$(?!\\s)",E)),d&&(g=_.lastIndex),b=h.call(j?v:_,M),j?b?(b.input=b.input.slice(R),b[0]=b[0].slice(R),b.index=_.lastIndex,_.lastIndex+=b[0].length):_.lastIndex=0:d&&b&&(_.lastIndex=_.global?b.index+b[0].length:g),m&&b&&1<b.length&&p.call(b[0],v,function(){for(w=1;w<arguments.length-2;w++)arguments[w]===void 0&&(b[w]=void 0)}),b}:c},{"./regexp-flags":111,"./regexp-sticky-helpers":112}],111:[function(e,o,i){var u=e("../internals/an-object");o.exports=function(){var a=u(this),s="";return a.global&&(s+="g"),a.ignoreCase&&(s+="i"),a.multiline&&(s+="m"),a.dotAll&&(s+="s"),a.unicode&&(s+="u"),a.sticky&&(s+="y"),s}},{"../internals/an-object":10}],112:[function(e,o,i){e=e("./fails");function u(a,s){return RegExp(a,s)}i.UNSUPPORTED_Y=e(function(){var a=u("a","y");return a.lastIndex=2,a.exec("abcd")!=null}),i.BROKEN_CARET=e(function(){var a=u("^r","gy");return a.lastIndex=2,a.exec("str")!=null})},{"./fails":51}],113:[function(e,o,i){o.exports=function(u){if(u==null)throw TypeError("Can't call method on "+u);return u}},{}],114:[function(e,o,i){o.exports=Object.is||function(u,a){return u===a?u!==0||1/u==1/a:u!=u&&a!=a}},{}],115:[function(e,o,i){var u=e("../internals/global"),a=e("../internals/create-non-enumerable-property");o.exports=function(s,l){try{a(u,s,l)}catch{u[s]=l}return l}},{"../internals/create-non-enumerable-property":38,"../internals/global":59}],116:[function(e,o,i){var u=e("../internals/get-built-in"),a=e("../internals/object-define-property"),s=e("../internals/well-known-symbol"),l=e("../internals/descriptors"),h=s("species");o.exports=function(c){var c=u(c),d=a.f;l&&c&&!c[h]&&d(c,h,{configurable:!0,get:function(){return this}})}},{"../internals/descriptors":43,"../internals/get-built-in":56,"../internals/object-define-property":92,"../internals/well-known-symbol":146}],117:[function(e,o,i){var u=e("../internals/object-define-property").f,a=e("../internals/has"),s=e("../internals/well-known-symbol")("toStringTag");o.exports=function(l,h,p){l&&!a(l=p?l:l.prototype,s)&&u(l,s,{configurable:!0,value:h})}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/well-known-symbol":146}],118:[function(e,o,i){var u=e("../internals/shared"),a=e("../internals/uid"),s=u("keys");o.exports=function(l){return s[l]||(s[l]=a(l))}},{"../internals/shared":120,"../internals/uid":143}],119:[function(u,o,i){var s=u("../internals/global"),u=u("../internals/set-global"),a="__core-js_shared__",s=s[a]||u(a,{});o.exports=s},{"../internals/global":59,"../internals/set-global":115}],120:[function(e,o,i){var u=e("../internals/is-pure"),a=e("../internals/shared-store");(o.exports=function(s,l){return a[s]||(a[s]=l!==void 0?l:{})})("versions",[]).push({version:"3.6.5",mode:u?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},{"../internals/is-pure":75,"../internals/shared-store":119}],121:[function(e,o,i){var u=e("../internals/an-object"),a=e("../internals/a-function"),s=e("../internals/well-known-symbol")("species");o.exports=function(p,h){var p=u(p).constructor;return p===void 0||(p=u(p)[s])==null?h:a(p)}},{"../internals/a-function":5,"../internals/an-object":10,"../internals/well-known-symbol":146}],122:[function(e,o,i){var u=e("../internals/fails");o.exports=function(a){return u(function(){var s=""[a]('"');return s!==s.toLowerCase()||3<s.split('"').length})}},{"../internals/fails":51}],123:[function(e,o,i){function u(l){return function(d,f){var c,d=String(s(d)),f=a(f),m=d.length;return f<0||m<=f?l?"":void 0:(c=d.charCodeAt(f))<55296||56319<c||f+1===m||(m=d.charCodeAt(f+1))<56320||57343<m?l?d.charAt(f):c:l?d.slice(f,f+2):m-56320+(c-55296<<10)+65536}}var a=e("../internals/to-integer"),s=e("../internals/require-object-coercible");o.exports={codeAt:u(!1),charAt:u(!0)}},{"../internals/require-object-coercible":113,"../internals/to-integer":133}],124:[function(e,o,i){function u(b){return b+22+75*(b<26)}function a(b){var w,_=[],j=(b=function(V){for(var X=[],te=0,A=V.length;te<A;){var O,U=V.charCodeAt(te++);55296<=U&&U<=56319&&te<A?(64512&(O=V.charCodeAt(te++)))==56320?X.push(((1023&U)<<10)+(1023&O)+65536):(X.push(U),te--):X.push(U)}return X}(b)).length,E=128,T=0,R=72;for(L=0;L<b.length;L++)(w=b[L])<128&&_.push(v(w));var M=_.length,I=M;for(M&&_.push("-");I<j;){for(var D=s,L=0;L<b.length;L++)E<=(w=b[L])&&w<D&&(D=w);var N=I+1;if(D-E>g((s-T)/N))throw RangeError(m);for(T+=(D-E)*N,E=D,L=0;L<b.length;L++){if((w=b[L])<E&&++T>s)throw RangeError(m);if(w==E){for(var W=T,q=l;;q+=l){var H=q<=R?1:R+h<=q?h:q-R;if(W<H)break;var B=W-H,G=l-H;_.push(v(u(H+B%G))),W=g(B/G)}_.push(v(u(W))),R=function(V,X,te){var A=0;for(V=te?g(V/c):V>>1,V+=g(V/X);y*h>>1<V;A+=l)V=g(V/y);return g(A+(y+1)*V/(V+p))}(T,N,I==M),T=0,++I}}++T,++E}return _.join("")}var s=2147483647,l=36,h=26,p=38,c=700,d=/[^\0-\u007E]/,f=/[.\u3002\uFF0E\uFF61]/g,m="Overflow: input needs wider integers to process",y=l-1,g=Math.floor,v=String.fromCharCode;o.exports=function(b){for(var w,_=[],j=b.toLowerCase().replace(f,".").split("."),E=0;E<j.length;E++)w=j[E],_.push(d.test(w)?"xn--"+a(w):w);return _.join(".")}},{}],125:[function(e,o,i){var u=e("../internals/to-integer"),a=e("../internals/require-object-coercible");o.exports="".repeat||function(s){var l=String(a(this)),h="",p=u(s);if(p<0||p==1/0)throw RangeError("Wrong number of repetitions");for(;0<p;(p>>>=1)&&(l+=l))1&p&&(h+=l);return h}},{"../internals/require-object-coercible":113,"../internals/to-integer":133}],126:[function(e,o,i){var u=e("../internals/fails"),a=e("../internals/whitespaces");o.exports=function(s){return u(function(){return!!a[s]()||""[s]()!=""||a[s].name!==s})}},{"../internals/fails":51,"../internals/whitespaces":147}],127:[function(s,o,i){function u(p){return function(c){return c=String(a(c)),1&p&&(c=c.replace(l,"")),c=2&p?c.replace(h,""):c}}var a=s("../internals/require-object-coercible"),s="["+s("../internals/whitespaces")+"]",l=RegExp("^"+s+s+"*"),h=RegExp(s+s+"*$");o.exports={start:u(1),end:u(2),trim:u(3)}},{"../internals/require-object-coercible":113,"../internals/whitespaces":147}],128:[function(y,o,i){function u(I){return function(){M(I)}}function a(I){M(I.data)}function s(I){h.postMessage(I+"",g.protocol+"//"+g.host)}var l,h=y("../internals/global"),p=y("../internals/fails"),c=y("../internals/classof-raw"),d=y("../internals/function-bind-context"),f=y("../internals/html"),m=y("../internals/document-create-element"),y=y("../internals/engine-is-ios"),g=h.location,v=h.setImmediate,b=h.clearImmediate,w=h.process,_=h.MessageChannel,j=h.Dispatch,E=0,T={},R="onreadystatechange",M=function(I){var D;T.hasOwnProperty(I)&&(D=T[I],delete T[I],D())};v&&b||(v=function(I){for(var D=[],L=1;L<arguments.length;)D.push(arguments[L++]);return T[++E]=function(){(typeof I=="function"?I:Function(I)).apply(void 0,D)},l(E),E},b=function(I){delete T[I]},c(w)=="process"?l=function(I){w.nextTick(u(I))}:j&&j.now?l=function(I){j.now(u(I))}:_&&!y?(y=(c=new _).port2,c.port1.onmessage=a,l=d(y.postMessage,y,1)):!h.addEventListener||typeof postMessage!="function"||h.importScripts||p(s)||g.protocol==="file:"?l=R in m("script")?function(I){f.appendChild(m("script"))[R]=function(){f.removeChild(this),M(I)}}:function(I){setTimeout(u(I),0)}:(l=s,h.addEventListener("message",a,!1))),o.exports={set:v,clear:b}},{"../internals/classof-raw":28,"../internals/document-create-element":44,"../internals/engine-is-ios":46,"../internals/fails":51,"../internals/function-bind-context":54,"../internals/global":59,"../internals/html":63}],129:[function(e,o,i){var u=e("../internals/classof-raw");o.exports=function(a){if(typeof a!="number"&&u(a)!="Number")throw TypeError("Incorrect invocation");return+a}},{"../internals/classof-raw":28}],130:[function(e,o,i){var u=e("../internals/to-integer"),a=Math.max,s=Math.min;o.exports=function(l,h){return l=u(l),l<0?a(l+h,0):s(l,h)}},{"../internals/to-integer":133}],131:[function(e,o,i){var u=e("../internals/to-integer"),a=e("../internals/to-length");o.exports=function(l){if(l===void 0)return 0;var l=u(l),h=a(l);if(l!==h)throw RangeError("Wrong length or index");return h}},{"../internals/to-integer":133,"../internals/to-length":134}],132:[function(e,o,i){var u=e("../internals/indexed-object"),a=e("../internals/require-object-coercible");o.exports=function(s){return u(a(s))}},{"../internals/indexed-object":66,"../internals/require-object-coercible":113}],133:[function(e,o,i){var u=Math.ceil,a=Math.floor;o.exports=function(s){return isNaN(s=+s)?0:(0<s?a:u)(s)}},{}],134:[function(e,o,i){var u=e("../internals/to-integer"),a=Math.min;o.exports=function(s){return 0<s?a(u(s),9007199254740991):0}},{"../internals/to-integer":133}],135:[function(e,o,i){var u=e("../internals/require-object-coercible");o.exports=function(a){return Object(u(a))}},{"../internals/require-object-coercible":113}],136:[function(e,o,i){var u=e("../internals/to-positive-integer");o.exports=function(a,s){if(a=u(a),a%s)throw RangeError("Wrong offset");return a}},{"../internals/to-positive-integer":137}],137:[function(e,o,i){var u=e("../internals/to-integer");o.exports=function(a){if(a=u(a),a<0)throw RangeError("The argument can't be less than 0");return a}},{"../internals/to-integer":133}],138:[function(e,o,i){var u=e("../internals/is-object");o.exports=function(a,s){if(!u(a))return a;var l,h;if(s&&typeof(l=a.toString)=="function"&&!u(h=l.call(a))||typeof(l=a.valueOf)=="function"&&!u(h=l.call(a))||!s&&typeof(l=a.toString)=="function"&&!u(h=l.call(a)))return h;throw TypeError("Can't convert object to primitive value")}},{"../internals/is-object":74}],139:[function(e,o,i){var u={};u[e("../internals/well-known-symbol")("toStringTag")]="z",o.exports=String(u)==="[object z]"},{"../internals/well-known-symbol":146}],140:[function(e,o,i){function u(ge,Pe){for(var Ie=0,Fe=Pe.length,Te=new(Q(ge))(Fe);Ie<Fe;)Te[Ie]=Pe[Ie++];return Te}function a(ge,Pe){O(ge,Pe,{get:function(){return te(this)[Pe]}})}function s(ge){return ge instanceof ae||(ge=M(ge))=="ArrayBuffer"||ge=="SharedArrayBuffer"}function l(ge,Pe){return pe(ge)&&typeof Pe!="symbol"&&Pe in ge&&String(+Pe)==String(Pe)}function h(ge,Pe){return l(ge,Pe=T(Pe,!0))?b(2,ge[Pe]):U(ge,Pe)}function p(ge,Pe,Ie){return!(l(ge,Pe=T(Pe,!0))&&I(Ie)&&R(Ie,"value"))||R(Ie,"get")||R(Ie,"set")||Ie.configurable||R(Ie,"writable")&&!Ie.writable||R(Ie,"enumerable")&&!Ie.enumerable?O(ge,Pe,Ie):(ge[Pe]=Ie.value,ge)}var c=e("../internals/export"),d=e("../internals/global"),f=e("../internals/descriptors"),m=e("../internals/typed-array-constructors-require-wrappers"),y=e("../internals/array-buffer-view-core"),g=e("../internals/array-buffer"),v=e("../internals/an-instance"),b=e("../internals/create-property-descriptor"),w=e("../internals/create-non-enumerable-property"),_=e("../internals/to-length"),j=e("../internals/to-index"),E=e("../internals/to-offset"),T=e("../internals/to-primitive"),R=e("../internals/has"),M=e("../internals/classof"),I=e("../internals/is-object"),D=e("../internals/object-create"),L=e("../internals/object-set-prototype-of"),N=e("../internals/object-get-own-property-names").f,W=e("../internals/typed-array-from"),q=e("../internals/array-iteration").forEach,H=e("../internals/set-species"),B=e("../internals/object-define-property"),G=e("../internals/object-get-own-property-descriptor"),V=e("../internals/internal-state"),X=e("../internals/inherit-if-required"),te=V.get,A=V.set,O=B.f,U=G.f,Y=Math.round,J=d.RangeError,ae=g.ArrayBuffer,ue=g.DataView,de=y.NATIVE_ARRAY_BUFFER_VIEWS,ne=y.TYPED_ARRAY_TAG,le=y.TypedArray,me=y.TypedArrayPrototype,Q=y.aTypedArrayConstructor,pe=y.isTypedArray,ye="BYTES_PER_ELEMENT",we="Wrong length";f?(de||(G.f=h,B.f=p,a(me,"buffer"),a(me,"byteOffset"),a(me,"byteLength"),a(me,"length")),c({target:"Object",stat:!0,forced:!de},{getOwnPropertyDescriptor:h,defineProperty:p}),o.exports=function(_e,Pe,Ie){function Fe(je,K){O(je,K,{get:function(){var ee=this,$=K;return(ee=te(ee)).view[Je]($*Te+ee.byteOffset,!0)},set:function(ee){var $=this,re=K;$=te($),Ie&&(ee=(ee=Y(ee))<0?0:255<ee?255:255&ee),$.view[Ke](re*Te+$.byteOffset,ee,!0)},enumerable:!0})}var Te=_e.match(/\d+$/)[0]/8,$e=_e+(Ie?"Clamped":"")+"Array",Je="get"+_e,Ke="set"+_e,at=d[$e],Ze=at,_e=Ze&&Ze.prototype,Be={};de?m&&(Ze=Pe(function(je,K,ee,$){return v(je,Ze,$e),X(I(K)?s(K)?$!==void 0?new at(K,E(ee,Te),$):ee!==void 0?new at(K,E(ee,Te)):new at(K):pe(K)?u(Ze,K):W.call(Ze,K):new at(j(K)),je,Ze)}),L&&L(Ze,le),q(N(at),function(je){je in Ze||w(Ze,je,at[je])}),Ze.prototype=_e):(Ze=Pe(function(je,K,ee,$){v(je,Ze,$e);var re,ve,Ce=0,Oe=0;if(I(K)){if(!s(K))return pe(K)?u(Ze,K):W.call(Ze,K);var He=K,Oe=E(ee,Te),ee=K.byteLength;if($===void 0){if(ee%Te||(re=ee-Oe)<0)throw J(we)}else if(ee<(re=_($)*Te)+Oe)throw J(we);ve=re/Te}else ve=j(K),He=new ae(re=ve*Te);for(A(je,{buffer:He,byteOffset:Oe,byteLength:re,length:ve,view:new ue(He)});Ce<ve;)Fe(je,Ce++)}),L&&L(Ze,le),_e=Ze.prototype=D(me)),_e.constructor!==Ze&&w(_e,"constructor",Ze),ne&&w(_e,ne,$e),Be[$e]=Ze,c({global:!0,forced:Ze!=at,sham:!de},Be),ye in Ze||w(Ze,ye,Te),ye in _e||w(_e,ye,Te),H($e)}):o.exports=function(){}},{"../internals/an-instance":9,"../internals/array-buffer":13,"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/export":50,"../internals/global":59,"../internals/has":60,"../internals/inherit-if-required":67,"../internals/internal-state":70,"../internals/is-object":74,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/object-set-prototype-of":101,"../internals/set-species":116,"../internals/to-index":131,"../internals/to-length":134,"../internals/to-offset":136,"../internals/to-primitive":138,"../internals/typed-array-constructors-require-wrappers":141,"../internals/typed-array-from":142}],141:[function(l,o,i){var u=l("../internals/global"),a=l("../internals/fails"),s=l("../internals/check-correctness-of-iteration"),l=l("../internals/array-buffer-view-core").NATIVE_ARRAY_BUFFER_VIEWS,h=u.ArrayBuffer,p=u.Int8Array;o.exports=!l||!a(function(){p(1)})||!a(function(){new p(-1)})||!s(function(c){new p,new p(null),new p(1.5),new p(c)},!0)||a(function(){return new p(new h(2),1,void 0).length!==1})},{"../internals/array-buffer-view-core":12,"../internals/check-correctness-of-iteration":27,"../internals/fails":51,"../internals/global":59}],142:[function(e,o,i){var u=e("../internals/to-object"),a=e("../internals/to-length"),s=e("../internals/get-iterator-method"),l=e("../internals/is-array-iterator-method"),h=e("../internals/function-bind-context"),p=e("../internals/array-buffer-view-core").aTypedArrayConstructor;o.exports=function(c){var d,f,m,y,g,v,b=u(c),w=arguments.length,_=1<w?arguments[1]:void 0,j=_!==void 0,E=s(b);if(E!=null&&!l(E))for(v=(g=E.call(b)).next,b=[];!(y=v.call(g)).done;)b.push(y.value);for(j&&2<w&&(_=h(_,arguments[2],2)),f=a(b.length),m=new(p(this))(f),d=0;d<f;d++)m[d]=j?_(b[d],d):b[d];return m}},{"../internals/array-buffer-view-core":12,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":134,"../internals/to-object":135}],143:[function(e,o,i){var u=0,a=Math.random();o.exports=function(s){return"Symbol("+String(s===void 0?"":s)+")_"+(++u+a).toString(36)}},{}],144:[function(e,o,i){e=e("../internals/native-symbol"),o.exports=e&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},{"../internals/native-symbol":83}],145:[function(e,o,i){e=e("../internals/well-known-symbol"),i.f=e},{"../internals/well-known-symbol":146}],146:[function(p,o,i){var u=p("../internals/global"),a=p("../internals/shared"),s=p("../internals/has"),l=p("../internals/uid"),h=p("../internals/native-symbol"),p=p("../internals/use-symbol-as-uid"),c=a("wks"),d=u.Symbol,f=p?d:d&&d.withoutSetter||l;o.exports=function(m){return s(c,m)||(h&&s(d,m)?c[m]=d[m]:c[m]=f("Symbol."+m)),c[m]}},{"../internals/global":59,"../internals/has":60,"../internals/native-symbol":83,"../internals/shared":120,"../internals/uid":143,"../internals/use-symbol-as-uid":144}],147:[function(e,o,i){o.exports=`	
\v\f\r \u2028\u2029\uFEFF`},{}],148:[function(s,o,i){var u=s("../internals/export"),a=s("../internals/global"),h=s("../internals/array-buffer"),s=s("../internals/set-species"),l="ArrayBuffer",h=h[l];u({global:!0,forced:a[l]!==h},{ArrayBuffer:h}),s(l)},{"../internals/array-buffer":13,"../internals/export":50,"../internals/global":59,"../internals/set-species":116}],149:[function(b,o,i){var u=b("../internals/export"),a=b("../internals/fails"),s=b("../internals/is-array"),l=b("../internals/is-object"),h=b("../internals/to-object"),p=b("../internals/to-length"),c=b("../internals/create-property"),d=b("../internals/array-species-create"),f=b("../internals/array-method-has-species-support"),v=b("../internals/well-known-symbol"),b=b("../internals/engine-v8-version"),m=v("isConcatSpreadable"),y=9007199254740991,g="Maximum allowed index exceeded",v=51<=b||!a(function(){var w=[];return w[m]=!1,w.concat()[0]!==w}),b=f("concat");u({target:"Array",proto:!0,forced:!v||!b},{concat:function(w){for(var _,j,E,T,R,M=h(this),I=d(M,0),D=0,L=-1,N=arguments.length;L<N;L++)if(R=void 0,!l(T=E=L===-1?M:arguments[L])||((R=T[m])!==void 0?!R:!s(T))){if(y<=D)throw TypeError(g);c(I,D++,E)}else{if(j=p(E.length),y<D+j)throw TypeError(g);for(_=0;_<j;_++,D++)_ in E&&c(I,D,E[_])}return I.length=D,I}})},{"../internals/array-method-has-species-support":21,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/fails":51,"../internals/is-array":72,"../internals/is-object":74,"../internals/to-length":134,"../internals/to-object":135,"../internals/well-known-symbol":146}],150:[function(s,o,i){var u=s("../internals/export"),a=s("../internals/array-copy-within"),s=s("../internals/add-to-unscopables");u({target:"Array",proto:!0},{copyWithin:a}),s("copyWithin")},{"../internals/add-to-unscopables":7,"../internals/array-copy-within":14,"../internals/export":50}],151:[function(l,o,i){var u=l("../internals/export"),a=l("../internals/array-iteration").every,s=l("../internals/array-method-is-strict"),l=l("../internals/array-method-uses-to-length"),s=s("every"),l=l("every");u({target:"Array",proto:!0,forced:!s||!l},{every:function(h){return a(this,h,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],152:[function(s,o,i){var u=s("../internals/export"),a=s("../internals/array-fill"),s=s("../internals/add-to-unscopables");u({target:"Array",proto:!0},{fill:a}),s("fill")},{"../internals/add-to-unscopables":7,"../internals/array-fill":15,"../internals/export":50}],153:[function(l,o,i){var u=l("../internals/export"),a=l("../internals/array-iteration").filter,s=l("../internals/array-method-has-species-support"),l=l("../internals/array-method-uses-to-length"),s=s("filter"),l=l("filter");u({target:"Array",proto:!0,forced:!s||!l},{filter:function(h){return a(this,h,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],154:[function(a,o,i){var u=a("../internals/export"),a=a("../internals/array-for-each");u({target:"Array",proto:!0,forced:[].forEach!=a},{forEach:a})},{"../internals/array-for-each":16,"../internals/export":50}],155:[function(e,o,i){var u=e("../internals/export"),a=e("../internals/array-from");u({target:"Array",stat:!0,forced:!e("../internals/check-correctness-of-iteration")(function(s){Array.from(s)})},{from:a})},{"../internals/array-from":17,"../internals/check-correctness-of-iteration":27,"../internals/export":50}],156:[function(e,o,i){var u=e("../internals/export"),a=e("../internals/array-includes").includes,s=e("../internals/add-to-unscopables");u({target:"Array",proto:!0,forced:!e("../internals/array-method-uses-to-length")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(l){return a(this,l,1<arguments.length?arguments[1]:void 0)}}),s("includes")},{"../internals/add-to-unscopables":7,"../internals/array-includes":18,"../internals/array-method-uses-to-length":23,"../internals/export":50}],157:[function(p,o,i){var u=p("../internals/export"),a=p("../internals/array-includes").indexOf,h=p("../internals/array-method-is-strict"),p=p("../internals/array-method-uses-to-length"),s=[].indexOf,l=!!s&&1/[1].indexOf(1,-0)<0,h=h("indexOf"),p=p("indexOf",{ACCESSORS:!0,1:0});u({target:"Array",proto:!0,forced:l||!h||!p},{indexOf:function(c){return l?s.apply(this,arguments)||0:a(this,c,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-includes":18,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],158:[function(h,o,i){var u=h("../internals/to-indexed-object"),a=h("../internals/add-to-unscopables"),s=h("../internals/iterators"),l=h("../internals/internal-state"),h=h("../internals/define-iterator"),p="Array Iterator",c=l.set,d=l.getterFor(p);o.exports=h(Array,"Array",function(f,m){c(this,{type:p,target:u(f),index:0,kind:m})},function(){var f=d(this),m=f.target,y=f.kind,g=f.index++;return!m||g>=m.length?{value:f.target=void 0,done:!0}:y=="keys"?{value:g,done:!1}:y=="values"?{value:m[g],done:!1}:{value:[g,m[g]],done:!1}},"values"),s.Arguments=s.Array,a("keys"),a("values"),a("entries")},{"../internals/add-to-unscopables":7,"../internals/define-iterator":41,"../internals/internal-state":70,"../internals/iterators":79,"../internals/to-indexed-object":132}],159:[function(h,o,i){var u=h("../internals/export"),l=h("../internals/indexed-object"),a=h("../internals/to-indexed-object"),h=h("../internals/array-method-is-strict"),s=[].join,l=l!=Object,h=h("join",",");u({target:"Array",proto:!0,forced:l||!h},{join:function(p){return s.call(a(this),p===void 0?",":p)}})},{"../internals/array-method-is-strict":22,"../internals/export":50,"../internals/indexed-object":66,"../internals/to-indexed-object":132}],160:[function(a,o,i){var u=a("../internals/export"),a=a("../internals/array-last-index-of");u({target:"Array",proto:!0,forced:a!==[].lastIndexOf},{lastIndexOf:a})},{"../internals/array-last-index-of":20,"../internals/export":50}],161:[function(l,o,i){var u=l("../internals/export"),a=l("../internals/array-iteration").map,s=l("../internals/array-method-has-species-support"),l=l("../internals/array-method-uses-to-length"),s=s("map"),l=l("map");u({target:"Array",proto:!0,forced:!s||!l},{map:function(h){return a(this,h,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],162:[function(m,o,i){var u=m("../internals/export"),a=m("../internals/is-object"),s=m("../internals/is-array"),l=m("../internals/to-absolute-index"),h=m("../internals/to-length"),p=m("../internals/to-indexed-object"),c=m("../internals/create-property"),d=m("../internals/well-known-symbol"),f=m("../internals/array-method-has-species-support"),m=m("../internals/array-method-uses-to-length"),f=f("slice"),m=m("slice",{ACCESSORS:!0,0:0,1:2}),y=d("species"),g=[].slice,v=Math.max;u({target:"Array",proto:!0,forced:!f||!m},{slice:function(b,w){var _,j,E,T=p(this),R=h(T.length),M=l(b,R),I=l(w===void 0?R:w,R);if(s(T)&&((_=typeof(_=T.constructor)=="function"&&(_===Array||s(_.prototype))||a(_)&&(_=_[y])===null?void 0:_)===Array||_===void 0))return g.call(T,M,I);for(j=new(_===void 0?Array:_)(v(I-M,0)),E=0;M<I;M++,E++)M in T&&c(j,E,T[M]);return j.length=E,j}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/create-property":40,"../internals/export":50,"../internals/is-array":72,"../internals/is-object":74,"../internals/to-absolute-index":130,"../internals/to-indexed-object":132,"../internals/to-length":134,"../internals/well-known-symbol":146}],163:[function(l,o,i){var u=l("../internals/export"),a=l("../internals/array-iteration").some,s=l("../internals/array-method-is-strict"),l=l("../internals/array-method-uses-to-length"),s=s("some"),l=l("some");u({target:"Array",proto:!0,forced:!s||!l},{some:function(h){return a(this,h,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],164:[function(f,o,i){var u=f("../internals/export"),a=f("../internals/to-absolute-index"),s=f("../internals/to-integer"),l=f("../internals/to-length"),h=f("../internals/to-object"),p=f("../internals/array-species-create"),c=f("../internals/create-property"),d=f("../internals/array-method-has-species-support"),f=f("../internals/array-method-uses-to-length"),d=d("splice"),f=f("splice",{ACCESSORS:!0,0:0,1:2}),m=Math.max,y=Math.min;u({target:"Array",proto:!0,forced:!d||!f},{splice:function(D,v){var b,w,_,j,E,T,R=h(this),M=l(R.length),I=a(D,M),D=arguments.length;if(D===0?b=w=0:w=D===1?(b=0,M-I):(b=D-2,y(m(s(v),0),M-I)),9007199254740991<M+b-w)throw TypeError("Maximum allowed length exceeded");for(_=p(R,w),j=0;j<w;j++)(E=I+j)in R&&c(_,j,R[E]);if(b<(_.length=w)){for(j=I;j<M-w;j++)T=j+b,(E=j+w)in R?R[T]=R[E]:delete R[T];for(j=M;M-w+b<j;j--)delete R[j-1]}else if(w<b)for(j=M-w;I<j;j--)T=j+b-1,(E=j+w-1)in R?R[T]=R[E]:delete R[T];for(j=0;j<b;j++)R[j+I]=arguments[j+2];return R.length=M-w+b,_}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/export":50,"../internals/to-absolute-index":130,"../internals/to-integer":133,"../internals/to-length":134,"../internals/to-object":135}],165:[function(a,o,i){var u=a("../internals/descriptors"),a=a("../internals/object-define-property").f,s=Function.prototype,l=s.toString,h=/^\s*function ([^ (]*)/;!u||"name"in s||a(s,"name",{configurable:!0,get:function(){try{return l.call(this).match(h)[1]}catch{return""}}})},{"../internals/descriptors":43,"../internals/object-define-property":92}],166:[function(a,o,i){var u=a("../internals/collection"),a=a("../internals/collection-strong");o.exports=u("Map",function(s){return function(){return s(this,arguments.length?arguments[0]:void 0)}},a)},{"../internals/collection":32,"../internals/collection-strong":30}],167:[function(u,o,i){var u=u("../internals/export"),a=Math.hypot,s=Math.abs,l=Math.sqrt;u({target:"Math",stat:!0,forced:!!a&&a(1/0,NaN)!==1/0},{hypot:function(h,p){for(var c,d,f=0,m=0,y=arguments.length,g=0;m<y;)g<(c=s(arguments[m++]))?(f=f*(d=g/c)*d+1,g=c):f+=0<c?(d=c/g)*d:c;return g===1/0?1/0:g*l(f)}})},{"../internals/export":50}],168:[function(e,o,i){e("../internals/export")({target:"Math",stat:!0},{sign:e("../internals/math-sign")})},{"../internals/export":50,"../internals/math-sign":80}],169:[function(e,o,i){function u(L){var N,W,q,H,B,G,V,X=f(L,!1);if(typeof X=="string"&&2<X.length){if((L=(X=w(X)).charCodeAt(0))===43||L===45){if((N=X.charCodeAt(2))===88||N===120)return NaN}else if(L===48){switch(X.charCodeAt(1)){case 66:case 98:W=2,q=49;break;case 79:case 111:W=8,q=55;break;default:return+X}for(B=(H=X.slice(2)).length,G=0;G<B;G++)if((V=H.charCodeAt(G))<48||q<V)return NaN;return parseInt(H,W)}}return+X}var a=e("../internals/descriptors"),s=e("../internals/global"),l=e("../internals/is-forced"),h=e("../internals/redefine"),p=e("../internals/has"),c=e("../internals/classof-raw"),d=e("../internals/inherit-if-required"),f=e("../internals/to-primitive"),m=e("../internals/fails"),y=e("../internals/object-create"),g=e("../internals/object-get-own-property-names").f,v=e("../internals/object-get-own-property-descriptor").f,b=e("../internals/object-define-property").f,w=e("../internals/string-trim").trim,_="Number",j=s[_],E=j.prototype,T=c(y(E))==_;if(l(_,!j(" 0o1")||!j("0b1")||j("+0x1"))){for(var R,M=function(N){var N=arguments.length<1?0:N,W=this;return W instanceof M&&(T?m(function(){E.valueOf.call(W)}):c(W)!=_)?d(new j(u(N)),W,M):u(N)},I=a?g(j):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),D=0;I.length>D;D++)p(j,R=I[D])&&!p(M,R)&&b(M,R,v(j,R));(M.prototype=E).constructor=M,h(s,_,M)}},{"../internals/classof-raw":28,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":59,"../internals/has":60,"../internals/inherit-if-required":67,"../internals/is-forced":73,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/redefine":108,"../internals/string-trim":127,"../internals/to-primitive":138}],170:[function(e,o,i){e("../internals/export")({target:"Number",stat:!0},{isFinite:e("../internals/number-is-finite")})},{"../internals/export":50,"../internals/number-is-finite":88}],171:[function(p,o,i){function u(f,m,y){return m===0?y:m%2==1?u(f,m-1,y*f):u(f*f,m/2,y)}var a=p("../internals/export"),s=p("../internals/to-integer"),l=p("../internals/this-number-value"),h=p("../internals/string-repeat"),p=p("../internals/fails"),c=1 .toFixed,d=Math.floor;a({target:"Number",proto:!0,forced:c&&(8e-5 .toFixed(3)!=="0.000"||.9 .toFixed(0)!=="1"||1.255 .toFixed(2)!=="1.25"||0xde0b6b3a7640080 .toFixed(0)!=="1000000000000000128")||!p(function(){c.call({})})},{toFixed:function(_){function m(R,M){for(var I=-1,D=M;++I<6;)D+=R*j[I],j[I]=D%1e7,D=d(D/1e7)}function y(R){for(var M=6,I=0;0<=--M;)I+=j[M],j[M]=d(I/R),I=I%R*1e7}function g(){for(var R,M=6,I="";0<=--M;)I===""&&M!==0&&j[M]===0||(R=String(j[M]),I=I===""?R:I+h.call("0",7-R.length)+R);return I}var v,b,w=l(this),_=s(_),j=[0,0,0,0,0,0],E="",T="0";if(_<0||20<_)throw RangeError("Incorrect fraction digits");if(w!=w)return"NaN";if(w<=-1e21||1e21<=w)return String(w);if(w<0&&(E="-",w=-w),1e-21<w)if(w=(v=function(R){for(var M=0,I=R;4096<=I;)M+=12,I/=4096;for(;2<=I;)M+=1,I/=2;return M}(w*u(2,69,1))-69)<0?w*u(2,-v,1):w/u(2,v,1),w*=4503599627370496,0<(v=52-v)){for(m(0,w),b=_;7<=b;)m(1e7,0),b-=7;for(m(u(10,b,1),0),b=v-1;23<=b;)y(1<<23),b-=23;y(1<<b),m(1,1),y(2),T=g()}else m(0,w),m(1<<-v,0),T=g()+h.call("0",_);return T=0<_?E+((w=T.length)<=_?"0."+h.call("0",_-w)+T:T.slice(0,w-_)+"."+T.slice(w-_)):E+T}})},{"../internals/export":50,"../internals/fails":51,"../internals/string-repeat":125,"../internals/this-number-value":129,"../internals/to-integer":133}],172:[function(a,o,i){var u=a("../internals/export"),a=a("../internals/object-assign");u({target:"Object",stat:!0,forced:Object.assign!==a},{assign:a})},{"../internals/export":50,"../internals/object-assign":89}],173:[function(l,o,i){var u=l("../internals/export"),h=l("../internals/fails"),a=l("../internals/to-indexed-object"),s=l("../internals/object-get-own-property-descriptor").f,l=l("../internals/descriptors"),h=h(function(){s(1)});u({target:"Object",stat:!0,forced:!l||h,sham:!l},{getOwnPropertyDescriptor:function(p,c){return s(a(p),c)}})},{"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-descriptor":93,"../internals/to-indexed-object":132}],174:[function(s,o,i){var u=s("../internals/export"),a=s("../internals/fails"),s=s("../internals/object-get-own-property-names-external").f;u({target:"Object",stat:!0,forced:a(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:s})},{"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-names-external":94}],175:[function(h,o,i){var u=h("../internals/export"),a=h("../internals/fails"),s=h("../internals/to-object"),l=h("../internals/object-get-prototype-of"),h=h("../internals/correct-prototype-getter");u({target:"Object",stat:!0,forced:a(function(){l(1)}),sham:!h},{getPrototypeOf:function(p){return l(s(p))}})},{"../internals/correct-prototype-getter":35,"../internals/export":50,"../internals/fails":51,"../internals/object-get-prototype-of":97,"../internals/to-object":135}],176:[function(e,o,i){var u=e("../internals/export"),a=e("../internals/to-object"),s=e("../internals/object-keys");u({target:"Object",stat:!0,forced:e("../internals/fails")(function(){s(1)})},{keys:function(l){return s(a(l))}})},{"../internals/export":50,"../internals/fails":51,"../internals/object-keys":99,"../internals/to-object":135}],177:[function(s,o,i){var u=s("../internals/to-string-tag-support"),a=s("../internals/redefine"),s=s("../internals/object-to-string");u||a(Object.prototype,"toString",s,{unsafe:!0})},{"../internals/object-to-string":102,"../internals/redefine":108,"../internals/to-string-tag-support":139}],178:[function(Ie,o,i){var u,a,s,l,h=Ie("../internals/export"),p=Ie("../internals/is-pure"),c=Ie("../internals/global"),d=Ie("../internals/get-built-in"),f=Ie("../internals/native-promise-constructor"),m=Ie("../internals/redefine"),y=Ie("../internals/redefine-all"),g=Ie("../internals/set-to-string-tag"),v=Ie("../internals/set-species"),b=Ie("../internals/is-object"),w=Ie("../internals/a-function"),_=Ie("../internals/an-instance"),j=Ie("../internals/classof-raw"),E=Ie("../internals/inspect-source"),T=Ie("../internals/iterate"),R=Ie("../internals/check-correctness-of-iteration"),M=Ie("../internals/species-constructor"),I=Ie("../internals/task").set,D=Ie("../internals/microtask"),L=Ie("../internals/promise-resolve"),N=Ie("../internals/host-report-errors"),W=Ie("../internals/new-promise-capability"),q=Ie("../internals/perform"),H=Ie("../internals/internal-state"),B=Ie("../internals/is-forced"),Fe=Ie("../internals/well-known-symbol"),G=Ie("../internals/engine-v8-version"),V=Fe("species"),X="Promise",te=H.get,A=H.set,O=H.getterFor(X),U=f,Y=c.TypeError,J=c.document,ae=c.process,ue=d("fetch"),de=W.f,ne=de,le=j(ae)=="process",me=!!(J&&J.createEvent&&c.dispatchEvent),Q="unhandledrejection",pe="rejectionhandled",ye=1,we=2,ge=1,Pe=2,Ie=B(X,function(){var Be,je;return E(U)===String(U)&&(G===66||!le&&typeof PromiseRejectionEvent!="function")?!0:!(!p||U.prototype.finally)||!(51<=G&&/native code/.test(U))&&(je=function(K){K(function(){},function(){})},((Be=U.resolve(1)).constructor={})[V]=je,!(Be.then(function(){})instanceof je))}),Fe=Ie||!R(function(Be){U.all(Be).catch(function(){})}),Te=function(Be){var je;return!(!b(Be)||typeof(je=Be.then)!="function")&&je},$e=function(Be,je,K){var ee;je.notified||(je.notified=!0,ee=je.reactions,D(function(){for(var $,re,ve=je.value,Ce=je.state==ye,Oe=0;ee.length>Oe;){var He,Ye,Qe,rt=ee[Oe++],Et=Ce?rt.ok:rt.fail,xt=rt.resolve,dt=rt.reject,wt=rt.domain;try{Et?(Ce||(je.rejection===Pe&&function(bt,qt){I.call(c,function(){le?ae.emit("rejectionHandled",bt):Je(pe,bt,qt.value)})}(Be,je),je.rejection=ge),Et===!0?He=ve:(wt&&wt.enter(),He=Et(ve),wt&&(wt.exit(),Qe=!0)),He===rt.promise?dt(Y("Promise-chain cycle")):(Ye=Te(He))?Ye.call(He,xt,dt):xt(He)):dt(ve)}catch(bt){wt&&!Qe&&wt.exit(),dt(bt)}}je.reactions=[],je.notified=!1,K&&!je.rejection&&($=Be,re=je,I.call(c,function(){var bt=re.value,qt=Ke(re);if(qt&&(qt=q(function(){le?ae.emit("unhandledRejection",bt,$):Je(Q,$,bt)}),re.rejection=le||Ke(re)?Pe:ge,qt.error))throw qt.value}))}))},Je=function(Be,je,K){var ee;me?((ee=J.createEvent("Event")).promise=je,ee.reason=K,ee.initEvent(Be,!1,!0),c.dispatchEvent(ee)):ee={promise:je,reason:K},(je=c["on"+Be])?je(ee):Be===Q&&N("Unhandled promise rejection",K)},Ke=function(Be){return Be.rejection!==ge&&!Be.parent},at=function(Be,je,K,ee){return function($){Be(je,K,$,ee)}},Ze=function(Be,je,K,ee){je.done||(je.done=!0,(je=ee||je).value=K,je.state=we,$e(Be,je,!0))},_e=function(Be,je,K,ee){if(!je.done){je.done=!0,ee&&(je=ee);try{if(Be===K)throw Y("Promise can't be resolved itself");var $=Te(K);$?D(function(){var re={done:!1};try{$.call(K,at(_e,Be,re,je),at(Ze,Be,re,je))}catch(ve){Ze(Be,re,ve,je)}}):(je.value=K,je.state=ye,$e(Be,je,!1))}catch(re){Ze(Be,{done:!1},re,je)}}};Ie&&(U=function(Be){_(this,U,X),w(Be),u.call(this);var je=te(this);try{Be(at(_e,this,je),at(Ze,this,je))}catch(K){Ze(this,je,K)}},(u=function(Be){A(this,{type:X,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=y(U.prototype,{then:function(Be,je){var K=O(this),ee=de(M(this,U));return ee.ok=typeof Be!="function"||Be,ee.fail=typeof je=="function"&&je,ee.domain=le?ae.domain:void 0,K.parent=!0,K.reactions.push(ee),K.state!=0&&$e(this,K,!1),ee.promise},catch:function(Be){return this.then(void 0,Be)}}),a=function(){var Be=new u,je=te(Be);this.promise=Be,this.resolve=at(_e,Be,je),this.reject=at(Ze,Be,je)},W.f=de=function(Be){return Be===U||Be===s?new a:ne(Be)},p||typeof f!="function"||(l=f.prototype.then,m(f.prototype,"then",function(Be,je){var K=this;return new U(function(ee,$){l.call(K,ee,$)}).then(Be,je)},{unsafe:!0}),typeof ue=="function"&&h({global:!0,enumerable:!0,forced:!0},{fetch:function(Be){return L(U,ue.apply(c,arguments))}}))),h({global:!0,wrap:!0,forced:Ie},{Promise:U}),g(U,X,!1,!0),v(X),s=d(X),h({target:X,stat:!0,forced:Ie},{reject:function(Be){var je=de(this);return je.reject.call(void 0,Be),je.promise}}),h({target:X,stat:!0,forced:p||Ie},{resolve:function(Be){return L(p&&this===s?U:this,Be)}}),h({target:X,stat:!0,forced:Fe},{all:function(Be){var je=this,K=de(je),ee=K.resolve,$=K.reject,re=q(function(){var ve=w(je.resolve),Ce=[],Oe=0,He=1;T(Be,function(Ye){var Qe=Oe++,rt=!1;Ce.push(void 0),He++,ve.call(je,Ye).then(function(Et){rt||(rt=!0,Ce[Qe]=Et,--He||ee(Ce))},$)}),--He||ee(Ce)});return re.error&&$(re.value),K.promise},race:function(Be){var je=this,K=de(je),ee=K.reject,$=q(function(){var re=w(je.resolve);T(Be,function(ve){re.call(je,ve).then(K.resolve,ee)})});return $.error&&ee($.value),K.promise}})},{"../internals/a-function":5,"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/classof-raw":28,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/get-built-in":56,"../internals/global":59,"../internals/host-report-errors":62,"../internals/inspect-source":68,"../internals/internal-state":70,"../internals/is-forced":73,"../internals/is-object":74,"../internals/is-pure":75,"../internals/iterate":77,"../internals/microtask":81,"../internals/native-promise-constructor":82,"../internals/new-promise-capability":86,"../internals/perform":105,"../internals/promise-resolve":106,"../internals/redefine":108,"../internals/redefine-all":107,"../internals/set-species":116,"../internals/set-to-string-tag":117,"../internals/species-constructor":121,"../internals/task":128,"../internals/well-known-symbol":146}],179:[function(c,o,i){var u=c("../internals/export"),y=c("../internals/get-built-in"),a=c("../internals/a-function"),s=c("../internals/an-object"),l=c("../internals/is-object"),h=c("../internals/object-create"),p=c("../internals/function-bind"),c=c("../internals/fails"),d=y("Reflect","construct"),f=c(function(){function g(){}return!(d(function(){},[],g)instanceof g)}),m=!c(function(){d(function(){})}),y=f||m;u({target:"Reflect",stat:!0,forced:y,sham:y},{construct:function(g,v){a(g),s(v);var b=arguments.length<3?g:a(arguments[2]);if(m&&!f)return d(g,v,b);if(g==b){switch(v.length){case 0:return new g;case 1:return new g(v[0]);case 2:return new g(v[0],v[1]);case 3:return new g(v[0],v[1],v[2]);case 4:return new g(v[0],v[1],v[2],v[3])}var w=[null];return w.push.apply(w,v),new(p.apply(g,w))}return w=b.prototype,b=h(l(w)?w:Object.prototype),w=Function.apply.call(g,b,v),l(w)?w:b}})},{"../internals/a-function":5,"../internals/an-object":10,"../internals/export":50,"../internals/fails":51,"../internals/function-bind":55,"../internals/get-built-in":56,"../internals/is-object":74,"../internals/object-create":90}],180:[function(e,o,i){var u=e("../internals/descriptors"),a=e("../internals/global"),s=e("../internals/is-forced"),l=e("../internals/inherit-if-required"),h=e("../internals/object-define-property").f,p=e("../internals/object-get-own-property-names").f,c=e("../internals/is-regexp"),d=e("../internals/regexp-flags"),f=e("../internals/regexp-sticky-helpers"),m=e("../internals/redefine"),y=e("../internals/fails"),g=e("../internals/internal-state").set,v=e("../internals/set-species"),b=e("../internals/well-known-symbol")("match"),w=a.RegExp,_=w.prototype,j=/a/g,E=/a/g,T=new w(j)!==j,R=f.UNSUPPORTED_Y;if(u&&s("RegExp",!T||R||y(function(){return E[b]=!1,w(j)!=j||w(E)==E||w(j,"i")!="/a/i"}))){for(var M=function(L,N){var W,q=this instanceof M,H=c(L),B=N===void 0;return!q&&H&&L.constructor===M&&B?L:(T?H&&!B&&(L=L.source):L instanceof M&&(B&&(N=d.call(L)),L=L.source),R&&(W=!!N&&-1<N.indexOf("y"))&&(N=N.replace(/y/g,"")),H=l(T?new w(L,N):w(L,N),q?this:_,M),R&&W&&g(H,{sticky:W}),H)},I=p(w),D=0;I.length>D;)(function(L){L in M||h(M,L,{configurable:!0,get:function(){return w[L]},set:function(N){w[L]=N}})})(I[D++]);(_.constructor=M).prototype=_,m(a,"RegExp",M)}v("RegExp")},{"../internals/descriptors":43,"../internals/fails":51,"../internals/global":59,"../internals/inherit-if-required":67,"../internals/internal-state":70,"../internals/is-forced":73,"../internals/is-regexp":76,"../internals/object-define-property":92,"../internals/object-get-own-property-names":95,"../internals/redefine":108,"../internals/regexp-flags":111,"../internals/regexp-sticky-helpers":112,"../internals/set-species":116,"../internals/well-known-symbol":146}],181:[function(a,o,i){var u=a("../internals/export"),a=a("../internals/regexp-exec");u({target:"RegExp",proto:!0,forced:/./.exec!==a},{exec:a})},{"../internals/export":50,"../internals/regexp-exec":110}],182:[function(l,o,i){var u=l("../internals/redefine"),a=l("../internals/an-object"),c=l("../internals/fails"),s=l("../internals/regexp-flags"),l="toString",h=RegExp.prototype,p=h[l],c=c(function(){return p.call({source:"a",flags:"b"})!="/a/b"}),d=p.name!=l;(c||d)&&u(RegExp.prototype,l,function(){var f=a(this),m=String(f.source),y=f.flags;return"/"+m+"/"+String(y===void 0&&f instanceof RegExp&&!("flags"in h)?s.call(f):y)},{unsafe:!0})},{"../internals/an-object":10,"../internals/fails":51,"../internals/redefine":108,"../internals/regexp-flags":111}],183:[function(a,o,i){var u=a("../internals/collection"),a=a("../internals/collection-strong");o.exports=u("Set",function(s){return function(){return s(this,arguments.length?arguments[0]:void 0)}},a)},{"../internals/collection":32,"../internals/collection-strong":30}],184:[function(p,o,i){var u=p("../internals/export"),a=p("../internals/object-get-own-property-descriptor").f,s=p("../internals/to-length"),l=p("../internals/not-a-regexp"),h=p("../internals/require-object-coercible"),f=p("../internals/correct-is-regexp-logic"),p=p("../internals/is-pure"),c="".endsWith,d=Math.min,f=f("endsWith");u({target:"String",proto:!0,forced:!!(p||f||!(u=a(String.prototype,"endsWith"))||u.writable)&&!f},{endsWith:function(m){var y=String(h(this)),g=(l(m),1<arguments.length?arguments[1]:void 0),v=s(y.length),g=g===void 0?v:d(s(g),v),v=String(m);return c?c.call(y,v,g):y.slice(g-v.length,g)===v}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":75,"../internals/not-a-regexp":87,"../internals/object-get-own-property-descriptor":93,"../internals/require-object-coercible":113,"../internals/to-length":134}],185:[function(e,o,i){var u=e("../internals/export"),a=e("../internals/not-a-regexp"),s=e("../internals/require-object-coercible");u({target:"String",proto:!0,forced:!e("../internals/correct-is-regexp-logic")("includes")},{includes:function(l){return!!~String(s(this)).indexOf(a(l),1<arguments.length?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/not-a-regexp":87,"../internals/require-object-coercible":113}],186:[function(s,o,i){var u=s("../internals/string-multibyte").charAt,a=s("../internals/internal-state"),s=s("../internals/define-iterator"),l="String Iterator",h=a.set,p=a.getterFor(l);s(String,"String",function(c){h(this,{type:l,string:String(c),index:0})},function(){var c=p(this),d=c.string,f=c.index;return f>=d.length?{value:void 0,done:!0}:(d=u(d,f),c.index+=d.length,{value:d,done:!1})})},{"../internals/define-iterator":41,"../internals/internal-state":70,"../internals/string-multibyte":123}],187:[function(e,o,i){var u=e("../internals/fix-regexp-well-known-symbol-logic"),a=e("../internals/an-object"),s=e("../internals/to-length"),l=e("../internals/require-object-coercible"),h=e("../internals/advance-string-index"),p=e("../internals/regexp-exec-abstract");u("match",1,function(c,d,f){return[function(m){var y=l(this),g=m==null?void 0:m[c];return g!==void 0?g.call(m,y):new RegExp(m)[c](String(y))},function(m){var y=f(d,m,this);if(y.done)return y.value;var g=a(m),v=String(this);if(!g.global)return p(g,v);for(var b=g.unicode,w=[],_=g.lastIndex=0;(j=p(g,v))!==null;){var j=String(j[0]);(w[_]=j)===""&&(g.lastIndex=h(v,s(g.lastIndex),b)),_++}return _===0?null:w}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/to-length":134}],188:[function(e,o,i){e("../internals/export")({target:"String",proto:!0},{repeat:e("../internals/string-repeat")})},{"../internals/export":50,"../internals/string-repeat":125}],189:[function(e,o,i){var u=e("../internals/fix-regexp-well-known-symbol-logic"),a=e("../internals/an-object"),s=e("../internals/to-object"),l=e("../internals/to-length"),h=e("../internals/to-integer"),p=e("../internals/require-object-coercible"),c=e("../internals/advance-string-index"),d=e("../internals/regexp-exec-abstract"),f=Math.max,m=Math.min,y=Math.floor,g=/\$([$&'`]|\d\d?|<[^>]*>)/g,v=/\$([$&'`]|\d\d?)/g;u("replace",2,function(b,w,_,j){var E=j.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,T=j.REPLACE_KEEPS_$0,R=E?"$":"$0";return[function(M,I){var D=p(this),L=M==null?void 0:M[b];return L!==void 0?L.call(M,D,I):w.call(String(D),M,I)},function(M,I){if(!E&&T||typeof I=="string"&&I.indexOf(R)===-1){var D=_(w,M,this,I);if(D.done)return D.value}for(var L,N=a(M),W=String(this),q=typeof I=="function",H=(q||(I=String(I)),N.global),B=(H&&(L=N.unicode,N.lastIndex=0),[]);(A=d(N,W))!==null&&(B.push(A),H);)String(A[0])===""&&(N.lastIndex=c(W,l(N.lastIndex),L));for(var G,V="",X=0,te=0;te<B.length;te++){for(var A=B[te],O=String(A[0]),U=f(m(h(A.index),W.length),0),Y=[],J=1;J<A.length;J++)Y.push((G=A[J])===void 0?G:String(G));var ae=A.groups,ue=q?(ue=[O].concat(Y,U,W),ae!==void 0&&ue.push(ae),String(I.apply(void 0,ue))):function(de,ne,le,me,Q,pe){var ye=le+de.length,we=me.length,ge=v;return Q!==void 0&&(Q=s(Q),ge=g),w.call(pe,ge,function(Pe,Ie){var Fe;switch(Ie.charAt(0)){case"$":return"$";case"&":return de;case"`":return ne.slice(0,le);case"'":return ne.slice(ye);case"<":Fe=Q[Ie.slice(1,-1)];break;default:var Te,$e=+Ie;if($e==0)return Pe;if(we<$e)return(Te=y($e/10))!==0&&Te<=we?me[Te-1]===void 0?Ie.charAt(1):me[Te-1]+Ie.charAt(1):Pe;Fe=me[$e-1]}return Fe===void 0?"":Fe})}(O,W,U,Y,ae,I);X<=U&&(V+=W.slice(X,U)+ue,X=U+O.length)}return V+W.slice(X)}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/to-integer":133,"../internals/to-length":134,"../internals/to-object":135}],190:[function(e,o,i){var u=e("../internals/fix-regexp-well-known-symbol-logic"),a=e("../internals/an-object"),s=e("../internals/require-object-coercible"),l=e("../internals/same-value"),h=e("../internals/regexp-exec-abstract");u("search",1,function(p,c,d){return[function(f){var m=s(this),y=f==null?void 0:f[p];return y!==void 0?y.call(f,m):new RegExp(f)[p](String(m))},function(f){var m,y=d(c,f,this);return y.done?y.value:(y=a(f),f=String(this),m=y.lastIndex,l(m,0)||(y.lastIndex=0),f=h(y,f),l(y.lastIndex,m)||(y.lastIndex=m),f===null?-1:f.index)}]})},{"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/same-value":114}],191:[function(m,o,i){var u=m("../internals/fix-regexp-well-known-symbol-logic"),a=m("../internals/is-regexp"),s=m("../internals/an-object"),l=m("../internals/require-object-coercible"),h=m("../internals/species-constructor"),p=m("../internals/advance-string-index"),c=m("../internals/to-length"),d=m("../internals/regexp-exec-abstract"),f=m("../internals/regexp-exec"),m=m("../internals/fails"),y=[].push,g=Math.min,v=4294967295,b=!m(function(){return!RegExp(v,"y")});u("split",2,function(w,_,j){var E="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||1<".".split(/()()/).length||"".split(/.?/).length?function(T,R){var M=String(l(this)),I=R===void 0?v:R>>>0;if(I==0)return[];if(T===void 0)return[M];if(!a(T))return _.call(M,T,I);for(var D,L,N,W=[],R=(T.ignoreCase?"i":"")+(T.multiline?"m":"")+(T.unicode?"u":"")+(T.sticky?"y":""),q=0,H=new RegExp(T.source,R+"g");(D=f.call(H,M))&&!(q<(L=H.lastIndex)&&(W.push(M.slice(q,D.index)),1<D.length&&D.index<M.length&&y.apply(W,D.slice(1)),N=D[0].length,q=L,W.length>=I));)H.lastIndex===D.index&&H.lastIndex++;return q===M.length?!N&&H.test("")||W.push(""):W.push(M.slice(q)),W.length>I?W.slice(0,I):W}:"0".split(void 0,0).length?function(T,R){return T===void 0&&R===0?[]:_.call(this,T,R)}:_;return[function(T,R){var M=l(this),I=T==null?void 0:T[w];return I!==void 0?I.call(T,M,R):E.call(String(M),T,R)},function(D,R){var M=j(E,D,this,R,E!==_);if(M.done)return M.value;var M=s(D),I=String(this),D=h(M,RegExp),L=M.unicode,N=(M.ignoreCase?"i":"")+(M.multiline?"m":"")+(M.unicode?"u":"")+(b?"y":"g"),W=new D(b?M:"^(?:"+M.source+")",N),q=R===void 0?v:R>>>0;if(q==0)return[];if(I.length===0)return d(W,I)===null?[I]:[];for(var H=0,B=0,G=[];B<I.length;){W.lastIndex=b?B:0;var V,X=d(W,b?I:I.slice(B));if(X===null||(V=g(c(W.lastIndex+(b?0:B)),I.length))===H)B=p(I,B,L);else{if(G.push(I.slice(H,B)),G.length===q)return G;for(var te=1;te<=X.length-1;te++)if(G.push(X[te]),G.length===q)return G;B=H=V}}return G.push(I.slice(H)),G}]},!b)},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fails":51,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/is-regexp":76,"../internals/regexp-exec":110,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/species-constructor":121,"../internals/to-length":134}],192:[function(e,o,i){var u=e("../internals/export"),a=e("../internals/create-html");u({target:"String",proto:!0,forced:e("../internals/string-html-forced")("sub")},{sub:function(){return a(this,"sub","","")}})},{"../internals/create-html":36,"../internals/export":50,"../internals/string-html-forced":122}],193:[function(e,o,i){var u=e("../internals/export"),a=e("../internals/string-trim").trim;u({target:"String",proto:!0,forced:e("../internals/string-trim-forced")("trim")},{trim:function(){return a(this)}})},{"../internals/export":50,"../internals/string-trim":127,"../internals/string-trim-forced":126}],194:[function(g,o,i){var u,a,s,l,h,p=g("../internals/export"),c=g("../internals/descriptors"),d=g("../internals/global"),f=g("../internals/has"),m=g("../internals/is-object"),y=g("../internals/object-define-property").f,g=g("../internals/copy-constructor-properties"),v=d.Symbol;!c||typeof v!="function"||"description"in v.prototype&&v().description===void 0||(u={},g(a=function(){var b=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),w=this instanceof a?new v(b):b===void 0?v():v(b);return b===""&&(u[w]=!0),w},v),(d=a.prototype=v.prototype).constructor=a,s=d.toString,l=String(v("test"))=="Symbol(test)",h=/^Symbol\((.*)\)[^)]+$/,y(d,"description",{configurable:!0,get:function(){var b=m(this)?this.valueOf():this,w=s.call(b);return f(u,b)?"":(b=l?w.slice(7,-1):w.replace(h,"$1"))===""?void 0:b}}),p({global:!0,forced:!0},{Symbol:a}))},{"../internals/copy-constructor-properties":33,"../internals/descriptors":43,"../internals/export":50,"../internals/global":59,"../internals/has":60,"../internals/is-object":74,"../internals/object-define-property":92}],195:[function(e,o,i){e("../internals/define-well-known-symbol")("iterator")},{"../internals/define-well-known-symbol":42}],196:[function(ne,o,i){function u($,re){var ve=Fe[$]=M(pe[de]);return le(ve,{type:ue,tag:$,description:re}),f||(ve.description=re),ve}function a($,Ce){_($);var ve=E(Ce),Ce=I(ve).concat(ee(ve));return J(Ce,function(Oe){f&&!K.call(ve,Oe)||je($,Oe,ve[Oe])}),$}function s(Ce,Oe){var ve,Ce=E(Ce),Oe=T(Oe,!0);if(Ce!==Q||!v(Fe,Oe)||v(Te,Oe))return!(ve=we(Ce,Oe))||!v(Fe,Oe)||v(Ce,ae)&&Ce[ae][Oe]||(ve.enumerable=!0),ve}function l(re){var re=Pe(E(re)),ve=[];return J(re,function(Ce){v(Fe,Ce)||v(X,Ce)||ve.push(Ce)}),ve}var h=ne("../internals/export"),p=ne("../internals/global"),c=ne("../internals/get-built-in"),d=ne("../internals/is-pure"),f=ne("../internals/descriptors"),m=ne("../internals/native-symbol"),y=ne("../internals/use-symbol-as-uid"),g=ne("../internals/fails"),v=ne("../internals/has"),b=ne("../internals/is-array"),w=ne("../internals/is-object"),_=ne("../internals/an-object"),j=ne("../internals/to-object"),E=ne("../internals/to-indexed-object"),T=ne("../internals/to-primitive"),R=ne("../internals/create-property-descriptor"),M=ne("../internals/object-create"),I=ne("../internals/object-keys"),D=ne("../internals/object-get-own-property-names"),L=ne("../internals/object-get-own-property-names-external"),N=ne("../internals/object-get-own-property-symbols"),W=ne("../internals/object-get-own-property-descriptor"),q=ne("../internals/object-define-property"),H=ne("../internals/object-property-is-enumerable"),B=ne("../internals/create-non-enumerable-property"),G=ne("../internals/redefine"),V=ne("../internals/shared"),Ke=ne("../internals/shared-key"),X=ne("../internals/hidden-keys"),te=ne("../internals/uid"),A=ne("../internals/well-known-symbol"),O=ne("../internals/well-known-symbol-wrapped"),U=ne("../internals/define-well-known-symbol"),Y=ne("../internals/set-to-string-tag"),at=ne("../internals/internal-state"),J=ne("../internals/array-iteration").forEach,ae=Ke("hidden"),ue="Symbol",de="prototype",ne=A("toPrimitive"),le=at.set,me=at.getterFor(ue),Q=Object[de],pe=p.Symbol,ye=c("JSON","stringify"),we=W.f,ge=q.f,Pe=L.f,Ie=H.f,Fe=V("symbols"),Te=V("op-symbols"),$e=V("string-to-symbol-registry"),Je=V("symbol-to-string-registry"),Ke=V("wks"),at=p.QObject,Ze=!at||!at[de]||!at[de].findChild,_e=f&&g(function(){return M(ge({},"a",{get:function(){return ge(this,"a",{value:7}).a}})).a!=7})?function($,re,ve){var Ce=we(Q,re);Ce&&delete Q[re],ge($,re,ve),Ce&&$!==Q&&ge(Q,re,Ce)}:ge,Be=y?function($){return typeof $=="symbol"}:function($){return Object($)instanceof pe},je=function($,re,ve){return $===Q&&je(Te,re,ve),_($),re=T(re,!0),_(ve),(v(Fe,re)?(ve.enumerable?(v($,ae)&&$[ae][re]&&($[ae][re]=!1),ve=M(ve,{enumerable:R(0,!1)})):(v($,ae)||ge($,ae,R(1,{})),$[ae][re]=!0),_e):ge)($,re,ve)},K=function(re){var re=T(re,!0),ve=Ie.call(this,re);return!(this===Q&&v(Fe,re)&&!v(Te,re))&&(!(ve||!v(this,re)||!v(Fe,re)||v(this,ae)&&this[ae][re])||ve)},ee=function(ve){var re=ve===Q,ve=Pe(re?Te:E(ve)),Ce=[];return J(ve,function(Oe){!v(Fe,Oe)||re&&!v(Q,Oe)||Ce.push(Fe[Oe])}),Ce};m||(G((pe=function(){if(this instanceof pe)throw TypeError("Symbol is not a constructor");var $=arguments.length&&arguments[0]!==void 0?String(arguments[0]):void 0,re=te($),ve=function(Ce){this===Q&&ve.call(Te,Ce),v(this,ae)&&v(this[ae],re)&&(this[ae][re]=!1),_e(this,re,R(1,Ce))};return f&&Ze&&_e(Q,re,{configurable:!0,set:ve}),u(re,$)})[de],"toString",function(){return me(this).tag}),G(pe,"withoutSetter",function($){return u(te($),$)}),H.f=K,q.f=je,W.f=s,D.f=L.f=l,N.f=ee,O.f=function($){return u(A($),$)},f&&(ge(pe[de],"description",{configurable:!0,get:function(){return me(this).description}}),d||G(Q,"propertyIsEnumerable",K,{unsafe:!0}))),h({global:!0,wrap:!0,forced:!m,sham:!m},{Symbol:pe}),J(I(Ke),function($){U($)}),h({target:ue,stat:!0,forced:!m},{for:function(ve){var re,ve=String(ve);return v($e,ve)?$e[ve]:(re=pe(ve),$e[ve]=re,Je[re]=ve,re)},keyFor:function($){if(!Be($))throw TypeError($+" is not a symbol");if(v(Je,$))return Je[$]},useSetter:function(){Ze=!0},useSimple:function(){Ze=!1}}),h({target:"Object",stat:!0,forced:!m,sham:!f},{create:function($,re){return re===void 0?M($):a(M($),re)},defineProperty:je,defineProperties:a,getOwnPropertyDescriptor:s}),h({target:"Object",stat:!0,forced:!m},{getOwnPropertyNames:l,getOwnPropertySymbols:ee}),h({target:"Object",stat:!0,forced:g(function(){N.f(1)})},{getOwnPropertySymbols:function($){return N.f(j($))}}),ye&&h({target:"JSON",stat:!0,forced:!m||g(function(){var $=pe();return ye([$])!="[null]"||ye({a:$})!="{}"||ye(Object($))!="{}"})},{stringify:function($,re,ve){for(var Ce,Oe=[$],He=1;He<arguments.length;)Oe.push(arguments[He++]);if((w(Ce=re)||$!==void 0)&&!Be($))return b(re)||(re=function(Ye,Qe){if(typeof Ce=="function"&&(Qe=Ce.call(this,Ye,Qe)),!Be(Qe))return Qe}),Oe[1]=re,ye.apply(null,Oe)}}),pe[de][ne]||B(pe[de],ne,pe[de].valueOf),Y(pe,ue),X[ae]=!0},{"../internals/an-object":10,"../internals/array-iteration":19,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/define-well-known-symbol":42,"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/get-built-in":56,"../internals/global":59,"../internals/has":60,"../internals/hidden-keys":61,"../internals/internal-state":70,"../internals/is-array":72,"../internals/is-object":74,"../internals/is-pure":75,"../internals/native-symbol":83,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/object-get-own-property-names-external":94,"../internals/object-get-own-property-symbols":96,"../internals/object-keys":99,"../internals/object-property-is-enumerable":100,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/shared":120,"../internals/shared-key":118,"../internals/to-indexed-object":132,"../internals/to-object":135,"../internals/to-primitive":138,"../internals/uid":143,"../internals/use-symbol-as-uid":144,"../internals/well-known-symbol":146,"../internals/well-known-symbol-wrapped":145}],197:[function(e,o,i){var u=e("../internals/array-buffer-view-core"),a=e("../internals/array-copy-within"),s=u.aTypedArray;(0,u.exportTypedArrayMethod)("copyWithin",function(l,h){return a.call(s(this),l,h,2<arguments.length?arguments[2]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-copy-within":14}],198:[function(e,o,i){var u=e("../internals/array-buffer-view-core"),a=e("../internals/array-iteration").every,s=u.aTypedArray;(0,u.exportTypedArrayMethod)("every",function(l){return a(s(this),l,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],199:[function(e,o,i){var u=e("../internals/array-buffer-view-core"),a=e("../internals/array-fill"),s=u.aTypedArray;(0,u.exportTypedArrayMethod)("fill",function(l){return a.apply(s(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-fill":15}],200:[function(e,o,i){var u=e("../internals/array-buffer-view-core"),a=e("../internals/array-iteration").filter,s=e("../internals/species-constructor"),l=u.aTypedArray,h=u.aTypedArrayConstructor;(0,u.exportTypedArrayMethod)("filter",function(p){for(var c=a(l(this),p,1<arguments.length?arguments[1]:void 0),p=s(this,this.constructor),d=0,f=c.length,m=new(h(p))(f);d<f;)m[d]=c[d++];return m})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":121}],201:[function(e,o,i){var u=e("../internals/array-buffer-view-core"),a=e("../internals/array-iteration").findIndex,s=u.aTypedArray;(0,u.exportTypedArrayMethod)("findIndex",function(l){return a(s(this),l,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],202:[function(e,o,i){var u=e("../internals/array-buffer-view-core"),a=e("../internals/array-iteration").find,s=u.aTypedArray;(0,u.exportTypedArrayMethod)("find",function(l){return a(s(this),l,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],203:[function(e,o,i){e("../internals/typed-array-constructor")("Float32",function(u){return function(a,s,l){return u(this,a,s,l)}})},{"../internals/typed-array-constructor":140}],204:[function(e,o,i){e("../internals/typed-array-constructor")("Float64",function(u){return function(a,s,l){return u(this,a,s,l)}})},{"../internals/typed-array-constructor":140}],205:[function(e,o,i){var u=e("../internals/array-buffer-view-core"),a=e("../internals/array-iteration").forEach,s=u.aTypedArray;(0,u.exportTypedArrayMethod)("forEach",function(l){a(s(this),l,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],206:[function(e,o,i){var u=e("../internals/array-buffer-view-core"),a=e("../internals/array-includes").includes,s=u.aTypedArray;(0,u.exportTypedArrayMethod)("includes",function(l){return a(s(this),l,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],207:[function(e,o,i){var u=e("../internals/array-buffer-view-core"),a=e("../internals/array-includes").indexOf,s=u.aTypedArray;(0,u.exportTypedArrayMethod)("indexOf",function(l){return a(s(this),l,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],208:[function(e,o,i){e("../internals/typed-array-constructor")("Int16",function(u){return function(a,s,l){return u(this,a,s,l)}})},{"../internals/typed-array-constructor":140}],209:[function(e,o,i){e("../internals/typed-array-constructor")("Int32",function(u){return function(a,s,l){return u(this,a,s,l)}})},{"../internals/typed-array-constructor":140}],210:[function(a,o,i){function u(){return s.call(p(this))}var f=a("../internals/global"),d=a("../internals/array-buffer-view-core"),c=a("../modules/es.array.iterator"),a=a("../internals/well-known-symbol")("iterator"),f=f.Uint8Array,s=c.values,l=c.keys,h=c.entries,p=d.aTypedArray,c=d.exportTypedArrayMethod,d=f&&f.prototype[a],f=!!d&&(d.name=="values"||d.name==null);c("entries",function(){return h.call(p(this))}),c("keys",function(){return l.call(p(this))}),c("values",u,!f),c(a,u,!f)},{"../internals/array-buffer-view-core":12,"../internals/global":59,"../internals/well-known-symbol":146,"../modules/es.array.iterator":158}],211:[function(a,o,i){var a=a("../internals/array-buffer-view-core"),u=a.aTypedArray,a=a.exportTypedArrayMethod,s=[].join;a("join",function(l){return s.apply(u(this),arguments)})},{"../internals/array-buffer-view-core":12}],212:[function(e,o,i){var u=e("../internals/array-buffer-view-core"),a=e("../internals/array-last-index-of"),s=u.aTypedArray;(0,u.exportTypedArrayMethod)("lastIndexOf",function(l){return a.apply(s(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-last-index-of":20}],213:[function(e,o,i){var u=e("../internals/array-buffer-view-core"),a=e("../internals/array-iteration").map,s=e("../internals/species-constructor"),l=u.aTypedArray,h=u.aTypedArrayConstructor;(0,u.exportTypedArrayMethod)("map",function(p){return a(l(this),p,1<arguments.length?arguments[1]:void 0,function(c,d){return new(h(s(c,c.constructor)))(d)})})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":121}],214:[function(e,o,i){var u=e("../internals/array-buffer-view-core"),a=e("../internals/array-reduce").right,s=u.aTypedArray;(0,u.exportTypedArrayMethod)("reduceRight",function(l){return a(s(this),l,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],215:[function(e,o,i){var u=e("../internals/array-buffer-view-core"),a=e("../internals/array-reduce").left,s=u.aTypedArray;(0,u.exportTypedArrayMethod)("reduce",function(l){return a(s(this),l,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],216:[function(a,o,i){var a=a("../internals/array-buffer-view-core"),u=a.aTypedArray,a=a.exportTypedArrayMethod,s=Math.floor;a("reverse",function(){for(var l,h=u(this).length,p=s(h/2),c=0;c<p;)l=this[c],this[c++]=this[--h],this[h]=l;return this})},{"../internals/array-buffer-view-core":12}],217:[function(h,o,i){var u=h("../internals/array-buffer-view-core"),a=h("../internals/to-length"),s=h("../internals/to-offset"),l=h("../internals/to-object"),h=h("../internals/fails"),p=u.aTypedArray;(0,u.exportTypedArrayMethod)("set",function(c){p(this);var d=s(1<arguments.length?arguments[1]:void 0,1),f=this.length,m=l(c),y=a(m.length),g=0;if(f<y+d)throw RangeError("Wrong length");for(;g<y;)this[d+g]=m[g++]},h(function(){new Int8Array(1).set({})}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/to-length":134,"../internals/to-object":135,"../internals/to-offset":136}],218:[function(a,o,i){var h=a("../internals/array-buffer-view-core"),u=a("../internals/species-constructor"),a=a("../internals/fails"),s=h.aTypedArray,l=h.aTypedArrayConstructor,h=h.exportTypedArrayMethod,p=[].slice;h("slice",function(c,d){for(var f=p.call(s(this),c,d),c=u(this,this.constructor),m=0,y=f.length,g=new(l(c))(y);m<y;)g[m]=f[m++];return g},a(function(){new Int8Array(1).slice()}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/species-constructor":121}],219:[function(e,o,i){var u=e("../internals/array-buffer-view-core"),a=e("../internals/array-iteration").some,s=u.aTypedArray;(0,u.exportTypedArrayMethod)("some",function(l){return a(s(this),l,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],220:[function(a,o,i){var a=a("../internals/array-buffer-view-core"),u=a.aTypedArray,a=a.exportTypedArrayMethod,s=[].sort;a("sort",function(l){return s.call(u(this),l)})},{"../internals/array-buffer-view-core":12}],221:[function(e,o,i){var u=e("../internals/array-buffer-view-core"),a=e("../internals/to-length"),s=e("../internals/to-absolute-index"),l=e("../internals/species-constructor"),h=u.aTypedArray;(0,u.exportTypedArrayMethod)("subarray",function(m,c){var d=h(this),f=d.length,m=s(m,f);return new(l(d,d.constructor))(d.buffer,d.byteOffset+m*d.BYTES_PER_ELEMENT,a((c===void 0?f:s(c,f))-m))})},{"../internals/array-buffer-view-core":12,"../internals/species-constructor":121,"../internals/to-absolute-index":130,"../internals/to-length":134}],222:[function(a,o,i){var h=a("../internals/global"),u=a("../internals/array-buffer-view-core"),a=a("../internals/fails"),s=h.Int8Array,l=u.aTypedArray,h=u.exportTypedArrayMethod,p=[].toLocaleString,c=[].slice,d=!!s&&a(function(){p.call(new s(1))});h("toLocaleString",function(){return p.apply(d?c.call(l(this)):l(this),arguments)},a(function(){return[1,2].toLocaleString()!=new s([1,2]).toLocaleString()})||!a(function(){s.prototype.toLocaleString.call([1,2])}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":59}],223:[function(a,o,i){var u=a("../internals/array-buffer-view-core").exportTypedArrayMethod,h=a("../internals/fails"),a=a("../internals/global").Uint8Array,a=a&&a.prototype||{},s=[].toString,l=[].join,h=(h(function(){s.call({})})&&(s=function(){return l.call(this)}),a.toString!=s);u("toString",s,h)},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":59}],224:[function(e,o,i){e("../internals/typed-array-constructor")("Uint16",function(u){return function(a,s,l){return u(this,a,s,l)}})},{"../internals/typed-array-constructor":140}],225:[function(e,o,i){e("../internals/typed-array-constructor")("Uint32",function(u){return function(a,s,l){return u(this,a,s,l)}})},{"../internals/typed-array-constructor":140}],226:[function(e,o,i){e("../internals/typed-array-constructor")("Uint8",function(u){return function(a,s,l){return u(this,a,s,l)}})},{"../internals/typed-array-constructor":140}],227:[function(e,o,i){e("../internals/typed-array-constructor")("Uint8",function(u){return function(a,s,l){return u(this,a,s,l)}},!0)},{"../internals/typed-array-constructor":140}],228:[function(v,_,i){function u(j){return function(){return j(this,arguments.length?arguments[0]:void 0)}}var a,s,l,h,p,b=v("../internals/global"),c=v("../internals/redefine-all"),d=v("../internals/internal-metadata"),f=v("../internals/collection"),m=v("../internals/collection-weak"),y=v("../internals/is-object"),g=v("../internals/internal-state").enforce,v=v("../internals/native-weak-map"),b=!b.ActiveXObject&&"ActiveXObject"in b,w=Object.isExtensible,_=_.exports=f("WeakMap",u,m);v&&b&&(a=m.getConstructor(u,"WeakMap",!0),d.REQUIRED=!0,f=_.prototype,s=f.delete,l=f.has,h=f.get,p=f.set,c(f,{delete:function(j){var E;return y(j)&&!w(j)?((E=g(this)).frozen||(E.frozen=new a),s.call(this,j)||E.frozen.delete(j)):s.call(this,j)},has:function(j){var E;return y(j)&&!w(j)?((E=g(this)).frozen||(E.frozen=new a),l.call(this,j)||E.frozen.has(j)):l.call(this,j)},get:function(j){var E;return!y(j)||w(j)||((E=g(this)).frozen||(E.frozen=new a),l.call(this,j))?h.call(this,j):E.frozen.get(j)},set:function(j,E){var T;return!y(j)||w(j)||((T=g(this)).frozen||(T.frozen=new a),l.call(this,j))?p.call(this,j,E):T.frozen.set(j,E),this}}))},{"../internals/collection":32,"../internals/collection-weak":31,"../internals/global":59,"../internals/internal-metadata":69,"../internals/internal-state":70,"../internals/is-object":74,"../internals/native-weak-map":85,"../internals/redefine-all":107}],229:[function(e,o,i){var u,a=e("../internals/global"),s=e("../internals/dom-iterables"),l=e("../internals/array-for-each"),h=e("../internals/create-non-enumerable-property");for(u in s){var p=a[u],p=p&&p.prototype;if(p&&p.forEach!==l)try{h(p,"forEach",l)}catch{p.forEach=l}}},{"../internals/array-for-each":16,"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":59}],230:[function(p,o,i){var u,a=p("../internals/global"),s=p("../internals/dom-iterables"),l=p("../modules/es.array.iterator"),h=p("../internals/create-non-enumerable-property"),p=p("../internals/well-known-symbol"),c=p("iterator"),d=p("toStringTag"),f=l.values;for(u in s){var m=a[u],y=m&&m.prototype;if(y){if(y[c]!==f)try{h(y,c,f)}catch{y[c]=f}if(y[d]||h(y,d,u),s[u]){for(var g in l)if(y[g]!==l[g])try{h(y,g,l[g])}catch{y[g]=l[g]}}}}},{"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":59,"../internals/well-known-symbol":146,"../modules/es.array.iterator":158}],231:[function(ae,o,i){ae("../modules/es.array.iterator");function u(ue){try{return decodeURIComponent(ue)}catch{return ue}}function a(ue){return U[ue]}function s(ue){return encodeURIComponent(ue).replace(O,a)}function l(ue){this.entries.length=0,Y(this.entries,ue)}function h(ue,de){if(ue<de)throw TypeError("Not enough arguments")}function p(){b(this,p,q);var ue,de,ne,le,me,Q,pe,ye,we=0<arguments.length?arguments[0]:void 0,ge=[];if(B(this,{type:q,entries:ge,updateURL:function(){},updateSearchParams:l}),we!==void 0)if(T(we))if(typeof(ue=D(we))=="function")for(ne=(de=ue.call(we)).next;!(le=ne.call(de)).done;){if((Q=(me=(le=I(E(le.value))).next).call(le)).done||(pe=me.call(le)).done||!me.call(le).done)throw TypeError("Expected sequence with length 2");ge.push({key:Q.value+"",value:pe.value+""})}else for(ye in we)w(we,ye)&&ge.push({key:ye,value:we[ye]+""});else Y(ge,typeof we=="string"?we.charAt(0)==="?"?we.slice(1):we:we+"")}var c=ae("../internals/export"),W=ae("../internals/get-built-in"),d=ae("../internals/native-url"),f=ae("../internals/redefine"),m=ae("../internals/redefine-all"),y=ae("../internals/set-to-string-tag"),g=ae("../internals/create-iterator-constructor"),v=ae("../internals/internal-state"),b=ae("../internals/an-instance"),w=ae("../internals/has"),_=ae("../internals/function-bind-context"),j=ae("../internals/classof"),E=ae("../internals/an-object"),T=ae("../internals/is-object"),R=ae("../internals/object-create"),M=ae("../internals/create-property-descriptor"),I=ae("../internals/get-iterator"),D=ae("../internals/get-iterator-method"),ae=ae("../internals/well-known-symbol"),L=W("fetch"),N=W("Headers"),W=ae("iterator"),q="URLSearchParams",H=q+"Iterator",B=v.set,G=v.getterFor(q),V=v.getterFor(H),X=/\+/g,te=Array(4),A=function(ue){var de,ne=ue.replace(X," "),le=4;try{return decodeURIComponent(ne)}catch{for(;le;)ne=ne.replace((de=le--,te[de-1]||(te[de-1]=RegExp("((?:%[\\da-f]{2}){"+de+"})","gi"))),u);return ne}},O=/[!'()~]|%20/g,U={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},Y=function(ue,de){if(de)for(var ne,le=de.split("&"),me=0;me<le.length;)(ne=le[me++]).length&&(ne=ne.split("="),ue.push({key:A(ne.shift()),value:A(ne.join("="))}))},J=g(function(ue,de){B(this,{type:H,iterator:I(G(ue).entries),kind:de})},"Iterator",function(){var de=V(this),ue=de.kind,de=de.iterator.next(),ne=de.value;return de.done||(de.value=ue==="keys"?ne.key:ue==="values"?ne.value:[ne.key,ne.value]),de}),ae=p.prototype;m(ae,{append:function(ue,de){h(arguments.length,2);var ne=G(this);ne.entries.push({key:ue+"",value:de+""}),ne.updateURL()},delete:function(ue){h(arguments.length,1);for(var de=G(this),ne=de.entries,le=ue+"",me=0;me<ne.length;)ne[me].key===le?ne.splice(me,1):me++;de.updateURL()},get:function(ue){h(arguments.length,1);for(var de=G(this).entries,ne=ue+"",le=0;le<de.length;le++)if(de[le].key===ne)return de[le].value;return null},getAll:function(ue){h(arguments.length,1);for(var de=G(this).entries,ne=ue+"",le=[],me=0;me<de.length;me++)de[me].key===ne&&le.push(de[me].value);return le},has:function(ue){h(arguments.length,1);for(var de=G(this).entries,ne=ue+"",le=0;le<de.length;)if(de[le++].key===ne)return!0;return!1},set:function(ue,de){h(arguments.length,1);for(var ne,le=G(this),me=le.entries,Q=!1,pe=ue+"",ye=de+"",we=0;we<me.length;we++)(ne=me[we]).key===pe&&(Q?me.splice(we--,1):(Q=!0,ne.value=ye));Q||me.push({key:pe,value:ye}),le.updateURL()},sort:function(){for(var ue,de,ne=G(this),le=ne.entries,me=le.slice(),Q=le.length=0;Q<me.length;Q++){for(ue=me[Q],de=0;de<Q;de++)if(le[de].key>ue.key){le.splice(de,0,ue);break}de===Q&&le.push(ue)}ne.updateURL()},forEach:function(ue){for(var de,ne=G(this).entries,le=_(ue,1<arguments.length?arguments[1]:void 0,3),me=0;me<ne.length;)le((de=ne[me++]).value,de.key,this)},keys:function(){return new J(this,"keys")},values:function(){return new J(this,"values")},entries:function(){return new J(this,"entries")}},{enumerable:!0}),f(ae,W,ae.entries),f(ae,"toString",function(){for(var ue,de=G(this).entries,ne=[],le=0;le<de.length;)ue=de[le++],ne.push(s(ue.key)+"="+s(ue.value));return ne.join("&")},{enumerable:!0}),y(p,q),c({global:!0,forced:!d},{URLSearchParams:p}),d||typeof L!="function"||typeof N!="function"||c({global:!0,enumerable:!0,forced:!0},{fetch:function(me){var de,ne,le,me=[me];return 1<arguments.length&&(T(de=arguments[1])&&(ne=de.body,j(ne)===q&&((le=de.headers?new N(de.headers):new N).has("content-type")||le.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),de=R(de,{body:M(0,String(ne)),headers:M(0,le)}))),me.push(de)),L.apply(this,me)}}),o.exports={URLSearchParams:p,getState:G}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/classof":29,"../internals/create-iterator-constructor":37,"../internals/create-property-descriptor":39,"../internals/export":50,"../internals/function-bind-context":54,"../internals/get-built-in":56,"../internals/get-iterator":58,"../internals/get-iterator-method":57,"../internals/has":60,"../internals/internal-state":70,"../internals/is-object":74,"../internals/native-url":84,"../internals/object-create":90,"../internals/redefine":108,"../internals/redefine-all":107,"../internals/set-to-string-tag":117,"../internals/well-known-symbol":146,"../modules/es.array.iterator":158}],232:[function(I,o,i){I("../modules/es.string.iterator");function u(he){var qe,nt,We,Rt;if(typeof he=="number"){for(qe=[],nt=0;nt<4;nt++)qe.unshift(he%256),he=H(he/256);return qe.join(".")}if(typeof he!="object")return he;for(qe="",We=pe(he),nt=0;nt<8;nt++)Rt&&he[nt]===0||(Rt=Rt&&!1,We===nt?(qe+=nt?":":"::",Rt=!0):(qe+=he[nt].toString(16),nt<7&&(qe+=":")));return"["+qe+"]"}function a(he){return!he.host||he.cannotBeABaseURL||he.scheme=="file"}function s(he,qe,nt,We){var Rt,ze,Lt,et=nt||Be,Pt=0,tt="",mr=!1,_r=!1,cr=!1;for(nt||(he.scheme="",he.username="",he.password="",he.host=null,he.port=null,he.path=[],he.query=null,he.fragment=null,he.cannotBeABaseURL=!1,qe=qe.replace(le,"")),qe=qe.replace(me,""),Rt=j(qe);Pt<=Rt.length;){switch(ze=Rt[Pt],et){case Be:if(!ze||!A.test(ze)){if(nt)return V;et=K;continue}tt+=ze.toLowerCase(),et=je;break;case je:if(ze&&(O.test(ze)||ze=="+"||ze=="-"||ze=="."))tt+=ze.toLowerCase();else{if(ze!=":"){if(nt)return V;tt="",et=K,Pt=0;continue}if(nt&&(Te(he)!=w(Fe,tt)||tt=="file"&&($e(he)||he.port!==null)||he.scheme=="file"&&!he.host))return;if(he.scheme=tt,nt)return void(Te(he)&&Fe[he.scheme]==he.port&&(he.port=null));tt="",he.scheme=="file"?et=Et:Te(he)&&We&&We.scheme==he.scheme?et=ee:Te(he)?et=Ce:Rt[Pt+1]=="/"?(et=$,Pt++):(he.cannotBeABaseURL=!0,he.path.push(""),et=qt)}break;case K:if(!We||We.cannotBeABaseURL&&ze!="#")return V;if(We.cannotBeABaseURL&&ze=="#"){he.scheme=We.scheme,he.path=We.path.slice(),he.query=We.query,he.fragment="",he.cannotBeABaseURL=!0,et=gr;break}et=We.scheme=="file"?Et:re;continue;case ee:if(ze!="/"||Rt[Pt+1]!="/"){et=re;continue}et=Oe,Pt++;break;case $:if(ze=="/"){et=He;break}et=bt;continue;case re:if(he.scheme=We.scheme,ze==p)he.username=We.username,he.password=We.password,he.host=We.host,he.port=We.port,he.path=We.path.slice(),he.query=We.query;else if(ze=="/"||ze=="\\"&&Te(he))et=ve;else if(ze=="?")he.username=We.username,he.password=We.password,he.host=We.host,he.port=We.port,he.path=We.path.slice(),he.query="",et=Kr;else{if(ze!="#"){he.username=We.username,he.password=We.password,he.host=We.host,he.port=We.port,he.path=We.path.slice(),he.path.pop(),et=bt;continue}he.username=We.username,he.password=We.password,he.host=We.host,he.port=We.port,he.path=We.path.slice(),he.query=We.query,he.fragment="",et=gr}break;case ve:if(!Te(he)||ze!="/"&&ze!="\\"){if(ze!="/"){he.username=We.username,he.password=We.password,he.host=We.host,he.port=We.port,et=bt;continue}et=He}else et=Oe;break;case Ce:if(et=Oe,ze!="/"||tt.charAt(Pt+1)!="/")continue;Pt++;break;case Oe:if(ze=="/"||ze=="\\")break;et=He;continue;case He:if(ze=="@"){mr&&(tt="%40"+tt);for(var mr=!0,Ar=j(tt),co=0;co<Ar.length;co++){var Cn=Ar[co];Cn!=":"||cr?(Cn=Ie(Cn,Pe),cr?he.password+=Cn:he.username+=Cn):cr=!0}tt=""}else if(ze==p||ze=="/"||ze=="?"||ze=="#"||ze=="\\"&&Te(he)){if(mr&&tt=="")return G;Pt-=j(tt).length+1,tt="",et=Ye}else tt+=ze;break;case Ye:case Qe:if(nt&&he.scheme=="file"){et=dt;continue}if(ze!=":"||_r){if(ze==p||ze=="/"||ze=="?"||ze=="#"||ze=="\\"&&Te(he)){if(Te(he)&&tt=="")return X;if(nt&&tt==""&&($e(he)||he.port!==null))return;if(Lt=Q(he,tt))return Lt;if(tt="",et=wt,nt)return;continue}ze=="["?_r=!0:ze=="]"&&(_r=!1),tt+=ze}else{if(tt=="")return X;if(Lt=Q(he,tt))return Lt;if(tt="",et=rt,nt==Qe)return}break;case rt:if(!U.test(ze)){if(ze==p||ze=="/"||ze=="?"||ze=="#"||ze=="\\"&&Te(he)||nt){if(tt!=""){var fo=parseInt(tt,10);if(65535<fo)return te;he.port=Te(he)&&fo===Fe[he.scheme]?null:fo,tt=""}if(nt)return;et=wt;continue}return te}tt+=ze;break;case Et:if(he.scheme="file",ze=="/"||ze=="\\")et=xt;else{if(!We||We.scheme!="file"){et=bt;continue}if(ze==p)he.host=We.host,he.path=We.path.slice(),he.query=We.query;else if(ze=="?")he.host=We.host,he.path=We.path.slice(),he.query="",et=Kr;else{if(ze!="#"){Ke(Rt.slice(Pt).join(""))||(he.host=We.host,he.path=We.path.slice(),at(he)),et=bt;continue}he.host=We.host,he.path=We.path.slice(),he.query=We.query,he.fragment="",et=gr}}break;case xt:if(ze=="/"||ze=="\\"){et=dt;break}We&&We.scheme=="file"&&!Ke(Rt.slice(Pt).join(""))&&(Je(We.path[0],!0)?he.path.push(We.path[0]):he.host=We.host),et=bt;continue;case dt:if(ze==p||ze=="/"||ze=="\\"||ze=="?"||ze=="#"){if(!nt&&Je(tt))et=bt;else{if(tt==""){if(he.host="",nt)return}else{if(Lt=Q(he,tt))return Lt;if(he.host=="localhost"&&(he.host=""),nt)return;tt=""}et=wt}continue}tt+=ze;break;case wt:if(Te(he)){if(et=bt,ze!="/"&&ze!="\\")continue}else if(nt||ze!="?")if(nt||ze!="#"){if(ze!=p&&(et=bt,ze!="/"))continue}else he.fragment="",et=gr;else he.query="",et=Kr;break;case bt:if(ze==p||ze=="/"||ze=="\\"&&Te(he)||!nt&&(ze=="?"||ze=="#")){if(_e(tt)?(at(he),ze=="/"||ze=="\\"&&Te(he)||he.path.push("")):Ze(tt)?ze=="/"||ze=="\\"&&Te(he)||he.path.push(""):(he.scheme=="file"&&!he.path.length&&Je(tt)&&(he.host&&(he.host=""),tt=tt.charAt(0)+":"),he.path.push(tt)),tt="",he.scheme=="file"&&(ze==p||ze=="?"||ze=="#"))for(;1<he.path.length&&he.path[0]==="";)he.path.shift();ze=="?"?(he.query="",et=Kr):ze=="#"&&(he.fragment="",et=gr)}else tt+=Ie(ze,ge);break;case qt:ze=="?"?(he.query="",et=Kr):ze=="#"?(he.fragment="",et=gr):ze!=p&&(he.path[0]+=Ie(ze,ye));break;case Kr:nt||ze!="#"?ze!=p&&(ze=="'"&&Te(he)?he.query+="%27":he.query+=ze=="#"?"%23":Ie(ze,ye)):(he.fragment="",et=gr);break;case gr:ze!=p&&(he.fragment+=Ie(ze,we))}Pt++}}function l(ze){var qe,nt,We=b(this,l,"URL"),Rt=1<arguments.length?arguments[1]:void 0,ze=String(ze),Lt=W(We,{type:"URL"});if(Rt!==void 0){if(Rt instanceof l)qe=q(Rt);else if(nt=s(qe={},String(Rt)))throw TypeError(nt)}if(nt=s(Lt,ze,null,qe))throw TypeError(nt);var et=Lt.searchParams=new L;(Rt=N(et)).updateSearchParams(Lt.query),Rt.updateURL=function(){Lt.query=String(et)||null},m||(We.href=Kt.call(We),We.origin=Ot.call(We),We.protocol=Gr.call(We),We.username=Ir.call(We),We.password=Vt.call(We),We.host=zr.call(We),We.hostname=ys.call(We),We.port=gs.call(We),We.pathname=vs.call(We),We.search=Fu.call(We),We.searchParams=bs.call(We),We.hash=xs.call(We))}function h(he,qe){return{get:he,set:qe,configurable:!0,enumerable:!0}}var p,c,d,f=I("../internals/export"),m=I("../internals/descriptors"),y=I("../internals/native-url"),Bt=I("../internals/global"),g=I("../internals/object-define-properties"),v=I("../internals/redefine"),b=I("../internals/an-instance"),w=I("../internals/has"),_=I("../internals/object-assign"),j=I("../internals/array-from"),E=I("../internals/string-multibyte").codeAt,T=I("../internals/string-punycode-to-ascii"),R=I("../internals/set-to-string-tag"),M=I("../modules/web.url-search-params"),I=I("../internals/internal-state"),D=Bt.URL,L=M.URLSearchParams,N=M.getState,W=I.set,q=I.getterFor("URL"),H=Math.floor,B=Math.pow,G="Invalid authority",V="Invalid scheme",X="Invalid host",te="Invalid port",A=/[A-Za-z]/,O=/[\d+-.A-Za-z]/,U=/\d/,Y=/^(0x|0X)/,J=/^[0-7]+$/,ae=/^\d+$/,ue=/^[\dA-Fa-f]+$/,de=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,ne=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,le=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,me=/[\u0009\u000A\u000D]/g,Q=function(he,qe){var nt,We,Rt;if(qe.charAt(0)=="[")return qe.charAt(qe.length-1)=="]"&&(nt=function(ze){var Lt=[0,0,0,0,0,0,0,0],et=0,Pt=null,tt=0,mr,_r,cr,Ar,co,Cn,fo,Pr=function(){return ze.charAt(tt)};if(Pr()==":"){if(ze.charAt(1)!=":")return;tt+=2,et++,Pt=et}for(;Pr();){if(et==8)return;if(Pr()==":"){if(Pt!==null)return;tt++,et++,Pt=et;continue}for(mr=_r=0;_r<4&&ue.test(Pr());)mr=mr*16+parseInt(Pr(),16),tt++,_r++;if(Pr()=="."){if(_r==0||(tt-=_r,et>6))return;for(cr=0;Pr();){if(Ar=null,cr>0)if(Pr()=="."&&cr<4)tt++;else return;if(!U.test(Pr()))return;for(;U.test(Pr());){if(co=parseInt(Pr(),10),Ar===null)Ar=co;else{if(Ar==0)return;Ar=Ar*10+co}if(Ar>255)return;tt++}Lt[et]=Lt[et]*256+Ar,cr++,(cr==2||cr==4)&&et++}if(cr!=4)return;break}else if(Pr()==":"){if(tt++,!Pr())return}else if(Pr())return;Lt[et++]=mr}if(Pt!==null)for(Cn=et-Pt,et=7;et!=0&&Cn>0;)fo=Lt[et],Lt[et--]=Lt[Pt+Cn-1],Lt[Pt+--Cn]=fo;else if(et!=8)return;return Lt}(qe.slice(1,-1)))?void(he.host=nt):X;if(Te(he))return qe=T(qe),de.test(qe)||(nt=function(ze){var Lt=ze.split("."),et,Pt,tt,mr,_r,cr,Ar;if(Lt.length&&Lt[Lt.length-1]==""&&Lt.pop(),(et=Lt.length)>4)return ze;for(Pt=[],tt=0;tt<et;tt++){if(mr=Lt[tt],mr=="")return ze;if(_r=10,mr.length>1&&mr.charAt(0)=="0"&&(_r=Y.test(mr)?16:8,mr=mr.slice(_r==8?1:2)),mr==="")cr=0;else{if(!(_r==10?ae:_r==8?J:ue).test(mr))return ze;cr=parseInt(mr,_r)}Pt.push(cr)}for(tt=0;tt<et;tt++)if(cr=Pt[tt],tt==et-1){if(cr>=B(256,5-et))return null}else if(cr>255)return null;for(Ar=Pt.pop(),tt=0;tt<Pt.length;tt++)Ar+=Pt[tt]*B(256,3-tt);return Ar}(qe))===null?X:void(he.host=nt);if(ne.test(qe))return X;for(nt="",We=j(qe),Rt=0;Rt<We.length;Rt++)nt+=Ie(We[Rt],ye);he.host=nt},pe=function(he){for(var qe=null,nt=1,We=null,Rt=0,ze=0;ze<8;ze++)he[ze]!==0?(nt<Rt&&(qe=We,nt=Rt),We=null,Rt=0):(We===null&&(We=ze),++Rt);return nt<Rt&&(qe=We,nt=Rt),qe},ye={},we=_({},ye,{" ":1,'"':1,"<":1,">":1,"`":1}),ge=_({},we,{"#":1,"?":1,"{":1,"}":1}),Pe=_({},ge,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Ie=function(he,qe){var nt=E(he,0);return 32<nt&&nt<127&&!w(qe,he)?he:encodeURIComponent(he)},Fe={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Te=function(he){return w(Fe,he.scheme)},$e=function(he){return he.username!=""||he.password!=""},Je=function(he,qe){return he.length==2&&A.test(he.charAt(0))&&((he=he.charAt(1))==":"||!qe&&he=="|")},Ke=function(he){return 1<he.length&&Je(he.slice(0,2))&&(he.length==2||(he=he.charAt(2))==="/"||he==="\\"||he==="?"||he==="#")},at=function(he){var qe=he.path,nt=qe.length;!nt||he.scheme=="file"&&nt==1&&Je(qe[0],!0)||qe.pop()},Ze=function(he){return he==="."||he.toLowerCase()==="%2e"},_e=function(he){return(he=he.toLowerCase())===".."||he==="%2e."||he===".%2e"||he==="%2e%2e"},Be={},je={},K={},ee={},$={},re={},ve={},Ce={},Oe={},He={},Ye={},Qe={},rt={},Et={},xt={},dt={},wt={},bt={},qt={},Kr={},gr={},Bt=l.prototype,Kt=function(){var he=q(this),qe=he.scheme,nt=he.username,We=he.password,Rt=he.host,ze=he.port,Lt=he.path,et=he.query,Pt=he.fragment,tt=qe+":";return Rt!==null?(tt+="//",$e(he)&&(tt+=nt+(We?":"+We:"")+"@"),tt+=u(Rt),ze!==null&&(tt+=":"+ze)):qe=="file"&&(tt+="//"),tt+=he.cannotBeABaseURL?Lt[0]:Lt.length?"/"+Lt.join("/"):"",et!==null&&(tt+="?"+et),Pt!==null&&(tt+="#"+Pt),tt},Ot=function(){var he=q(this),qe=he.scheme,nt=he.port;if(qe=="blob")try{return new URL(qe.path[0]).origin}catch{return"null"}return qe!="file"&&Te(he)?qe+"://"+u(he.host)+(nt!==null?":"+nt:""):"null"},Gr=function(){return q(this).scheme+":"},Ir=function(){return q(this).username},Vt=function(){return q(this).password},zr=function(){var qe=q(this),he=qe.host,qe=qe.port;return he===null?"":qe===null?u(he):u(he)+":"+qe},ys=function(){var he=q(this).host;return he===null?"":u(he)},gs=function(){var he=q(this).port;return he===null?"":String(he)},vs=function(){var he=q(this),qe=he.path;return he.cannotBeABaseURL?qe[0]:qe.length?"/"+qe.join("/"):""},Fu=function(){var he=q(this).query;return he?"?"+he:""},bs=function(){return q(this).searchParams},xs=function(){var he=q(this).fragment;return he?"#"+he:""};m&&g(Bt,{href:h(Kt,function(nt){var qe=q(this),nt=String(nt),nt=s(qe,nt);if(nt)throw TypeError(nt);N(qe.searchParams).updateSearchParams(qe.query)}),origin:h(Ot),protocol:h(Gr,function(he){var qe=q(this);s(qe,String(he)+":",Be)}),username:h(Ir,function(he){var qe=q(this),nt=j(String(he));if(!a(qe)){qe.username="";for(var We=0;We<nt.length;We++)qe.username+=Ie(nt[We],Pe)}}),password:h(Vt,function(he){var qe=q(this),nt=j(String(he));if(!a(qe)){qe.password="";for(var We=0;We<nt.length;We++)qe.password+=Ie(nt[We],Pe)}}),host:h(zr,function(he){var qe=q(this);qe.cannotBeABaseURL||s(qe,String(he),Ye)}),hostname:h(ys,function(he){var qe=q(this);qe.cannotBeABaseURL||s(qe,String(he),Qe)}),port:h(gs,function(he){var qe=q(this);a(qe)||((he=String(he))==""?qe.port=null:s(qe,he,rt))}),pathname:h(vs,function(he){var qe=q(this);qe.cannotBeABaseURL||(qe.path=[],s(qe,he+"",wt))}),search:h(Fu,function(he){var qe=q(this);(he=String(he))==""?qe.query=null:(he.charAt(0)=="?"&&(he=he.slice(1)),qe.query="",s(qe,he,Kr)),N(qe.searchParams).updateSearchParams(qe.query)}),searchParams:h(bs),hash:h(xs,function(he){var qe=q(this);(he=String(he))==""?qe.fragment=null:(he.charAt(0)=="#"&&(he=he.slice(1)),qe.fragment="",s(qe,he,gr))})}),v(Bt,"toJSON",function(){return Kt.call(this)},{enumerable:!0}),v(Bt,"toString",function(){return Kt.call(this)},{enumerable:!0}),D&&(c=D.createObjectURL,d=D.revokeObjectURL,c&&v(l,"createObjectURL",function(he){return c.apply(D,arguments)}),d&&v(l,"revokeObjectURL",function(he){return d.apply(D,arguments)})),R(l,"URL"),f({global:!0,forced:!y,sham:!m},{URL:l})},{"../internals/an-instance":9,"../internals/array-from":17,"../internals/descriptors":43,"../internals/export":50,"../internals/global":59,"../internals/has":60,"../internals/internal-state":70,"../internals/native-url":84,"../internals/object-assign":89,"../internals/object-define-properties":91,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/string-multibyte":123,"../internals/string-punycode-to-ascii":124,"../modules/es.string.iterator":186,"../modules/web.url-search-params":231}],233:[function(e,o,i){o.exports=e("./").polyfill()},{"./":234}],234:[function(e,o,i){(function(u,a){var s,l;s=this,l=function(){function h(Q){return typeof Q=="function"}var p=Array.isArray||function(Q){return Object.prototype.toString.call(Q)==="[object Array]"},c=0,d=void 0,f=void 0,m=function(Q,pe){_[c]=Q,_[c+1]=pe,(c+=2)===2&&(f?f(j):L())},y=typeof window<"u"?window:void 0,g=y||{},g=g.MutationObserver||g.WebKitMutationObserver,v=typeof self>"u"&&u!==void 0&&{}.toString.call(u)==="[object process]",b=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function w(){var Q=setTimeout;return function(){return Q(j,1)}}var _=new Array(1e3);function j(){for(var Q=0;Q<c;Q+=2)(0,_[Q])(_[Q+1]),_[Q]=void 0,_[Q+1]=void 0;c=0}function E(){try{var Q=Function("return this")().require("vertx");return(d=Q.runOnLoop||Q.runOnContext)!==void 0?function(){d(j)}:w()}catch{return w()}}var T,R,M,L=void 0;function I(Q,pe){var ye,we=this,ge=new this.constructor(W),Pe=(ge[N]===void 0&&ue(ge),we._state);return Pe?(ye=arguments[Pe-1],m(function(){return J(Pe,ge,ye,we._result)})):U(we,ge,Q,pe),ge}function D(Q){var pe;return Q&&typeof Q=="object"&&Q.constructor===this?Q:(X(pe=new this(W),Q),pe)}var L=v?function(){return u.nextTick(j)}:g?(R=0,v=new g(j),M=document.createTextNode(""),v.observe(M,{characterData:!0}),function(){M.data=R=++R%2}):b?((T=new MessageChannel).port1.onmessage=j,function(){return T.port2.postMessage(0)}):(y===void 0&&typeof e=="function"?E:w)(),N=Math.random().toString(36).substring(2);function W(){}var q=void 0,H=1,B=2;function G(Q,pe,ye){m(function(we){var ge=!1,Pe=function(Ie,Fe,Te,$e){try{Ie.call(Fe,Te,$e)}catch(Je){return Je}}(ye,pe,function(Ie){ge||(ge=!0,(pe!==Ie?X:A)(we,Ie))},function(Ie){ge||(ge=!0,O(we,Ie))},we._label);!ge&&Pe&&(ge=!0,O(we,Pe))},Q)}function V(Q,pe,ye){var we,ge;pe.constructor===Q.constructor&&ye===I&&pe.constructor.resolve===D?(we=Q,(ge=pe)._state===H?A(we,ge._result):ge._state===B?O(we,ge._result):U(ge,void 0,function(Pe){return X(we,Pe)},function(Pe){return O(we,Pe)})):ye!==void 0&&h(ye)?G(Q,pe,ye):A(Q,pe)}function X(Q,pe){if(Q===pe)O(Q,new TypeError("You cannot resolve a promise with itself"));else if(ye=typeof pe,pe===null||ye!="object"&&ye!="function")A(Q,pe);else{ye=void 0;try{ye=pe.then}catch(we){return void O(Q,we)}V(Q,pe,ye)}var ye}function te(Q){Q._onerror&&Q._onerror(Q._result),Y(Q)}function A(Q,pe){Q._state===q&&(Q._result=pe,Q._state=H,Q._subscribers.length!==0&&m(Y,Q))}function O(Q,pe){Q._state===q&&(Q._state=B,Q._result=pe,m(te,Q))}function U(Q,pe,ye,we){var ge=Q._subscribers,Pe=ge.length;Q._onerror=null,ge[Pe]=pe,ge[Pe+H]=ye,ge[Pe+B]=we,Pe===0&&Q._state&&m(Y,Q)}function Y(Q){var pe=Q._subscribers,ye=Q._state;if(pe.length!==0){for(var we,ge=void 0,Pe=Q._result,Ie=0;Ie<pe.length;Ie+=3)we=pe[Ie],ge=pe[Ie+ye],we?J(ye,we,ge,Pe):ge(Pe);Q._subscribers.length=0}}function J(Q,pe,ye,we){var ge=h(ye),Pe=void 0,Ie=void 0,Fe=!0;if(ge){try{Pe=ye(we)}catch(Te){Fe=!1,Ie=Te}if(pe===Pe)return void O(pe,new TypeError("A promises callback cannot return that same promise."))}else Pe=we;pe._state===q&&(ge&&Fe?X(pe,Pe):Fe===!1?O(pe,Ie):Q===H?A(pe,Pe):Q===B&&O(pe,Pe))}var ae=0;function ue(Q){Q[N]=ae++,Q._state=void 0,Q._result=void 0,Q._subscribers=[]}ne.prototype._enumerate=function(Q){for(var pe=0;this._state===q&&pe<Q.length;pe++)this._eachEntry(Q[pe],pe)},ne.prototype._eachEntry=function(Q,pe){var ye=this._instanceConstructor,we=ye.resolve;if(we===D){var ge,Pe=void 0,Ie=void 0,Fe=!1;try{Pe=Q.then}catch(Te){Fe=!0,Ie=Te}Pe===I&&Q._state!==q?this._settledAt(Q._state,pe,Q._result):typeof Pe!="function"?(this._remaining--,this._result[pe]=Q):ye===le?(ge=new ye(W),Fe?O(ge,Ie):V(ge,Q,Pe),this._willSettleAt(ge,pe)):this._willSettleAt(new ye(function(Te){return Te(Q)}),pe)}else this._willSettleAt(we(Q),pe)},ne.prototype._settledAt=function(Q,pe,ye){var we=this.promise;we._state===q&&(this._remaining--,Q===B?O(we,ye):this._result[pe]=ye),this._remaining===0&&A(we,this._result)},ne.prototype._willSettleAt=function(Q,pe){var ye=this;U(Q,void 0,function(we){return ye._settledAt(H,pe,we)},function(we){return ye._settledAt(B,pe,we)})};var de=ne;function ne(Q,pe){this._instanceConstructor=Q,this.promise=new Q(W),this.promise[N]||ue(this.promise),p(pe)?(this.length=pe.length,this._remaining=pe.length,this._result=new Array(this.length),this.length!==0&&(this.length=this.length||0,this._enumerate(pe),this._remaining!==0)||A(this.promise,this._result)):O(this.promise,new Error("Array Methods must be provided an Array"))}me.prototype.catch=function(Q){return this.then(null,Q)},me.prototype.finally=function(Q){var pe=this.constructor;return h(Q)?this.then(function(ye){return pe.resolve(Q()).then(function(){return ye})},function(ye){return pe.resolve(Q()).then(function(){throw ye})}):this.then(Q,Q)};var le=me;function me(Q){if(this[N]=ae++,this._result=this._state=void 0,this._subscribers=[],W!==Q){if(typeof Q!="function")throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof me))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var pe=this;try{Q(function(ye){X(pe,ye)},function(ye){O(pe,ye)})}catch(ye){O(pe,ye)}}}return le.prototype.then=I,le.all=function(Q){return new de(this,Q).promise},le.race=function(Q){var pe=this;return p(Q)?new pe(function(ye,we){for(var ge=Q.length,Pe=0;Pe<ge;Pe++)pe.resolve(Q[Pe]).then(ye,we)}):new pe(function(ye,we){return we(new TypeError("You must pass an array to race."))})},le.resolve=D,le.reject=function(Q){var pe=new this(W);return O(pe,Q),pe},le._setScheduler=function(Q){f=Q},le._setAsap=function(Q){m=Q},le._asap=m,le.polyfill=function(){var Q=void 0;if(a!==void 0)Q=a;else if(typeof self<"u")Q=self;else try{Q=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var pe=Q.Promise;if(pe){var ye=null;try{ye=Object.prototype.toString.call(pe.resolve())}catch{}if(ye==="[object Promise]"&&!pe.cast)return}Q.Promise=le},le.Promise=le},typeof i=="object"&&o!==void 0?o.exports=l():s.ES6Promise=l()}).call(this,e("_process"),typeof Wu<"u"?Wu:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:243}],235:[function(e,o,i){var u,a;u=this,a=function(s,l){var h=5e3,p="callback";function c(f){try{delete window[f]}catch{window[f]=void 0}}function d(f){f=document.getElementById(f),f&&document.getElementsByTagName("head")[0].removeChild(f)}l.exports=function(f){var m=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],y=f,g=m.timeout||h,v=m.jsonpCallback||p,b=void 0;return new Promise(function(w,_){var j=m.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),E=v+"_"+j,T=(window[j]=function(R){w({ok:!0,json:function(){return Promise.resolve(R)}}),b&&clearTimeout(b),d(E),c(j)},y+=y.indexOf("?")===-1?"?":"&",document.createElement("script"));T.setAttribute("src",""+y+v+"="+j),m.charset&&T.setAttribute("charset",m.charset),T.id=E,document.getElementsByTagName("head")[0].appendChild(T),b=setTimeout(function(){_(new Error("JSONP request to "+f+" timed out")),c(j),d(E),window[j]=function(){c(j)}},g),T.onerror=function(){_(new Error("JSONP request to "+f+" failed")),c(j),d(E),b&&clearTimeout(b)}})}},i!==void 0&&o!==void 0?a(0,o):(a(a={exports:{}},a),u.fetchJsonp=a.exports)},{}],236:[function(e,o,i){var u=function(a){var s,l,h,p,c,d,f,m,y,g,v;if(!(a===void 0||typeof navigator<"u"&&/MSIE [1-9]\./.test(navigator.userAgent)))return v=a.document,s=function(){return a.URL||a.webkitURL||a},l=v.createElementNS("http://www.w3.org/1999/xhtml","a"),h="download"in l,p=/constructor/i.test(a.HTMLElement)||a.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent),d=function(b){(a.setImmediate||a.setTimeout)(function(){throw b},0)},f=4e4,m=function(b){setTimeout(function(){typeof b=="string"?s().revokeObjectURL(b):b.remove()},f)},y=function(b){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(b.type)?new Blob([String.fromCharCode(65279),b],{type:b.type}):b},v=(g=function(b,w,R){R||(b=y(b));var j,E,T=this,R=b.type==="application/octet-stream",M=function(){for(var I=T,D="writestart progress write writeend".split(" "),L=void 0,N=(D=[].concat(D)).length;N--;){var W=I["on"+D[N]];if(typeof W=="function")try{W.call(I,L||I)}catch(q){d(q)}}};T.readyState=T.INIT,h?(j=s().createObjectURL(b),setTimeout(function(){var I,D;l.href=j,l.download=w,I=l,D=new MouseEvent("click"),I.dispatchEvent(D),M(),m(j),T.readyState=T.DONE})):(c||R&&p)&&a.FileReader?((E=new FileReader).onloadend=function(){var I=c?E.result:E.result.replace(/^data:[^;]*;/,"data:attachment/file;");a.open(I,"_blank")||(a.location.href=I),I=void 0,T.readyState=T.DONE,M()},E.readAsDataURL(b),T.readyState=T.INIT):(j=j||s().createObjectURL(b),!R&&a.open(j,"_blank")||(a.location.href=j),T.readyState=T.DONE,M(),m(j))}).prototype,typeof navigator<"u"&&navigator.msSaveOrOpenBlob?function(b,w,_){return w=w||b.name||"download",_||(b=y(b)),navigator.msSaveOrOpenBlob(b,w)}:(v.abort=function(){},v.readyState=v.INIT=0,v.WRITING=1,v.DONE=2,v.error=v.onwritestart=v.onprogress=v.onwrite=v.onabort=v.onerror=v.onwriteend=null,function(b,w,_){return new g(b,w||b.name||"download",_)})}(typeof self<"u"&&self||typeof window<"u"&&window||this.content);o!==void 0&&o.exports?o.exports.saveAs=u:n!=null},{}],237:[function(e,o,i){var u,a=Object.defineProperty,s=(a(i,"__esModule",{value:!0}),i),l={GIFEncoder:()=>M,applyPalette:()=>function(q,H,B="rgb565"){if(!q||!q.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(q instanceof Uint8Array||q instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");if(256<H.length)throw new Error("applyPalette() only works with 256 colors or less");const G=new Uint32Array(q.buffer),V=G.length,X=B==="rgb444"?4096:65536,te=new Uint8Array(V),A=new Array(X);if(B==="rgba4444")for(let me=0;me<V;me++){var J=G[me],O=J>>24&255,U=J>>16&255,Y=J>>8&255,J=255&J,ae=m(J,Y,U,O),ae=ae in A?A[ae]:A[ae]=function(Q,pe,ye,we,ge){let Pe=0,Ie=1e100;for(let Je=0;Je<ge.length;Je++){var Fe,Te=ge[Je],$e=E(Te[3]-we);$e>Ie||(Fe=Te[0],($e+=E(Fe-Q))>Ie||(Fe=Te[1],($e+=E(Fe-pe))>Ie||(Fe=Te[2],($e+=E(Fe-ye))>Ie||(Ie=$e,Pe=Je))))}return Pe}(J,Y,U,O,H);te[me]=ae}else{const me=B==="rgb444"?y:f;for(let Q=0;Q<V;Q++){var ne=G[Q],ue=ne>>16&255,de=ne>>8&255,ne=255&ne,le=me(ne,de,ue),le=le in A?A[le]:A[le]=function(pe,ye,we,ge){let Pe=0,Ie=1e100;for(let Je=0;Je<ge.length;Je++){var Fe,Te=ge[Je],$e=E(Te[0]-pe);$e>Ie||(Fe=Te[1],($e+=E(Fe-ye))>Ie||(Fe=Te[2],($e+=E(Fe-we))>Ie||(Ie=$e,Pe=Je)))}return Pe}(ne,de,ue,H);te[Q]=le}}return te},default:()=>W,nearestColor:()=>function(q,H,B=_){return q[T(q,H,B)]},nearestColorIndex:()=>T,nearestColorIndexWithDistance:()=>R,prequantize:()=>function(q,{roundRGB:H=5,roundAlpha:B=10,oneBitAlpha:G=null}={}){const V=new Uint32Array(q.buffer);for(let U=0;U<V.length;U++){var O=V[U];let Y=O>>24&255;var X,te=O>>16&255,A=O>>8&255,O=255&O;Y=j(Y,B),G&&(X=typeof G=="number"?G:127,Y=Y<=X?0:255),O=j(O,H),A=j(A,H),te=j(te,H),V[U]=Y<<24|te<<16|A<<8|O<<0}},quantize:()=>function(q,H,B={}){var{format:G="rgb565",clearAlpha:V=!0,clearAlphaColor:X=0,clearAlphaThreshold:te=0,oneBitAlpha:A=!1}=B;if(!q||!q.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(q instanceof Uint8Array||q instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");q=new Uint32Array(q.buffer);let O=B.useSqrt!==!1;const U=G==="rgba4444",Y=function(Ke,at){const Ze=at==="rgb444"?4096:65536,_e=new Array(Ze),Be=Ke.length;if(at==="rgba4444")for(let xt=0;xt<Be;++xt){var $=Ke[xt],je=$>>24&255,K=$>>16&255,ee=$>>8&255,$=255&$,re=m($,ee,K,je);let dt=re in _e?_e[re]:_e[re]=w();dt.rc+=$,dt.gc+=ee,dt.bc+=K,dt.ac+=je,dt.cnt++}else if(at==="rgb444")for(let xt=0;xt<Be;++xt){var Oe=Ke[xt],ve=Oe>>16&255,Ce=Oe>>8&255,Oe=255&Oe,He=y(Oe,Ce,ve);let dt=He in _e?_e[He]:_e[He]=w();dt.rc+=Oe,dt.gc+=Ce,dt.bc+=ve,dt.cnt++}else for(let xt=0;xt<Be;++xt){var rt=Ke[xt],Ye=rt>>16&255,Qe=rt>>8&255,rt=255&rt,Et=f(rt,Qe,Ye);let dt=Et in _e?_e[Et]:_e[Et]=w();dt.rc+=rt,dt.gc+=Qe,dt.bc+=Ye,dt.cnt++}return _e}(q,G),J=Y.length,ae=J-1,ue=new Uint32Array(J+1);for(var de=0,ne=0;ne<J;++ne){const Ke=Y[ne];Ke!=null&&(Te=1/Ke.cnt,U&&(Ke.ac*=Te),Ke.rc*=Te,Ke.gc*=Te,Ke.bc*=Te,Y[de++]=Ke)}v(H)/de<.022&&(O=!1);for(var le,me,Q,ne=0;ne<de-1;++ne)Y[ne].fw=ne+1,Y[ne+1].bk=ne,O&&(Y[ne].cnt=Math.sqrt(Y[ne].cnt));for(O&&(Y[ne].cnt=Math.sqrt(Y[ne].cnt)),ne=0;ne<de;++ne){b(Y,ne,!1);var pe=Y[ne].err;for(me=++ue[0];1<me&&(Q=me>>1,!(Y[le=ue[Q]].err<=pe));me=Q)ue[me]=le;ue[me]=ne}var ye,we=de-H;for(ne=0;ne<we;){for(;;){var ge=ue[1];if((ye=Y[ge]).tm>=ye.mtm&&Y[ye.nn].mtm<=ye.tm)break;for(ye.mtm==ae?ge=ue[1]=ue[ue[0]--]:(b(Y,ge,!1),ye.tm=ne),pe=Y[ge].err,me=1;(Q=me+me)<=ue[0]&&(Q<ue[0]&&Y[ue[Q]].err>Y[ue[Q+1]].err&&Q++,!(pe<=Y[le=ue[Q]].err));me=Q)ue[me]=le;ue[me]=ge}var Pe=Y[ye.nn],Ie=ye.cnt,Fe=Pe.cnt,Te=1/(Ie+Fe);U&&(ye.ac=Te*(Ie*ye.ac+Fe*Pe.ac)),ye.rc=Te*(Ie*ye.rc+Fe*Pe.rc),ye.gc=Te*(Ie*ye.gc+Fe*Pe.gc),ye.bc=Te*(Ie*ye.bc+Fe*Pe.bc),ye.cnt+=Pe.cnt,ye.mtm=++ne,Y[Pe.bk].fw=Pe.fw,Y[Pe.fw].bk=Pe.bk,Pe.mtm=ae}let $e=[];for(ne=0;;0){let Ke=g(Math.round(Y[ne].rc),0,255),at=g(Math.round(Y[ne].gc),0,255),Ze=g(Math.round(Y[ne].bc),0,255),_e=255;U&&(_e=g(Math.round(Y[ne].ac),0,255),A&&(Je=typeof A=="number"?A:127,_e=_e<=Je?0:255),V&&_e<=te&&(Ke=at=Ze=X,_e=0));var Je=U?[Ke,at,Ze,_e]:[Ke,at,Ze];if(function(Be,je){for(let $=0;$<Be.length;$++){var ee=Be[$],K=ee[0]===je[0]&&ee[1]===je[1]&&ee[2]===je[2],ee=!(4<=ee.length&&4<=je.length)||ee[3]===je[3];if(K&&ee)return!0}return!1}($e,Je)||$e.push(Je),(ne=Y[ne].fw)==0)break}return $e},snapColorsToPalette:()=>function(q,H,B=5){if(q.length&&H.length){var G=q.map(O=>O.slice(0,3)),V=B*B,X=q[0].length;for(let O=0;O<H.length;O++){let U=H[O];U=U.length<X?[U[0],U[1],U[2],255]:U.length>X?U.slice(0,3):U.slice();var A=R(G,U.slice(0,3),_),te=A[0],A=A[1];0<A&&A<=V&&(q[te]=U)}}}};for(u in l)a(s,u,{get:l[u],enumerable:!0});var h={signature:"GIF",version:"89a",trailer:59,extensionIntroducer:33,applicationExtensionLabel:255,graphicControlExtensionLabel:249,imageSeparator:44,signatureSize:3,versionSize:3,globalColorTableFlagMask:128,colorResolutionMask:112,sortFlagMask:8,globalColorTableSizeMask:7,applicationIdentifierSize:8,applicationAuthCodeSize:3,disposalMethodMask:28,userInputFlagMask:2,transparentColorFlagMask:1,localColorTableFlagMask:128,interlaceFlagMask:64,idSortFlagMask:32,localColorTableSizeMask:7};function p(q=256){let H=0,B=new Uint8Array(q);return{get buffer(){return B.buffer},reset(){H=0},bytesView(){return B.subarray(0,H)},bytes(){return B.slice(0,H)},writeByte(V){G(H+1),B[H]=V,H++},writeBytes(V,X=0,te=V.length){G(H+te);for(let A=0;A<te;A++)B[H++]=V[A+X]},writeBytesView(V,X=0,te=V.byteLength){G(H+te),B.set(V.subarray(X,X+te),H),H+=te}};function G(V){var X=B.length;if(!(V<=X)){V=Math.max(V,X*(X<1048576?2:1.125)>>>0),X!=0&&(V=Math.max(V,256));const te=B;B=new Uint8Array(V),0<H&&B.set(te.subarray(0,H),0)}}}var c=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],d=function(q,H,B,U,V=p(512),X=new Uint8Array(256),te=new Int32Array(5003),A=new Int32Array(5003)){var O=te.length,U=Math.max(2,U);X.fill(0),A.fill(0),te.fill(-1);let Y=0,J=0;var ae=U+1;const ue=ae;let de=!1,ne=ue,le=(1<<ne)-1;var me=1<<ae-1;const Q=1+me;let pe=2+me,ye=0,we=B[0],ge=0;for(let Je=O;Je<65536;Je*=2)++ge;ge=8-ge,V.writeByte(U),$e(me);var Pe=B.length;for(let Je=1;Je<Pe;Je++)e:{var Ie=B[Je],Fe=(Ie<<12)+we;let Ke=Ie<<ge^we;if(te[Ke]===Fe)we=A[Ke];else{for(var Te=Ke===0?1:O-Ke;0<=te[Ke];)if((Ke-=Te)<0&&(Ke+=O),te[Ke]===Fe){we=A[Ke];break e}$e(we),we=Ie,pe<4096?(A[Ke]=pe++,te[Ke]=Fe):(te.fill(-1),pe=2+me,de=!0,$e(me))}}return $e(we),$e(Q),V.writeByte(0),V.bytesView();function $e(Je){for(Y&=c[J],0<J?Y|=Je<<J:Y=Je,J+=ne;8<=J;)X[ye++]=255&Y,254<=ye&&(V.writeByte(ye),V.writeBytesView(X,0,ye),ye=0),Y>>=8,J-=8;if((pe>le||de)&&(de?(ne=ue,le=(1<<ne)-1,de=!1):(++ne,le=ne===12?1<<ne:(1<<ne)-1)),Je==Q){for(;0<J;)X[ye++]=255&Y,254<=ye&&(V.writeByte(ye),V.writeBytesView(X,0,ye),ye=0),Y>>=8,J-=8;0<ye&&(V.writeByte(ye),V.writeBytesView(X,0,ye),ye=0)}}};function f(q,H,B){return q<<8&63488|H<<2&992|B>>3}function m(q,H,B,G){return q>>4|240&H|(240&B)<<4|(240&G)<<8}function y(q,H,B){return q>>4<<8|240&H|B>>4}function g(q,H,B){return q<H?H:B<q?B:q}function v(q){return q*q}function b(q,H,B){var G=0,V=1e100;const X=q[H];for(var te=X.cnt,A=X.ac,O=X.rc,U=X.gc,Y=X.bc,J=X.fw;J!=0;J=q[J].fw){var ae,ue=q[J],de=ue.cnt,de=te*de/(te+de);V<=de||(ae=0,B&&V<=(ae+=de*v(ue.ac-A))||V<=(ae+=de*v(ue.rc-O))||V<=(ae+=de*v(ue.gc-U))||V<=(ae+=de*v(ue.bc-Y))||(V=ae,G=J))}X.err=V,X.nn=G}function w(){return{ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0}}function _(q,H){for(var B=0,G=0;G<q.length;G++){var V=q[G]-H[G];B+=V*V}return B}function j(q,H){return 1<H?Math.round(q/H)*H:q}function E(q){return q*q}function T(q,H,B=_){let G=1/0,V=-1;for(let te=0;te<q.length;te++){var X=B(H,q[te]);X<G&&(G=X,V=te)}return V}function R(q,H,B=_){let G=1/0,V=-1;for(let te=0;te<q.length;te++){var X=B(H,q[te]);X<G&&(G=X,V=te)}return[V,G]}function M(q={}){const{initialCapacity:H=4096,auto:B=!0}=q,G=p(H),V=new Uint8Array(256),X=new Int32Array(5003),te=new Int32Array(5003);let A=!1;return{reset(){G.reset(),A=!1},finish(){G.writeByte(h.trailer)},bytes(){return G.bytes()},bytesView(){return G.bytesView()},get buffer(){return G.buffer},get stream(){return G},writeHeader:O,writeFrame(U,Y,J,we={}){var{transparent:ue=!1,transparentIndex:de=0,delay:Te=0,palette:ne=null,repeat:Pe=0,colorDepth:le=8,dispose:me=-1}=we;let Q=!1;if(B?A||(Q=!0,O(),A=!0):Q=Boolean(we.first),Y=Math.max(0,Math.floor(Y)),J=Math.max(0,Math.floor(J)),Q){if(!ne)throw new Error("First frame must include a { palette } option");var[we,Ie,ye,Fe,ge=8]=[G,Y,J,ne,le];Fe=N(Fe.length)-1,ge=128|ge-1<<4|Fe,D(we,Ie),D(we,ye),we.writeBytes([ge,0,0]),I(G,ne),0<=Pe&&(Fe=G,Ie=Pe,Fe.writeByte(33),Fe.writeByte(255),Fe.writeByte(11),L(Fe,"NETSCAPE2.0"),Fe.writeByte(3),Fe.writeByte(1),D(Fe,Ie),Fe.writeByte(0))}var pe,ye=Math.round(Te/10),we=G,ge=me,Pe=ye,Ie=ue,Fe=de,Te=(we.writeByte(33),we.writeByte(249),we.writeByte(4),Fe<0&&(Fe=0,Ie=!1),Ie=Ie?(pe=1,2):pe=0,0<=ge&&(Ie=7&ge),Ie<<=2,we.writeByte(0|Ie|pe),D(we,Pe),we.writeByte(Fe||0),we.writeByte(0),Boolean(ne)&&!Q);me=G,ue=Y,de=J,pe=Te?ne:null,me.writeByte(44),D(me,0),D(me,0),D(me,ue),D(me,de),pe?(ue=N(pe.length)-1,me.writeByte(128|ue)):me.writeByte(0),Te&&I(G,ne),[Pe,we,de,ue,me=8,Te,ne,U]=[G,U,Y,J,le,V,X,te],d(de,ue,we,me,Pe,Te,ne,U)}};function O(){L(G,"GIF89a")}}function I(q,H){var B=1<<N(H.length);for(let G=0;G<B;G++){let V=[0,0,0];G<H.length&&(V=H[G]),q.writeByte(V[0]),q.writeByte(V[1]),q.writeByte(V[2])}}function D(q,H){q.writeByte(255&H),q.writeByte(H>>8&255)}function L(q,H){for(var B=0;B<H.length;B++)q.writeByte(H.charCodeAt(B))}function N(q){return Math.max(Math.ceil(Math.log2(q)),1)}var W=M},{}],238:[function(e,o,i){i.read=function(u,a,s,l,b){var p,c,d=8*b-l-1,f=(1<<d)-1,m=f>>1,y=-7,g=s?b-1:0,v=s?-1:1,b=u[a+g];for(g+=v,p=b&(1<<-y)-1,b>>=-y,y+=d;0<y;p=256*p+u[a+g],g+=v,y-=8);for(c=p&(1<<-y)-1,p>>=-y,y+=l;0<y;c=256*c+u[a+g],g+=v,y-=8);if(p===0)p=1-m;else{if(p===f)return c?NaN:1/0*(b?-1:1);c+=Math.pow(2,l),p-=m}return(b?-1:1)*c*Math.pow(2,p-l)},i.write=function(u,a,s,l,h,w){var c,d,f=8*w-h-1,m=(1<<f)-1,y=m>>1,g=h===23?Math.pow(2,-24)-Math.pow(2,-77):0,v=l?0:w-1,b=l?1:-1,w=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(d=isNaN(a)?1:0,c=m):(c=Math.floor(Math.log(a)/Math.LN2),a*(l=Math.pow(2,-c))<1&&(c--,l*=2),2<=(a+=1<=c+y?g/l:g*Math.pow(2,1-y))*l&&(c++,l/=2),m<=c+y?(d=0,c=m):1<=c+y?(d=(a*l-1)*Math.pow(2,h),c+=y):(d=a*Math.pow(2,y-1)*Math.pow(2,h),c=0));8<=h;u[s+v]=255&d,v+=b,d/=256,h-=8);for(c=c<<h|d,f+=h;0<f;u[s+v]=255&c,v+=b,c/=256,f-=8);u[s+v-b]|=128*w}},{}],239:[function(e,o,i){var u;function a(K,ee){return K.b===ee.b&&K.a===ee.a}function s(K,ee){return K.b<ee.b||K.b===ee.b&&K.a<=ee.a}function l(K,ee,$){var re=ee.b-K.b,ve=$.b-ee.b;return 0<re+ve?re<ve?ee.a-K.a+re/(re+ve)*(K.a-$.a):ee.a-$.a+ve/(re+ve)*($.a-K.a):0}function h(K,ee,$){var re=ee.b-K.b,ve=$.b-ee.b;return 0<re+ve?(ee.a-$.a)*re+(ee.a-K.a)*ve:0}function p(K,ee){return K.a<ee.a||K.a===ee.a&&K.b<=ee.b}function c(K,ee,$){var re=ee.a-K.a,ve=$.a-ee.a;return 0<re+ve?re<ve?ee.b-K.b+re/(re+ve)*(K.b-$.b):ee.b-$.b+ve/(re+ve)*($.b-K.b):0}function d(K,ee,$){var re=ee.a-K.a,ve=$.a-ee.a;return 0<re+ve?(ee.b-$.b)*re+(ee.b-K.b)*ve:0}function f(K,ee,$,re){return(K=K<0?0:K)<=($=$<0?0:$)?$===0?(ee+re)/2:ee+K/(K+$)*(re-ee):re+$/(K+$)*(ee-re)}function m(K){var ee=w(K.b);return j(ee,K.c),j(ee.b,K.c),E(ee,K.a),ee}function y(K,ee){var $=!1,re=!1;K!==ee&&(ee.a!==K.a&&(re=!0,R(ee.a,K.a)),ee.d!==K.d&&($=!0,M(ee.d,K.d)),_(ee,K),re||(j(ee,K.a),K.a.c=K),$||(E(ee,K.d),K.d.a=K))}function g(K){var ee=K.b,$=!1;K.d!==K.b.d&&($=!0,M(K.d,K.b.d)),K.c===K?R(K.a,null):(K.b.d.a=K.b.e,K.a.c=K.c,_(K,K.b.e),$||E(K,K.d)),ee.c===ee?(R(ee.a,null),M(ee.d,null)):(K.d.a=ee.b.e,ee.a.c=ee.c,_(ee,ee.b.e)),T(K)}function v(K){var ee=w(K),$=ee.b;return _(ee,K.e),ee.a=K.b.a,j($,ee.a),ee.d=$.d=K.d,ee=ee.b,_(K.b,K.b.b.e),_(K.b,ee),K.b.a=ee.a,ee.b.a.c=ee.b,ee.b.d=K.b.d,ee.f=K.f,ee.b.f=K.b.f,ee}function b(K,ee){var $=!1,re=w(K),ve=re.b;return ee.d!==K.d&&($=!0,M(ee.d,K.d)),_(re,K.e),_(ve,ee),re.a=K.b.a,ve.a=ee.a,re.d=ve.d=K.d,K.d.a=ve,$||E(re,K.d),re}function w(K){var ee=new ye,$=new ye,re=K.b.h;return((($.h=re).b.h=ee).h=K).b.h=$,ee.b=$,((ee.c=ee).e=$).b=ee,($.c=$).e=ee}function _(K,ee){var $=K.c,re=ee.c;$.b.e=ee,(re.b.e=K).c=re,ee.c=$}function j(K,ee){var $=ee.f,re=new ge(ee,$);for($.e=re,$=(ee.f=re).c=K;$.a=re,($=$.c)!==K;);}function E(K,ee){var $=ee.d,re=new pe(ee,$);for($.b=re,(ee.d=re).a=K,re.c=ee.c,$=K;$.d=re,($=$.e)!==K;);}function T(K){var ee=K.h;K=K.b.h,(ee.b.h=K).b.h=ee}function R(K,ee){for(var $=K.c,re=$;re.a=ee,(re=re.c)!==$;);$=K.f,((re=K.e).f=$).e=re}function M(K,ee){for(var $=K.a,re=$;re.d=ee,(re=re.e)!==$;);$=K.d,((re=K.b).d=$).b=re}function I(K){var ee=0;return Math.abs(K[1])>Math.abs(K[0])&&(ee=1),ee=Math.abs(K[2])>Math.abs(K[ee])?2:ee}function D(K,ee){K.f+=ee.f,K.b.f+=ee.b.f}function L(K,ee,$){return K=K.a,ee=ee.a,$=$.a,ee.b.a===K?$.b.a===K?s(ee.a,$.a)?h($.b.a,ee.a,$.a)<=0:0<=h(ee.b.a,$.a,ee.a):h($.b.a,K,$.a)<=0:$.b.a===K?0<=h(ee.b.a,K,ee.a):(ee=l(ee.b.a,K,ee.a),(K=l($.b.a,K,$.a))<=ee)}function N(K){K.a.i=null;var ee=K.e;ee.a.c=ee.c,ee.c.a=ee.a,K.e=null}function W(K,ee){g(K.a),K.c=!1,(K.a=ee).i=K}function q(K){for(var ee=K.a.a;(K=je(K)).a.a===ee;);return K.c&&(W(K,ee=b(Be(K).a.b,K.a.e)),K=je(K)),K}function H(K,ee,$){var re=new _e;return re.a=$,re.e=de(K.f,ee.e,re),$.i=re}function B(K,ee){switch(K.s){case 100130:return(1&ee)!=0;case 100131:return ee!==0;case 100132:return 0<ee;case 100133:return ee<0;case 100134:return 2<=ee||ee<=-2}return!1}function G(K){var ee=K.a,$=ee.d;$.c=K.d,$.a=ee,N(K)}function V(K,ee,$){for(ee=(K=ee).a;K!==$;){K.c=!1;var re=Be(K),ve=re.a;if(ve.a!==ee.a){if(!re.c){G(K);break}W(re,ve=b(ee.c.b,ve.b))}ee.c!==ve&&(y(ve.b.e,ve),y(ee,ve)),G(K),ee=re.a,K=re}return ee}function X(K,ee,$,re,ve,Ce){for(var Oe=!0;H(K,ee,$.b),($=$.c)!==re;);for(ve===null&&(ve=Be(ee).a.b.c);($=(re=Be(ee)).a.b).a===ve.a;)$.c!==ve&&(y($.b.e,$),y(ve.b.e,$)),re.f=ee.f-$.f,re.d=B(K,re.f),ee.b=!0,!Oe&&U(K,ee)&&(D($,ve),N(ee),g(ve)),Oe=!1,ee=re,ve=$;ee.b=!0,Ce&&J(K,ee)}function te(K,ee,$,re,ve){var Ce=[ee.g[0],ee.g[1],ee.g[2]];ee.d=null,ee.d=K.o&&K.o(Ce,$,re,K.c)||null,ee.d===null&&(ve?K.n||(Q(K,100156),K.n=!0):ee.d=$[0])}function A(K,ee,$){var re=[null,null,null,null];re[0]=ee.a.d,re[1]=$.a.d,te(K,ee.a,re,[.5,.5,0,0],!1),y(ee,$)}function O(K,ee,$,re,ve){var Ce=Math.abs(ee.b-K.b)+Math.abs(ee.a-K.a),Oe=Math.abs($.b-K.b)+Math.abs($.a-K.a),He=ve+1;re[ve]=.5*Oe/(Ce+Oe),re[He]=.5*Ce/(Ce+Oe),K.g[0]+=re[ve]*ee.g[0]+re[He]*$.g[0],K.g[1]+=re[ve]*ee.g[1]+re[He]*$.g[1],K.g[2]+=re[ve]*ee.g[2]+re[He]*$.g[2]}function U(K,ee){var $=Be(ee),re=ee.a,ve=$.a;if(s(re.a,ve.a)){if(0<h(ve.b.a,re.a,ve.a))return;if(a(re.a,ve.a)){if(re.a!==ve.a){var $=K.e,Ce=re.a.h;if(0<=Ce){var Oe=($=$.b).d,He=$.e,Ye=$.c,Qe=Ye[Ce];Oe[Qe]=Oe[$.a],(Ye[Oe[Qe]]=Qe)<=--$.a&&(Qe<=1||s(He[Oe[Qe>>1]],He[Oe[Qe]])?at:Ze)($,Qe),He[Ce]=null,Ye[Ce]=$.b,$.b=Ce}else for($.c[-(Ce+1)]=null;0<$.a&&$.c[$.d[$.a-1]]===null;)--$.a;A(K,ve.b.e,re)}}else v(ve.b),y(re,ve.b.e),ee.b=$.b=!0}else{if(h(re.b.a,ve.a,re.a)<0)return;je(ee).b=ee.b=!0,v(re.b),y(ve.b.e,re)}return 1}function Y(K,ee){var $=Be(ee),re=ee.a,ve=$.a,Ce=re.a,Oe=ve.a,He=re.b.a,Ye=ve.b.a,Qe=new ge;if(h(He,K.a,Ce),h(Ye,K.a,Oe),!(Ce===Oe||Math.min(Ce.a,He.a)>Math.max(Oe.a,Ye.a))){if(s(Ce,Oe)){if(0<h(Ye,Ce,Oe))return}else if(h(He,Oe,Ce)<0)return;var rt,Et,xt=He,dt=Ce,wt=Ye,bt=Oe;if(s(xt,dt)||(rt=xt,xt=dt,dt=rt),s(wt,bt)||(rt=wt,wt=bt,bt=rt),s(xt,wt)||(rt=xt,xt=wt,wt=rt,rt=dt,dt=bt,bt=rt),s(wt,dt)?s(dt,bt)?((rt=l(xt,wt,dt))+(Et=l(wt,dt,bt))<0&&(rt=-rt,Et=-Et),Qe.b=f(rt,wt.b,Et,dt.b)):((rt=h(xt,wt,dt))+(Et=-h(xt,bt,dt))<0&&(rt=-rt,Et=-Et),Qe.b=f(rt,wt.b,Et,bt.b)):Qe.b=(wt.b+dt.b)/2,p(xt,dt)||(rt=xt,xt=dt,dt=rt),p(wt,bt)||(rt=wt,wt=bt,bt=rt),p(xt,wt)||(rt=xt,xt=wt,wt=rt,rt=dt,dt=bt,bt=rt),p(wt,dt)?p(dt,bt)?((rt=c(xt,wt,dt))+(Et=c(wt,dt,bt))<0&&(rt=-rt,Et=-Et),Qe.a=f(rt,wt.a,Et,dt.a)):((rt=d(xt,wt,dt))+(Et=-d(xt,bt,dt))<0&&(rt=-rt,Et=-Et),Qe.a=f(rt,wt.a,Et,bt.a)):Qe.a=(wt.a+dt.a)/2,s(Qe,K.a)&&(Qe.b=K.a.b,Qe.a=K.a.a),xt=s(Ce,Oe)?Ce:Oe,s(xt,Qe)&&(Qe.b=xt.b,Qe.a=xt.a),a(Qe,Ce)||a(Qe,Oe))return U(K,ee),0;if(!a(He,K.a)&&0<=h(He,K.a,Qe)||!a(Ye,K.a)&&h(Ye,K.a,Qe)<=0){if(Ye===K.a)v(re.b),y(ve.b,re),re=Be(ee=q(ee)).a,V(K,Be(ee),$),X(K,ee,re.b.e,re,re,!0);else{if(He!==K.a)return 0<=h(He,K.a,Qe)&&(je(ee).b=ee.b=!0,v(re.b),re.a.b=K.a.b,re.a.a=K.a.a),void(h(Ye,K.a,Qe)<=0&&(ee.b=$.b=!0,v(ve.b),ve.a.b=K.a.b,ve.a.a=K.a.a));for(v(ve.b),y(re.e,ve.b.e),Oe=(Ce=$=ee).a.b.a;(Ce=je(Ce)).a.b.a===Oe;);Ce=Be(ee=Ce).a.b.c,$.a=ve.b.e,X(K,ee,(ve=V(K,$,null)).c,re.b.c,Ce,!0)}return 1}v(re.b),v(ve.b),y(ve.b.e,re),re.a.b=Qe.b,re.a.a=Qe.a,re.a.h=Ie(K.e,re.a),re=re.a,ve=[0,0,0,0],Qe=[Ce.d,He.d,Oe.d,Ye.d],re.g[0]=re.g[1]=re.g[2]=0,O(re,Ce,He,ve,0),O(re,Oe,Ye,ve,2),te(K,re,Qe,ve,!0),je(ee).b=ee.b=$.b=!0}}function J(K,ee){for(var $=Be(ee);;){for(;$.b;)$=Be(ee=$);if(!ee.b&&((ee=je($=ee))===null||!ee.b))break;ee.b=!1;var re=ee.a,ve=$.a;if(Ce=re.b.a!==ve.b.a)e:{var Ce,Oe=Be(Ce=ee),He=Ce.a,Ye=Oe.a,Qe=void 0;if(s(He.b.a,Ye.b.a)){if(h(He.b.a,Ye.b.a,He.a)<0){Ce=!1;break e}je(Ce).b=Ce.b=!0,Qe=v(He),y(Ye.b,Qe),Qe.d.c=Ce.d}else{if(0<h(Ye.b.a,He.b.a,Ye.a)){Ce=!1;break e}Ce.b=Oe.b=!0,Qe=v(Ye),y(He.e,Ye.b),Qe.b.d.c=Ce.d}Ce=!0}if(Ce&&($.c?(N($),g(ve),ve=($=Be(ee)).a):ee.c&&(N(ee),g(re),re=(ee=je($)).a)),re.a!==ve.a){if(re.b.a===ve.b.a||ee.c||$.c||re.b.a!==K.a&&ve.b.a!==K.a)U(K,ee);else if(Y(K,ee))break}re.a===ve.a&&re.b.a===ve.b.a&&(D(ve,re),N(ee),g(re),ee=je($))}}function ae(K,ee){var $=new _e,re=m(K.b);re.a.b=4e150,re.a.a=ee,re.b.a.b=-4e150,re.b.a.a=ee,K.a=re.b.a,$.a=re,$.f=0,$.d=!1,$.c=!1,$.h=!0,$.b=!1,re=de(re=K.f,re.a,$),$.e=re}function ue(K){this.a=new ne,this.b=K,this.c=L}function de(K,ee,$){for(;(ee=ee.c).b!==null&&!K.c(K.b,ee.b,$););return K=new ne($,ee.a,ee),ee.a.c=K,ee.a=K}function ne(K,ee,$){this.b=K||null,this.a=ee||this,this.c=$||this}function le(){this.d=0,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}function me(K,ee){if(K.d!==ee)for(;K.d!==ee;)if(K.d<ee)switch(K.d){case 0:Q(K,100151),K.u(null);break;case 1:Q(K,100152),K.t()}else switch(K.d){case 2:Q(K,100154),K.v();break;case 1:Q(K,100153),K.w()}}function Q(K,ee){K.p&&K.p(ee,K.c)}function pe(K,ee){this.b=K||this,this.d=ee||this,this.a=null,this.c=!1}function ye(){(this.h=this).i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function we(){this.c=new ge,this.a=new pe,this.b=new ye,this.d=new ye,this.b.b=this.d,this.d.b=this.b}function ge(K,ee){this.e=K||this,this.f=ee||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function Pe(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new Te}function Ie(K,ee){var $,re,ve;return K.e?(2*(re=++($=K.b).a)>$.f&&($.f*=2,$.c=$e($.c,$.f+1)),$.b===0?ve=re:(ve=$.b,$.b=$.c[$.b]),$.e[ve]=ee,$.c[ve]=re,$.d[re]=ve,$.h&&Ze($,re),ve):($=K.a++,K.c[$]=ee,-($+1))}function Fe(K){if(K.a===0)return Ke(K.b);var ee=K.c[K.d[K.a-1]];if(K.b.a!==0&&s(Je(K.b),ee))return Ke(K.b);for(;--K.a,0<K.a&&K.c[K.d[K.a-1]]===null;);return ee}function Te(){this.d=$e([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function $e(K,ee){for(var $=Array(ee),re=0;re<K.length;re++)$[re]=K[re];for(;re<ee;re++)$[re]=0;return $}function Je(K){return K.e[K.d[1]]}function Ke(K){var ee=K.d,$=K.e,re=K.c,ve=ee[1],Ce=$[ve];return 0<K.a&&(ee[1]=ee[K.a],re[ee[1]]=1,$[ve]=null,re[ve]=K.b,K.b=ve,0<--K.a&&at(K,1)),Ce}function at(K,ee){for(var $=K.d,re=K.e,ve=K.c,Ce=ee,Oe=$[Ce];;){var He=Ce<<1,Ye=(He<K.a&&s(re[$[He+1]],re[$[He]])&&(He+=1),$[He]);if(He>K.a||s(re[Oe],re[Ye])){ve[$[Ce]=Oe]=Ce;break}ve[$[Ce]=Ye]=Ce,Ce=He}}function Ze(K,ee){for(var $=K.d,re=K.e,ve=K.c,Ce=ee,Oe=$[Ce];;){var He=Ce>>1,Ye=$[He];if(He==0||s(re[Ye],re[Oe])){ve[$[Ce]=Oe]=Ce;break}ve[$[Ce]=Ye]=Ce,Ce=He}}function _e(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function Be(K){return K.e.c.b}function je(K){return K.e.a.b}(u=le.prototype).x=function(){me(this,0)},u.B=function(K,ee){switch(K){case 100142:return;case 100140:switch(ee){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=ee)}break;case 100141:return void(this.m=!!ee);default:return void Q(this,100900)}Q(this,100901)},u.y=function(K){switch(K){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:Q(this,100900)}return!1},u.A=function(K,ee,$){this.j[0]=K,this.j[1]=ee,this.j[2]=$},u.z=function(K,ee){var $=ee||null;switch(K){case 100100:case 100106:this.h=$;break;case 100104:case 100110:this.l=$;break;case 100101:case 100107:this.k=$;break;case 100102:case 100108:this.i=$;break;case 100103:case 100109:this.p=$;break;case 100105:case 100111:this.o=$;break;case 100112:this.r=$;break;default:Q(this,100900)}},u.C=function(K,ee){var $=!1,re=[0,0,0];me(this,2);for(var ve=0;ve<3;++ve){var Ce=K[ve];Ce<-1e150&&(Ce=-1e150,$=!0),1e150<Ce&&(Ce=1e150,$=!0),re[ve]=Ce}$&&Q(this,100155),($=this.q)===null?y($=m(this.b),$.b):(v($),$=$.e),$.a.d=ee,$.a.g[0]=re[0],$.a.g[1]=re[1],$.a.g[2]=re[2],$.f=1,$.b.f=-1,this.q=$},u.u=function(K){me(this,0),this.d=1,this.b=new we,this.c=K},u.t=function(){me(this,1),this.d=2,this.q=null},u.v=function(){me(this,2),this.d=1},u.w=function(){me(this,1),this.d=0;var K,ee,$=this.j[0],re=this.j[1],ve=this.j[2],Ce=!1,Oe=[$,re,ve];if($===0&&re===0&&ve===0){for(var re=[-2e150,-2e150,-2e150],He=[2e150,2e150,2e150],ve=[],Ye=[],$=(Ce=this.b.c).e;$!==Ce;$=$.e)for(var Qe=0;Qe<3;++Qe){var rt=$.g[Qe];rt<He[Qe]&&(He[Qe]=rt,Ye[Qe]=$),rt>re[Qe]&&(re[Qe]=rt,ve[Qe]=$)}if(re[1]-He[1]>re[$=0]-He[0]&&($=1),He[$=re[2]-He[2]>re[$]-He[$]?2:$]>=re[$])Oe[0]=0,Oe[1]=0,Oe[2]=1;else{for(He=Ye[$],ve=ve[$],Ye=[re=0,0,0],He=[He.g[0]-ve.g[0],He.g[1]-ve.g[1],He.g[2]-ve.g[2]],Qe=[0,0,0],$=Ce.e;$!==Ce;$=$.e)Qe[0]=$.g[0]-ve.g[0],Qe[1]=$.g[1]-ve.g[1],Qe[2]=$.g[2]-ve.g[2],Ye[0]=He[1]*Qe[2]-He[2]*Qe[1],Ye[1]=He[2]*Qe[0]-He[0]*Qe[2],Ye[2]=He[0]*Qe[1]-He[1]*Qe[0],re<(rt=Ye[0]*Ye[0]+Ye[1]*Ye[1]+Ye[2]*Ye[2])&&(re=rt,Oe[0]=Ye[0],Oe[1]=Ye[1],Oe[2]=Ye[2]);re<=0&&(Oe[0]=Oe[1]=Oe[2]=0,Oe[I(He)]=1)}Ce=!0}for(Ye=I(Oe),$=this.b.c,re=(Ye+1)%3,ve=(Ye+2)%3,Ye=0<Oe[Ye]?1:-1,Oe=$.e;Oe!==$;Oe=Oe.e)Oe.b=Oe.g[re],Oe.a=Ye*Oe.g[ve];if(Ce){for(Oe=0,$=(Ce=this.b.a).b;$!==Ce;$=$.b)if(!((re=$.a).f<=0))for(;Oe+=(re.a.b-re.b.a.b)*(re.a.a+re.b.a.a),(re=re.e)!==$.a;);if(Oe<0)for(Ce=(Oe=this.b.c).e;Ce!==Oe;Ce=Ce.e)Ce.a=-Ce.a}for(this.n=!1,Oe=this.b.b,$=Oe.h;$!==Oe;$=Ce)Ce=$.h,re=$.e,a($.a,$.b.a)&&$.e.e!==$&&(A(this,re,$),g($),re=($=re).e),re.e===$&&(re!==$&&(re!==Ce&&re!==Ce.b||(Ce=Ce.h),g(re)),$!==Ce&&$!==Ce.b||(Ce=Ce.h),g($));for(this.e=Oe=new Pe,Ce=this.b.c,$=Ce.e;$!==Ce;$=$.e)$.h=Ie(Oe,$);var Et=Oe;Et.d=[];for(var xt=0;xt<Et.a;xt++)Et.d[xt]=xt;Et.d.sort(function(bt){return function(qt,Kr){return s(bt[qt],bt[Kr])?1:-1}}(Et.c)),Et.e=!0;for(var dt=Et.b,wt=dt.a;1<=wt;--wt)at(dt,wt);for(dt.h=!0,this.f=new ue(this),ae(this,-4e150),ae(this,4e150);(Oe=Fe(this.e))!==null;){for(;;){e:if(($=this.e).a===0)Ce=Je($.b);else if(Ce=$.c[$.d[$.a-1]],$.b.a!==0&&s($=Je($.b),Ce)){Ce=$;break e}if(Ce===null||!a(Ce,Oe))break;Ce=Fe(this.e),A(this,Oe.c,Ce.c)}(function bt(qt,Kr){for(var gr,Bt=(qt.a=Kr).c;Bt.i===null;)if((Bt=Bt.c)===Kr.c){var Bt=qt,Kt=Kr;(Vt=new _e).a=Kt.c.b;for(var zr=(Ot=Bt.f).a;(zr=zr.a).b!==null&&!Ot.c(Ot.b,Vt,zr.b););var Ot,Gr,Ir=Be(Ot=zr.b),Vt=Ot.a,zr=Ir.a;return void(h(Vt.b.a,Kt,Vt.a)===0?a((Vt=Ot.a).a,Kt)||a(Vt.b.a,Kt)||(v(Vt.b),Ot.c&&(g(Vt.c),Ot.c=!1),y(Kt.c,Vt),bt(Bt,Kt)):(Gr=s(zr.b.a,Vt.b.a)?Ot:Ir,Ir=void 0,Ot.d||Gr.c?(Ir=Gr===Ot?b(Kt.c.b,Vt.e):b(zr.b.c.b,Kt.c).b,Gr.c?W(Gr,Ir):((Ot=H(Vt=Bt,Ot,Ir)).f=je(Ot).f+Ot.a.f,Ot.d=B(Vt,Ot.f)),bt(Bt,Kt)):X(Bt,Ot,Kt.c,Kt.c,null,!0)))}Ot=(Vt=Be(Bt=q(Bt.i))).a,(Vt=V(qt,Vt,null)).c===Ot?(Vt=(Ot=Vt).c,zr=Be(Bt),Ir=Bt.a,Gr=zr.a,gr=!1,Ir.b.a!==Gr.b.a&&Y(qt,Bt),a(Ir.a,qt.a)&&(y(Vt.b.e,Ir),Vt=Be(Bt=q(Bt)).a,V(qt,Be(Bt),zr),gr=!0),a(Gr.a,qt.a)&&(y(Ot,Gr.b.e),Ot=V(qt,zr,null),gr=!0),gr?X(qt,Bt,Ot.c,Vt,Vt,!0):(Kt=s(Gr.a,Ir.a)?Gr.b.e:Ir,X(qt,Bt,Kt=b(Ot.c.b,Kt),Kt.c,Kt.c,!1),Kt.b.i.c=!0,J(qt,Bt))):X(qt,Bt,Vt.c,Ot,Ot,!0)})(this,Oe)}for(this.a=this.f.a.a.b.a.a,Oe=0;(Ce=this.f.a.a.b)!==null;)Ce.h||++Oe,N(Ce);for(this.f=null,(Oe=this.e).b=null,Oe.d=null,this.e=Oe.c=null,Oe=this.b,$=Oe.a.b;$!==Oe.a;$=Ce)Ce=$.b,($=$.a).e.e===$&&(D($.c,$),g($));if(!this.n){if(Oe=this.b,this.m)for($=Oe.b.h;$!==Oe.b;$=Ce)Ce=$.h,$.b.d.c!==$.d.c?$.f=$.d.c?1:-1:g($);else for($=Oe.a.b;$!==Oe.a;$=Ce)if(Ce=$.b,$.c){for($=$.a;s($.b.a,$.a);$=$.c.b);for(;s($.a,$.b.a);$=$.e);for(re=$.c.b,ve=void 0;$.e!==re;)if(s($.b.a,re.a)){for(;re.e!==$&&(s((ee=re.e).b.a,ee.a)||h(re.a,re.b.a,re.e.b.a)<=0);)re=(ve=b(re.e,re)).b;re=re.c.b}else{for(;re.e!==$&&(s((K=$.c.b).a,K.b.a)||0<=h($.b.a,$.a,$.c.b.a));)$=(ve=b($,$.c.b)).b;$=$.e}for(;re.e.e!==$;)ve=b(re.e,re),re=ve.b}if(this.h||this.i||this.k||this.l)if(this.m){for(Ce=(Oe=this.b).a.b;Ce!==Oe.a;Ce=Ce.b)if(Ce.c){for(this.h&&this.h(2,this.c),$=Ce.a;this.k&&this.k($.a.d,this.c),($=$.e)!==Ce.a;);this.i&&this.i(this.c)}}else{for(Oe=this.b,Ce=!!this.l,$=!1,re=-1,ve=Oe.a.d;ve!==Oe.a;ve=ve.d)if(ve.c)for($||(this.h&&this.h(4,this.c),$=!0),Ye=ve.a;Ce&&(He=Ye.b.d.c?0:1,re!==He&&(re=He,this.l&&this.l(!!re,this.c))),this.k&&this.k(Ye.a.d,this.c),(Ye=Ye.e)!==ve.a;);$&&this.i&&this.i(this.c)}if(this.r){for(Oe=this.b,$=Oe.a.b;$!==Oe.a;$=Ce)if(Ce=$.b,!$.c){for(ve=(re=$.a).e,Ye=void 0;ve=(Ye=ve).e,(Ye.d=null)===Ye.b.d&&(Ye.c===Ye?R(Ye.a,null):(Ye.a.c=Ye.c,_(Ye,Ye.b.e)),(He=Ye.b).c===He?R(He.a,null):(He.a.c=He.c,_(He,He.b.e)),T(Ye)),Ye!==re;);re=$.d,(($=$.b).d=re).b=$}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:le,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},le.prototype.gluDeleteTess=le.prototype.x,le.prototype.gluTessProperty=le.prototype.B,le.prototype.gluGetTessProperty=le.prototype.y,le.prototype.gluTessNormal=le.prototype.A,le.prototype.gluTessCallback=le.prototype.z,le.prototype.gluTessVertex=le.prototype.C,le.prototype.gluTessBeginPolygon=le.prototype.u,le.prototype.gluTessBeginContour=le.prototype.t,le.prototype.gluTessEndContour=le.prototype.v,le.prototype.gluTessEndPolygon=le.prototype.w,o!==void 0&&(o.exports=this.libtess)},{}],240:[function(e,o,i){function u(s,l,h,p){var c=0,d=(p=p===void 0?{}:p).loop===void 0?null:p.loop,f=p.palette===void 0?null:p.palette;if(l<=0||h<=0||65535<l||65535<h)throw new Error("Width/Height invalid.");function m(E){if(E=E.length,E<2||256<E||E&E-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return E}s[c++]=71,s[c++]=73,s[c++]=70,s[c++]=56,s[c++]=57,s[c++]=97;var y=0,g=0;if(f!==null){for(var v=m(f);v>>=1;)++y;if(v=1<<y,--y,p.background!==void 0){if(v<=(g=p.background))throw new Error("Background index out of range.");if(g===0)throw new Error("Background index explicitly passed as 0.")}}if(s[c++]=255&l,s[c++]=l>>8&255,s[c++]=255&h,s[c++]=h>>8&255,s[c++]=(f!==null?128:0)|y,s[c++]=g,s[c++]=0,f!==null)for(var b=0,w=f.length;b<w;++b){var _=f[b];s[c++]=_>>16&255,s[c++]=_>>8&255,s[c++]=255&_}if(d!==null){if(d<0||65535<d)throw new Error("Loop count invalid.");s[c++]=33,s[c++]=255,s[c++]=11,s[c++]=78,s[c++]=69,s[c++]=84,s[c++]=83,s[c++]=67,s[c++]=65,s[c++]=80,s[c++]=69,s[c++]=50,s[c++]=46,s[c++]=48,s[c++]=3,s[c++]=1,s[c++]=255&d,s[c++]=d>>8&255,s[c++]=0}var j=!1;this.addFrame=function(E,T,R,M,I,D){if(j===!0&&(--c,j=!1),D=D===void 0?{}:D,E<0||T<0||65535<E||65535<T)throw new Error("x/y invalid.");if(R<=0||M<=0||65535<R||65535<M)throw new Error("Width/Height invalid.");if(I.length<R*M)throw new Error("Not enough pixels for the frame size.");var L=!0,N=D.palette;if(N==null&&(L=!1,N=f),N==null)throw new Error("Must supply either a local or global palette.");for(var q=m(N),W=0;q>>=1;)++W;var q=1<<W,H=D.delay===void 0?0:D.delay,B=D.disposal===void 0?0:D.disposal;if(B<0||3<B)throw new Error("Disposal out of range.");var G=!1,V=0;if(D.transparent!==void 0&&D.transparent!==null&&(G=!0,(V=D.transparent)<0||q<=V))throw new Error("Transparent color index.");if(B===0&&!G&&H===0||(s[c++]=33,s[c++]=249,s[c++]=4,s[c++]=B<<2|(G===!0?1:0),s[c++]=255&H,s[c++]=H>>8&255,s[c++]=V,s[c++]=0),s[c++]=44,s[c++]=255&E,s[c++]=E>>8&255,s[c++]=255&T,s[c++]=T>>8&255,s[c++]=255&R,s[c++]=R>>8&255,s[c++]=255&M,s[c++]=M>>8&255,s[c++]=L===!0?128|W-1:0,L===!0)for(var X=0,te=N.length;X<te;++X){var A=N[X];s[c++]=A>>16&255,s[c++]=A>>8&255,s[c++]=255&A}return c=function(O,U,Y,J){O[U++]=Y;var ae=U++,ue=1<<Y,de=ue-1,ne=1+ue,le=1+ne,me=Y+1,Q=0,pe=0;function ye(Ke){for(;Ke<=Q;)O[U++]=255&pe,pe>>=8,Q-=8,U===ae+256&&(O[ae]=255,ae=U++)}function we(Ke){pe|=Ke<<Q,Q+=me,ye(8)}var ge=J[0]&de,Pe={};we(ue);for(var Ie=1,Fe=J.length;Ie<Fe;++Ie){var Te=J[Ie]&de,$e=ge<<8|Te,Je=Pe[$e];if(Je===void 0){for(pe|=ge<<Q,Q+=me;8<=Q;)O[U++]=255&pe,pe>>=8,Q-=8,U===ae+256&&(O[ae]=255,ae=U++);le===4096?(we(ue),le=1+ne,me=Y+1,Pe={}):(1<<me<=le&&++me,Pe[$e]=le++),ge=Te}else ge=Je}return we(ge),we(ne),ye(1),ae+1===U?O[ae]=0:(O[ae]=U-ae-1,O[U++]=0),U}(s,c,W<2?2:W,I)},this.end=function(){return j===!1&&(s[c++]=59,j=!0),c},this.getOutputBuffer=function(){return s},this.setOutputBuffer=function(E){s=E},this.getOutputBufferPosition=function(){return c},this.setOutputBufferPosition=function(E){c=E}}function a(s,l,h,p){for(var c=s[l++],d=1<<c,f=1+d,m=1+f,y=c+1,g=(1<<y)-1,v=0,b=0,w=0,_=s[l++],j=new Int32Array(4096),E=null;;){for(;v<16&&_!==0;)b|=s[l++]<<v,v+=8,_===1?_=s[l++]:--_;if(v<y)break;var T=b&g;if(b>>=y,v-=y,T==d)m=1+f,g=(1<<(y=c+1))-1,E=null;else{if(T==f)break;for(var R=T<m?T:E,M=0,I=R;d<I;)I=j[I]>>8,++M;var D=I;if(p<w+M+(R!==T?1:0))return void console.log("Warning, gif stream longer than expected.");h[w++]=D;var L=w+=M;for(R!==T&&(h[w++]=D),I=R;M--;)I=j[I],h[--L]=255&I,I>>=8;E!==null&&m<4096&&(j[m++]=E<<8|D,g+1<=m&&y<12&&(++y,g=g<<1|1)),E=T}}w!==p&&console.log("Warning, gif stream shorter than expected.")}try{i.GifWriter=u,i.GifReader=function(s){var l=0;if(s[l++]!==71||s[l++]!==73||s[l++]!==70||s[l++]!==56||(s[l++]+1&253)!=56||s[l++]!==97)throw new Error("Invalid GIF 87a/89a header.");var h=s[l++]|s[l++]<<8,p=s[l++]|s[l++]<<8,c=s[l++],d=1<<1+(7&c),f=(s[l++],s[l++],null),m=null,y=(c>>7&&(f=l,l+=3*(m=d)),!0),g=[],v=0,b=null,w=0,_=null;for(this.width=h,this.height=p;y&&l<s.length;)switch(s[l++]){case 33:switch(s[l++]){case 255:if(s[l]!==11||s[l+1]==78&&s[l+2]==69&&s[l+3]==84&&s[l+4]==83&&s[l+5]==67&&s[l+6]==65&&s[l+7]==80&&s[l+8]==69&&s[l+9]==50&&s[l+10]==46&&s[l+11]==48&&s[l+12]==3&&s[l+13]==1&&s[l+16]==0)l+=14,_=s[l++]|s[l++]<<8,l++;else for(l+=12;;){if(!(0<=(E=s[l++])))throw Error("Invalid block size");if(E===0)break;l+=E}break;case 249:if(s[l++]!==4||s[l+4]!==0)throw new Error("Invalid graphics extension block.");var j=s[l++],v=s[l++]|s[l++]<<8,b=s[l++];!(1&j)&&(b=null),w=j>>2&7,l++;break;case 254:for(;;){if(!(0<=(E=s[l++])))throw Error("Invalid block size");if(E===0)break;l+=E}break;default:throw new Error("Unknown graphic control label: 0x"+s[l-1].toString(16))}break;case 44:var E,T=s[l++]|s[l++]<<8,R=s[l++]|s[l++]<<8,M=s[l++]|s[l++]<<8,I=s[l++]|s[l++]<<8,H=s[l++],D=H>>6&1,L=1<<1+(7&H),N=f,W=m,q=!1,H=(H>>7&&(q=!0,N=l,l+=3*(W=L)),l);for(l++;;){if(!(0<=(E=s[l++])))throw Error("Invalid block size");if(E===0)break;l+=E}g.push({x:T,y:R,width:M,height:I,has_local_palette:q,palette_offset:N,palette_size:W,data_offset:H,data_length:l-H,transparent_index:b,interlaced:!!D,delay:v,disposal:w});break;case 59:y=!1;break;default:throw new Error("Unknown gif block: 0x"+s[l-1].toString(16))}this.numFrames=function(){return g.length},this.loopCount=function(){return _},this.frameInfo=function(B){if(B<0||B>=g.length)throw new Error("Frame index out of range.");return g[B]},this.decodeAndBlitFrameBGRA=function(B,G){for(var B=this.frameInfo(B),V=B.width*B.height,X=new Uint8Array(V),te=(a(s,B.data_offset,X,V),B.palette_offset),A=B.transparent_index,O=(A===null&&(A=256),B.width),U=h-O,Y=O,J=4*(B.y*h+B.x),ae=4*((B.y+B.height)*h+B.x),ue=J,de=4*U,ne=(B.interlaced===!0&&(de+=4*h*7),8),le=0,me=X.length;le<me;++le){var Q,pe,ye=X[le];Y===0&&(Y=O,ae<=(ue+=de)&&(de=4*U+4*h*(ne-1),ue=J+(O+U)*(ne<<1),ne>>=1)),ye===A?ue+=4:(Q=s[te+3*ye],pe=s[te+3*ye+1],ye=s[te+3*ye+2],G[ue++]=ye,G[ue++]=pe,G[ue++]=Q,G[ue++]=255),--Y}},this.decodeAndBlitFrameRGBA=function(B,G){for(var B=this.frameInfo(B),V=B.width*B.height,X=new Uint8Array(V),te=(a(s,B.data_offset,X,V),B.palette_offset),A=B.transparent_index,O=(A===null&&(A=256),B.width),U=h-O,Y=O,J=4*(B.y*h+B.x),ae=4*((B.y+B.height)*h+B.x),ue=J,de=4*U,ne=(B.interlaced===!0&&(de+=4*h*7),8),le=0,me=X.length;le<me;++le){var Q,pe,ye=X[le];Y===0&&(Y=O,ae<=(ue+=de)&&(de=4*U+4*h*(ne-1),ue=J+(O+U)*(ne<<1),ne>>=1)),ye===A?ue+=4:(Q=s[te+3*ye],pe=s[te+3*ye+1],ye=s[te+3*ye+2],G[ue++]=Q,G[ue++]=pe,G[ue++]=ye,G[ue++]=255),--Y}}}}catch{}},{}],241:[function(e,o,i){(function(u){var a,s;a=this,s=function(l){function h(P){if(this==null)throw TypeError();var S,C=String(this),k=C.length,P=P?Number(P):0;if(!((P=P!=P?0:P)<0||k<=P))return 55296<=(S=C.charCodeAt(P))&&S<=56319&&P+1<k&&56320<=(k=C.charCodeAt(P+1))&&k<=57343?1024*(S-55296)+k-56320+65536:S}String.prototype.codePointAt||((p=function(){try{var x={},S=Object.defineProperty,C=S(x,x,x)&&S}catch{}return C}())?p(String.prototype,"codePointAt",{value:h,configurable:!0,writable:!0}):String.prototype.codePointAt=h);var p,c=0,d=-3;function f(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function m(x,S){this.source=x,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=S,this.destLen=0,this.ltree=new f,this.dtree=new f}var y=new f,g=new f,v=new Uint8Array(30),b=new Uint16Array(30),w=new Uint8Array(30),_=new Uint16Array(30),j=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),E=new f,T=new Uint8Array(320);function R(x,S,C,k){for(var P,F=0;F<C;++F)x[F]=0;for(F=0;F<30-C;++F)x[F+C]=F/C|0;for(P=k,F=0;F<30;++F)S[F]=P,P+=1<<x[F]}var M=new Uint16Array(16);function I(x,S,C,k){for(var P,F=0;F<16;++F)x.table[F]=0;for(F=0;F<k;++F)x.table[S[C+F]]++;for(F=P=x.table[0]=0;F<16;++F)M[F]=P,P+=x.table[F];for(F=0;F<k;++F)S[C+F]&&(x.trans[M[S[C+F]]++]=F)}function D(x,S,C){if(!S)return C;for(;x.bitcount<24;)x.tag|=x.source[x.sourceIndex++]<<x.bitcount,x.bitcount+=8;var k=x.tag&65535>>>16-S;return x.tag>>>=S,x.bitcount-=S,k+C}function L(x,S){for(;x.bitcount<24;)x.tag|=x.source[x.sourceIndex++]<<x.bitcount,x.bitcount+=8;for(var C=0,k=0,P=0,F=x.tag;k=2*k+(1&F),F>>>=1,C+=S.table[++P],0<=(k-=S.table[P]););return x.tag=F,x.bitcount-=P,S.trans[C+k]}function N(x,S,C){for(;;){var k=L(x,S);if(k===256)return c;if(k<256)x.dest[x.destLen++]=k;else for(var P,F=D(x,v[k-=257],b[k]),k=L(x,C),z=P=x.destLen-D(x,w[k],_[k]);z<P+F;++z)x.dest[x.destLen++]=x.dest[z]}}for(var W=y,q=g,H=0;H<7;++H)W.table[H]=0;for(W.table[7]=24,W.table[8]=152,W.table[9]=112,H=0;H<24;++H)W.trans[H]=256+H;for(H=0;H<144;++H)W.trans[24+H]=H;for(H=0;H<8;++H)W.trans[168+H]=280+H;for(H=0;H<112;++H)W.trans[176+H]=144+H;for(H=0;H<5;++H)q.table[H]=0;for(q.table[5]=32,H=0;H<32;++H)q.trans[H]=H;R(v,b,4,3),R(w,_,2,1),v[28]=0,b[28]=258;var B=function(x,S){var C,k,P,F=new m(x,S);do{switch(P=void 0,(k=F).bitcount--||(k.tag=k.source[k.sourceIndex++],k.bitcount=7),P=1&k.tag,k.tag>>>=1,k=P,D(F,2,0)){case 0:C=function(Re){for(var ft,St;8<Re.bitcount;)Re.sourceIndex--,Re.bitcount-=8;if((ft=256*Re.source[Re.sourceIndex+1]+Re.source[Re.sourceIndex])!==(65535&~(256*Re.source[Re.sourceIndex+3]+Re.source[Re.sourceIndex+2])))return d;for(Re.sourceIndex+=4,St=ft;St;--St)Re.dest[Re.destLen++]=Re.source[Re.sourceIndex++];return Re.bitcount=0,c}(F);break;case 1:C=N(F,y,g);break;case 2:Ne=Ae=Ge=Me=z=fe=Ee=ke=be=ie=se=Z=void 0;for(var z,Z=F,se=F.ltree,ie=F.dtree,be=D(Z,5,257),ke=D(Z,5,1),Ee=D(Z,4,4),fe=0;fe<19;++fe)T[fe]=0;for(fe=0;fe<Ee;++fe){var Ge=D(Z,3,0);T[j[fe]]=Ge}for(I(E,T,0,19),z=0;z<be+ke;){var Ae=L(Z,E);switch(Ae){case 16:for(var Ne=T[z-1],Me=D(Z,2,3);Me;--Me)T[z++]=Ne;break;case 17:for(Me=D(Z,3,3);Me;--Me)T[z++]=0;break;case 18:for(Me=D(Z,7,11);Me;--Me)T[z++]=0;break;default:T[z++]=Ae}}I(se,T,0,be),I(ie,T,be,ke),C=N(F,F.ltree,F.dtree);break;default:C=d}if(C!==c)throw new Error("Data error")}while(!k);return F.destLen<F.dest.length?typeof F.dest.slice=="function"?F.dest.slice(0,F.destLen):F.dest.subarray(0,F.destLen):F.dest};function G(x,S,C,k,P){return Math.pow(1-P,3)*x+3*Math.pow(1-P,2)*P*S+3*(1-P)*Math.pow(P,2)*C+Math.pow(P,3)*k}function V(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function X(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function te(x){throw new Error(x)}function A(x,S){x||te(S)}V.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},V.prototype.addPoint=function(x,S){typeof x=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=x,this.x2=x),x<this.x1&&(this.x1=x),x>this.x2&&(this.x2=x)),typeof S=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=S,this.y2=S),S<this.y1&&(this.y1=S),S>this.y2&&(this.y2=S))},V.prototype.addX=function(x){this.addPoint(x,null)},V.prototype.addY=function(x){this.addPoint(null,x)},V.prototype.addBezier=function(x,S,C,k,P,F,z,Z){var se=[x,S],ie=[C,k],be=[P,F],ke=[z,Z];this.addPoint(x,S),this.addPoint(z,Z);for(var Ee=0;Ee<=1;Ee++){var fe,Ge=6*se[Ee]-12*ie[Ee]+6*be[Ee],Ae=-3*se[Ee]+9*ie[Ee]-9*be[Ee]+3*ke[Ee],Ne=3*ie[Ee]-3*se[Ee];Ae==0?Ge==0||0<(fe=-Ne/Ge)&&fe<1&&(Ee===0&&this.addX(G(se[Ee],ie[Ee],be[Ee],ke[Ee],fe)),Ee===1&&this.addY(G(se[Ee],ie[Ee],be[Ee],ke[Ee],fe))):(fe=Math.pow(Ge,2)-4*Ne*Ae)<0||(0<(Ne=(-Ge+Math.sqrt(fe))/(2*Ae))&&Ne<1&&(Ee===0&&this.addX(G(se[Ee],ie[Ee],be[Ee],ke[Ee],Ne)),Ee===1&&this.addY(G(se[Ee],ie[Ee],be[Ee],ke[Ee],Ne))),0<(Ne=(-Ge-Math.sqrt(fe))/(2*Ae))&&Ne<1&&(Ee===0&&this.addX(G(se[Ee],ie[Ee],be[Ee],ke[Ee],Ne)),Ee===1&&this.addY(G(se[Ee],ie[Ee],be[Ee],ke[Ee],Ne))))}},V.prototype.addQuad=function(x,S,C,k,P,F){C=x+2/3*(C-x),k=S+2/3*(k-S),this.addBezier(x,S,C,k,C+1/3*(P-x),k+1/3*(F-S),P,F)},X.prototype.moveTo=function(x,S){this.commands.push({type:"M",x,y:S})},X.prototype.lineTo=function(x,S){this.commands.push({type:"L",x,y:S})},X.prototype.curveTo=X.prototype.bezierCurveTo=function(x,S,C,k,P,F){this.commands.push({type:"C",x1:x,y1:S,x2:C,y2:k,x:P,y:F})},X.prototype.quadTo=X.prototype.quadraticCurveTo=function(x,S,C,k){this.commands.push({type:"Q",x1:x,y1:S,x:C,y:k})},X.prototype.close=X.prototype.closePath=function(){this.commands.push({type:"Z"})},X.prototype.extend=function(x){var S;if(x.commands)x=x.commands;else if(x instanceof V)return S=x,this.moveTo(S.x1,S.y1),this.lineTo(S.x2,S.y1),this.lineTo(S.x2,S.y2),this.lineTo(S.x1,S.y2),void this.close();Array.prototype.push.apply(this.commands,x)},X.prototype.getBoundingBox=function(){for(var x=new V,S=0,C=0,k=0,P=0,F=0;F<this.commands.length;F++){var z=this.commands[F];switch(z.type){case"M":x.addPoint(z.x,z.y),S=k=z.x,C=P=z.y;break;case"L":x.addPoint(z.x,z.y),k=z.x,P=z.y;break;case"Q":x.addQuad(k,P,z.x1,z.y1,z.x,z.y),k=z.x,P=z.y;break;case"C":x.addBezier(k,P,z.x1,z.y1,z.x2,z.y2,z.x,z.y),k=z.x,P=z.y;break;case"Z":k=S,P=C;break;default:throw new Error("Unexpected path command "+z.type)}}return x.isEmpty()&&x.addPoint(0,0),x},X.prototype.draw=function(x){x.beginPath();for(var S=0;S<this.commands.length;S+=1){var C=this.commands[S];C.type==="M"?x.moveTo(C.x,C.y):C.type==="L"?x.lineTo(C.x,C.y):C.type==="C"?x.bezierCurveTo(C.x1,C.y1,C.x2,C.y2,C.x,C.y):C.type==="Q"?x.quadraticCurveTo(C.x1,C.y1,C.x,C.y):C.type==="Z"&&x.closePath()}this.fill&&(x.fillStyle=this.fill,x.fill()),this.stroke&&(x.strokeStyle=this.stroke,x.lineWidth=this.strokeWidth,x.stroke())},X.prototype.toPathData=function(x){function S(){for(var F=arguments,z="",Z=0;Z<arguments.length;Z+=1){var se=F[Z];0<=se&&0<Z&&(z+=" "),z+=(se=se,Math.round(se)===se?""+Math.round(se):se.toFixed(x))}return z}x=x!==void 0?x:2;for(var C="",k=0;k<this.commands.length;k+=1){var P=this.commands[k];P.type==="M"?C+="M"+S(P.x,P.y):P.type==="L"?C+="L"+S(P.x,P.y):P.type==="C"?C+="C"+S(P.x1,P.y1,P.x2,P.y2,P.x,P.y):P.type==="Q"?C+="Q"+S(P.x1,P.y1,P.x,P.y):P.type==="Z"&&(C+="Z")}return C},X.prototype.toSVG=function(x){var S=(S='<path d="')+this.toPathData(x)+'"';return this.fill&&this.fill!=="black"&&(this.fill===null?S+=' fill="none"':S+=' fill="'+this.fill+'"'),this.stroke&&(S+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),S+="/>"},X.prototype.toDOMElement=function(S){var S=this.toPathData(S),C=document.createElementNS("http://www.w3.org/2000/svg","path");return C.setAttribute("d",S),C};var O={fail:te,argument:A,assert:A},U={},Y={},J={};function ae(x){return function(){return x}}Y.BYTE=function(x){return O.argument(0<=x&&x<=255,"Byte value should be between 0 and 255."),[x]},J.BYTE=ae(1),Y.CHAR=function(x){return[x.charCodeAt(0)]},J.CHAR=ae(1),Y.CHARARRAY=function(x){for(var S=[],C=0;C<x.length;C+=1)S[C]=x.charCodeAt(C);return S},J.CHARARRAY=function(x){return x.length},Y.USHORT=function(x){return[x>>8&255,255&x]},J.USHORT=ae(2),Y.SHORT=function(x){return[(x=32768<=x?-(65536-x):x)>>8&255,255&x]},J.SHORT=ae(2),Y.UINT24=function(x){return[x>>16&255,x>>8&255,255&x]},J.UINT24=ae(3),Y.ULONG=function(x){return[x>>24&255,x>>16&255,x>>8&255,255&x]},J.ULONG=ae(4),Y.LONG=function(x){return[(x=2147483648<=x?-(4294967296-x):x)>>24&255,x>>16&255,x>>8&255,255&x]},J.LONG=ae(4),Y.FIXED=Y.ULONG,J.FIXED=J.ULONG,Y.FWORD=Y.SHORT,J.FWORD=J.SHORT,Y.UFWORD=Y.USHORT,J.UFWORD=J.USHORT,Y.LONGDATETIME=function(x){return[0,0,0,0,x>>24&255,x>>16&255,x>>8&255,255&x]},J.LONGDATETIME=ae(8),Y.TAG=function(x){return O.argument(x.length===4,"Tag should be exactly 4 ASCII characters."),[x.charCodeAt(0),x.charCodeAt(1),x.charCodeAt(2),x.charCodeAt(3)]},J.TAG=ae(4),Y.Card8=Y.BYTE,J.Card8=J.BYTE,Y.Card16=Y.USHORT,J.Card16=J.USHORT,Y.OffSize=Y.BYTE,J.OffSize=J.BYTE,Y.SID=Y.USHORT,J.SID=J.USHORT,Y.NUMBER=function(x){return-107<=x&&x<=107?[x+139]:108<=x&&x<=1131?[247+((x-=108)>>8),255&x]:-1131<=x&&x<=-108?[251+((x=-x-108)>>8),255&x]:-32768<=x&&x<=32767?Y.NUMBER16(x):Y.NUMBER32(x)},J.NUMBER=function(x){return Y.NUMBER(x).length},Y.NUMBER16=function(x){return[28,x>>8&255,255&x]},J.NUMBER16=ae(3),Y.NUMBER32=function(x){return[29,x>>24&255,x>>16&255,x>>8&255,255&x]},J.NUMBER32=ae(5),Y.REAL=function(x){for(var S=x.toString(),C=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(S),k=(C&&(C=parseFloat("1e"+((C[2]?+C[2]:0)+C[1].length)),S=(Math.round(x*C)/C).toString()),""),P=0,F=S.length;P<F;P+=1){var z=S[P];k+=z==="e"?S[++P]==="-"?"c":"b":z==="."?"a":z==="-"?"e":z}for(var Z=[30],se=0,ie=(k+=1&k.length?"f":"ff").length;se<ie;se+=2)Z.push(parseInt(k.substr(se,2),16));return Z},J.REAL=function(x){return Y.REAL(x).length},Y.NAME=Y.CHARARRAY,J.NAME=J.CHARARRAY,Y.STRING=Y.CHARARRAY,J.STRING=J.CHARARRAY,U.UTF8=function(x,S,C){for(var k=[],P=C,F=0;F<P;F++,S+=1)k[F]=x.getUint8(S);return String.fromCharCode.apply(null,k)},U.UTF16=function(x,S,C){for(var k=[],P=C/2,F=0;F<P;F++,S+=2)k[F]=x.getUint16(S);return String.fromCharCode.apply(null,k)},Y.UTF16=function(x){for(var S=[],C=0;C<x.length;C+=1){var k=x.charCodeAt(C);S[S.length]=k>>8&255,S[S.length]=255&k}return S},J.UTF16=function(x){return 2*x.length};var ue,de={"x-mac-croatian":"","x-mac-cyrillic":"","x-mac-gaelic":"","x-mac-greek":"","x-mac-icelandic":"","x-mac-inuit":"","x-mac-ce":"",macintosh:"","x-mac-romanian":"","x-mac-turkish":""},ne=(U.MACSTRING=function(x,S,C,k){var P=de[k];if(P!==void 0){for(var F="",z=0;z<C;z++){var Z=x.getUint8(S+z);F+=Z<=127?String.fromCharCode(Z):P[127&Z]}return F}},typeof WeakMap=="function"&&new WeakMap);function le(x){return-128<=x&&x<=127}Y.MACSTRING=function(x,S){var C=function(z){if(!ue)for(var Z in ue={},de)ue[Z]=new String(Z);var se=ue[z];if(se!==void 0){if(ne){var ie=ne.get(se);if(ie!==void 0)return ie}var be=de[z];if(be!==void 0){for(var ke={},Ee=0;Ee<be.length;Ee++)ke[be.charCodeAt(Ee)]=Ee+128;return ne&&ne.set(se,ke),ke}}}(S);if(C!==void 0){for(var k=[],P=0;P<x.length;P++){var F=x.charCodeAt(P);if(128<=F&&(F=C[F])===void 0)return;k[P]=F}return k}},J.MACSTRING=function(x,S){return x=Y.MACSTRING(x,S),x!==void 0?x.length:0},Y.VARDELTAS=function(x){for(var k=0,S=[];k<x.length;)var C=x[k],k=(C===0?function(P,F,z){for(var Z=0,se=P.length;F<se&&Z<64&&P[F]===0;)++F,++Z;return z.push(128|Z-1),F}:-128<=C&&C<=127?function(P,F,z){for(var Z=0,se=P.length,ie=F;ie<se&&Z<64;){var be=P[ie];if(!le(be)||be===0&&ie+1<se&&P[ie+1]===0)break;++ie,++Z}z.push(Z-1);for(var ke=F;ke<ie;++ke)z.push(P[ke]+256&255);return ie}:function(P,F,z){for(var Z=0,se=P.length,ie=F;ie<se&&Z<64;){var be=P[ie];if(be===0||le(be)&&ie+1<se&&le(P[ie+1]))break;++ie,++Z}z.push(64|Z-1);for(var ke=F;ke<ie;++ke){var Ee=P[ke];z.push(Ee+65536>>8&255,Ee+256&255)}return ie})(x,k,S);return S},Y.INDEX=function(x){for(var S=1,C=[S],k=[],P=0;P<x.length;P+=1){var F=Y.OBJECT(x[P]);Array.prototype.push.apply(k,F),S+=F.length,C.push(S)}if(k.length===0)return[0,0];for(var z=[],Z=1+Math.floor(Math.log(S)/Math.log(2))/8|0,se=[void 0,Y.BYTE,Y.USHORT,Y.UINT24,Y.ULONG][Z],ie=0;ie<C.length;ie+=1){var be=se(C[ie]);Array.prototype.push.apply(z,be)}return Array.prototype.concat(Y.Card16(x.length),Y.OffSize(Z),z,k)},J.INDEX=function(x){return Y.INDEX(x).length},Y.DICT=function(x){for(var S=[],C=Object.keys(x),k=C.length,P=0;P<k;P+=1){var F=parseInt(C[P],0),z=x[F];S=(S=S.concat(Y.OPERAND(z.value,z.type))).concat(Y.OPERATOR(F))}return S},J.DICT=function(x){return Y.DICT(x).length},Y.OPERATOR=function(x){return x<1200?[x]:[12,x-1200]},Y.OPERAND=function(x,S){var C=[];if(Array.isArray(S))for(var k=0;k<S.length;k+=1)O.argument(x.length===S.length,"Not enough arguments given for type"+S),C=C.concat(Y.OPERAND(x[k],S[k]));else if(S==="SID")C=C.concat(Y.NUMBER(x));else if(S==="offset")C=C.concat(Y.NUMBER32(x));else if(S==="number")C=C.concat(Y.NUMBER(x));else{if(S!=="real")throw new Error("Unknown operand type "+S);C=C.concat(Y.REAL(x))}return C},Y.OP=Y.BYTE,J.OP=J.BYTE;var me=typeof WeakMap=="function"&&new WeakMap;function Q(x,S,C){for(var k=0;k<S.length;k+=1){var P=S[k];this[P.name]=P.value}if(this.tableName=x,this.fields=S,C)for(var F=Object.keys(C),z=0;z<F.length;z+=1){var Z=F[z],se=C[Z];this[Z]!==void 0&&(this[Z]=se)}}function pe(x,S,C){C===void 0&&(C=S.length);var k=new Array(S.length+1);k[0]={name:x+"Count",type:"USHORT",value:C};for(var P=0;P<S.length;P++)k[P+1]={name:x+P,type:"USHORT",value:S[P]};return k}function ye(x,S,C){var k=S.length,P=new Array(k+1);P[0]={name:x+"Count",type:"USHORT",value:k};for(var F=0;F<k;F++)P[F+1]={name:x+F,type:"TABLE",value:C(S[F],F)};return P}function we(x,S,C){var k=S.length,P=[];P[0]={name:x+"Count",type:"USHORT",value:k};for(var F=0;F<k;F++)P=P.concat(C(S[F],F));return P}function ge(x){x.format===1?Q.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(pe("glyph",x.glyphs))):O.assert(!1,"Can't create coverage table format 2 yet.")}function Pe(x){Q.call(this,"scriptListTable",we("scriptRecord",x,function(S,C){var k=S.script,P=k.defaultLangSys;return O.assert(!!P,"Unable to write GSUB: script "+S.tag+" has no default language system."),[{name:"scriptTag"+C,type:"TAG",value:S.tag},{name:"script"+C,type:"TABLE",value:new Q("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new Q("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:P.reqFeatureIndex}].concat(pe("featureIndex",P.featureIndexes)))}].concat(we("langSys",k.langSysRecords,function(F,z){var Z=F.langSys;return[{name:"langSysTag"+z,type:"TAG",value:F.tag},{name:"langSys"+z,type:"TABLE",value:new Q("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:Z.reqFeatureIndex}].concat(pe("featureIndex",Z.featureIndexes)))}]})))}]}))}function Ie(x){Q.call(this,"featureListTable",we("featureRecord",x,function(S,C){var k=S.feature;return[{name:"featureTag"+C,type:"TAG",value:S.tag},{name:"feature"+C,type:"TABLE",value:new Q("featureTable",[{name:"featureParams",type:"USHORT",value:k.featureParams}].concat(pe("lookupListIndex",k.lookupListIndexes)))}]}))}function Fe(x,S){Q.call(this,"lookupListTable",ye("lookup",x,function(C){var k=S[C.lookupType];return O.assert(!!k,"Unable to write GSUB lookup type "+C.lookupType+" tables."),new Q("lookupTable",[{name:"lookupType",type:"USHORT",value:C.lookupType},{name:"lookupFlag",type:"USHORT",value:C.lookupFlag}].concat(ye("subtable",C.subtables,k)))}))}Y.CHARSTRING=function(x){if(me){var S=me.get(x);if(S!==void 0)return S}for(var F=[],C=x.length,k=0;k<C;k+=1)var P=x[k],F=F.concat(Y[P.type](P.value));return me&&me.set(x,F),F},J.CHARSTRING=function(x){return Y.CHARSTRING(x).length},Y.OBJECT=function(x){var S=Y[x.type];return O.argument(S!==void 0,"No encoding function for type "+x.type),S(x.value)},J.OBJECT=function(x){var S=J[x.type];return O.argument(S!==void 0,"No sizeOf function for type "+x.type),S(x.value)},Y.TABLE=function(x){for(var S=[],C=x.fields.length,k=[],P=[],F=0;F<C;F+=1){var z=x.fields[F],se=Y[z.type],Z=(O.argument(se!==void 0,"No encoding function for field type "+z.type+" ("+z.name+")"),x[z.name]),se=se(Z=Z===void 0?z.value:Z);z.type==="TABLE"?(P.push(S.length),S=S.concat([0,0]),k.push(se)):S=S.concat(se)}for(var ie=0;ie<k.length;ie+=1){var be=P[ie],ke=S.length;O.argument(ke<65536,"Table "+x.tableName+" too big."),S[be]=ke>>8,S[be+1]=255&ke,S=S.concat(k[ie])}return S},J.TABLE=function(x){for(var S=0,C=x.fields.length,k=0;k<C;k+=1){var P=x.fields[k],F=J[P.type],z=(O.argument(F!==void 0,"No sizeOf function for field type "+P.type+" ("+P.name+")"),x[P.name]);S+=F(z=z===void 0?P.value:z),P.type==="TABLE"&&(S+=2)}return S},Y.RECORD=Y.TABLE,J.RECORD=J.TABLE,Y.LITERAL=function(x){return x},J.LITERAL=function(x){return x.length},Q.prototype.encode=function(){return Y.TABLE(this)},Q.prototype.sizeOf=function(){return J.TABLE(this)};var Te={Table:Q,Record:Q,Coverage:(ge.prototype=Object.create(Q.prototype)).constructor=ge,ScriptList:(Pe.prototype=Object.create(Q.prototype)).constructor=Pe,FeatureList:(Ie.prototype=Object.create(Q.prototype)).constructor=Ie,LookupList:(Fe.prototype=Object.create(Q.prototype)).constructor=Fe,ushortList:pe,tableList:ye,recordList:we};function $e(x,S){return x.getUint8(S)}function Je(x,S){return x.getUint16(S,!1)}function Ke(x,S){return x.getUint32(S,!1)}function at(x,S){return x.getInt16(S,!1)+x.getUint16(S+2,!1)/65535}var Ze={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function _e(x,S){this.data=x,this.offset=S,this.relativeOffset=0}_e.prototype.parseByte=function(){var x=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,x},_e.prototype.parseChar=function(){var x=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,x},_e.prototype.parseCard8=_e.prototype.parseByte,_e.prototype.parseCard16=_e.prototype.parseUShort=function(){var x=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,x},_e.prototype.parseSID=_e.prototype.parseUShort,_e.prototype.parseOffset16=_e.prototype.parseUShort,_e.prototype.parseShort=function(){var x=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,x},_e.prototype.parseF2Dot14=function(){var x=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,x},_e.prototype.parseOffset32=_e.prototype.parseULong=function(){var x=Ke(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,x},_e.prototype.parseFixed=function(){var x=at(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,x},_e.prototype.parseString=function(x){var S=this.data,C=this.offset+this.relativeOffset,k="";this.relativeOffset+=x;for(var P=0;P<x;P++)k+=String.fromCharCode(S.getUint8(C+P));return k},_e.prototype.parseTag=function(){return this.parseString(4)},_e.prototype.parseLongDateTime=function(){var x=Ke(this.data,this.offset+this.relativeOffset+4);return x-=2082844800,this.relativeOffset+=8,x},_e.prototype.parseVersion=function(x){var S=Je(this.data,this.offset+this.relativeOffset),C=Je(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,S+C/(x=x===void 0?4096:x)/10},_e.prototype.skip=function(x,S){this.relativeOffset+=Ze[x]*(S=S===void 0?1:S)},_e.prototype.parseULongList=function(x){x===void 0&&(x=this.parseULong());for(var S=new Array(x),C=this.data,k=this.offset+this.relativeOffset,P=0;P<x;P++)S[P]=C.getUint32(k),k+=4;return this.relativeOffset+=4*x,S},_e.prototype.parseOffset16List=_e.prototype.parseUShortList=function(x){x===void 0&&(x=this.parseUShort());for(var S=new Array(x),C=this.data,k=this.offset+this.relativeOffset,P=0;P<x;P++)S[P]=C.getUint16(k),k+=2;return this.relativeOffset+=2*x,S},_e.prototype.parseShortList=function(x){for(var S=new Array(x),C=this.data,k=this.offset+this.relativeOffset,P=0;P<x;P++)S[P]=C.getInt16(k),k+=2;return this.relativeOffset+=2*x,S},_e.prototype.parseByteList=function(x){for(var S=new Array(x),C=this.data,k=this.offset+this.relativeOffset,P=0;P<x;P++)S[P]=C.getUint8(k++);return this.relativeOffset+=x,S},_e.prototype.parseList=function(x,S){S||(S=x,x=this.parseUShort());for(var C=new Array(x),k=0;k<x;k++)C[k]=S.call(this);return C},_e.prototype.parseList32=function(x,S){S||(S=x,x=this.parseULong());for(var C=new Array(x),k=0;k<x;k++)C[k]=S.call(this);return C},_e.prototype.parseRecordList=function(x,S){S||(S=x,x=this.parseUShort());for(var C=new Array(x),k=Object.keys(S),P=0;P<x;P++){for(var F={},z=0;z<k.length;z++){var Z=k[z],se=S[Z];F[Z]=se.call(this)}C[P]=F}return C},_e.prototype.parseRecordList32=function(x,S){S||(S=x,x=this.parseULong());for(var C=new Array(x),k=Object.keys(S),P=0;P<x;P++){for(var F={},z=0;z<k.length;z++){var Z=k[z],se=S[Z];F[Z]=se.call(this)}C[P]=F}return C},_e.prototype.parseStruct=function(x){if(typeof x=="function")return x.call(this);for(var S=Object.keys(x),C={},k=0;k<S.length;k++){var P=S[k],F=x[P];C[P]=F.call(this)}return C},_e.prototype.parseValueRecord=function(x){var S;if((x=x===void 0?this.parseUShort():x)!==0)return S={},1&x&&(S.xPlacement=this.parseShort()),2&x&&(S.yPlacement=this.parseShort()),4&x&&(S.xAdvance=this.parseShort()),8&x&&(S.yAdvance=this.parseShort()),16&x&&(S.xPlaDevice=void 0,this.parseShort()),32&x&&(S.yPlaDevice=void 0,this.parseShort()),64&x&&(S.xAdvDevice=void 0,this.parseShort()),128&x&&(S.yAdvDevice=void 0,this.parseShort()),S},_e.prototype.parseValueRecordList=function(){for(var x=this.parseUShort(),S=this.parseUShort(),C=new Array(S),k=0;k<S;k++)C[k]=this.parseValueRecord(x);return C},_e.prototype.parsePointer=function(x){var S=this.parseOffset16();if(0<S)return new _e(this.data,this.offset+S).parseStruct(x)},_e.prototype.parsePointer32=function(x){var S=this.parseOffset32();if(0<S)return new _e(this.data,this.offset+S).parseStruct(x)},_e.prototype.parseListOfLists=function(x){for(var S=this.parseOffset16List(),C=S.length,k=this.relativeOffset,P=new Array(C),F=0;F<C;F++){var z=S[F];if(z===0)P[F]=void 0;else if(this.relativeOffset=z,x){for(var Z=this.parseOffset16List(),se=new Array(Z.length),ie=0;ie<Z.length;ie++)this.relativeOffset=z+Z[ie],se[ie]=x.call(this);P[F]=se}else P[F]=this.parseUShortList()}return this.relativeOffset=k,P},_e.prototype.parseCoverage=function(){var x=this.offset+this.relativeOffset,S=this.parseUShort(),C=this.parseUShort();if(S===1)return{format:1,glyphs:this.parseUShortList(C)};if(S!==2)throw new Error("0x"+x.toString(16)+": Coverage format must be 1 or 2.");for(var k=new Array(C),P=0;P<C;P++)k[P]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:k}},_e.prototype.parseClassDef=function(){var x=this.offset+this.relativeOffset,S=this.parseUShort();if(S===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(S===2)return{format:2,ranges:this.parseRecordList({start:_e.uShort,end:_e.uShort,classId:_e.uShort})};throw new Error("0x"+x.toString(16)+": ClassDef format must be 1 or 2.")},_e.list=function(x,S){return function(){return this.parseList(x,S)}},_e.list32=function(x,S){return function(){return this.parseList32(x,S)}},_e.recordList=function(x,S){return function(){return this.parseRecordList(x,S)}},_e.recordList32=function(x,S){return function(){return this.parseRecordList32(x,S)}},_e.pointer=function(x){return function(){return this.parsePointer(x)}},_e.pointer32=function(x){return function(){return this.parsePointer32(x)}},_e.tag=_e.prototype.parseTag,_e.byte=_e.prototype.parseByte,_e.uShort=_e.offset16=_e.prototype.parseUShort,_e.uShortList=_e.prototype.parseUShortList,_e.uLong=_e.offset32=_e.prototype.parseULong,_e.uLongList=_e.prototype.parseULongList,_e.struct=_e.prototype.parseStruct,_e.coverage=_e.prototype.parseCoverage,_e.classDef=_e.prototype.parseClassDef;var Be={reserved:_e.uShort,reqFeatureIndex:_e.uShort,featureIndexes:_e.uShortList},je=(_e.prototype.parseScriptList=function(){return this.parsePointer(_e.recordList({tag:_e.tag,script:_e.pointer({defaultLangSys:_e.pointer(Be),langSysRecords:_e.recordList({tag:_e.tag,langSys:_e.pointer(Be)})})}))||[]},_e.prototype.parseFeatureList=function(){return this.parsePointer(_e.recordList({tag:_e.tag,feature:_e.pointer({featureParams:_e.offset16,lookupListIndexes:_e.uShortList})}))||[]},_e.prototype.parseLookupList=function(x){return this.parsePointer(_e.list(_e.pointer(function(){var S=this.parseUShort(),C=(O.argument(1<=S&&S<=9,"GPOS/GSUB lookup type "+S+" unknown."),this.parseUShort()),k=16&C;return{lookupType:S,lookupFlag:C,subtables:this.parseList(_e.pointer(x[S])),markFilteringSet:k?this.parseUShort():void 0}})))||[]},_e.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var x=this.parseUShort(),S=this.parseUShort();return O.argument(x===1&&S<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:_e.offset32,featureTableSubstitutionOffset:_e.offset32})})||[]},{getByte:$e,getCard8:$e,getUShort:Je,getCard16:Je,getShort:function(x,S){return x.getInt16(S,!1)},getULong:Ke,getFixed:at,getTag:function(x,S){for(var C="",k=S;k<S+4;k+=1)C+=String.fromCharCode(x.getInt8(k));return C},getOffset:function(x,S,C){for(var k=0,P=0;P<C;P+=1)k=(k<<=8)+x.getUint8(S+P);return k},getBytes:function(x,S,C){for(var k=[],P=S;P<C;P+=1)k.push(x.getUint8(P));return k},bytesToString:function(x){for(var S="",C=0;C<x.length;C+=1)S+=String.fromCharCode(x[C]);return S},Parser:_e}),K={parse:function(x,S){for(var C={},k=(C.version=je.getUShort(x,S),O.argument(C.version===0,"cmap table version should be 0."),C.numTables=je.getUShort(x,S+2),-1),P=C.numTables-1;0<=P;--P){var F=je.getUShort(x,S+4+8*P),z=je.getUShort(x,S+4+8*P+2);if(F===3&&(z===0||z===1||z===10)||F===0&&(z===0||z===1||z===2||z===3||z===4)){k=je.getULong(x,S+4+8*P+4);break}}if(k===-1)throw new Error("No valid cmap sub-tables found.");var Z=new je.Parser(x,S+k);if(C.format=Z.parseUShort(),C.format===12){var se,ie=C,be=Z;be.parseUShort(),ie.length=be.parseULong(),ie.language=be.parseULong(),ie.groupCount=se=be.parseULong(),ie.glyphIndexMap={};for(var ke=0;ke<se;ke+=1)for(var Ee=be.parseULong(),fe=be.parseULong(),Ge=be.parseULong(),Ae=Ee;Ae<=fe;Ae+=1)ie.glyphIndexMap[Ae]=Ge,Ge++}else{if(C.format!==4)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+C.format+").");var Ne=C,Me=x,Re=S,ft=k;Ne.length=Z.parseUShort(),Ne.language=Z.parseUShort(),Ne.segCount=St=Z.parseUShort()>>1,Z.skip("uShort",3),Ne.glyphIndexMap={};for(var St,pt=new je.Parser(Me,Re+ft+14),vt=new je.Parser(Me,Re+ft+16+2*St),Tt=new je.Parser(Me,Re+ft+16+4*St),$t=new je.Parser(Me,Re+ft+16+6*St),dr=Re+ft+16+8*St,br=0;br<St-1;br+=1)for(var Qr=void 0,Zr=pt.parseUShort(),Qn=vt.parseUShort(),Ht=Tt.parseShort(),Qt=$t.parseUShort(),Gt=Qn;Gt<=Zr;Gt+=1)Qt!==0?(dr=(dr=$t.offset+$t.relativeOffset-2)+Qt+2*(Gt-Qn),(Qr=je.getUShort(Me,dr))!==0&&(Qr=Qr+Ht&65535)):Qr=Gt+Ht&65535,Ne.glyphIndexMap[Gt]=Qr}return C},make:function(x){for(var S=!0,C=x.length-1;0<C;--C)if(65535<x.get(C).unicode){console.log("Adding CMAP format 12 (needed!)"),S=!1;break}var k,P,F=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:S?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:S?12:20}],z=(F=(F=S?F:F.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])).concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),new Te.Table("cmap",F));for(z.segments=[],C=0;C<x.length;C+=1){for(var Z=x.get(C),se=0;se<Z.unicodes.length;se+=1)k=Z.unicodes[se],P=C,z.segments.push({end:k,start:k,delta:-(k-P),offset:0,glyphIndex:P});z.segments=z.segments.sort(function(Re,ft){return Re.start-ft.start})}z.segments.push({end:65535,start:65535,delta:1,offset:0});var ie=z.segments.length,be=0,ke=[],Ee=[],fe=[],Ge=[],Ae=[],Ne=[];for(C=0;C<ie;C+=1){var Me=z.segments[C];Me.end<=65535&&Me.start<=65535?(ke=ke.concat({name:"end_"+C,type:"USHORT",value:Me.end}),Ee=Ee.concat({name:"start_"+C,type:"USHORT",value:Me.start}),fe=fe.concat({name:"idDelta_"+C,type:"SHORT",value:Me.delta}),Ge=Ge.concat({name:"idRangeOffset_"+C,type:"USHORT",value:Me.offset}),Me.glyphId!==void 0&&(Ae=Ae.concat({name:"glyph_"+C,type:"USHORT",value:Me.glyphId}))):be+=1,S||Me.glyphIndex===void 0||(Ne=(Ne=(Ne=Ne.concat({name:"cmap12Start_"+C,type:"ULONG",value:Me.start})).concat({name:"cmap12End_"+C,type:"ULONG",value:Me.end})).concat({name:"cmap12Glyph_"+C,type:"ULONG",value:Me.glyphIndex}))}return z.segCountX2=2*(ie-be),z.searchRange=2*Math.pow(2,Math.floor(Math.log(ie-be)/Math.log(2))),z.entrySelector=Math.log(z.searchRange/2)/Math.log(2),z.rangeShift=z.segCountX2-z.searchRange,z.fields=z.fields.concat(ke),z.fields.push({name:"reservedPad",type:"USHORT",value:0}),z.fields=z.fields.concat(Ee),z.fields=z.fields.concat(fe),z.fields=z.fields.concat(Ge),z.fields=z.fields.concat(Ae),z.cmap4Length=14+2*ke.length+2+2*Ee.length+2*fe.length+2*Ge.length+2*Ae.length,S||(F=16+4*Ne.length,z.cmap12Offset=20+z.cmap4Length,z.fields=z.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:F},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:Ne.length/3}]),z.fields=z.fields.concat(Ne)),z}},ee=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],$=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],re=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],ve=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function Ce(x){this.font=x}function Oe(x){this.cmap=x}function He(x,S){this.encoding=x,this.charset=S}function Ye(x){switch(x.version){case 1:this.names=ve.slice();break;case 2:this.names=new Array(x.numberOfGlyphs);for(var S=0;S<x.numberOfGlyphs;S++)x.glyphNameIndex[S]<ve.length?this.names[S]=ve[x.glyphNameIndex[S]]:this.names[S]=x.names[x.glyphNameIndex[S]-ve.length];break;case 2.5:this.names=new Array(x.numberOfGlyphs);for(var C=0;C<x.numberOfGlyphs;C++)this.names[C]=ve[C+x.glyphNameIndex[C]];break;default:this.names=[]}}Ce.prototype.charToGlyphIndex=function(x){var S=x.codePointAt(0),C=this.font.glyphs;if(C){for(var k=0;k<C.length;k+=1)for(var P=C.get(k),F=0;F<P.unicodes.length;F+=1)if(P.unicodes[F]===S)return k}return null},Oe.prototype.charToGlyphIndex=function(x){return this.cmap.glyphIndexMap[x.codePointAt(0)]||0},He.prototype.charToGlyphIndex=function(x){return x=x.codePointAt(0),x=this.encoding[x],this.charset.indexOf(x)},Ye.prototype.nameToGlyphIndex=function(x){return this.names.indexOf(x)},Ye.prototype.glyphIndexToName=function(x){return this.names[x]};var Qe={line:function(x,S,C,k,P){x.beginPath(),x.moveTo(S,C),x.lineTo(k,P),x.stroke()}};function rt(x){this.bindConstructorValues(x)}function Et(x,S,C){Object.defineProperty(x,S,{get:function(){return x.path,x[C]},set:function(k){x[C]=k},enumerable:!0,configurable:!0})}function xt(x,S){if(this.font=x,this.glyphs={},Array.isArray(S))for(var C=0;C<S.length;C++)this.glyphs[C]=S[C];this.length=S&&S.length||0}rt.prototype.bindConstructorValues=function(x){var S;this.index=x.index||0,this.name=x.name||null,this.unicode=x.unicode||void 0,this.unicodes=x.unicodes||x.unicode!==void 0?[x.unicode]:[],x.xMin&&(this.xMin=x.xMin),x.yMin&&(this.yMin=x.yMin),x.xMax&&(this.xMax=x.xMax),x.yMax&&(this.yMax=x.yMax),x.advanceWidth&&(this.advanceWidth=x.advanceWidth),Object.defineProperty(this,"path",(x=x.path,S=x||new X,{configurable:!0,get:function(){return S=typeof S=="function"?S():S},set:function(C){S=C}}))},rt.prototype.addUnicode=function(x){this.unicodes.length===0&&(this.unicode=x),this.unicodes.push(x)},rt.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},rt.prototype.getPath=function(x,S,C,k,P){x=x!==void 0?x:0,S=S!==void 0?S:0,C=C!==void 0?C:72;for(var F,z,Z=(k=k||{}).xScale,se=k.yScale,ie=((F=k.hinting&&P&&P.hinting?this.path&&P.hinting.exec(this,C):F)?(z=P.hinting.getCommands(F),x=Math.round(x),S=Math.round(S),Z=se=1):(z=this.path.commands,k=1/this.path.unitsPerEm*C,Z===void 0&&(Z=k),se===void 0&&(se=k)),new X),be=0;be<z.length;be+=1){var ke=z[be];ke.type==="M"?ie.moveTo(x+ke.x*Z,S+-ke.y*se):ke.type==="L"?ie.lineTo(x+ke.x*Z,S+-ke.y*se):ke.type==="Q"?ie.quadraticCurveTo(x+ke.x1*Z,S+-ke.y1*se,x+ke.x*Z,S+-ke.y*se):ke.type==="C"?ie.curveTo(x+ke.x1*Z,S+-ke.y1*se,x+ke.x2*Z,S+-ke.y2*se,x+ke.x*Z,S+-ke.y*se):ke.type==="Z"&&ie.closePath()}return ie},rt.prototype.getContours=function(){if(this.points===void 0)return[];for(var x=[],S=[],C=0;C<this.points.length;C+=1){var k=this.points[C];S.push(k),k.lastPointOfContour&&(x.push(S),S=[])}return O.argument(S.length===0,"There are still points left in the current contour."),x},rt.prototype.getMetrics=function(){for(var x=this.path.commands,S=[],C=[],k=0;k<x.length;k+=1){var P=x[k];P.type!=="Z"&&(S.push(P.x),C.push(P.y)),P.type!=="Q"&&P.type!=="C"||(S.push(P.x1),C.push(P.y1)),P.type==="C"&&(S.push(P.x2),C.push(P.y2))}var F={xMin:Math.min.apply(null,S),yMin:Math.min.apply(null,C),xMax:Math.max.apply(null,S),yMax:Math.max.apply(null,C),leftSideBearing:this.leftSideBearing};return isFinite(F.xMin)||(F.xMin=0),isFinite(F.xMax)||(F.xMax=this.advanceWidth),isFinite(F.yMin)||(F.yMin=0),isFinite(F.yMax)||(F.yMax=0),F.rightSideBearing=this.advanceWidth-F.leftSideBearing-(F.xMax-F.xMin),F},rt.prototype.draw=function(x,S,C,k,P){this.getPath(S,C,k,P).draw(x)},rt.prototype.drawPoints=function(x,S,C,k){function P(be,ke,Ee,fe){var Ge=2*Math.PI;x.beginPath();for(var Ae=0;Ae<be.length;Ae+=1)x.moveTo(ke+be[Ae].x*fe,Ee+be[Ae].y*fe),x.arc(ke+be[Ae].x*fe,Ee+be[Ae].y*fe,2,0,Ge,!1);x.closePath(),x.fill()}S=S!==void 0?S:0,C=C!==void 0?C:0;for(var k=1/this.path.unitsPerEm*(k=k!==void 0?k:24),F=[],z=[],Z=this.path,se=0;se<Z.commands.length;se+=1){var ie=Z.commands[se];ie.x!==void 0&&F.push({x:ie.x,y:-ie.y}),ie.x1!==void 0&&z.push({x:ie.x1,y:-ie.y1}),ie.x2!==void 0&&z.push({x:ie.x2,y:-ie.y2})}x.fillStyle="blue",P(F,S,C,k),x.fillStyle="red",P(z,S,C,k)},rt.prototype.drawMetrics=function(x,S,C,k){S=S!==void 0?S:0,C=C!==void 0?C:0,k=1/this.path.unitsPerEm*(k=k!==void 0?k:24),x.lineWidth=1,x.strokeStyle="black",Qe.line(x,S,-1e4,S,1e4),Qe.line(x,-1e4,C,1e4,C);var P=this.xMin||0,F=this.yMin||0,z=this.xMax||0,Z=this.yMax||0,se=this.advanceWidth||0;x.strokeStyle="blue",Qe.line(x,S+P*k,-1e4,S+P*k,1e4),Qe.line(x,S+z*k,-1e4,S+z*k,1e4),Qe.line(x,-1e4,C+-F*k,1e4,C+-F*k),Qe.line(x,-1e4,C+-Z*k,1e4,C+-Z*k),x.strokeStyle="green",Qe.line(x,S+se*k,-1e4,S+se*k,1e4)},xt.prototype.get=function(x){return typeof this.glyphs[x]=="function"&&(this.glyphs[x]=this.glyphs[x]()),this.glyphs[x]},xt.prototype.push=function(x,S){this.glyphs[x]=S,this.length++};var dt={GlyphSet:xt,glyphLoader:function(x,S){return new rt({index:S,font:x})},ttfGlyphLoader:function(x,S,C,k,P,F){return function(){var z=new rt({index:S,font:x});return z.path=function(){C(z,k,P);var Z=F(x.glyphs,z);return Z.unitsPerEm=x.unitsPerEm,Z},Et(z,"xMin","_xMin"),Et(z,"xMax","_xMax"),Et(z,"yMin","_yMin"),Et(z,"yMax","_yMax"),z}},cffGlyphLoader:function(x,S,C,k){return function(){var P=new rt({index:S,font:x});return P.path=function(){var F=C(x,P,k);return F.unitsPerEm=x.unitsPerEm,F},P}}};function wt(x){return x=x.length<1240?107:x.length<33900?1131:32768,x}function bt(x,S,C){var k,P=[],F=[],z=je.getCard16(x,S);if(z!==0){for(var Z=je.getByte(x,S+2),se=S+(z+1)*Z+2,ie=S+3,be=0;be<z+1;be+=1)P.push(je.getOffset(x,ie,Z)),ie+=Z;k=se+P[z]}else k=S+2;for(var ke=0;ke<P.length-1;ke+=1){var Ee=je.getBytes(x,se+P[ke],se+P[ke+1]);C&&(Ee=C(Ee)),F.push(Ee)}return{objects:F,startOffset:S,endOffset:k}}function qt(x,S){if(S===28)return x.parseByte()<<8|x.parseByte();if(S===29)return x.parseByte()<<24|x.parseByte()<<16|x.parseByte()<<8|x.parseByte();if(S===30){for(var C=x,k="",P=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var z=C.parseByte(),F=z>>4,z=15&z;if(F==15||(k+=P[F],z==15))break;k+=P[z]}return parseFloat(k)}if(32<=S&&S<=246)return S-139;if(247<=S&&S<=250)return 256*(S-247)+x.parseByte()+108;if(251<=S&&S<=254)return 256*-(S-251)-x.parseByte()-108;throw new Error("Invalid b0 "+S)}function Kr(x,S,C){var k=new je.Parser(x,S=S!==void 0?S:0),P=[],F=[];for(C=C!==void 0?C:x.length;k.relativeOffset<C;){var z=k.parseByte();z<=21?(z===12&&(z=1200+k.parseByte()),P.push([z,F]),F=[]):F.push(qt(k,z))}for(var Z=P,se={},ie=0;ie<Z.length;ie+=1){var be=Z[ie][0],ke=Z[ie][1],Ee=void 0,Ee=ke.length===1?ke[0]:ke;if(se.hasOwnProperty(be)&&!isNaN(se[be]))throw new Error("Object "+se+" already has key "+be);se[be]=Ee}return se}function gr(x,S){return S=S<=390?ee[S]:x[S-391]}function Bt(x,S,C){for(var k,P={},F=0;F<S.length;F+=1){var z=S[F];if(Array.isArray(z.type)){var Z=[];Z.length=z.type.length;for(var se=0;se<z.type.length;se++)(k=x[z.op]!==void 0?x[z.op][se]:void 0)===void 0&&(k=z.value!==void 0&&z.value[se]!==void 0?z.value[se]:null),z.type[se]==="SID"&&(k=gr(C,k)),Z[se]=k;P[z.name]=Z}else(k=x[z.op])===void 0&&(k=z.value!==void 0?z.value:null),z.type==="SID"&&(k=gr(C,k)),P[z.name]=k}return P}var Kt=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],Ot=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function Gr(x,S,C,k){return Bt(Kr(x,S,C),Ot,k)}function Ir(x,S,C,k){for(var P=[],F=0;F<C.length;F+=1){var z=new DataView(new Uint8Array(C[F]).buffer),z=(Z=k,Bt(Kr(z,0,z.byteLength),Kt,Z)),Z=(z._subrs=[],z._subrsBias=0,z.private[0]),se=z.private[1];Z!==0&&se!==0&&(Z=Gr(x,se+S,Z,k),z._defaultWidthX=Z.defaultWidthX,z._nominalWidthX=Z.nominalWidthX,Z.subrs!==0&&(se=bt(x,se+Z.subrs+S),z._subrs=se.objects,z._subrsBias=wt(z._subrs)),z._privateDict=Z),P.push(z)}return P}function Vt(x,S,C){var k,P,F,z,Z,se,ie,be,ke,Ee=new X,fe=[],Ge=0,Ae=!1,Ne=!1,Me=0,Re=0,ft=(ke=(x.isCIDFont?(Z=x.tables.cff.topDict._fdSelect[S.index],Z=x.tables.cff.topDict._fdArray[Z],se=Z._subrs,ie=Z._subrsBias,be=Z._defaultWidthX,Z):(se=x.tables.cff.topDict._subrs,ie=x.tables.cff.topDict._subrsBias,be=x.tables.cff.topDict._defaultWidthX,x.tables.cff.topDict))._nominalWidthX,be);function St(vt,Tt){Ne&&Ee.closePath(),Ee.moveTo(vt,Tt),Ne=!0}function pt(){fe.length%2==0||Ae||(ft=fe.shift()+ke),Ge+=fe.length>>1,fe.length=0,Ae=!0}return function vt(Tt){for(var $t,dr,br,Qr,Zr,Qn,Ht,Qt,Gt,Jr,nr,Vr,Zt=0;Zt<Tt.length;){var Dr=Tt[Zt];switch(Zt+=1,Dr){case 1:case 3:pt();break;case 4:1<fe.length&&!Ae&&(ft=fe.shift()+ke,Ae=!0),Re+=fe.pop(),St(Me,Re);break;case 5:for(;0<fe.length;)Me+=fe.shift(),Re+=fe.shift(),Ee.lineTo(Me,Re);break;case 6:for(;0<fe.length&&(Me+=fe.shift(),Ee.lineTo(Me,Re),fe.length!==0);)Re+=fe.shift(),Ee.lineTo(Me,Re);break;case 7:for(;0<fe.length&&(Re+=fe.shift(),Ee.lineTo(Me,Re),fe.length!==0);)Me+=fe.shift(),Ee.lineTo(Me,Re);break;case 8:for(;0<fe.length;)k=Me+fe.shift(),P=Re+fe.shift(),F=k+fe.shift(),z=P+fe.shift(),Me=F+fe.shift(),Re=z+fe.shift(),Ee.curveTo(k,P,F,z,Me,Re);break;case 10:Zr=fe.pop()+ie,(Qn=se[Zr])&&vt(Qn);break;case 11:return;case 12:switch(Dr=Tt[Zt],Zt+=1,Dr){case 35:k=Me+fe.shift(),P=Re+fe.shift(),F=k+fe.shift(),z=P+fe.shift(),Ht=F+fe.shift(),Qt=z+fe.shift(),Gt=Ht+fe.shift(),Jr=Qt+fe.shift(),nr=Gt+fe.shift(),Vr=Jr+fe.shift(),Me=nr+fe.shift(),Re=Vr+fe.shift(),fe.shift(),Ee.curveTo(k,P,F,z,Ht,Qt),Ee.curveTo(Gt,Jr,nr,Vr,Me,Re);break;case 34:k=Me+fe.shift(),P=Re,F=k+fe.shift(),z=P+fe.shift(),Ht=F+fe.shift(),Qt=z,Gt=Ht+fe.shift(),Jr=z,nr=Gt+fe.shift(),Vr=Re,Me=nr+fe.shift(),Ee.curveTo(k,P,F,z,Ht,Qt),Ee.curveTo(Gt,Jr,nr,Vr,Me,Re);break;case 36:k=Me+fe.shift(),P=Re+fe.shift(),F=k+fe.shift(),z=P+fe.shift(),Ht=F+fe.shift(),Qt=z,Gt=Ht+fe.shift(),Jr=z,nr=Gt+fe.shift(),Vr=Jr+fe.shift(),Me=nr+fe.shift(),Ee.curveTo(k,P,F,z,Ht,Qt),Ee.curveTo(Gt,Jr,nr,Vr,Me,Re);break;case 37:k=Me+fe.shift(),P=Re+fe.shift(),F=k+fe.shift(),z=P+fe.shift(),Ht=F+fe.shift(),Qt=z+fe.shift(),Gt=Ht+fe.shift(),Jr=Qt+fe.shift(),nr=Gt+fe.shift(),Vr=Jr+fe.shift(),Math.abs(nr-Me)>Math.abs(Vr-Re)?Me=nr+fe.shift():Re=Vr+fe.shift(),Ee.curveTo(k,P,F,z,Ht,Qt),Ee.curveTo(Gt,Jr,nr,Vr,Me,Re);break;default:console.log("Glyph "+S.index+": unknown operator 1200"+Dr),fe.length=0}break;case 14:0<fe.length&&!Ae&&(ft=fe.shift()+ke,Ae=!0),Ne&&(Ee.closePath(),Ne=!1);break;case 18:pt();break;case 19:case 20:pt(),Zt+=Ge+7>>3;break;case 21:2<fe.length&&!Ae&&(ft=fe.shift()+ke,Ae=!0),Re+=fe.pop(),St(Me+=fe.pop(),Re);break;case 22:1<fe.length&&!Ae&&(ft=fe.shift()+ke,Ae=!0),St(Me+=fe.pop(),Re);break;case 23:pt();break;case 24:for(;2<fe.length;)k=Me+fe.shift(),P=Re+fe.shift(),F=k+fe.shift(),z=P+fe.shift(),Me=F+fe.shift(),Re=z+fe.shift(),Ee.curveTo(k,P,F,z,Me,Re);Me+=fe.shift(),Re+=fe.shift(),Ee.lineTo(Me,Re);break;case 25:for(;6<fe.length;)Me+=fe.shift(),Re+=fe.shift(),Ee.lineTo(Me,Re);k=Me+fe.shift(),P=Re+fe.shift(),F=k+fe.shift(),z=P+fe.shift(),Me=F+fe.shift(),Re=z+fe.shift(),Ee.curveTo(k,P,F,z,Me,Re);break;case 26:for(fe.length%2&&(Me+=fe.shift());0<fe.length;)k=Me,P=Re+fe.shift(),F=k+fe.shift(),z=P+fe.shift(),Me=F,Re=z+fe.shift(),Ee.curveTo(k,P,F,z,Me,Re);break;case 27:for(fe.length%2&&(Re+=fe.shift());0<fe.length;)k=Me+fe.shift(),P=Re,F=k+fe.shift(),z=P+fe.shift(),Me=F+fe.shift(),Re=z,Ee.curveTo(k,P,F,z,Me,Re);break;case 28:$t=Tt[Zt],dr=Tt[Zt+1],fe.push(($t<<24|dr<<16)>>16),Zt+=2;break;case 29:Zr=fe.pop()+x.gsubrsBias,(Qn=x.gsubrs[Zr])&&vt(Qn);break;case 30:for(;0<fe.length&&(k=Me,P=Re+fe.shift(),F=k+fe.shift(),z=P+fe.shift(),Me=F+fe.shift(),Re=z+(fe.length===1?fe.shift():0),Ee.curveTo(k,P,F,z,Me,Re),fe.length!==0);)k=Me+fe.shift(),P=Re,F=k+fe.shift(),z=P+fe.shift(),Re=z+fe.shift(),Me=F+(fe.length===1?fe.shift():0),Ee.curveTo(k,P,F,z,Me,Re);break;case 31:for(;0<fe.length&&(k=Me+fe.shift(),P=Re,F=k+fe.shift(),z=P+fe.shift(),Re=z+fe.shift(),Me=F+(fe.length===1?fe.shift():0),Ee.curveTo(k,P,F,z,Me,Re),fe.length!==0);)k=Me,P=Re+fe.shift(),F=k+fe.shift(),z=P+fe.shift(),Me=F+fe.shift(),Re=z+(fe.length===1?fe.shift():0),Ee.curveTo(k,P,F,z,Me,Re);break;default:Dr<32?console.log("Glyph "+S.index+": unknown operator "+Dr):Dr<247?fe.push(Dr-139):Dr<251?($t=Tt[Zt],Zt+=1,fe.push(256*(Dr-247)+$t+108)):Dr<255?($t=Tt[Zt],Zt+=1,fe.push(256*-(Dr-251)-$t-108)):($t=Tt[Zt],dr=Tt[Zt+1],br=Tt[Zt+2],Qr=Tt[Zt+3],Zt+=4,fe.push(($t<<24|dr<<16|br<<8|Qr)/65536))}}}(C),S.advanceWidth=ft,Ee}function zr(x,S){var C,k=ee.indexOf(x);return 0<=k&&(C=k),0<=(k=S.indexOf(x))?C=k+ee.length:(C=ee.length+S.length,S.push(x)),C}function ys(x,S,C){for(var k={},P=0;P<x.length;P+=1){var F=x[P],z=S[F.name];z===void 0||function Z(se,ie){if(se===ie)return 1;if(Array.isArray(se)&&Array.isArray(ie)&&se.length===ie.length){for(var be=0;be<se.length;be+=1)if(!Z(se[be],ie[be]))return;return 1}}(z,F.value)||(F.type==="SID"&&(z=zr(z,C)),k[F.op]={name:F.name,type:F.type,value:z})}return k}function gs(x,S){var C=new Te.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return C.dict=ys(Kt,x,S),C}function vs(x){var S=new Te.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return S.topDicts=[{name:"topDict_0",type:"TABLE",value:x}],S}function Fu(x){for(var S=new Te.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),C=0;C<x.length;C+=1){var k=x.get(C),P=function(F){for(var z=[],Z=F.path,se=(z.push({name:"width",type:"NUMBER",value:F.advanceWidth}),0),ie=0,be=0;be<Z.commands.length;be+=1){var ke,Ee,fe,Ge,Ae=void 0,Ne=void 0,Me=Z.commands[be];(Me=Me.type==="Q"?{type:"C",x:Me.x,y:Me.y,x1:1/3*se+2/3*Me.x1,y1:1/3*ie+2/3*Me.y1,x2:1/3*Me.x+2/3*Me.x1,y2:1/3*Me.y+2/3*Me.y1}:Me).type==="M"?(Ae=Math.round(Me.x-se),Ne=Math.round(Me.y-ie),z.push({name:"dx",type:"NUMBER",value:Ae}),z.push({name:"dy",type:"NUMBER",value:Ne}),z.push({name:"rmoveto",type:"OP",value:21}),se=Math.round(Me.x),ie=Math.round(Me.y)):Me.type==="L"?(Ae=Math.round(Me.x-se),Ne=Math.round(Me.y-ie),z.push({name:"dx",type:"NUMBER",value:Ae}),z.push({name:"dy",type:"NUMBER",value:Ne}),z.push({name:"rlineto",type:"OP",value:5}),se=Math.round(Me.x),ie=Math.round(Me.y)):Me.type==="C"&&(ke=Math.round(Me.x1-se),Ee=Math.round(Me.y1-ie),fe=Math.round(Me.x2-Me.x1),Ge=Math.round(Me.y2-Me.y1),Ae=Math.round(Me.x-Me.x2),Ne=Math.round(Me.y-Me.y2),z.push({name:"dx1",type:"NUMBER",value:ke}),z.push({name:"dy1",type:"NUMBER",value:Ee}),z.push({name:"dx2",type:"NUMBER",value:fe}),z.push({name:"dy2",type:"NUMBER",value:Ge}),z.push({name:"dx",type:"NUMBER",value:Ae}),z.push({name:"dy",type:"NUMBER",value:Ne}),z.push({name:"rrcurveto",type:"OP",value:8}),se=Math.round(Me.x),ie=Math.round(Me.y))}return z.push({name:"endchar",type:"OP",value:14}),z}(k);S.charStrings.push({name:k.name,type:"CHARSTRING",value:P})}return S}var bs={parse:function(x,S,C){C.tables.cff={},Z=x,k=S,(P={}).formatMajor=je.getCard8(Z,k),P.formatMinor=je.getCard8(Z,k+1),P.size=je.getCard8(Z,k+2),P.offsetSize=je.getCard8(Z,k+3),P.startOffset=k,P.endOffset=k+4;var Z=bt(x,P.endOffset,je.bytesToString),k=bt(x,Z.endOffset),P=bt(x,k.endOffset,je.bytesToString),Z=bt(x,P.endOffset);if(C.gsubrs=Z.objects,C.gsubrsBias=wt(C.gsubrs),(Z=Ir(x,S,k.objects,P.objects)).length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+Z.length);if(k=Z[0],(C.tables.cff.topDict=k)._privateDict&&(C.defaultWidthX=k._privateDict.defaultWidthX,C.nominalWidthX=k._privateDict.nominalWidthX),k.ros[0]!==void 0&&k.ros[1]!==void 0&&(C.isCIDFont=!0),C.isCIDFont){var Z=k.fdArray,F=k.fdSelect;if(Z===0||F===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");Z=Ir(x,S,bt(x,Z+=S).objects,P.objects),k._fdArray=Z,k._fdSelect=function(Ee,fe,Ge,Ae){var Ne,Me=[],Re=new je.Parser(Ee,fe);if((Ee=Re.parseCard8())===0)for(var ft=0;ft<Ge;ft++){if(Ae<=(Ne=Re.parseCard8()))throw new Error("CFF table CID Font FDSelect has bad FD index value "+Ne+" (FD count "+Ae+")");Me.push(Ne)}else{if(Ee!==3)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+Ee);var St,pt=Re.parseCard16(),vt=Re.parseCard16();if(vt!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+vt);for(var Tt=0;Tt<pt;Tt++){if(Ne=Re.parseCard8(),St=Re.parseCard16(),Ae<=Ne)throw new Error("CFF table CID Font FDSelect has bad FD index value "+Ne+" (FD count "+Ae+")");if(Ge<St)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+St);for(;vt<St;vt++)Me.push(Ne);vt=St}if(St!==Ge)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+St)}return Me}(x,F+=S,C.numGlyphs,Z.length)}var F=S+k.private[1],Z=Gr(x,F,k.private[0],P.objects),z=(C.defaultWidthX=Z.defaultWidthX,C.nominalWidthX=Z.nominalWidthX,Z.subrs!==0?(F=bt(x,F+Z.subrs),C.subrs=F.objects,C.subrsBias=wt(C.subrs)):(C.subrs=[],C.subrsBias=0),bt(x,S+k.charStrings)),Z=(C.nGlyphs=z.objects.length,function(be,ke,Ee,fe){var Ge=new je.Parser(be,ke),Ae=(--Ee,[".notdef"]);if((be=Ge.parseCard8())===0)for(var Ne=0;Ne<Ee;Ne+=1)Me=Ge.parseSID(),Ae.push(gr(fe,Me));else if(be===1)for(;Ae.length<=Ee;)for(var Me=Ge.parseSID(),Re=Ge.parseCard8(),ft=0;ft<=Re;ft+=1)Ae.push(gr(fe,Me)),Me+=1;else{if(be!==2)throw new Error("Unknown charset format "+be);for(;Ae.length<=Ee;){Me=Ge.parseSID(),Re=Ge.parseCard16();for(var St=0;St<=Re;St+=1)Ae.push(gr(fe,Me)),Me+=1}}return Ae}(x,S+k.charset,C.nGlyphs,P.objects));k.encoding===0?C.cffEncoding=new He($,Z):k.encoding===1?C.cffEncoding=new He(re,Z):C.cffEncoding=function(be,ke,Ee){var fe={},Ge=new je.Parser(be,ke);if((be=Ge.parseCard8())===0)for(var Ae=Ge.parseCard8(),Ne=0;Ne<Ae;Ne+=1)fe[Re=Ge.parseCard8()]=Ne;else{if(be!==1)throw new Error("Unknown encoding format "+be);for(var Me=Ge.parseCard8(),Re=1,ft=0;ft<Me;ft+=1)for(var St=Ge.parseCard8(),pt=Ge.parseCard8(),vt=St;vt<=St+pt;vt+=1)fe[vt]=Re,Re+=1}return new He(fe,Ee)}(x,S+k.encoding,Z),C.encoding=C.encoding||C.cffEncoding,C.glyphs=new dt.GlyphSet(C);for(var se=0;se<C.nGlyphs;se+=1){var ie=z.objects[se];C.glyphs.push(se,dt.cffGlyphLoader(C,se,Vt,ie))}},make:function(x,be){for(var C,k=new Te.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),P=1/be.unitsPerEm,P={version:be.version,fullName:be.fullName,familyName:be.familyName,weight:be.weightName,fontBBox:be.fontBBox||[0,0,0,0],fontMatrix:[P,0,0,P,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},F=[],z=1;z<x.length;z+=1)C=x.get(z),F.push(C.name);var Z,se,ie=[],be=(k.header=new Te.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),k.nameIndex=function(Ee){var fe=new Te.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);fe.names=[];for(var Ge=0;Ge<Ee.length;Ge+=1)fe.names.push({name:"name_"+Ge,type:"NAME",value:Ee[Ge]});return fe}([be.postScriptName]),gs(P,ie)),ke=(k.topDictIndex=vs(be),k.globalSubrIndex=new Te.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),k.charsets=function(Ee,fe){for(var Ge=new Te.Record("Charsets",[{name:"format",type:"Card8",value:0}]),Ae=0;Ae<Ee.length;Ae+=1){var Ne=zr(Ee[Ae],fe);Ge.fields.push({name:"glyph_"+Ae,type:"SID",value:Ne})}return Ge}(F,ie),k.charStringsIndex=Fu(x),k.privateDict=(ke={},Z=ie,(se=new Te.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}])).dict=ys(Ot,ke,Z),se),k.stringIndex=function(Ee){var fe=new Te.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);fe.strings=[];for(var Ge=0;Ge<Ee.length;Ge+=1)fe.strings.push({name:"string_"+Ge,type:"STRING",value:Ee[Ge]});return fe}(ie),k.header.sizeOf()+k.nameIndex.sizeOf()+k.topDictIndex.sizeOf()+k.stringIndex.sizeOf()+k.globalSubrIndex.sizeOf());return P.charset=ke,P.encoding=0,P.charStrings=P.charset+k.charsets.sizeOf(),P.private[1]=P.charStrings+k.charStringsIndex.sizeOf(),be=gs(P,ie),k.topDictIndex=vs(be),k}},xs={parse:function(k,S){var C={},k=new je.Parser(k,S);return C.version=k.parseVersion(),C.fontRevision=Math.round(1e3*k.parseFixed())/1e3,C.checkSumAdjustment=k.parseULong(),C.magicNumber=k.parseULong(),O.argument(C.magicNumber===1594834165,"Font header has wrong magic number."),C.flags=k.parseUShort(),C.unitsPerEm=k.parseUShort(),C.created=k.parseLongDateTime(),C.modified=k.parseLongDateTime(),C.xMin=k.parseShort(),C.yMin=k.parseShort(),C.xMax=k.parseShort(),C.yMax=k.parseShort(),C.macStyle=k.parseUShort(),C.lowestRecPPEM=k.parseUShort(),C.fontDirectionHint=k.parseShort(),C.indexToLocFormat=k.parseShort(),C.glyphDataFormat=k.parseShort(),C},make:function(x){var S=Math.round(new Date().getTime()/1e3)+2082844800,C=S;return x.createdTimestamp&&(C=x.createdTimestamp+2082844800),new Te.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:C},{name:"modified",type:"LONGDATETIME",value:S},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],x)}},he={parse:function(k,S){var C={},k=new je.Parser(k,S);return C.version=k.parseVersion(),C.ascender=k.parseShort(),C.descender=k.parseShort(),C.lineGap=k.parseShort(),C.advanceWidthMax=k.parseUShort(),C.minLeftSideBearing=k.parseShort(),C.minRightSideBearing=k.parseShort(),C.xMaxExtent=k.parseShort(),C.caretSlopeRise=k.parseShort(),C.caretSlopeRun=k.parseShort(),C.caretOffset=k.parseShort(),k.relativeOffset+=8,C.metricDataFormat=k.parseShort(),C.numberOfHMetrics=k.parseUShort(),C},make:function(x){return new Te.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],x)}},qe={parse:function(x,S,C,k,P){for(var F,z,Z=new je.Parser(x,S),se=0;se<k;se+=1){se<C&&(F=Z.parseUShort(),z=Z.parseShort());var ie=P.get(se);ie.advanceWidth=F,ie.leftSideBearing=z}},make:function(x){for(var S=new Te.Table("hmtx",[]),C=0;C<x.length;C+=1){var P=x.get(C),k=P.advanceWidth||0,P=P.leftSideBearing||0;S.fields.push({name:"advanceWidth_"+C,type:"USHORT",value:k}),S.fields.push({name:"leftSideBearing_"+C,type:"SHORT",value:P})}return S}},nt={make:function(x){for(var S=new Te.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:x.length}]),C="",k=12+4*x.length,P=0;P<x.length;++P){var F=C.indexOf(x[P]);F<0&&(F=C.length,C+=x[P]),S.fields.push({name:"offset "+P,type:"USHORT",value:k+F}),S.fields.push({name:"length "+P,type:"USHORT",value:x[P].length})}return S.fields.push({name:"stringPool",type:"CHARARRAY",value:C}),S},parse:function(x,S){for(var C=new je.Parser(x,S),k=C.parseULong(),P=(O.argument(k===1,"Unsupported ltag table version."),C.skip("uLong",1),C.parseULong()),F=[],z=0;z<P;z++){for(var Z="",se=S+C.parseUShort(),ie=C.parseUShort(),be=se;be<se+ie;++be)Z+=String.fromCharCode(x.getInt8(be));F.push(Z)}return F}},We={parse:function(k,S){var C={},k=new je.Parser(k,S);return C.version=k.parseVersion(),C.numGlyphs=k.parseUShort(),C.version===1&&(C.maxPoints=k.parseUShort(),C.maxContours=k.parseUShort(),C.maxCompositePoints=k.parseUShort(),C.maxCompositeContours=k.parseUShort(),C.maxZones=k.parseUShort(),C.maxTwilightPoints=k.parseUShort(),C.maxStorage=k.parseUShort(),C.maxFunctionDefs=k.parseUShort(),C.maxInstructionDefs=k.parseUShort(),C.maxStackElements=k.parseUShort(),C.maxSizeOfInstructions=k.parseUShort(),C.maxComponentElements=k.parseUShort(),C.maxComponentDepth=k.parseUShort()),C},make:function(x){return new Te.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:x}])}},Rt=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],ze={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},Lt={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},et={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"},Pt="utf-16",tt={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},mr={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function _r(x,S,C){switch(x){case 0:return Pt;case 1:return mr[C]||tt[S];case 3:if(S===1||S===10)return Pt}}function cr(x){var S,C={};for(S in x)C[x[S]]=parseInt(S);return C}function Ar(x,S,C,k,P,F){return new Te.Record("NameRecord",[{name:"platformID",type:"USHORT",value:x},{name:"encodingID",type:"USHORT",value:S},{name:"languageID",type:"USHORT",value:C},{name:"nameID",type:"USHORT",value:k},{name:"length",type:"USHORT",value:P},{name:"offset",type:"USHORT",value:F}])}function co(x,S){if((C=function(F,z){var Z=F.length,se=z.length-Z+1;e:for(var ie=0;ie<se;ie++)for(;ie<se;ie++){for(var be=0;be<Z;be++)if(z[ie+be]!==F[be])continue e;return ie}return-1}(x,S))<0)for(var C=S.length,k=0,P=x.length;k<P;++k)S.push(x[k]);return C}var Cn={parse:function(x,S,C){for(var k={},P=new je.Parser(x,S),S=P.parseUShort(),F=P.parseUShort(),z=P.offset+P.parseUShort(),Z=0;Z<F;Z++){var Ge=P.parseUShort(),se=P.parseUShort(),ie=P.parseUShort(),be=P.parseUShort(),be=Rt[be]||be,ke=P.parseUShort(),Ee=P.parseUShort(),fe=function(Ne,Me,Re){switch(Ne){case 0:if(Me===65535)return"und";if(Re)return Re[Me];break;case 1:return ze[Me];case 3:return et[Me]}}(Ge,ie,C),Ge=_r(Ge,se,ie);Ge!==void 0&&fe!==void 0&&(se=void 0,(se=Ge===Pt?U.UTF16(x,z+Ee,ke):U.MACSTRING(x,z+Ee,ke,Ge))&&((ie=(ie=k[be])===void 0?k[be]={}:ie)[fe]=se))}return S===1&&P.parseUShort(),k},make:function(x,S){var C,k=[],P={},F=cr(Rt);for(C in x){var z=F[C];if(z===void 0&&(z=C),Ee=parseInt(z),isNaN(Ee))throw new Error('Name table entry "'+C+'" does not exist, see nameTableNames for complete list.');P[Ee]=x[C],k.push(Ee)}for(var Z=cr(ze),se=cr(et),ie=[],be=[],ke=0;ke<k.length;ke++){var Ee,fe,Ge=P[Ee=k[ke]];for(fe in Ge){var Ae=Ge[fe],St=1,Ne=Z[fe],Me=Lt[Ne],Re=_r(St,Me,Ne),Re=Y.MACSTRING(Ae,Re),ft=(Re===void 0&&(St=0,(Ne=S.indexOf(fe))<0&&(Ne=S.length,S.push(fe)),Me=4,Re=Y.UTF16(Ae)),co(Re,be)),St=(ie.push(Ar(St,Me,Ne,Ee,Re.length,ft)),se[fe]);St!==void 0&&(Ne=co(Me=Y.UTF16(Ae),be),ie.push(Ar(3,1,St,Ee,Me.length,Ne)))}}ie.sort(function(Tt,$t){return Tt.platformID-$t.platformID||Tt.encodingID-$t.encodingID||Tt.languageID-$t.languageID||Tt.nameID-$t.nameID});for(var pt=new Te.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:ie.length},{name:"stringOffset",type:"USHORT",value:6+12*ie.length}]),vt=0;vt<ie.length;vt++)pt.fields.push({name:"record_"+vt,type:"RECORD",value:ie[vt]});return pt.fields.push({name:"strings",type:"LITERAL",value:be}),pt}},fo=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],Pr={parse:function(x,S){var C={},k=new je.Parser(x,S);C.version=k.parseUShort(),C.xAvgCharWidth=k.parseShort(),C.usWeightClass=k.parseUShort(),C.usWidthClass=k.parseUShort(),C.fsType=k.parseUShort(),C.ySubscriptXSize=k.parseShort(),C.ySubscriptYSize=k.parseShort(),C.ySubscriptXOffset=k.parseShort(),C.ySubscriptYOffset=k.parseShort(),C.ySuperscriptXSize=k.parseShort(),C.ySuperscriptYSize=k.parseShort(),C.ySuperscriptXOffset=k.parseShort(),C.ySuperscriptYOffset=k.parseShort(),C.yStrikeoutSize=k.parseShort(),C.yStrikeoutPosition=k.parseShort(),C.sFamilyClass=k.parseShort(),C.panose=[];for(var P=0;P<10;P++)C.panose[P]=k.parseByte();return C.ulUnicodeRange1=k.parseULong(),C.ulUnicodeRange2=k.parseULong(),C.ulUnicodeRange3=k.parseULong(),C.ulUnicodeRange4=k.parseULong(),C.achVendID=String.fromCharCode(k.parseByte(),k.parseByte(),k.parseByte(),k.parseByte()),C.fsSelection=k.parseUShort(),C.usFirstCharIndex=k.parseUShort(),C.usLastCharIndex=k.parseUShort(),C.sTypoAscender=k.parseShort(),C.sTypoDescender=k.parseShort(),C.sTypoLineGap=k.parseShort(),C.usWinAscent=k.parseUShort(),C.usWinDescent=k.parseUShort(),1<=C.version&&(C.ulCodePageRange1=k.parseULong(),C.ulCodePageRange2=k.parseULong()),2<=C.version&&(C.sxHeight=k.parseShort(),C.sCapHeight=k.parseShort(),C.usDefaultChar=k.parseUShort(),C.usBreakChar=k.parseUShort(),C.usMaxContent=k.parseUShort()),C},make:function(x){return new Te.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],x)},unicodeRanges:fo,getUnicodeRange:function(x){for(var S=0;S<fo.length;S+=1){var C=fo[S];if(x>=C.begin&&x<C.end)return S}return-1}},Pm={parse:function(x,S){var C={},k=new je.Parser(x,S);switch(C.version=k.parseVersion(),C.italicAngle=k.parseFixed(),C.underlinePosition=k.parseShort(),C.underlineThickness=k.parseShort(),C.isFixedPitch=k.parseULong(),C.minMemType42=k.parseULong(),C.maxMemType42=k.parseULong(),C.minMemType1=k.parseULong(),C.maxMemType1=k.parseULong(),C.version){case 1:C.names=ve.slice();break;case 2:C.numberOfGlyphs=k.parseUShort(),C.glyphNameIndex=new Array(C.numberOfGlyphs);for(var P=0;P<C.numberOfGlyphs;P++)C.glyphNameIndex[P]=k.parseUShort();C.names=[];for(var F,z=0;z<C.numberOfGlyphs;z++)C.glyphNameIndex[z]>=ve.length&&(F=k.parseChar(),C.names.push(k.parseString(F)));break;case 2.5:C.numberOfGlyphs=k.parseUShort(),C.offset=new Array(C.numberOfGlyphs);for(var Z=0;Z<C.numberOfGlyphs;Z++)C.offset[Z]=k.parseChar()}return C},make:function(){return new Te.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}},Yn=new Array(9),pa=(Yn[1]=function(){var x=this.offset+this.relativeOffset,S=this.parseUShort();return S===1?{substFormat:1,coverage:this.parsePointer(_e.coverage),deltaGlyphId:this.parseUShort()}:S===2?{substFormat:2,coverage:this.parsePointer(_e.coverage),substitute:this.parseOffset16List()}:void O.assert(!1,"0x"+x.toString(16)+": lookup type 1 format must be 1 or 2.")},Yn[2]=function(){var x=this.parseUShort();return O.argument(x===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:x,coverage:this.parsePointer(_e.coverage),sequences:this.parseListOfLists()}},Yn[3]=function(){var x=this.parseUShort();return O.argument(x===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:x,coverage:this.parsePointer(_e.coverage),alternateSets:this.parseListOfLists()}},Yn[4]=function(){var x=this.parseUShort();return O.argument(x===1,"GSUB ligature table identifier-format must be 1"),{substFormat:x,coverage:this.parsePointer(_e.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}},{sequenceIndex:_e.uShort,lookupListIndex:_e.uShort});Yn[5]=function(){var x,S,C=this.offset+this.relativeOffset,k=this.parseUShort();return k===1?{substFormat:k,coverage:this.parsePointer(_e.coverage),ruleSets:this.parseListOfLists(function(){var P=this.parseUShort(),F=this.parseUShort();return{input:this.parseUShortList(P-1),lookupRecords:this.parseRecordList(F,pa)}})}:k===2?{substFormat:k,coverage:this.parsePointer(_e.coverage),classDef:this.parsePointer(_e.classDef),classSets:this.parseListOfLists(function(){var P=this.parseUShort(),F=this.parseUShort();return{classes:this.parseUShortList(P-1),lookupRecords:this.parseRecordList(F,pa)}})}:k===3?(x=this.parseUShort(),S=this.parseUShort(),{substFormat:k,coverages:this.parseList(x,_e.pointer(_e.coverage)),lookupRecords:this.parseRecordList(S,pa)}):void O.assert(!1,"0x"+C.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},Yn[6]=function(){var x=this.offset+this.relativeOffset,S=this.parseUShort();return S===1?{substFormat:1,coverage:this.parsePointer(_e.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(pa)}})}:S===2?{substFormat:2,coverage:this.parsePointer(_e.coverage),backtrackClassDef:this.parsePointer(_e.classDef),inputClassDef:this.parsePointer(_e.classDef),lookaheadClassDef:this.parsePointer(_e.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(pa)}})}:S===3?{substFormat:3,backtrackCoverage:this.parseList(_e.pointer(_e.coverage)),inputCoverage:this.parseList(_e.pointer(_e.coverage)),lookaheadCoverage:this.parseList(_e.pointer(_e.coverage)),lookupRecords:this.parseRecordList(pa)}:void O.assert(!1,"0x"+x.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},Yn[7]=function(){var x=this.parseUShort(),x=(O.argument(x===1,"GSUB Extension Substitution subtable identifier-format must be 1"),this.parseUShort()),S=new _e(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:x,extension:Yn[x].call(S)}},Yn[8]=function(){var x=this.parseUShort();return O.argument(x===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:x,coverage:this.parsePointer(_e.coverage),backtrackCoverage:this.parseList(_e.pointer(_e.coverage)),lookaheadCoverage:this.parseList(_e.pointer(_e.coverage)),substitutes:this.parseUShortList()}};var Bu=new Array(9);Bu[1]=function(x){return x.substFormat===1?new Te.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Te.Coverage(x.coverage)},{name:"deltaGlyphID",type:"USHORT",value:x.deltaGlyphId}]):new Te.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new Te.Coverage(x.coverage)}].concat(Te.ushortList("substitute",x.substitute)))},Bu[3]=function(x){return O.assert(x.substFormat===1,"Lookup type 3 substFormat must be 1."),new Te.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Te.Coverage(x.coverage)}].concat(Te.tableList("altSet",x.alternateSets,function(S){return new Te.Table("alternateSetTable",Te.ushortList("alternate",S))})))},Bu[4]=function(x){return O.assert(x.substFormat===1,"Lookup type 4 substFormat must be 1."),new Te.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Te.Coverage(x.coverage)}].concat(Te.tableList("ligSet",x.ligatureSets,function(S){return new Te.Table("ligatureSetTable",Te.tableList("ligature",S,function(C){return new Te.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:C.ligGlyph}].concat(Te.ushortList("component",C.components,C.components.length+1)))}))})))};var Dm={parse:function(x,S){return S=(x=new _e(x,S=S||0)).parseVersion(1),O.argument(S===1||S===1.1,"Unsupported GSUB table version."),S===1?{version:S,scripts:x.parseScriptList(),features:x.parseFeatureList(),lookups:x.parseLookupList(Yn)}:{version:S,scripts:x.parseScriptList(),features:x.parseFeatureList(),lookups:x.parseLookupList(Yn),variations:x.parseFeatureVariationsList()}},make:function(x){return new Te.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Te.ScriptList(x.scripts)},{name:"features",type:"TABLE",value:new Te.FeatureList(x.features)},{name:"lookups",type:"TABLE",value:new Te.LookupList(x.lookups,Bu)}])}},Om={parse:function(x,S){for(var C=new je.Parser(x,S),k=C.parseULong(),P=(O.argument(k===1,"Unsupported META table version."),C.parseULong(),C.parseULong(),C.parseULong()),F={},z=0;z<P;z++){var Z=C.parseTag(),ie=C.parseULong(),se=C.parseULong(),ie=U.UTF8(x,S+ie,se);F[Z]=ie}return F},make:function(x){var S,C=Object.keys(x).length,k="",P=16+12*C,F=new Te.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:P},{name:"numTags",type:"ULONG",value:C}]);for(S in x){var z=k.length;k+=x[S],F.fields.push({name:"tag "+S,type:"TAG",value:S}),F.fields.push({name:"offset "+S,type:"ULONG",value:P+z}),F.fields.push({name:"length "+S,type:"ULONG",value:x[S].length})}return F.fields.push({name:"stringPool",type:"CHARARRAY",value:k}),F}};function Lm(x){return Math.log(x)/Math.log(2)|0}function ld(x){for(;x.length%4!=0;)x.push(0);for(var S=0,C=0;C<x.length;C+=4)S+=(x[C]<<24)+(x[C+1]<<16)+(x[C+2]<<8)+x[C+3];return S%=Math.pow(2,32)}function Nm(x,S,C,k){return new Te.Record("Table Record",[{name:"tag",type:"TAG",value:x!==void 0?x:""},{name:"checkSum",type:"ULONG",value:S!==void 0?S:0},{name:"offset",type:"ULONG",value:C!==void 0?C:0},{name:"length",type:"ULONG",value:k!==void 0?k:0}])}function Fm(x){for(var S=new Te.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),C=(S.tables=x,S.numTables=x.length,Math.pow(2,Lm(S.numTables))),k=(S.searchRange=16*C,S.entrySelector=Lm(C),S.rangeShift=16*S.numTables-S.searchRange,[]),P=[],F=S.sizeOf()+Nm().sizeOf()*S.numTables;F%4!=0;)F+=1,P.push({name:"padding",type:"BYTE",value:0});for(var z=0;z<x.length;z+=1){var Z=x[z],se=(O.argument(Z.tableName.length===4,"Table name"+Z.tableName+" is invalid."),Z.sizeOf()),ie=Nm(Z.tableName,ld(Z.encode()),F,se);for(k.push({name:ie.tag+" Table Record",type:"RECORD",value:ie}),P.push({name:Z.tableName+" table",type:"RECORD",value:Z}),F+=se,O.argument(!isNaN(F),"Something went wrong calculating the offset.");F%4!=0;)F+=1,P.push({name:"padding",type:"BYTE",value:0})}return k.sort(function(be,ke){return be.value.tag>ke.value.tag?1:-1}),S.fields=S.fields.concat(k),S.fields=S.fields.concat(P),S}function Bm(x,S,C){for(var k=0;k<S.length;k+=1){var P=x.charToGlyphIndex(S[k]);if(0<P)return x.glyphs.get(P).getMetrics()}return C}var o2={make:Fm,fontToTable:function(x){for(var S,C=[],k=[],P=[],F=[],z=[],Z=[],se=[],ie=0,be=0,ke=0,Ee=0,fe=0,Ge=0;Ge<x.glyphs.length;Ge+=1){var Ae=x.glyphs.get(Ge),Ne=0|Ae.unicode;if(isNaN(Ae.advanceWidth))throw new Error("Glyph "+Ae.name+" ("+Ge+"): advanceWidth is not a number.");(Ne<S||S===void 0)&&0<Ne&&(S=Ne),ie<Ne&&(ie=Ne);var Ne=Pr.getUnicodeRange(Ne);if(Ne<32)be|=1<<Ne;else if(Ne<64)ke|=1<<Ne-32;else if(Ne<96)Ee|=1<<Ne-64;else{if(!(Ne<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");fe|=1<<Ne-96}Ae.name!==".notdef"&&(Ne=Ae.getMetrics(),C.push(Ne.xMin),k.push(Ne.yMin),P.push(Ne.xMax),F.push(Ne.yMax),Z.push(Ne.leftSideBearing),se.push(Ne.rightSideBearing),z.push(Ae.advanceWidth))}var Me,Re={xMin:Math.min.apply(null,C),yMin:Math.min.apply(null,k),xMax:Math.max.apply(null,P),yMax:Math.max.apply(null,F),advanceWidthMax:Math.max.apply(null,z),advanceWidthAvg:function(Dr){for(var Es=0,ga=0;ga<Dr.length;ga+=1)Es+=Dr[ga];return Es/Dr.length}(z),minLeftSideBearing:Math.min.apply(null,Z),maxLeftSideBearing:Math.max.apply(null,Z),minRightSideBearing:Math.min.apply(null,se)},ft=(Re.ascender=x.ascender,Re.descender=x.descender,xs.make({flags:3,unitsPerEm:x.unitsPerEm,xMin:Re.xMin,yMin:Re.yMin,xMax:Re.xMax,yMax:Re.yMax,lowestRecPPEM:3,createdTimestamp:x.createdTimestamp})),St=he.make({ascender:Re.ascender,descender:Re.descender,advanceWidthMax:Re.advanceWidthMax,minLeftSideBearing:Re.minLeftSideBearing,minRightSideBearing:Re.minRightSideBearing,xMaxExtent:Re.maxLeftSideBearing+(Re.xMax-Re.xMin),numberOfHMetrics:x.glyphs.length}),pt=We.make(x.glyphs.length),vt=Pr.make({xAvgCharWidth:Math.round(Re.advanceWidthAvg),usWeightClass:x.tables.os2.usWeightClass,usWidthClass:x.tables.os2.usWidthClass,usFirstCharIndex:S,usLastCharIndex:ie,ulUnicodeRange1:be,ulUnicodeRange2:ke,ulUnicodeRange3:Ee,ulUnicodeRange4:fe,fsSelection:x.tables.os2.fsSelection,sTypoAscender:Re.ascender,sTypoDescender:Re.descender,sTypoLineGap:0,usWinAscent:Re.yMax,usWinDescent:Math.abs(Re.yMin),ulCodePageRange1:1,sxHeight:Bm(x,"xyvw",{yMax:Math.round(Re.ascender/2)}).yMax,sCapHeight:Bm(x,"HIKLEFJMNTZBDPRAGOQSUVWXY",Re).yMax,usDefaultChar:x.hasChar(" ")?32:0,usBreakChar:x.hasChar(" ")?32:0}),Tt=qe.make(x.glyphs),$t=K.make(x.glyphs),Qt=x.getEnglishName("fontFamily"),Gt=x.getEnglishName("fontSubfamily"),Ht=Qt+" "+Gt,dr=(dr=x.getEnglishName("postScriptName"))||Qt.replace(/\s/g,"")+"-"+Gt,br={};for(Me in x.names)br[Me]=x.names[Me];br.uniqueID||(br.uniqueID={en:x.getEnglishName("manufacturer")+":"+Ht}),br.postScriptName||(br.postScriptName={en:dr}),br.preferredFamily||(br.preferredFamily=x.names.fontFamily),br.preferredSubfamily||(br.preferredSubfamily=x.names.fontSubfamily);var Zr=[],Qr=Cn.make(br,Zr),Zr=0<Zr.length?nt.make(Zr):void 0,Qn=Pm.make(),Ht=bs.make(x.glyphs,{version:x.getEnglishName("version"),fullName:Ht,familyName:Qt,weightName:Gt,postScriptName:dr,unitsPerEm:x.unitsPerEm,fontBBox:[0,Re.yMin,Re.ascender,Re.advanceWidthMax]}),Qt=x.metas&&0<Object.keys(x.metas).length?Om.make(x.metas):void 0,Gt=[ft,St,pt,vt,Qr,$t,Qn,Ht,Tt];Zr&&Gt.push(Zr),x.tables.gsub&&Gt.push(Dm.make(x.tables.gsub)),Qt&&Gt.push(Qt);for(var Jr=ld((dr=Fm(Gt)).encode()),nr=dr.fields,Vr=!1,Zt=0;Zt<nr.length;Zt+=1)if(nr[Zt].name==="head table"){nr[Zt].value.checkSumAdjustment=2981146554-Jr,Vr=!0;break}if(Vr)return dr;throw new Error("Could not find head table with checkSum to adjust.")},computeCheckSum:ld};function cd(x,S){for(var C=0,k=x.length-1;C<=k;){var P=C+k>>>1,F=x[P].tag;if(F===S)return P;F<S?C=1+P:k=P-1}return-C-1}function Um(x,S){for(var C=0,k=x.length-1;C<=k;){var P=C+k>>>1,F=x[P];if(F===S)return P;F<S?C=1+P:k=P-1}return-C-1}function Gm(x,S){for(var C=0,k=x.length-1;C<=k;){var P,F=C+k>>>1,z=(P=x[F]).start;if(z===S)return P;z<S?C=1+F:k=F-1}if(0<C)return S>(P=x[C-1]).end?0:P}function Uu(x,S){this.font=x,this.tableName=S}function Gu(x){Uu.call(this,x,"gpos")}function ho(x){Uu.call(this,x,"gsub")}function zm(x,S,C){for(var k=x.subtables,P=0;P<k.length;P++){var F=k[P];if(F.substFormat===S)return F}if(C)return k.push(C),C}function Vm(x){for(var S=new ArrayBuffer(x.length),C=new Uint8Array(S),k=0;k<x.length;++k)C[k]=x[k];return S}function ma(x,S){if(!x)throw S}function Wm(x,S,C,k,P){var F=0<(S&k)?(F=x.parseByte(),C+(F=S&P?F:-F)):0<(S&P)?C:C+x.parseShort();return F}function i2(x,S,C){var k,P=new je.Parser(S,C);if(x.numberOfContours=P.parseShort(),x._xMin=P.parseShort(),x._yMin=P.parseShort(),x._xMax=P.parseShort(),x._yMax=P.parseShort(),0<x.numberOfContours){for(var F=x.endPointIndices=[],z=0;z<x.numberOfContours;z+=1)F.push(P.parseUShort());x.instructionLength=P.parseUShort(),x.instructions=[];for(var Z=0;Z<x.instructionLength;Z+=1)x.instructions.push(P.parseByte());for(var se=F[F.length-1]+1,ie=[],be=0;be<se;be+=1)if(k=P.parseByte(),ie.push(k),0<(8&k))for(var ke=P.parseByte(),Ee=0;Ee<ke;Ee+=1)ie.push(k),be+=1;if(O.argument(ie.length===se,"Bad flags."),0<F.length){var fe,Ge=[];if(0<se){for(var Ae=0;Ae<se;Ae+=1)k=ie[Ae],(fe={}).onCurve=!!(1&k),fe.lastPointOfContour=0<=F.indexOf(Ae),Ge.push(fe);for(var Ne=0,Me=0;Me<se;Me+=1)k=ie[Me],(fe=Ge[Me]).x=Wm(P,k,Ne,2,16),Ne=fe.x;for(var Re=0,ft=0;ft<se;ft+=1)k=ie[ft],(fe=Ge[ft]).y=Wm(P,k,Re,4,32),Re=fe.y}x.points=Ge}else x.points=[]}else if(x.numberOfContours===0)x.points=[];else{x.isComposite=!0,x.points=[],x.components=[];for(var St=!0;St;){ie=P.parseUShort();var pt={glyphIndex:P.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};0<(1&ie)?0<(2&ie)?(pt.dx=P.parseShort(),pt.dy=P.parseShort()):pt.matchedPoints=[P.parseUShort(),P.parseUShort()]:0<(2&ie)?(pt.dx=P.parseChar(),pt.dy=P.parseChar()):pt.matchedPoints=[P.parseByte(),P.parseByte()],0<(8&ie)?pt.xScale=pt.yScale=P.parseF2Dot14():0<(64&ie)?(pt.xScale=P.parseF2Dot14(),pt.yScale=P.parseF2Dot14()):0<(128&ie)&&(pt.xScale=P.parseF2Dot14(),pt.scale01=P.parseF2Dot14(),pt.scale10=P.parseF2Dot14(),pt.yScale=P.parseF2Dot14()),x.components.push(pt),St=!!(32&ie)}if(256&ie){x.instructionLength=P.parseUShort(),x.instructions=[];for(var vt=0;vt<x.instructionLength;vt+=1)x.instructions.push(P.parseByte())}}}function dd(x,S){for(var C=[],k=0;k<x.length;k+=1){var P=x[k],P={x:S.xScale*P.x+S.scale01*P.y+S.dx,y:S.scale10*P.x+S.yScale*P.y+S.dy,onCurve:P.onCurve,lastPointOfContour:P.lastPointOfContour};C.push(P)}return C}function Hm(x){var S=new X;if(x)for(var C=function(ke){for(var Ee=[],fe=[],Ge=0;Ge<ke.length;Ge+=1){var Ae=ke[Ge];fe.push(Ae),Ae.lastPointOfContour&&(Ee.push(fe),fe=[])}return O.argument(fe.length===0,"There are still points left in the current contour."),Ee}(x),k=0;k<C.length;++k){var P,F=C[k],z=F[F.length-1],Z=F[0];z.onCurve?S.moveTo(z.x,z.y):Z.onCurve?S.moveTo(Z.x,Z.y):(P={x:.5*(z.x+Z.x),y:.5*(z.y+Z.y)},S.moveTo(P.x,P.y));for(var se=0;se<F.length;++se){var ie,be=z,z=Z,Z=F[(se+1)%F.length];z.onCurve?S.lineTo(z.x,z.y):(ie=Z,be.onCurve||(z.x,be.x,z.y,be.y),Z.onCurve||(ie={x:.5*(z.x+Z.x),y:.5*(z.y+Z.y)}),S.quadraticCurveTo(z.x,z.y,ie.x,ie.y))}S.closePath()}return S}function a2(x,S){if(S.isComposite)for(var C=0;C<S.components.length;C+=1){var k=S.components[C],P=x.get(k.glyphIndex);if(P.getPath(),P.points){var F=void 0;if(k.matchedPoints===void 0)F=dd(P.points,k);else{if(k.matchedPoints[0]>S.points.length-1||k.matchedPoints[1]>P.points.length-1)throw Error("Matched points out of range in "+S.name);var z=S.points[k.matchedPoints[0]],Z=P.points[k.matchedPoints[1]],k={xScale:k.xScale,scale01:k.scale01,scale10:k.scale10,yScale:k.yScale,dx:0,dy:0},Z=dd([Z],k)[0];k.dx=z.x-Z.x,k.dy=z.y-Z.y,F=dd(P.points,k)}S.points=S.points.concat(F)}}return Hm(S.points)}(Gu.prototype=Uu.prototype={searchTag:cd,binSearch:Um,getTable:function(x){var S=this.font.tables[this.tableName];return S=!S&&x?this.font.tables[this.tableName]=this.createDefaultTable():S},getScriptNames:function(){var x=this.getTable();return x?x.scripts.map(function(S){return S.tag}):[]},getDefaultScriptName:function(){var x=this.getTable();if(x){for(var S=!1,C=0;C<x.scripts.length;C++){var k=x.scripts[C].tag;if(k==="DFLT")return k;k==="latn"&&(S=!0)}return S?"latn":void 0}},getScriptTable:function(x,S){var C,k=this.getTable(S);if(k)return C=k.scripts,0<=(k=cd(k.scripts,x=x||"DFLT"))?C[k].script:S?(C.splice(-1-k,0,S={tag:x,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}),S.script):void 0},getLangSysTable:function(P,S,C){var k,P=this.getScriptTable(P,C);if(P)return S&&S!=="dflt"&&S!=="DFLT"?0<=(k=cd(P.langSysRecords,S))?P.langSysRecords[k].langSys:C?(P.langSysRecords.splice(-1-k,0,C={tag:S,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}}),C.langSys):void 0:P.defaultLangSys},getFeatureTable:function(x,S,C,k){if(x=this.getLangSysTable(x,S,k),x){for(var P,F=x.featureIndexes,z=this.font.tables[this.tableName].features,Z=0;Z<F.length;Z++)if((P=z[F[Z]]).tag===C)return P.feature;if(k)return S=z.length,O.assert(S===0||C>=z[S-1].tag,"Features must be added in alphabetical order."),z.push(P={tag:C,feature:{params:0,lookupListIndexes:[]}}),F.push(S),P.feature}},getLookupTables:function(F,S,C,k,P){var F=this.getFeatureTable(F,S,C,P),z=[];if(F){for(var Z,se=F.lookupListIndexes,ie=this.font.tables[this.tableName].lookups,be=0;be<se.length;be++)(Z=ie[se[be]]).lookupType===k&&z.push(Z);if(z.length===0&&P)return S=ie.length,ie.push(Z={lookupType:k,lookupFlag:0,subtables:[],markFilteringSet:void 0}),se.push(S),[Z]}return z},getGlyphClass:function(x,S){switch(x.format){case 1:return x.startGlyph<=S&&S<x.startGlyph+x.classes.length?x.classes[S-x.startGlyph]:0;case 2:var C=Gm(x.ranges,S);return C?C.classId:0}},getCoverageIndex:function(x,S){switch(x.format){case 1:var C=Um(x.glyphs,S);return 0<=C?C:-1;case 2:return C=Gm(x.ranges,S),C?C.index+S-C.start:-1}},expandCoverage:function(x){if(x.format===1)return x.glyphs;for(var S=[],C=x.ranges,k=0;k<C.length;k++)for(var P=C[k],F=P.start,z=P.end,Z=F;Z<=z;Z++)S.push(Z);return S}}).init=function(){var x=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(x)},Gu.prototype.getKerningValue=function(x,S,C){for(var k=0;k<x.length;k++)for(var P=x[k].subtables,F=0;F<P.length;F++){var z=P[F],Z=this.getCoverageIndex(z.coverage,S);if(!(Z<0))switch(z.posFormat){case 1:for(var se=z.pairSets[Z],ie=0;ie<se.length;ie++){var be=se[ie];if(be.secondGlyph===C)return be.value1&&be.value1.xAdvance||0}break;case 2:var Ee=this.getGlyphClass(z.classDef1,S),ke=this.getGlyphClass(z.classDef2,C),Ee=z.classRecords[Ee][ke];return Ee.value1&&Ee.value1.xAdvance||0}}return 0},Gu.prototype.getKerningTables=function(x,S){if(this.font.tables.gpos)return this.getLookupTables(x,S,"kern",2)},(ho.prototype=Uu.prototype).createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},ho.prototype.getSingle=function(x,S,C){for(var k=[],P=this.getLookupTables(S,C,x,1),F=0;F<P.length;F++)for(var z=P[F].subtables,Z=0;Z<z.length;Z++){var se=z[Z],ie=this.expandCoverage(se.coverage),be=void 0;if(se.substFormat===1)for(var ke=se.deltaGlyphId,be=0;be<ie.length;be++){var Ee=ie[be];k.push({sub:Ee,by:Ee+ke})}else{var fe=se.substitute;for(be=0;be<ie.length;be++)k.push({sub:ie[be],by:fe[be]})}}return k},ho.prototype.getAlternates=function(x,S,C){for(var k=[],P=this.getLookupTables(S,C,x,3),F=0;F<P.length;F++)for(var z=P[F].subtables,Z=0;Z<z.length;Z++)for(var se=z[Z],ie=this.expandCoverage(se.coverage),be=se.alternateSets,ke=0;ke<ie.length;ke++)k.push({sub:ie[ke],by:be[ke]});return k},ho.prototype.getLigatures=function(x,S,C){for(var k=[],P=this.getLookupTables(S,C,x,4),F=0;F<P.length;F++)for(var z=P[F].subtables,Z=0;Z<z.length;Z++)for(var se=z[Z],ie=this.expandCoverage(se.coverage),be=se.ligatureSets,ke=0;ke<ie.length;ke++)for(var Ee=ie[ke],fe=be[ke],Ge=0;Ge<fe.length;Ge++){var Ae=fe[Ge];k.push({sub:[Ee].concat(Ae.components),by:Ae.ligGlyph})}return k},ho.prototype.addSingle=function(x,S,C,k){C=zm(this.getLookupTables(C,k,x,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]}),O.assert(C.coverage.format===1,"Ligature: unable to modify coverage table format "+C.coverage.format),k=S.sub,x=this.binSearch(C.coverage.glyphs,k),x<0&&(C.coverage.glyphs.splice(x=-1-x,0,k),C.substitute.splice(x,0,0)),C.substitute[x]=S.by},ho.prototype.addAlternate=function(x,S,C,k){C=zm(this.getLookupTables(C,k,x,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]}),O.assert(C.coverage.format===1,"Ligature: unable to modify coverage table format "+C.coverage.format),k=S.sub,x=this.binSearch(C.coverage.glyphs,k),x<0&&(C.coverage.glyphs.splice(x=-1-x,0,k),C.alternateSets.splice(x,0,0)),C.alternateSets[x]=S.by},ho.prototype.addLigature=function(F,se,Z,P){var Z=this.getLookupTables(Z,P,F,4,!0)[0],P=Z.subtables[0],F=(P||(Z.subtables[0]=P={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]}),O.assert(P.coverage.format===1,"Ligature: unable to modify coverage table format "+P.coverage.format),se.sub[0]),z=se.sub.slice(1),Z={ligGlyph:se.by,components:z},se=this.binSearch(P.coverage.glyphs,F);if(0<=se){for(var ie=P.ligatureSets[se],be=0;be<ie.length;be++)if(function(ke,Ee){var fe=ke.length;if(fe===Ee.length){for(var Ge=0;Ge<fe;Ge++)if(ke[Ge]!==Ee[Ge])return;return 1}}(ie[be].components,z))return;ie.push(Z)}else P.coverage.glyphs.splice(se=-1-se,0,F),P.ligatureSets.splice(se,0,[Z])},ho.prototype.getFeature=function(x,S,C){if(/ss\d\d/.test(x))return this.getSingle(x,S,C);switch(x){case"aalt":case"salt":return this.getSingle(x,S,C).concat(this.getAlternates(x,S,C));case"dlig":case"liga":case"rlig":return this.getLigatures(x,S,C)}},ho.prototype.add=function(x,S,C,k){if(/ss\d\d/.test(x))return this.addSingle(x,S,C,k);switch(x){case"aalt":case"salt":return typeof S.by=="number"?this.addSingle(x,S,C,k):this.addAlternate(x,S,C,k);case"dlig":case"liga":case"rlig":return this.addLigature(x,S,C,k)}};var qm={getPath:Hm,parse:function(x,S,C,k){for(var P=new dt.GlyphSet(k),F=0;F<C.length-1;F+=1){var z=C[F];z!==C[F+1]?P.push(F,dt.ttfGlyphLoader(k,F,i2,x,S+z,a2)):P.push(F,dt.glyphLoader(k,F))}return P}};function $m(x){this.font=x,this.getCommands=function(S){return qm.getPath(S).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function s2(x){return x}function Xm(x){return Math.sign(x)*Math.round(Math.abs(x))}function u2(x){return Math.sign(x)*Math.round(Math.abs(2*x))/2}function l2(x){return Math.sign(x)*(Math.round(Math.abs(x)+.5)-.5)}function c2(x){return Math.sign(x)*Math.ceil(Math.abs(x))}function d2(x){return Math.sign(x)*Math.floor(Math.abs(x))}function Ym(x){var S=this.srPeriod,C=this.srPhase,k=1;return x<0&&(x=-x,k=-1),x+=this.srThreshold-C,x=Math.trunc(x/S)*S,(x+=C)<0?C*k:x*k}var po={x:1,y:0,axis:"x",distance:function(x,S,C,k){return(C?x.xo:x.x)-(k?S.xo:S.x)},interpolate:function(x,S,C,k){var P,F,z,Z,se,ie,be;if(!k||k===this)return P=x.xo-S.xo,F=x.xo-C.xo,se=S.x-S.xo,ie=C.x-C.xo,(be=(z=Math.abs(P))+(Z=Math.abs(F)))===0?void(x.x=x.xo+(se+ie)/2):void(x.x=x.xo+(se*Z+ie*z)/be);P=k.distance(x,S,!0,!0),F=k.distance(x,C,!0,!0),se=k.distance(S,S,!1,!0),ie=k.distance(C,C,!1,!0),(be=(z=Math.abs(P))+(Z=Math.abs(F)))===0?po.setRelative(x,x,(se+ie)/2,k,!0):po.setRelative(x,x,(se*Z+ie*z)/be,k,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(x,S,C,k,P){var F,z;k&&k!==this?(F=P?S.xo:S.x,z=P?S.yo:S.y,F+=C*k.x,z+=C*k.y,x.x=F+(x.y-z)/k.normalSlope):x.x=(P?S.xo:S.x)+C},slope:0,touch:function(x){x.xTouched=!0},touched:function(x){return x.xTouched},untouch:function(x){x.xTouched=!1}},Oo={x:0,y:1,axis:"y",distance:function(x,S,C,k){return(C?x.yo:x.y)-(k?S.yo:S.y)},interpolate:function(x,S,C,k){var P,F,z,Z,se,ie,be;if(!k||k===this)return P=x.yo-S.yo,F=x.yo-C.yo,se=S.y-S.yo,ie=C.y-C.yo,(be=(z=Math.abs(P))+(Z=Math.abs(F)))===0?void(x.y=x.yo+(se+ie)/2):void(x.y=x.yo+(se*Z+ie*z)/be);P=k.distance(x,S,!0,!0),F=k.distance(x,C,!0,!0),se=k.distance(S,S,!1,!0),ie=k.distance(C,C,!1,!0),(be=(z=Math.abs(P))+(Z=Math.abs(F)))===0?Oo.setRelative(x,x,(se+ie)/2,k,!0):Oo.setRelative(x,x,(se*Z+ie*z)/be,k,!0)},normalSlope:0,setRelative:function(x,S,C,k,P){var F,z;k&&k!==this?(F=P?S.xo:S.x,z=P?S.yo:S.y,F+=C*k.x,z+=C*k.y,x.y=z+k.normalSlope*(x.x-F)):x.y=(P?S.yo:S.y)+C},slope:Number.POSITIVE_INFINITY,touch:function(x){x.yTouched=!0},touched:function(x){return x.yTouched},untouch:function(x){x.yTouched=!1}};function ws(x,S){this.x=x,this.y=S,this.axis=void 0,this.slope=S/x,this.normalSlope=-x/S,Object.freeze(this)}function _s(x,S){var C=Math.sqrt(x*x+S*S);return S/=C,(x/=C)===1&&S===0?po:x===0&&S===1?Oo:new ws(x,S)}function Lo(x,S,C,k){this.x=this.xo=Math.round(64*x)/64,this.y=this.yo=Math.round(64*S)/64,this.lastPointOfContour=C,this.onCurve=k,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(po),Object.freeze(Oo),ws.prototype.distance=function(x,S,C,k){return this.x*po.distance(x,S,C,k)+this.y*Oo.distance(x,S,C,k)},ws.prototype.interpolate=function(x,P,F,k){var z=k.distance(x,P,!0,!0),Z=k.distance(x,F,!0,!0),P=k.distance(P,P,!1,!0),F=k.distance(F,F,!1,!0),z=Math.abs(z),Z=Math.abs(Z),se=z+Z;se===0?this.setRelative(x,x,(P+F)/2,k,!0):this.setRelative(x,x,(P*Z+F*z)/se,k,!0)},ws.prototype.setRelative=function(x,F,se,ie,Z){var z=Z?F.xo:F.x,Z=Z?F.yo:F.y,F=z+se*(ie=ie||this).x,z=Z+se*ie.y,Z=ie.normalSlope,se=this.slope,ie=x.x,be=x.y;x.x=(se*ie-Z*F+z-be)/(se-Z),x.y=se*(x.x-ie)+be},ws.prototype.touch=function(x){x.xTouched=!0,x.yTouched=!0},Lo.prototype.nextTouched=function(x){for(var S=this.nextPointOnContour;!x.touched(S)&&S!==this;)S=S.nextPointOnContour;return S},Lo.prototype.prevTouched=function(x){for(var S=this.prevPointOnContour;!x.touched(S)&&S!==this;)S=S.prevPointOnContour;return S};var Ss=Object.freeze(new Lo(0,0)),f2={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function ri(x,S){switch(this.env=x,this.stack=[],this.prog=S,x){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=po,this.round=Xm}}function zu(x){for(var S=x.tZone=new Array(x.gZone.length),C=0;C<S.length;C++)S[C]=new Lo(0,0)}function Km(x,S){var C,k=x.prog,P=x.ip,F=1;do if((C=k[++P])===88)F++;else if(C===89)F--;else if(C===64)P+=k[P+1]+1;else if(C===65)P+=2*k[P+1]+1;else if(176<=C&&C<=183)P+=C-176+1;else if(184<=C&&C<=191)P+=2*(C-184+1);else if(S&&F===1&&C===27)break;while(0<F);x.ip=P}function Qm(x,S){l.DEBUG&&console.log(S.step,"SVTCA["+x.axis+"]"),S.fv=S.pv=S.dpv=x}function Zm(x,S){l.DEBUG&&console.log(S.step,"SPVTCA["+x.axis+"]"),S.pv=S.dpv=x}function Jm(x,S){l.DEBUG&&console.log(S.step,"SFVTCA["+x.axis+"]"),S.fv=x}function ey(x,S){var C,P=S.stack,k=P.pop(),P=P.pop(),F=S.z2[k],z=S.z1[P];l.DEBUG&&console.log("SPVTL["+x+"]",k,P),k=x?(C=F.y-z.y,z.x-F.x):(C=z.x-F.x,z.y-F.y),S.pv=S.dpv=_s(C,k)}function ty(x,S){var C,P=S.stack,k=P.pop(),P=P.pop(),F=S.z2[k],z=S.z1[P];l.DEBUG&&console.log("SFVTL["+x+"]",k,P),k=x?(C=F.y-z.y,z.x-F.x):(C=z.x-F.x,z.y-F.y),S.fv=_s(C,k)}function fd(x){l.DEBUG&&console.log(x.step,"POP[]"),x.stack.pop()}function ry(x,S){var C=S.stack.pop(),k=S.z0[C],P=S.fv,F=S.pv,z=(l.DEBUG&&console.log(S.step,"MDAP["+x+"]",C),F.distance(k,Ss));x&&(z=S.round(z)),P.setRelative(k,Ss,z,F),P.touch(k),S.rp0=S.rp1=C}function ny(x,S){var C,k,P,F=S.z2,z=F.length-2;l.DEBUG&&console.log(S.step,"IUP["+x.axis+"]");for(var Z=0;Z<z;Z++)C=F[Z],x.touched(C)||(k=C.prevTouched(x))!==C&&(k===(P=C.nextTouched(x))&&x.setRelative(C,C,x.distance(k,k,!1,!0),x,!0),x.interpolate(C,k,P,x))}function oy(x,S){for(var C=S.stack,k=x?S.rp1:S.rp2,P=(x?S.z0:S.z1)[k],F=S.fv,z=S.pv,Z=S.loop,se=S.z2;Z--;){var ie=C.pop(),be=se[ie],ke=z.distance(P,P,!1,!0);F.setRelative(be,be,ke,z),F.touch(be),l.DEBUG&&console.log(S.step,(1<S.loop?"loop "+(S.loop-Z)+": ":"")+"SHP["+(x?"rp1":"rp2")+"]",ie)}S.loop=1}function iy(x,S){for(var C=S.stack,z=x?S.rp1:S.rp2,k=(x?S.z0:S.z1)[z],P=S.fv,F=S.pv,z=C.pop(),Z=S.z2[S.contours[z]],se=Z,ie=(l.DEBUG&&console.log(S.step,"SHC["+x+"]",z),F.distance(k,k,!1,!0));se!==k&&P.setRelative(se,se,ie,F),(se=se.nextPointOnContour)!==Z;);}function ay(x,S){var C,k,Z=S.stack,P=x?S.rp1:S.rp2,P=(x?S.z0:S.z1)[P],F=S.fv,z=S.pv,Z=Z.pop();switch(l.DEBUG&&console.log(S.step,"SHZ["+x+"]",Z),Z){case 0:C=S.tZone;break;case 1:C=S.gZone;break;default:throw new Error("Invalid zone")}for(var se=z.distance(P,P,!1,!0),ie=C.length-2,be=0;be<ie;be++)k=C[be],F.setRelative(k,k,se,z)}function sy(x,S){var k=S.stack,C=k.pop()/64,k=k.pop(),P=S.z1[k],F=S.z0[S.rp0],z=S.fv,Z=S.pv;z.setRelative(P,F,C,Z),z.touch(P),l.DEBUG&&console.log(S.step,"MSIRP["+x+"]",C,k),S.rp1=S.rp0,S.rp2=k,x&&(S.rp0=k)}function uy(x,S){var C=S.stack,Z=C.pop(),C=C.pop(),k=S.z0[C],P=S.fv,F=S.pv,z=S.cvt[Z],Z=(l.DEBUG&&console.log(S.step,"MIAP["+x+"]",Z,"(",z,")",C),F.distance(k,Ss));x&&(Math.abs(Z-z)<S.cvCutIn&&(Z=z),Z=S.round(Z)),P.setRelative(k,Ss,Z,F),S.zp0===0&&(k.xo=k.x,k.yo=k.y),P.touch(k),S.rp0=S.rp1=C}function ly(x,S){var C=S.stack,k=C.pop(),P=S.z2[k];l.DEBUG&&console.log(S.step,"GC["+x+"]",k),C.push(64*S.dpv.distance(P,Ss,x,!1))}function cy(x,S){var k=S.stack,C=k.pop(),k=k.pop(),P=S.z1[C],F=S.z0[k],F=S.dpv.distance(F,P,x,x);l.DEBUG&&console.log(S.step,"MD["+x+"]",C,k,"->",F),S.stack.push(Math.round(64*F))}function hd(x,S){var C=S.stack,k=C.pop(),P=S.fv,F=S.pv,z=S.ppem,Z=S.deltaBase+16*(x-1),se=S.deltaShift,ie=S.z0;l.DEBUG&&console.log(S.step,"DELTAP["+x+"]",k,C);for(var be=0;be<k;be++){var ke=C.pop(),Ee=C.pop();Z+((240&Ee)>>4)===z&&(0<=(Ee=(15&Ee)-8)&&Ee++,l.DEBUG&&console.log(S.step,"DELTAPFIX",ke,"by",Ee*se),ke=ie[ke],P.setRelative(ke,ke,Ee*se,F))}}function Vu(x,S){var C=S.stack,k=C.pop();l.DEBUG&&console.log(S.step,"ROUND[]"),C.push(64*S.round(k/64))}function pd(x,S){var C=S.stack,k=C.pop(),P=S.ppem,F=S.deltaBase+16*(x-1),z=S.deltaShift;l.DEBUG&&console.log(S.step,"DELTAC["+x+"]",k,C);for(var Z=0;Z<k;Z++){var se=C.pop(),ie=C.pop();F+((240&ie)>>4)===P&&(0<=(ie=(15&ie)-8)&&ie++,ie=ie*z,l.DEBUG&&console.log(S.step,"DELTACFIX",se,"by",ie),S.cvt[se]+=ie)}}function dy(x,S){var C,P=S.stack,k=P.pop(),P=P.pop(),F=S.z2[k],z=S.z1[P];l.DEBUG&&console.log(S.step,"SDPVTL["+x+"]",k,P),k=x?(C=F.y-z.y,z.x-F.x):(C=z.x-F.x,z.y-F.y),S.dpv=_s(C,k)}function ni(x,S){var C=S.stack,k=S.prog,P=S.ip;l.DEBUG&&console.log(S.step,"PUSHB["+x+"]");for(var F=0;F<x;F++)C.push(k[++P]);S.ip=P}function oi(x,S){var C=S.ip,k=S.prog,P=S.stack;l.DEBUG&&console.log(S.ip,"PUSHW["+x+"]");for(var F=0;F<x;F++){var z=k[++C]<<8|k[++C];32768&z&&(z=-(1+(65535^z))),P.push(z)}S.ip=C}function ut(x,S,C,k,P,F){var z,Z,ie=F.stack,se=x&&ie.pop(),ie=ie.pop(),be=F.rp0,be=F.z0[be],ke=F.z1[ie],Ee=F.minDis,fe=F.fv,Ge=F.dpv,Ae=z=Ge.distance(ke,be,!0,!0),Ne=0<=Ae?1:-1;Ae=Math.abs(Ae),x&&(Z=F.cvt[se],k&&Math.abs(Ae-Z)<F.cvCutIn&&(Ae=Z)),C&&Ae<Ee&&(Ae=Ee),k&&(Ae=F.round(Ae)),fe.setRelative(ke,be,Ne*Ae,Ge),fe.touch(ke),l.DEBUG&&console.log(F.step,(x?"MIRP[":"MDRP[")+(S?"M":"m")+(C?">":"_")+(k?"R":"_")+(P===0?"Gr":P===1?"Bl":P===2?"Wh":"")+"]",x?se+"("+F.cvt[se]+","+Z+")":"",ie,"(d =",z,"->",Ne*Ae,")"),F.rp1=F.rp0,F.rp2=ie,S&&(F.rp0=ie)}$m.prototype.exec=function(x,S){if(typeof S!="number")throw new Error("Point size is not a number!");if(!(2<this._errorState)){var C=this.font,k=this._prepState;if(!k||k.ppem!==S){var P=this._fpgmState;if(!P){ri.prototype=f2,(P=this._fpgmState=new ri("fpgm",C.tables.fpgm)).funcs=[],P.font=C,l.DEBUG&&(console.log("---EXEC FPGM---"),P.step=-1);try{ya(P)}catch(ie){return console.log("Hinting error in FPGM:"+ie),void(this._errorState=3)}}ri.prototype=P,(k=this._prepState=new ri("prep",C.tables.prep)).ppem=S;var F=C.tables.cvt;if(F)for(var z=k.cvt=new Array(F.length),Z=S/C.unitsPerEm,se=0;se<F.length;se++)z[se]=F[se]*Z;else k.cvt=[];l.DEBUG&&(console.log("---EXEC PREP---"),k.step=-1);try{ya(k)}catch(ie){this._errorState<2&&console.log("Hinting error in PREP:"+ie),this._errorState=2}}if(!(1<this._errorState))try{return h2(x,k)}catch(ie){this._errorState<1&&(console.log("Hinting error:"+ie),console.log("Note: further hinting errors are silenced")),this._errorState=1}}};var h2=function(x,S){var C=S.ppem/S.font.unitsPerEm,k=C,P=x.components;if(ri.prototype=S,P){for(var F=S.font,z=[],Z=[],se=0;se<P.length;se++){var ie=P[se],be=F.glyphs.get(ie.glyphIndex),ke=new ri("glyf",be.instructions);l.DEBUG&&(console.log("---EXEC COMP "+se+"---"),ke.step=-1),fy(be,ke,C,k);for(var Ee=Math.round(ie.dx*C),fe=Math.round(ie.dy*k),Ge=ke.gZone,Ae=ke.contours,Ne=0;Ne<Ge.length;Ne++){var Me=Ge[Ne];Me.xTouched=Me.yTouched=!1,Me.xo=Me.x=Me.x+Ee,Me.yo=Me.y=Me.y+fe}var Re=z.length;z.push.apply(z,Ge);for(var ft=0;ft<Ae.length;ft++)Z.push(Ae[ft]+Re)}x.instructions&&!ke.inhibitGridFit&&((ke=new ri("glyf",x.instructions)).gZone=ke.z0=ke.z1=ke.z2=z,ke.contours=Z,z.push(new Lo(0,0),new Lo(Math.round(x.advanceWidth*C),0)),l.DEBUG&&(console.log("---EXEC COMPOSITE---"),ke.step=-1),ya(ke),z.length-=2)}else ke=new ri("glyf",x.instructions),l.DEBUG&&(console.log("---EXEC GLYPH---"),ke.step=-1),fy(x,ke,C,k),z=ke.gZone;return z},fy=function(x,S,C,k){for(var P,F,z,Z=x.points||[],se=Z.length,ie=S.gZone=S.z0=S.z1=S.z2=[],be=S.contours=[],ke=0;ke<se;ke++)P=Z[ke],ie[ke]=new Lo(P.x*C,P.y*k,P.lastPointOfContour,P.onCurve);for(var Ee=0;Ee<se;Ee++)P=ie[Ee],F||(F=P,be.push(Ee)),P.lastPointOfContour?((P.nextPointOnContour=F).prevPointOnContour=P,F=void 0):(z=ie[Ee+1],(P.nextPointOnContour=z).prevPointOnContour=P);if(!S.inhibitGridFit){if(l.DEBUG){console.log("PROCESSING GLYPH",S.stack);for(var fe=0;fe<se;fe++)console.log(fe,ie[fe].x,ie[fe].y)}if(ie.push(new Lo(0,0),new Lo(Math.round(x.advanceWidth*C),0)),ya(S),ie.length-=2,l.DEBUG){console.log("FINISHED GLYPH",S.stack);for(var Ge=0;Ge<se;Ge++)console.log(Ge,ie[Ge].x,ie[Ge].y)}}},ya=function(x){var S=x.prog;if(S){var C,k=S.length;for(x.ip=0;x.ip<k;x.ip++){if(l.DEBUG&&x.step++,!(C=p2[S[x.ip]]))throw new Error("unknown instruction: 0x"+Number(S[x.ip]).toString(16));C(x)}}},p2=[Qm.bind(void 0,Oo),Qm.bind(void 0,po),Zm.bind(void 0,Oo),Zm.bind(void 0,po),Jm.bind(void 0,Oo),Jm.bind(void 0,po),ey.bind(void 0,0),ey.bind(void 0,1),ty.bind(void 0,0),ty.bind(void 0,1),function(x){var S=(C=x.stack).pop(),C=C.pop();l.DEBUG&&console.log(x.step,"SPVFS[]",S,C),x.pv=x.dpv=_s(C,S)},function(x){var S=(C=x.stack).pop(),C=C.pop();l.DEBUG&&console.log(x.step,"SPVFS[]",S,C),x.fv=_s(C,S)},function(x){var S=x.stack,C=x.pv;l.DEBUG&&console.log(x.step,"GPV[]"),S.push(16384*C.x),S.push(16384*C.y)},function(x){var S=x.stack,C=x.fv;l.DEBUG&&console.log(x.step,"GFV[]"),S.push(16384*C.x),S.push(16384*C.y)},function(x){x.fv=x.pv,l.DEBUG&&console.log(x.step,"SFVTPV[]")},function(S){var C=(z=S.stack).pop(),k=z.pop(),P=z.pop(),F=z.pop(),z=z.pop(),se=S.z0,be=S.z1,Z=se[C],se=se[k],ie=be[P],be=be[F],S=S.z2[z],C=(l.DEBUG&&console.log("ISECT[], ",C,k,P,F,z),Z.x),k=Z.y,P=se.x,F=se.y,z=ie.x,Z=ie.y,se=be.x,ie=be.y,be=(C-P)*(Z-ie)-(k-F)*(z-se),ke=C*F-k*P,Ee=z*ie-Z*se;S.x=(ke*(z-se)-Ee*(C-P))/be,S.y=(ke*(Z-ie)-Ee*(k-F))/be},function(x){x.rp0=x.stack.pop(),l.DEBUG&&console.log(x.step,"SRP0[]",x.rp0)},function(x){x.rp1=x.stack.pop(),l.DEBUG&&console.log(x.step,"SRP1[]",x.rp1)},function(x){x.rp2=x.stack.pop(),l.DEBUG&&console.log(x.step,"SRP2[]",x.rp2)},function(x){var S=x.stack.pop();switch(l.DEBUG&&console.log(x.step,"SZP0[]",S),x.zp0=S){case 0:x.tZone||zu(x),x.z0=x.tZone;break;case 1:x.z0=x.gZone;break;default:throw new Error("Invalid zone pointer")}},function(x){var S=x.stack.pop();switch(l.DEBUG&&console.log(x.step,"SZP1[]",S),x.zp1=S){case 0:x.tZone||zu(x),x.z1=x.tZone;break;case 1:x.z1=x.gZone;break;default:throw new Error("Invalid zone pointer")}},function(x){var S=x.stack.pop();switch(l.DEBUG&&console.log(x.step,"SZP2[]",S),x.zp2=S){case 0:x.tZone||zu(x),x.z2=x.tZone;break;case 1:x.z2=x.gZone;break;default:throw new Error("Invalid zone pointer")}},function(x){var S=x.stack.pop();switch(l.DEBUG&&console.log(x.step,"SZPS[]",S),x.zp0=x.zp1=x.zp2=S){case 0:x.tZone||zu(x),x.z0=x.z1=x.z2=x.tZone;break;case 1:x.z0=x.z1=x.z2=x.gZone;break;default:throw new Error("Invalid zone pointer")}},function(x){x.loop=x.stack.pop(),l.DEBUG&&console.log(x.step,"SLOOP[]",x.loop)},function(x){l.DEBUG&&console.log(x.step,"RTG[]"),x.round=Xm},function(x){l.DEBUG&&console.log(x.step,"RTHG[]"),x.round=l2},function(x){var S=x.stack.pop();l.DEBUG&&console.log(x.step,"SMD[]",S),x.minDis=S/64},function(x){l.DEBUG&&console.log(x.step,"ELSE[]"),Km(x,!1)},function(x){var S=x.stack.pop();l.DEBUG&&console.log(x.step,"JMPR[]",S),x.ip+=S-1},function(x){var S=x.stack.pop();l.DEBUG&&console.log(x.step,"SCVTCI[]",S),x.cvCutIn=S/64},void 0,void 0,function(x){var S=x.stack;l.DEBUG&&console.log(x.step,"DUP[]"),S.push(S[S.length-1])},fd,function(x){l.DEBUG&&console.log(x.step,"CLEAR[]"),x.stack.length=0},function(x){var S=x.stack,C=S.pop(),k=S.pop();l.DEBUG&&console.log(x.step,"SWAP[]"),S.push(C),S.push(k)},function(x){var S=x.stack;l.DEBUG&&console.log(x.step,"DEPTH[]"),S.push(S.length)},function(x){var S=x.stack,C=S.pop();l.DEBUG&&console.log(x.step,"CINDEX[]",C),S.push(S[S.length-C])},function(x){var S=x.stack,C=S.pop();l.DEBUG&&console.log(x.step,"MINDEX[]",C),S.push(S.splice(S.length-C,1)[0])},void 0,void 0,void 0,function(x){var S=(k=x.stack).pop(),C=k.pop(),k=(l.DEBUG&&console.log(x.step,"LOOPCALL[]",S,C),x.ip),P=x.prog;x.prog=x.funcs[S];for(var F=0;F<C;F++)ya(x),l.DEBUG&&console.log(++x.step,F+1<C?"next loopcall":"done loopcall",F);x.ip=k,x.prog=P},function(x){var S=x.stack.pop(),C=(l.DEBUG&&console.log(x.step,"CALL[]",S),x.ip),k=x.prog;x.prog=x.funcs[S],ya(x),x.ip=C,x.prog=k,l.DEBUG&&console.log(++x.step,"returning from",S)},function(x){if(x.env!=="fpgm")throw new Error("FDEF not allowed here");var k=x.stack,S=x.prog,C=x.ip,k=k.pop(),P=C;for(l.DEBUG&&console.log(x.step,"FDEF[]",k);S[++C]!==45;);x.ip=C,x.funcs[k]=S.slice(P+1,C)},void 0,ry.bind(void 0,0),ry.bind(void 0,1),ny.bind(void 0,Oo),ny.bind(void 0,po),oy.bind(void 0,0),oy.bind(void 0,1),iy.bind(void 0,0),iy.bind(void 0,1),ay.bind(void 0,0),ay.bind(void 0,1),function(x){for(var S=x.stack,C=x.loop,k=x.fv,P=S.pop()/64,F=x.z2;C--;){var z=S.pop(),Z=F[z];l.DEBUG&&console.log(x.step,(1<x.loop?"loop "+(x.loop-C)+": ":"")+"SHPIX[]",z,P),k.setRelative(Z,Z,P),k.touch(Z)}x.loop=1},function(x){for(var S=x.stack,C=x.rp1,k=x.rp2,P=x.loop,F=x.z0[C],z=x.z1[k],Z=x.fv,se=x.dpv,ie=x.z2;P--;){var be=S.pop(),ke=ie[be];l.DEBUG&&console.log(x.step,(1<x.loop?"loop "+(x.loop-P)+": ":"")+"IP[]",be,C,"<->",k),Z.interpolate(ke,F,z,se),Z.touch(ke)}x.loop=1},sy.bind(void 0,0),sy.bind(void 0,1),function(x){for(var S=x.stack,C=x.rp0,k=x.z0[C],P=x.loop,F=x.fv,z=x.pv,Z=x.z1;P--;){var se=S.pop(),ie=Z[se];l.DEBUG&&console.log(x.step,(1<x.loop?"loop "+(x.loop-P)+": ":"")+"ALIGNRP[]",se),F.setRelative(ie,k,0,z),F.touch(ie)}x.loop=1},function(x){l.DEBUG&&console.log(x.step,"RTDG[]"),x.round=u2},uy.bind(void 0,0),uy.bind(void 0,1),function(x){var S=x.prog,C=x.ip,k=x.stack,P=S[++C];l.DEBUG&&console.log(x.step,"NPUSHB[]",P);for(var F=0;F<P;F++)k.push(S[++C]);x.ip=C},function(x){var S=x.ip,C=x.prog,k=x.stack,P=C[++S];l.DEBUG&&console.log(x.step,"NPUSHW[]",P);for(var F=0;F<P;F++){var z=C[++S]<<8|C[++S];32768&z&&(z=-(1+(65535^z))),k.push(z)}x.ip=S},function(x){var k=x.stack,S=(S=x.store)||(x.store=[]),C=k.pop(),k=k.pop();l.DEBUG&&console.log(x.step,"WS",C,k),S[k]=C},function(P){var S=P.stack,C=P.store,k=S.pop(),P=(l.DEBUG&&console.log(P.step,"RS",k),C&&C[k]||0);S.push(P)},function(x){var S=(C=x.stack).pop(),C=C.pop();l.DEBUG&&console.log(x.step,"WCVTP",S,C),x.cvt[C]=S/64},function(x){var S=x.stack,C=S.pop();l.DEBUG&&console.log(x.step,"RCVT",C),S.push(64*x.cvt[C])},ly.bind(void 0,0),ly.bind(void 0,1),void 0,cy.bind(void 0,0),cy.bind(void 0,1),function(x){l.DEBUG&&console.log(x.step,"MPPEM[]"),x.stack.push(x.ppem)},void 0,function(x){l.DEBUG&&console.log(x.step,"FLIPON[]"),x.autoFlip=!0},void 0,void 0,function(x){var S=x.stack,C=S.pop(),k=S.pop();l.DEBUG&&console.log(x.step,"LT[]",C,k),S.push(k<C?1:0)},function(x){var S=x.stack,C=S.pop(),k=S.pop();l.DEBUG&&console.log(x.step,"LTEQ[]",C,k),S.push(k<=C?1:0)},function(x){var S=x.stack,C=S.pop(),k=S.pop();l.DEBUG&&console.log(x.step,"GT[]",C,k),S.push(C<k?1:0)},function(x){var S=x.stack,C=S.pop(),k=S.pop();l.DEBUG&&console.log(x.step,"GTEQ[]",C,k),S.push(C<=k?1:0)},function(x){var S=x.stack,C=S.pop(),k=S.pop();l.DEBUG&&console.log(x.step,"EQ[]",C,k),S.push(C===k?1:0)},function(x){var S=x.stack,C=S.pop(),k=S.pop();l.DEBUG&&console.log(x.step,"NEQ[]",C,k),S.push(C!==k?1:0)},function(x){var S=x.stack,C=S.pop();l.DEBUG&&console.log(x.step,"ODD[]",C),S.push(Math.trunc(C)%2?1:0)},function(x){var S=x.stack,C=S.pop();l.DEBUG&&console.log(x.step,"EVEN[]",C),S.push(Math.trunc(C)%2?0:1)},function(x){var S=x.stack.pop();l.DEBUG&&console.log(x.step,"IF[]",S),S||(Km(x,!0),l.DEBUG&&console.log(x.step,"EIF[]"))},function(x){l.DEBUG&&console.log(x.step,"EIF[]")},function(x){var S=x.stack,C=S.pop(),k=S.pop();l.DEBUG&&console.log(x.step,"AND[]",C,k),S.push(C&&k?1:0)},function(x){var S=x.stack,C=S.pop(),k=S.pop();l.DEBUG&&console.log(x.step,"OR[]",C,k),S.push(C||k?1:0)},function(x){var S=x.stack,C=S.pop();l.DEBUG&&console.log(x.step,"NOT[]",C),S.push(C?0:1)},hd.bind(void 0,1),function(x){var S=x.stack.pop();l.DEBUG&&console.log(x.step,"SDB[]",S),x.deltaBase=S},function(x){var S=x.stack.pop();l.DEBUG&&console.log(x.step,"SDS[]",S),x.deltaShift=Math.pow(.5,S)},function(x){var S=x.stack,C=S.pop(),k=S.pop();l.DEBUG&&console.log(x.step,"ADD[]",C,k),S.push(k+C)},function(x){var S=x.stack,C=S.pop(),k=S.pop();l.DEBUG&&console.log(x.step,"SUB[]",C,k),S.push(k-C)},function(x){var S=x.stack,C=S.pop(),k=S.pop();l.DEBUG&&console.log(x.step,"DIV[]",C,k),S.push(64*k/C)},function(x){var S=x.stack,C=S.pop(),k=S.pop();l.DEBUG&&console.log(x.step,"MUL[]",C,k),S.push(k*C/64)},function(x){var S=x.stack,C=S.pop();l.DEBUG&&console.log(x.step,"ABS[]",C),S.push(Math.abs(C))},function(x){var S=x.stack,C=S.pop();l.DEBUG&&console.log(x.step,"NEG[]",C),S.push(-C)},function(x){var S=x.stack,C=S.pop();l.DEBUG&&console.log(x.step,"FLOOR[]",C),S.push(64*Math.floor(C/64))},function(x){var S=x.stack,C=S.pop();l.DEBUG&&console.log(x.step,"CEILING[]",C),S.push(64*Math.ceil(C/64))},Vu.bind(void 0,0),Vu.bind(void 0,1),Vu.bind(void 0,2),Vu.bind(void 0,3),void 0,void 0,void 0,void 0,function(x){var S=(C=x.stack).pop(),C=C.pop();l.DEBUG&&console.log(x.step,"WCVTF[]",S,C),x.cvt[C]=S*x.ppem/x.font.unitsPerEm},hd.bind(void 0,2),hd.bind(void 0,3),pd.bind(void 0,1),pd.bind(void 0,2),pd.bind(void 0,3),function(x){var S,C=x.stack.pop();switch(l.DEBUG&&console.log(x.step,"SROUND[]",C),x.round=Ym,192&C){case 0:S=.5;break;case 64:S=1;break;case 128:S=2;break;default:throw new Error("invalid SROUND value")}switch(x.srPeriod=S,48&C){case 0:x.srPhase=0;break;case 16:x.srPhase=.25*S;break;case 32:x.srPhase=.5*S;break;case 48:x.srPhase=.75*S;break;default:throw new Error("invalid SROUND value")}x.srThreshold=(C&=15)===0?0:(C/8-.5)*S},function(x){var S,C=x.stack.pop();switch(l.DEBUG&&console.log(x.step,"S45ROUND[]",C),x.round=Ym,192&C){case 0:S=Math.sqrt(2)/2;break;case 64:S=Math.sqrt(2);break;case 128:S=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(x.srPeriod=S,48&C){case 0:x.srPhase=0;break;case 16:x.srPhase=.25*S;break;case 32:x.srPhase=.5*S;break;case 48:x.srPhase=.75*S;break;default:throw new Error("invalid S45ROUND value")}x.srThreshold=(C&=15)===0?0:(C/8-.5)*S},void 0,void 0,function(x){l.DEBUG&&console.log(x.step,"ROFF[]"),x.round=s2},void 0,function(x){l.DEBUG&&console.log(x.step,"RUTG[]"),x.round=c2},function(x){l.DEBUG&&console.log(x.step,"RDTG[]"),x.round=d2},fd,fd,void 0,void 0,void 0,void 0,void 0,function(x){var S=x.stack.pop();l.DEBUG&&console.log(x.step,"SCANCTRL[]",S)},dy.bind(void 0,0),dy.bind(void 0,1),function(x){var S=x.stack,C=S.pop(),k=0;l.DEBUG&&console.log(x.step,"GETINFO[]",C),1&C&&(k=35),32&C&&(k|=4096),S.push(k)},void 0,function(x){var S=x.stack,C=S.pop(),k=S.pop(),P=S.pop();l.DEBUG&&console.log(x.step,"ROLL[]"),S.push(k),S.push(C),S.push(P)},function(x){var S=x.stack,C=S.pop(),k=S.pop();l.DEBUG&&console.log(x.step,"MAX[]",C,k),S.push(Math.max(k,C))},function(x){var S=x.stack,C=S.pop(),k=S.pop();l.DEBUG&&console.log(x.step,"MIN[]",C,k),S.push(Math.min(k,C))},function(x){var S=x.stack.pop();l.DEBUG&&console.log(x.step,"SCANTYPE[]",S)},function(x){var S=x.stack.pop(),C=x.stack.pop();switch(l.DEBUG&&console.log(x.step,"INSTCTRL[]",S,C),S){case 1:return void(x.inhibitGridFit=!!C);case 2:return void(x.ignoreCvt=!!C);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,ni.bind(void 0,1),ni.bind(void 0,2),ni.bind(void 0,3),ni.bind(void 0,4),ni.bind(void 0,5),ni.bind(void 0,6),ni.bind(void 0,7),ni.bind(void 0,8),oi.bind(void 0,1),oi.bind(void 0,2),oi.bind(void 0,3),oi.bind(void 0,4),oi.bind(void 0,5),oi.bind(void 0,6),oi.bind(void 0,7),oi.bind(void 0,8),ut.bind(void 0,0,0,0,0,0),ut.bind(void 0,0,0,0,0,1),ut.bind(void 0,0,0,0,0,2),ut.bind(void 0,0,0,0,0,3),ut.bind(void 0,0,0,0,1,0),ut.bind(void 0,0,0,0,1,1),ut.bind(void 0,0,0,0,1,2),ut.bind(void 0,0,0,0,1,3),ut.bind(void 0,0,0,1,0,0),ut.bind(void 0,0,0,1,0,1),ut.bind(void 0,0,0,1,0,2),ut.bind(void 0,0,0,1,0,3),ut.bind(void 0,0,0,1,1,0),ut.bind(void 0,0,0,1,1,1),ut.bind(void 0,0,0,1,1,2),ut.bind(void 0,0,0,1,1,3),ut.bind(void 0,0,1,0,0,0),ut.bind(void 0,0,1,0,0,1),ut.bind(void 0,0,1,0,0,2),ut.bind(void 0,0,1,0,0,3),ut.bind(void 0,0,1,0,1,0),ut.bind(void 0,0,1,0,1,1),ut.bind(void 0,0,1,0,1,2),ut.bind(void 0,0,1,0,1,3),ut.bind(void 0,0,1,1,0,0),ut.bind(void 0,0,1,1,0,1),ut.bind(void 0,0,1,1,0,2),ut.bind(void 0,0,1,1,0,3),ut.bind(void 0,0,1,1,1,0),ut.bind(void 0,0,1,1,1,1),ut.bind(void 0,0,1,1,1,2),ut.bind(void 0,0,1,1,1,3),ut.bind(void 0,1,0,0,0,0),ut.bind(void 0,1,0,0,0,1),ut.bind(void 0,1,0,0,0,2),ut.bind(void 0,1,0,0,0,3),ut.bind(void 0,1,0,0,1,0),ut.bind(void 0,1,0,0,1,1),ut.bind(void 0,1,0,0,1,2),ut.bind(void 0,1,0,0,1,3),ut.bind(void 0,1,0,1,0,0),ut.bind(void 0,1,0,1,0,1),ut.bind(void 0,1,0,1,0,2),ut.bind(void 0,1,0,1,0,3),ut.bind(void 0,1,0,1,1,0),ut.bind(void 0,1,0,1,1,1),ut.bind(void 0,1,0,1,1,2),ut.bind(void 0,1,0,1,1,3),ut.bind(void 0,1,1,0,0,0),ut.bind(void 0,1,1,0,0,1),ut.bind(void 0,1,1,0,0,2),ut.bind(void 0,1,1,0,0,3),ut.bind(void 0,1,1,0,1,0),ut.bind(void 0,1,1,0,1,1),ut.bind(void 0,1,1,0,1,2),ut.bind(void 0,1,1,0,1,3),ut.bind(void 0,1,1,1,0,0),ut.bind(void 0,1,1,1,0,1),ut.bind(void 0,1,1,1,0,2),ut.bind(void 0,1,1,1,0,3),ut.bind(void 0,1,1,1,1,0),ut.bind(void 0,1,1,1,1,1),ut.bind(void 0,1,1,1,1,2),ut.bind(void 0,1,1,1,1,3)],m2=Array.from||function(x){return x.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[^\uD800-\uDFFF]|./g)||[]};function Wt(x){(x=x||{}).empty||(ma(x.familyName,"When creating a new Font object, familyName is required."),ma(x.styleName,"When creating a new Font object, styleName is required."),ma(x.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),ma(x.ascender,"When creating a new Font object, ascender is required."),ma(x.descender,"When creating a new Font object, descender is required."),ma(x.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:x.familyName||" "},fontSubfamily:{en:x.styleName||" "},fullName:{en:x.fullName||x.familyName+" "+x.styleName},postScriptName:{en:x.postScriptName||(x.familyName+x.styleName).replace(/\s/g,"")},designer:{en:x.designer||" "},designerURL:{en:x.designerURL||" "},manufacturer:{en:x.manufacturer||" "},manufacturerURL:{en:x.manufacturerURL||" "},license:{en:x.license||" "},licenseURL:{en:x.licenseURL||" "},version:{en:x.version||"Version 0.1"},description:{en:x.description||" "},copyright:{en:x.copyright||" "},trademark:{en:x.trademark||" "}},this.unitsPerEm=x.unitsPerEm||1e3,this.ascender=x.ascender,this.descender=x.descender,this.createdTimestamp=x.createdTimestamp,this.tables={os2:{usWeightClass:x.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:x.widthClass||this.usWidthClasses.MEDIUM,fsSelection:x.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new dt.GlyphSet(this,x.glyphs||[]),this.encoding=new Ce(this),this.position=new Gu(this),this.substitution=new ho(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting||(this.outlinesFormat==="truetype"?this._hinting=new $m(this):void 0)}})}function hy(x,S){var C,k=JSON.stringify(x),P=256;for(C in S){var F=parseInt(C);if(F&&!(F<256)){if(JSON.stringify(S[C])===k)return F;P<=F&&(P=F+1)}}return S[P]=x,P}Wt.prototype.hasChar=function(x){return this.encoding.charToGlyphIndex(x)!==null},Wt.prototype.charToGlyphIndex=function(x){return this.encoding.charToGlyphIndex(x)},Wt.prototype.charToGlyph=function(x){return x=this.charToGlyphIndex(x),this.glyphs.get(x)||this.glyphs.get(0)},Wt.prototype.stringToGlyphs=function(x,S){S=S||this.defaultRenderOptions;for(var C=m2(x),k=[],P=0;P<C.length;P+=1){var F=C[P];k.push(this.charToGlyphIndex(F))}var z=k.length;if(S.features){var x=S.script||this.substitution.getDefaultScriptName(),Z=[];S.features.liga&&(Z=Z.concat(this.substitution.getFeature("liga",x,S.language))),S.features.rlig&&(Z=Z.concat(this.substitution.getFeature("rlig",x,S.language)));for(var se=0;se<z;se+=1)for(var ie=0;ie<Z.length;ie++){for(var be=Z[ie],ke=be.sub,Ee=ke.length,fe=0;fe<Ee&&ke[fe]===k[se+fe];)fe++;fe===Ee&&(k.splice(se,Ee,be.by),z=z-Ee+1)}}for(var Ge=new Array(z),Ae=this.glyphs.get(0),Ne=0;Ne<z;Ne+=1)Ge[Ne]=this.glyphs.get(k[Ne])||Ae;return Ge},Wt.prototype.nameToGlyphIndex=function(x){return this.glyphNames.nameToGlyphIndex(x)},Wt.prototype.nameToGlyph=function(x){return x=this.nameToGlyphIndex(x),this.glyphs.get(x)||this.glyphs.get(0)},Wt.prototype.glyphIndexToName=function(x){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(x):""},Wt.prototype.getKerningValue=function(x,S){x=x.index||x,S=S.index||S;var C=this.position.defaultKerningTables;return C?this.position.getKerningValue(C,x,S):this.kerningPairs[x+","+S]||0},Wt.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},Wt.prototype.forEachGlyph=function(x,S,C,k,P,F){S=S!==void 0?S:0,C=C!==void 0?C:0,P=P||this.defaultRenderOptions;var z,Z=1/this.unitsPerEm*(k=k!==void 0?k:72),se=this.stringToGlyphs(x,P);P.kerning&&(x=P.script||this.position.getDefaultScriptName(),z=this.position.getKerningTables(x,P.language));for(var ie=0;ie<se.length;ie+=1){var be=se[ie];F.call(this,be,S,C,k,P),be.advanceWidth&&(S+=be.advanceWidth*Z),P.kerning&&ie<se.length-1&&(S+=(z?this.position.getKerningValue(z,be.index,se[ie+1].index):this.getKerningValue(be,se[ie+1]))*Z),P.letterSpacing?S+=P.letterSpacing*k:P.tracking&&(S+=P.tracking/1e3*k)}return S},Wt.prototype.getPath=function(x,S,C,k,P){var F=new X;return this.forEachGlyph(x,S,C,k,P,function(z,Z,se,ie){z=z.getPath(Z,se,ie,P,this),F.extend(z)}),F},Wt.prototype.getPaths=function(x,S,C,k,P){var F=[];return this.forEachGlyph(x,S,C,k,P,function(z,Z,se,ie){z=z.getPath(Z,se,ie,P,this),F.push(z)}),F},Wt.prototype.getAdvanceWidth=function(x,S,C){return this.forEachGlyph(x,0,0,S,C,function(){})},Wt.prototype.draw=function(x,S,C,k,P,F){this.getPath(S,C,k,P,F).draw(x)},Wt.prototype.drawPoints=function(x,S,C,k,P,F){this.forEachGlyph(S,C,k,P,F,function(z,Z,se,ie){z.drawPoints(x,Z,se,ie)})},Wt.prototype.drawMetrics=function(x,S,C,k,P,F){this.forEachGlyph(S,C,k,P,F,function(z,Z,se,ie){z.drawMetrics(x,Z,se,ie)})},Wt.prototype.getEnglishName=function(x){if(x=this.names[x],x)return x.en},Wt.prototype.validate=function(){var x=this;function S(C){C=x.getEnglishName(C),C&&C.trim().length}S("fontFamily"),S("weightName"),S("manufacturer"),S("copyright"),S("version"),this.unitsPerEm},Wt.prototype.toTables=function(){return o2.fontToTable(this)},Wt.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},Wt.prototype.toArrayBuffer=function(){for(var x=this.toTables().encode(),S=new ArrayBuffer(x.length),C=new Uint8Array(S),k=0;k<x.length;k++)C[k]=x[k];return S},Wt.prototype.download=function(x){var S=this.getEnglishName("fontFamily"),C=this.getEnglishName("fontSubfamily"),k=(x=x||S.replace(/\s/g,"")+"-"+C+".otf",this.toArrayBuffer());typeof window<"u"?(window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,k.byteLength,function(P){P.root.getFile(x,{create:!0},function(F){F.createWriter(function(z){var Z=new DataView(k),Z=new Blob([Z],{type:"font/opentype"});z.write(Z),z.addEventListener("writeend",function(){location.href=F.toURL()},!1)})})},function(P){throw new Error(P.name+": "+P.message)})):(S=e("fs"),C=function(P){for(var F=new u(P.byteLength),z=new Uint8Array(P),Z=0;Z<F.length;++Z)F[Z]=z[Z];return F}(k),S.writeFileSync(x,C))},Wt.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},Wt.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},Wt.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var y2={make:function(x,S){var C=new Te.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:x.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:x.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*x.axes.length}]);C.offsetToData=C.sizeOf();for(var k,P,F,z=0;z<x.axes.length;z++)C.fields=C.fields.concat((k=z,P=x.axes[z],F=S,F=hy(P.name,S),[{name:"tag_"+k,type:"TAG",value:P.tag},{name:"minValue_"+k,type:"FIXED",value:P.minValue<<16},{name:"defaultValue_"+k,type:"FIXED",value:P.defaultValue<<16},{name:"maxValue_"+k,type:"FIXED",value:P.maxValue<<16},{name:"flags_"+k,type:"USHORT",value:0},{name:"nameID_"+k,type:"USHORT",value:F}]));for(var Z=0;Z<x.instances.length;Z++)C.fields=C.fields.concat(function(se,ie,be,ke){for(var Ee=[{name:"nameID_"+se,type:"USHORT",value:hy(ie.name,ke)},{name:"flags_"+se,type:"USHORT",value:0}],fe=0;fe<be.length;++fe){var Ge=be[fe].tag;Ee.push({name:"axis_"+se+" "+Ge,type:"FIXED",value:ie.coordinates[Ge]<<16})}return Ee}(Z,x.instances[Z],x.axes,S));return C},parse:function(x,S,C){for(var k,P,F,z,Z=new je.Parser(x,S),se=Z.parseULong(),ie=(O.argument(se===65536,"Unsupported fvar table version."),Z.parseOffset16()),be=(Z.skip("uShort",1),Z.parseUShort()),ke=Z.parseUShort(),Ee=Z.parseUShort(),fe=Z.parseUShort(),Ge=[],Ae=0;Ae<be;Ae++)Ge.push((k=x,P=S+ie+Ae*ke,F=C,z={},k=new je.Parser(k,P),z.tag=k.parseTag(),z.minValue=k.parseFixed(),z.defaultValue=k.parseFixed(),z.maxValue=k.parseFixed(),k.skip("uShort",1),z.name=F[k.parseUShort()]||{},z));for(var Ne=[],Me=S+ie+be*ke,Re=0;Re<Ee;Re++)Ne.push(function(ft,St,pt,vt){var Tt={},$t=new je.Parser(ft,St);Tt.name=vt[$t.parseUShort()]||{},$t.skip("uShort",1),Tt.coordinates={};for(var dr=0;dr<pt.length;++dr)Tt.coordinates[pt[dr].tag]=$t.parseFixed();return Tt}(x,Me+Re*fe,Ge,C));return{axes:Ge,instances:Ne}}},Kn=new Array(10);Kn[1]=function(){var x=this.offset+this.relativeOffset,S=this.parseUShort();return S===1?{posFormat:1,coverage:this.parsePointer(_e.coverage),value:this.parseValueRecord()}:S===2?{posFormat:2,coverage:this.parsePointer(_e.coverage),values:this.parseValueRecordList()}:void O.assert(!1,"0x"+x.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},Kn[2]=function(){var x,S,C,k,F=this.offset+this.relativeOffset,P=this.parseUShort(),F=(O.assert(P===1||P===2,"0x"+F.toString(16)+": GPOS lookup type 2 format must be 1 or 2."),this.parsePointer(_e.coverage)),z=this.parseUShort(),Z=this.parseUShort();return P===1?{posFormat:P,coverage:F,valueFormat1:z,valueFormat2:Z,pairSets:this.parseList(_e.pointer(_e.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(z),value2:this.parseValueRecord(Z)}})))}:P===2?(x=this.parsePointer(_e.classDef),S=this.parsePointer(_e.classDef),C=this.parseUShort(),k=this.parseUShort(),{posFormat:P,coverage:F,valueFormat1:z,valueFormat2:Z,classDef1:x,classDef2:S,class1Count:C,class2Count:k,classRecords:this.parseList(C,_e.list(k,function(){return{value1:this.parseValueRecord(z),value2:this.parseValueRecord(Z)}}))}):void 0},Kn[3]=function(){return{error:"GPOS Lookup 3 not supported"}},Kn[4]=function(){return{error:"GPOS Lookup 4 not supported"}},Kn[5]=function(){return{error:"GPOS Lookup 5 not supported"}},Kn[6]=function(){return{error:"GPOS Lookup 6 not supported"}},Kn[7]=function(){return{error:"GPOS Lookup 7 not supported"}},Kn[8]=function(){return{error:"GPOS Lookup 8 not supported"}},Kn[9]=function(){return{error:"GPOS Lookup 9 not supported"}};var g2=new Array(10),v2={parse:function(x,S){return S=(x=new _e(x,S=S||0)).parseVersion(1),O.argument(S===1||S===1.1,"Unsupported GPOS table version "+S),S===1?{version:S,scripts:x.parseScriptList(),features:x.parseFeatureList(),lookups:x.parseLookupList(Kn)}:{version:S,scripts:x.parseScriptList(),features:x.parseFeatureList(),lookups:x.parseLookupList(Kn),variations:x.parseFeatureVariationsList()}},make:function(x){return new Te.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Te.ScriptList(x.scripts)},{name:"features",type:"TABLE",value:new Te.FeatureList(x.features)},{name:"lookups",type:"TABLE",value:new Te.LookupList(x.lookups,g2)}])}},b2={parse:function(x,S){if(x=new je.Parser(x,S),(S=x.parseUShort())===0){var C=x,k={},ke=(C.skip("uShort"),C.parseUShort()),P=(O.argument(ke===0,"Unsupported kern sub-table version."),C.skip("uShort",2),C.parseUShort());C.skip("uShort",3);for(var F=0;F<P;F+=1){var z=C.parseUShort(),Z=C.parseUShort(),se=C.parseShort();k[z+","+Z]=se}return k}if(S!==1)throw new Error("Unsupported kern table version ("+S+").");var ie=x,be={},ke=(ie.skip("uShort"),1<ie.parseULong()&&console.warn("Only the first kern subtable is supported."),ie.skip("uLong"),255&ie.parseUShort());if(ie.skip("uShort"),ke==0){var Ee=ie.parseUShort();ie.skip("uShort",3);for(var fe=0;fe<Ee;fe+=1){var Ge=ie.parseUShort(),Ae=ie.parseUShort(),Ne=ie.parseShort();be[Ge+","+Ae]=Ne}}return be}},x2={parse:function(x,S,C,k){for(var P=new je.Parser(x,S),F=k?P.parseUShort:P.parseULong,z=[],Z=0;Z<C+1;Z+=1){var se=F.call(P);k&&(se*=2),z.push(se)}return z}};function w2(x,S){e("fs").readFile(x,function(C,k){if(C)return S(C.message);S(null,Vm(k))})}function _2(x,S){var C=new XMLHttpRequest;C.open("get",x,!0),C.responseType="arraybuffer",C.onload=function(){return C.response?S(null,C.response):S("Font could not be loaded: "+C.statusText)},C.onerror=function(){S("Font could not be loaded")},C.send()}function py(x,S){for(var C=[],k=12,P=0;P<S;P+=1){var F=je.getTag(x,k),z=je.getULong(x,k+4),Z=je.getULong(x,k+8),se=je.getULong(x,k+12);C.push({tag:F,checksum:z,offset:Z,length:se,compression:!1}),k+=16}return C}function vr(C,S){if(S.compression!=="WOFF")return{data:C,offset:S.offset};var C=new Uint8Array(C.buffer,S.offset+2,S.compressedLength-2),k=new Uint8Array(S.length);if(B(C,k),k.byteLength!==S.length)throw new Error("Decompression error: "+S.tag+" decompressed length doesn't match recorded length");return{data:new DataView(k.buffer,0),offset:0}}function md(Re){var S,C,k,P,F,z,Z,se,ie,be,ke,Ee,fe,Ge,Ae=new Wt({empty:!0}),Ne=new DataView(Re,0),Me=[],Re=je.getTag(Ne,0);if(Re===String.fromCharCode(0,1,0,0)||Re==="true"||Re==="typ1")Ae.outlinesFormat="truetype",Me=py(Ne,k=je.getUShort(Ne,4));else if(Re==="OTTO")Ae.outlinesFormat="cff",Me=py(Ne,k=je.getUShort(Ne,4));else{if(Re!=="wOFF")throw new Error("Unsupported OpenType signature "+Re);var ft=je.getTag(Ne,4);if(ft===String.fromCharCode(0,1,0,0))Ae.outlinesFormat="truetype";else{if(ft!=="OTTO")throw new Error("Unsupported OpenType flavor "+Re);Ae.outlinesFormat="cff"}Me=function(Qt,Gt){for(var Jr=[],nr=44,Vr=0;Vr<Gt;Vr+=1){var Zt=je.getTag(Qt,nr),Dr=je.getULong(Qt,nr+4),Es=je.getULong(Qt,nr+8),ga=je.getULong(Qt,nr+12),my=void 0,my=Es<ga&&"WOFF";Jr.push({tag:Zt,offset:Dr,compression:my,compressedLength:Es,length:ga}),nr+=20}return Jr}(Ne,k=je.getUShort(Ne,12))}for(var St=0;St<k;St+=1){var pt=Me[St],vt=void 0;switch(pt.tag){case"cmap":vt=vr(Ne,pt),Ae.tables.cmap=K.parse(vt.data,vt.offset),Ae.encoding=new Oe(Ae.tables.cmap);break;case"cvt ":vt=vr(Ne,pt),Ge=new je.Parser(vt.data,vt.offset),Ae.tables.cvt=Ge.parseShortList(pt.length/2);break;case"fvar":F=pt;break;case"fpgm":vt=vr(Ne,pt),Ge=new je.Parser(vt.data,vt.offset),Ae.tables.fpgm=Ge.parseByteList(pt.length);break;case"head":vt=vr(Ne,pt),Ae.tables.head=xs.parse(vt.data,vt.offset),Ae.unitsPerEm=Ae.tables.head.unitsPerEm,S=Ae.tables.head.indexToLocFormat;break;case"hhea":vt=vr(Ne,pt),Ae.tables.hhea=he.parse(vt.data,vt.offset),Ae.ascender=Ae.tables.hhea.ascender,Ae.descender=Ae.tables.hhea.descender,Ae.numberOfHMetrics=Ae.tables.hhea.numberOfHMetrics;break;case"hmtx":ie=pt;break;case"ltag":vt=vr(Ne,pt),C=nt.parse(vt.data,vt.offset);break;case"maxp":vt=vr(Ne,pt),Ae.tables.maxp=We.parse(vt.data,vt.offset),Ae.numGlyphs=Ae.tables.maxp.numGlyphs;break;case"name":Ee=pt;break;case"OS/2":vt=vr(Ne,pt),Ae.tables.os2=Pr.parse(vt.data,vt.offset);break;case"post":vt=vr(Ne,pt),Ae.tables.post=Pm.parse(vt.data,vt.offset),Ae.glyphNames=new Ye(Ae.tables.post);break;case"prep":vt=vr(Ne,pt),Ge=new je.Parser(vt.data,vt.offset),Ae.tables.prep=Ge.parseByteList(pt.length);break;case"glyf":z=pt;break;case"loca":ke=pt;break;case"CFF ":P=pt;break;case"kern":be=pt;break;case"GPOS":Z=pt;break;case"GSUB":se=pt;break;case"meta":fe=pt}}if(ft=vr(Ne,Ee),Ae.tables.name=Cn.parse(ft.data,ft.offset,C),Ae.names=Ae.tables.name,z&&ke)Re=S===0,ft=vr(Ne,ke),ft=x2.parse(ft.data,ft.offset,Ae.numGlyphs,Re),Re=vr(Ne,z),Ae.glyphs=qm.parse(Re.data,Re.offset,ft,Ae);else{if(!P)throw new Error("Font doesn't contain TrueType or CFF outlines.");Re=vr(Ne,P),bs.parse(Re.data,Re.offset,Ae)}for(var ft=vr(Ne,ie),Tt=(qe.parse(ft.data,ft.offset,Ae.numberOfHMetrics,Ae.numGlyphs,Ae.glyphs),Ae),$t=Tt.tables.cmap.glyphIndexMap,dr=Object.keys($t),br=0;br<dr.length;br+=1){var Qr,Zr=dr[br],Qn=$t[Zr];(Qr=Tt.glyphs.get(Qn)).addUnicode(parseInt(Zr))}for(var Ht=0;Ht<Tt.glyphs.length;Ht+=1)Qr=Tt.glyphs.get(Ht),Tt.cffEncoding?Tt.isCIDFont?Qr.name="gid"+Ht:Qr.name=Tt.cffEncoding.charset[Ht]:Tt.glyphNames.names&&(Qr.name=Tt.glyphNames.glyphIndexToName(Ht));return be?(Re=vr(Ne,be),Ae.kerningPairs=b2.parse(Re.data,Re.offset)):Ae.kerningPairs={},Z&&(ft=vr(Ne,Z),Ae.tables.gpos=v2.parse(ft.data,ft.offset),Ae.position.init()),se&&(Re=vr(Ne,se),Ae.tables.gsub=Dm.parse(Re.data,Re.offset)),F&&(ft=vr(Ne,F),Ae.tables.fvar=y2.parse(ft.data,ft.offset,Ae.names)),fe&&(Re=vr(Ne,fe),Ae.tables.meta=Om.parse(Re.data,Re.offset),Ae.metas=Ae.tables.meta),Ae}l.Font=Wt,l.Glyph=rt,l.Path=X,l.BoundingBox=V,l._parse=je,l.parse=md,l.load=function(x,S){(typeof window>"u"?w2:_2)(x,function(C,k){if(C)return S(C);var P;try{P=md(k)}catch(F){return S(F,null)}return S(null,P)})},l.loadSync=function(x){return md(Vm(e("fs").readFileSync(x)))},Object.defineProperty(l,"__esModule",{value:!0})},s(typeof i=="object"&&o!==void 0?i:a.opentype={})}).call(this,e("buffer").Buffer)},{buffer:4,fs:2}],242:[function(e,o,i){(function(u){function a(h,p){for(var c=0,d=h.length-1;0<=d;d--){var f=h[d];f==="."?h.splice(d,1):f===".."?(h.splice(d,1),c++):c&&(h.splice(d,1),c--)}if(p)for(;c--;)h.unshift("..");return h}function s(h,p){if(h.filter)return h.filter(p);for(var c=[],d=0;d<h.length;d++)p(h[d],d,h)&&c.push(h[d]);return c}i.resolve=function(){for(var h="",p=!1,c=arguments.length-1;-1<=c&&!p;c--){var d=0<=c?arguments[c]:u.cwd();if(typeof d!="string")throw new TypeError("Arguments to path.resolve must be strings");d&&(h=d+"/"+h,p=d.charAt(0)==="/")}return(p?"/":"")+(h=a(s(h.split("/"),function(f){return!!f}),!p).join("/"))||"."},i.normalize=function(h){var p=i.isAbsolute(h),c=l(h,-1)==="/";return(h=(h=a(s(h.split("/"),function(d){return!!d}),!p).join("/"))||p?h:".")&&c&&(h+="/"),(p?"/":"")+h},i.isAbsolute=function(h){return h.charAt(0)==="/"},i.join=function(){var h=Array.prototype.slice.call(arguments,0);return i.normalize(s(h,function(p,c){if(typeof p!="string")throw new TypeError("Arguments to path.join must be strings");return p}).join("/"))},i.relative=function(h,p){function c(b){for(var w=0;w<b.length&&b[w]==="";w++);for(var _=b.length-1;0<=_&&b[_]==="";_--);return _<w?[]:b.slice(w,_-w+1)}h=i.resolve(h).substr(1),p=i.resolve(p).substr(1);for(var d=c(h.split("/")),f=c(p.split("/")),m=Math.min(d.length,f.length),y=m,g=0;g<m;g++)if(d[g]!==f[g]){y=g;break}for(var v=[],g=y;g<d.length;g++)v.push("..");return(v=v.concat(f.slice(y))).join("/")},i.sep="/",i.delimiter=":",i.dirname=function(h){if(typeof h!="string"&&(h+=""),h.length===0)return".";for(var p=h.charCodeAt(0)===47,c=-1,d=!0,f=h.length-1;1<=f;--f)if(h.charCodeAt(f)===47){if(!d){c=f;break}}else d=!1;return c===-1?p?"/":".":p&&c===1?"/":h.slice(0,c)},i.basename=function(h,p){return h=function(c){typeof c!="string"&&(c+="");for(var d=0,f=-1,m=!0,y=c.length-1;0<=y;--y)if(c.charCodeAt(y)===47){if(!m){d=y+1;break}}else f===-1&&(m=!1,f=y+1);return f===-1?"":c.slice(d,f)}(h),h=p&&h.substr(-1*p.length)===p?h.substr(0,h.length-p.length):h},i.extname=function(h){typeof h!="string"&&(h+="");for(var p=-1,c=0,d=-1,f=!0,m=0,y=h.length-1;0<=y;--y){var g=h.charCodeAt(y);if(g===47){if(f)continue;c=y+1;break}d===-1&&(f=!1,d=y+1),g===46?p===-1?p=y:m!==1&&(m=1):p!==-1&&(m=-1)}return p===-1||d===-1||m===0||m===1&&p===d-1&&p===c+1?"":h.slice(p,d)};var l="ab".substr(-1)==="b"?function(h,p,c){return h.substr(p,c)}:function(h,p,c){return p<0&&(p=h.length+p),h.substr(p,c)}}).call(this,e("_process"))},{_process:243}],243:[function(e,s,i){var u,a,s=s.exports={};function l(){throw new Error("setTimeout has not been defined")}function h(){throw new Error("clearTimeout has not been defined")}try{u=typeof setTimeout=="function"?setTimeout:l}catch{u=l}try{a=typeof clearTimeout=="function"?clearTimeout:h}catch{a=h}function p(w){if(u===setTimeout)return setTimeout(w,0);if((u===l||!u)&&setTimeout)return(u=setTimeout)(w,0);try{return u(w,0)}catch{try{return u.call(null,w,0)}catch{return u.call(this,w,0)}}}var c,d=[],f=!1,m=-1;function y(){f&&c&&(f=!1,c.length?d=c.concat(d):m=-1,d.length&&g())}function g(){if(!f){for(var w=p(y),_=(f=!0,d.length);_;){for(c=d,d=[];++m<_;)c&&c[m].run();m=-1,_=d.length}c=null,f=!1,function(j){if(a===clearTimeout)return clearTimeout(j);if((a===h||!a)&&clearTimeout)return(a=clearTimeout)(j);try{a(j)}catch{try{return a.call(null,j)}catch{return a.call(this,j)}}}(w)}}function v(w,_){this.fun=w,this.array=_}function b(){}s.nextTick=function(w){var _=new Array(arguments.length-1);if(1<arguments.length)for(var j=1;j<arguments.length;j++)_[j-1]=arguments[j];d.push(new v(w,_)),d.length!==1||f||p(g)},v.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=b,s.addListener=b,s.once=b,s.off=b,s.removeListener=b,s.removeAllListeners=b,s.emit=b,s.prependListener=b,s.prependOnceListener=b,s.listeners=function(w){return[]},s.binding=function(w){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(w){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},{}],244:[function(e,o,i){o=function(u){var a,s=Object.prototype,l=s.hasOwnProperty,E=typeof Symbol=="function"?Symbol:{},h=E.iterator||"@@iterator",p=E.asyncIterator||"@@asyncIterator",c=E.toStringTag||"@@toStringTag";function d(H,U,G,Y){var X,te,A,O,U=U&&U.prototype instanceof w?U:w,U=Object.create(U.prototype),Y=new N(Y||[]);return U._invoke=(X=H,te=G,A=Y,O=m,function(J,ae){if(O===g)throw new Error("Generator is already running");if(O===v){if(J==="throw")throw ae;return q()}for(A.method=J,A.arg=ae;;){var ue=A.delegate;if(ue&&(ue=function de(ne,le){var me=ne.iterator[le.method];if(me===a){if(le.delegate=null,le.method==="throw"){if(ne.iterator.return&&(le.method="return",le.arg=a,de(ne,le),le.method==="throw"))return b;le.method="throw",le.arg=new TypeError("The iterator does not provide a 'throw' method")}return b}if(me=f(me,ne.iterator,le.arg),me.type==="throw")return le.method="throw",le.arg=me.arg,le.delegate=null,b;if(me=me.arg,!me)return le.method="throw",le.arg=new TypeError("iterator result is not an object"),le.delegate=null,b;{if(!me.done)return me;le[ne.resultName]=me.value,le.next=ne.nextLoc,le.method!=="return"&&(le.method="next",le.arg=a)}return le.delegate=null,b}(ue,A),ue)){if(ue===b)continue;return ue}if(A.method==="next")A.sent=A._sent=A.arg;else if(A.method==="throw"){if(O===m)throw O=v,A.arg;A.dispatchException(A.arg)}else A.method==="return"&&A.abrupt("return",A.arg);if(O=g,ue=f(X,te,A),ue.type==="normal"){if(O=A.done?v:y,ue.arg!==b)return{value:ue.arg,done:A.done}}else ue.type==="throw"&&(O=v,A.method="throw",A.arg=ue.arg)}}),U}function f(H,B,G){try{return{type:"normal",arg:H.call(B,G)}}catch(V){return{type:"throw",arg:V}}}u.wrap=d;var m="suspendedStart",y="suspendedYield",g="executing",v="completed",b={};function w(){}function _(){}function j(){}var E={},T=(E[h]=function(){return this},Object.getPrototypeOf),T=T&&T(T(W([]))),R=(T&&T!==s&&l.call(T,h)&&(E=T),j.prototype=w.prototype=Object.create(E));function M(H){["next","throw","return"].forEach(function(B){H[B]=function(G){return this._invoke(B,G)}})}function I(H){var B;this._invoke=function(G,V){function X(){return new Promise(function(te,A){(function O(de,Y,J,ae){var ue,de=f(H[de],H,Y);if(de.type!=="throw")return(Y=(ue=de.arg).value)&&typeof Y=="object"&&l.call(Y,"__await")?Promise.resolve(Y.__await).then(function(ne){O("next",ne,J,ae)},function(ne){O("throw",ne,J,ae)}):Promise.resolve(Y).then(function(ne){ue.value=ne,J(ue)},function(ne){return O("throw",ne,J,ae)});ae(de.arg)})(G,V,te,A)})}return B=B?B.then(X,X):X()}}function D(H){var B={tryLoc:H[0]};1 in H&&(B.catchLoc=H[1]),2 in H&&(B.finallyLoc=H[2],B.afterLoc=H[3]),this.tryEntries.push(B)}function L(H){var B=H.completion||{};B.type="normal",delete B.arg,H.completion=B}function N(H){this.tryEntries=[{tryLoc:"root"}],H.forEach(D,this),this.reset(!0)}function W(H){if(H){var B,G=H[h];if(G)return G.call(H);if(typeof H.next=="function")return H;if(!isNaN(H.length))return B=-1,(G=function V(){for(;++B<H.length;)if(l.call(H,B))return V.value=H[B],V.done=!1,V;return V.value=a,V.done=!0,V}).next=G}return{next:q}}function q(){return{value:a,done:!0}}return(_.prototype=R.constructor=j).constructor=_,j[c]=_.displayName="GeneratorFunction",u.isGeneratorFunction=function(H){return H=typeof H=="function"&&H.constructor,!!H&&(H===_||(H.displayName||H.name)==="GeneratorFunction")},u.mark=function(H){return Object.setPrototypeOf?Object.setPrototypeOf(H,j):(H.__proto__=j,c in H||(H[c]="GeneratorFunction")),H.prototype=Object.create(R),H},u.awrap=function(H){return{__await:H}},M(I.prototype),I.prototype[p]=function(){return this},u.AsyncIterator=I,u.async=function(H,B,G,V){var X=new I(d(H,B,G,V));return u.isGeneratorFunction(B)?X:X.next().then(function(te){return te.done?te.value:X.next()})},M(R),R[c]="Generator",R[h]=function(){return this},R.toString=function(){return"[object Generator]"},u.keys=function(H){var B,G=[];for(B in H)G.push(B);return G.reverse(),function V(){for(;G.length;){var X=G.pop();if(X in H)return V.value=X,V.done=!1,V}return V.done=!0,V}},u.values=W,N.prototype={constructor:N,reset:function(H){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(L),!H)for(var B in this)B.charAt(0)==="t"&&l.call(this,B)&&!isNaN(+B.slice(1))&&(this[B]=a)},stop:function(){this.done=!0;var H=this.tryEntries[0].completion;if(H.type==="throw")throw H.arg;return this.rval},dispatchException:function(H){if(this.done)throw H;var B=this;function G(U,Y){return te.type="throw",te.arg=H,B.next=U,Y&&(B.method="next",B.arg=a),!!Y}for(var V=this.tryEntries.length-1;0<=V;--V){var X=this.tryEntries[V],te=X.completion;if(X.tryLoc==="root")return G("end");if(X.tryLoc<=this.prev){var A=l.call(X,"catchLoc"),O=l.call(X,"finallyLoc");if(A&&O){if(this.prev<X.catchLoc)return G(X.catchLoc,!0);if(this.prev<X.finallyLoc)return G(X.finallyLoc)}else if(A){if(this.prev<X.catchLoc)return G(X.catchLoc,!0)}else{if(!O)throw new Error("try statement without catch or finally");if(this.prev<X.finallyLoc)return G(X.finallyLoc)}}}},abrupt:function(H,B){for(var G=this.tryEntries.length-1;0<=G;--G){var V=this.tryEntries[G];if(V.tryLoc<=this.prev&&l.call(V,"finallyLoc")&&this.prev<V.finallyLoc){var X=V;break}}var te=(X=X&&(H==="break"||H==="continue")&&X.tryLoc<=B&&B<=X.finallyLoc?null:X)?X.completion:{};return te.type=H,te.arg=B,X?(this.method="next",this.next=X.finallyLoc,b):this.complete(te)},complete:function(H,B){if(H.type==="throw")throw H.arg;return H.type==="break"||H.type==="continue"?this.next=H.arg:H.type==="return"?(this.rval=this.arg=H.arg,this.method="return",this.next="end"):H.type==="normal"&&B&&(this.next=B),b},finish:function(H){for(var B=this.tryEntries.length-1;0<=B;--B){var G=this.tryEntries[B];if(G.finallyLoc===H)return this.complete(G.completion,G.afterLoc),L(G),b}},catch:function(H){for(var B=this.tryEntries.length-1;0<=B;--B){var G,V,X=this.tryEntries[B];if(X.tryLoc===H)return(G=X.completion).type==="throw"&&(V=G.arg,L(X)),V}throw new Error("illegal catch attempt")},delegateYield:function(H,B,G){return this.delegate={iterator:W(H),resultName:B,nextLoc:G},this.method==="next"&&(this.arg=a),b}},u}(typeof o=="object"?o.exports:{});try{regeneratorRuntime=o}catch{Function("r","regeneratorRuntime = r")(o)}},{}],245:[function(e,o,i){(function(u){var a,s,l,h,p,c,d,f,m,y;function g(L){if(typeof L!="string"&&(L=String(L)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(L))throw new TypeError("Invalid character in header field name");return L.toLowerCase()}function v(L){return L=typeof L!="string"?String(L):L}function b(L){var N={next:function(){var W=L.shift();return{done:W===void 0,value:W}}};return s&&(N[Symbol.iterator]=function(){return N}),N}function w(L){this.map={},L instanceof w?L.forEach(function(N,W){this.append(W,N)},this):Array.isArray(L)?L.forEach(function(N){this.append(N[0],N[1])},this):L&&Object.getOwnPropertyNames(L).forEach(function(N){this.append(N,L[N])},this)}function _(L){if(L.bodyUsed)return Promise.reject(new TypeError("Already read"));L.bodyUsed=!0}function j(L){return new Promise(function(N,W){L.onload=function(){N(L.result)},L.onerror=function(){W(L.error)}})}function E(L){var N=new FileReader,W=j(N);return N.readAsArrayBuffer(L),W}function T(L){var N;return L.slice?L.slice(0):((N=new Uint8Array(L.byteLength)).set(new Uint8Array(L)),N.buffer)}function R(){return this.bodyUsed=!1,this._initBody=function(L){if(this._bodyInit=L)if(typeof L=="string")this._bodyText=L;else if(l&&Blob.prototype.isPrototypeOf(L))this._bodyBlob=L;else if(h&&FormData.prototype.isPrototypeOf(L))this._bodyFormData=L;else if(a&&URLSearchParams.prototype.isPrototypeOf(L))this._bodyText=L.toString();else if(p&&l&&d(L))this._bodyArrayBuffer=T(L.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!p||!ArrayBuffer.prototype.isPrototypeOf(L)&&!f(L))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=T(L)}else this._bodyText="";this.headers.get("content-type")||(typeof L=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):a&&URLSearchParams.prototype.isPrototypeOf(L)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},l&&(this.blob=function(){var L=_(this);if(L)return L;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?_(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(E)}),this.text=function(){var L,N,W=_(this);if(W)return W;if(this._bodyBlob)return W=this._bodyBlob,L=new FileReader,N=j(L),L.readAsText(W),N;if(this._bodyArrayBuffer)return Promise.resolve(function(q){for(var H=new Uint8Array(q),B=new Array(H.length),G=0;G<H.length;G++)B[G]=String.fromCharCode(H[G]);return B.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},h&&(this.formData=function(){return this.text().then(I)}),this.json=function(){return this.text().then(JSON.parse)},this}function M(L,N){var W,q=(N=N||{}).body;if(L instanceof M){if(L.bodyUsed)throw new TypeError("Already read");this.url=L.url,this.credentials=L.credentials,N.headers||(this.headers=new w(L.headers)),this.method=L.method,this.mode=L.mode,q||L._bodyInit==null||(q=L._bodyInit,L.bodyUsed=!0)}else this.url=String(L);if(this.credentials=N.credentials||this.credentials||"omit",!N.headers&&this.headers||(this.headers=new w(N.headers)),this.method=(L=N.method||this.method||"GET",W=L.toUpperCase(),-1<m.indexOf(W)?W:L),this.mode=N.mode||this.mode||null,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&q)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(q)}function I(L){var N=new FormData;return L.trim().split("&").forEach(function(W){var q;W&&(q=(W=W.split("=")).shift().replace(/\+/g," "),W=W.join("=").replace(/\+/g," "),N.append(decodeURIComponent(q),decodeURIComponent(W)))}),N}function D(L,N){N=N||{},this.type="default",this.status=N.status===void 0?200:N.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in N?N.statusText:"OK",this.headers=new w(N.headers),this.url=N.url||"",this._initBody(L)}u.fetch||(a="URLSearchParams"in u,s="Symbol"in u&&"iterator"in Symbol,l="FileReader"in u&&"Blob"in u&&function(){try{return new Blob,!0}catch{return!1}}(),h="FormData"in u,(p="ArrayBuffer"in u)&&(c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=function(L){return L&&DataView.prototype.isPrototypeOf(L)},f=ArrayBuffer.isView||function(L){return L&&-1<c.indexOf(Object.prototype.toString.call(L))}),w.prototype.append=function(L,N){L=g(L),N=v(N);var W=this.map[L];this.map[L]=W?W+","+N:N},w.prototype.delete=function(L){delete this.map[g(L)]},w.prototype.get=function(L){return L=g(L),this.has(L)?this.map[L]:null},w.prototype.has=function(L){return this.map.hasOwnProperty(g(L))},w.prototype.set=function(L,N){this.map[g(L)]=v(N)},w.prototype.forEach=function(L,N){for(var W in this.map)this.map.hasOwnProperty(W)&&L.call(N,this.map[W],W,this)},w.prototype.keys=function(){var L=[];return this.forEach(function(N,W){L.push(W)}),b(L)},w.prototype.values=function(){var L=[];return this.forEach(function(N){L.push(N)}),b(L)},w.prototype.entries=function(){var L=[];return this.forEach(function(N,W){L.push([W,N])}),b(L)},s&&(w.prototype[Symbol.iterator]=w.prototype.entries),m=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],M.prototype.clone=function(){return new M(this,{body:this._bodyInit})},R.call(M.prototype),R.call(D.prototype),D.prototype.clone=function(){return new D(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new w(this.headers),url:this.url})},D.error=function(){var L=new D(null,{status:0,statusText:""});return L.type="error",L},y=[301,302,303,307,308],D.redirect=function(L,N){if(y.indexOf(N)===-1)throw new RangeError("Invalid status code");return new D(null,{status:N,headers:{location:L}})},u.Headers=w,u.Request=M,u.Response=D,u.fetch=function(L,N){return new Promise(function(W,q){var H=new M(L,N),B=new XMLHttpRequest;B.onload=function(){var G,V={status:B.status,statusText:B.statusText,headers:(V=B.getAllResponseHeaders()||"",G=new w,V.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(A){var A=A.split(":"),O=A.shift().trim();O&&(A=A.join(":").trim(),G.append(O,A))}),G)},X=(V.url="responseURL"in B?B.responseURL:V.headers.get("X-Request-URL"),"response"in B?B.response:B.responseText);W(new D(X,V))},B.onerror=function(){q(new TypeError("Network request failed"))},B.ontimeout=function(){q(new TypeError("Network request failed"))},B.open(H.method,H.url,!0),H.credentials==="include"?B.withCredentials=!0:H.credentials==="omit"&&(B.withCredentials=!1),"responseType"in B&&l&&(B.responseType="blob"),H.headers.forEach(function(G,V){B.setRequestHeader(V,G)}),B.send(H._bodyInit===void 0?null:H._bodyInit)})},u.fetch.polyfill=!0)})(typeof self<"u"?self:this)},{}],246:[function(e,o,i){e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.split"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.split"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u,a=l(e("../core/main")),s=l(e("../color/color_conversion"));function l(c){return c&&c.__esModule?c:{default:c}}var h=[{h:0,s:0,b:.8275,name:"gray"},{h:0,s:0,b:.8627,name:"gray"},{h:0,s:0,b:.7529,name:"gray"},{h:.0167,s:.1176,b:1,name:"light pink"}],p=[{h:0,s:0,b:0,name:"black"},{h:0,s:0,b:.5,name:"gray"},{h:0,s:0,b:1,name:"white"},{h:0,s:.5,b:.5,name:"dark maroon"},{h:0,s:.5,b:1,name:"salmon pink"},{h:0,s:1,b:0,name:"black"},{h:0,s:1,b:.5,name:"dark red"},{h:0,s:1,b:1,name:"red"},{h:5,s:0,b:1,name:"very light peach"},{h:5,s:.5,b:.5,name:"brown"},{h:5,s:.5,b:1,name:"peach"},{h:5,s:1,b:.5,name:"brick red"},{h:5,s:1,b:1,name:"crimson"},{h:10,s:0,b:1,name:"light peach"},{h:10,s:.5,b:.5,name:"brown"},{h:10,s:.5,b:1,name:"light orange"},{h:10,s:1,b:.5,name:"brown"},{h:10,s:1,b:1,name:"orange"},{h:15,s:0,b:1,name:"very light yellow"},{h:15,s:.5,b:.5,name:"olive green"},{h:15,s:.5,b:1,name:"light yellow"},{h:15,s:1,b:0,name:"dark olive green"},{h:15,s:1,b:.5,name:"olive green"},{h:15,s:1,b:1,name:"yellow"},{h:20,s:0,b:1,name:"very light yellow"},{h:20,s:.5,b:.5,name:"olive green"},{h:20,s:.5,b:1,name:"light yellow green"},{h:20,s:1,b:0,name:"dark olive green"},{h:20,s:1,b:.5,name:"dark yellow green"},{h:20,s:1,b:1,name:"yellow green"},{h:25,s:.5,b:.5,name:"dark yellow green"},{h:25,s:.5,b:1,name:"light green"},{h:25,s:1,b:.5,name:"dark green"},{h:25,s:1,b:1,name:"green"},{h:30,s:.5,b:1,name:"light green"},{h:30,s:1,b:.5,name:"dark green"},{h:30,s:1,b:1,name:"green"},{h:35,s:0,b:.5,name:"light green"},{h:35,s:0,b:1,name:"very light green"},{h:35,s:.5,b:.5,name:"dark green"},{h:35,s:.5,b:1,name:"light green"},{h:35,s:1,b:0,name:"very dark green"},{h:35,s:1,b:.5,name:"dark green"},{h:35,s:1,b:1,name:"green"},{h:40,s:0,b:1,name:"very light green"},{h:40,s:.5,b:.5,name:"dark green"},{h:40,s:.5,b:1,name:"light green"},{h:40,s:1,b:.5,name:"dark green"},{h:40,s:1,b:1,name:"green"},{h:45,s:.5,b:1,name:"light turquoise"},{h:45,s:1,b:.5,name:"dark turquoise"},{h:45,s:1,b:1,name:"turquoise"},{h:50,s:0,b:1,name:"light sky blue"},{h:50,s:.5,b:.5,name:"dark cyan"},{h:50,s:.5,b:1,name:"light cyan"},{h:50,s:1,b:.5,name:"dark cyan"},{h:50,s:1,b:1,name:"cyan"},{h:55,s:0,b:1,name:"light sky blue"},{h:55,s:.5,b:1,name:"light sky blue"},{h:55,s:1,b:.5,name:"dark blue"},{h:55,s:1,b:1,name:"sky blue"},{h:60,s:0,b:.5,name:"gray"},{h:60,s:0,b:1,name:"very light blue"},{h:60,s:.5,b:.5,name:"blue"},{h:60,s:.5,b:1,name:"light blue"},{h:60,s:1,b:.5,name:"navy blue"},{h:60,s:1,b:1,name:"blue"},{h:65,s:0,b:1,name:"lavender"},{h:65,s:.5,b:.5,name:"navy blue"},{h:65,s:.5,b:1,name:"light purple"},{h:65,s:1,b:.5,name:"dark navy blue"},{h:65,s:1,b:1,name:"blue"},{h:70,s:0,b:1,name:"lavender"},{h:70,s:.5,b:.5,name:"navy blue"},{h:70,s:.5,b:1,name:"lavender blue"},{h:70,s:1,b:.5,name:"dark navy blue"},{h:70,s:1,b:1,name:"blue"},{h:75,s:.5,b:1,name:"lavender"},{h:75,s:1,b:.5,name:"dark purple"},{h:75,s:1,b:1,name:"purple"},{h:80,s:.5,b:1,name:"pinkish purple"},{h:80,s:1,b:.5,name:"dark purple"},{h:80,s:1,b:1,name:"purple"},{h:85,s:0,b:1,name:"light pink"},{h:85,s:.5,b:.5,name:"purple"},{h:85,s:.5,b:1,name:"light fuchsia"},{h:85,s:1,b:.5,name:"dark fuchsia"},{h:85,s:1,b:1,name:"fuchsia"},{h:90,s:.5,b:.5,name:"dark fuchsia"},{h:90,s:.5,b:1,name:"hot pink"},{h:90,s:1,b:.5,name:"dark fuchsia"},{h:90,s:1,b:1,name:"fuchsia"},{h:95,s:0,b:1,name:"pink"},{h:95,s:.5,b:1,name:"light pink"},{h:95,s:1,b:.5,name:"dark magenta"},{h:95,s:1,b:1,name:"magenta"}];a.default.prototype._rgbColorName=function(m){var d,f,m=s.default._rgbaToHSBA(m),y=[(u=m)[0],m[1],m[2]];y[0]!==0&&(y[0]=Math.round(100*y[0]),(m=y[0].toString().split(""))[f=m.length-1]=parseInt(m[f]),m[f]<2.5?m[f]=0:2.5<=m[f]&&m[f]<7.5&&(m[f]=5),m.length===2?(m[0]=parseInt(m[0]),7.5<=m[f]&&(m[f]=0,m[0]=m[0]+1),y[0]=10*m[0]+m[1]):7.5<=m[f]?y[0]=10:y[0]=m[f]),y[2]=y[2]/255;for(var g=y.length-1;1<=g;g--)y[g]<=.25?y[g]=0:.25<y[g]&&y[g]<.75?y[g]=.5:y[g]=1;if(y[0]===0&&y[1]===0&&y[2]===1){for(var v=2;0<=v;v--)u[v]=Math.round(1e4*u[v])/1e4;for(var b=0;b<h.length;b++){if(h[b].h===u[0]&&h[b].s===u[1]&&h[b].b===u[2]){d=h[b].name;break}d="white"}}else for(var w=0;w<p.length;w++)if(p[w].h===y[0]&&p[w].s===y[1]&&p[w].b===y[2]){d=p[w].name;break}return d},e=a.default,i.default=e},{"../color/color_conversion":252,"../core/main":267,"core-js/modules/es.function.name":165,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.split":191}],247:[function(e,o,i){e("core-js/modules/es.array.concat"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.ends-with"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.ends-with"),e("core-js/modules/es.string.replace"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=(e=e("../core/main"))&&e.__esModule?e:{default:e},a="_Description",s="_fallbackDesc",l="_fallbackTable",h="_Label",p="_labelDesc",c="_labelTable";function d(f){if(f==="label"||f==="fallback")throw new Error("description should not be LABEL or FALLBACK");return f.endsWith(".")||f.endsWith(";")||f.endsWith(",")||f.endsWith("?")||f.endsWith("!")||(f+="."),f}u.default.prototype.describe=function(f,m){var y;u.default._validateParameters("describe",arguments),typeof f=="string"&&(y=this.canvas.id,f=d(f),this.dummyDOM||(this.dummyDOM=document.getElementById(y).parentNode),this.descriptions||(this.descriptions={}),this.descriptions.fallback?this.descriptions.fallback.innerHTML!==f&&(this.descriptions.fallback.innerHTML=f):this._describeHTML("fallback",f),m===this.LABEL&&(this.descriptions.label?this.descriptions.label.innerHTML!==f&&(this.descriptions.label.innerHTML=f):this._describeHTML("label",f)))},u.default.prototype.describeElement=function(f,m,y){var g,v;u.default._validateParameters("describeElement",arguments),typeof m=="string"&&typeof f=="string"&&(g=this.canvas.id,m=d(m),v=function(b){if(b==="label"||b==="fallback")throw new Error("element name should not be LABEL or FALLBACK");return b.endsWith(".")||b.endsWith(";")||b.endsWith(",")?b=b.replace(/.$/,":"):b.endsWith(":")||(b+=":"),b}(f),f=f.replace(/[^a-zA-Z0-9]/g,""),v='<th scope="row">'.concat(v,"</th><td>").concat(m,"</td>"),this.dummyDOM||(this.dummyDOM=document.getElementById(g).parentNode),this.descriptions?this.descriptions.fallbackElements||(this.descriptions.fallbackElements={}):this.descriptions={fallbackElements:{}},this.descriptions.fallbackElements[f]?this.descriptions.fallbackElements[f].innerHTML!==v&&(this.descriptions.fallbackElements[f].innerHTML=v):this._describeElementHTML("fallback",f,v),y===this.LABEL&&(this.descriptions.labelElements||(this.descriptions.labelElements={}),this.descriptions.labelElements[f]?this.descriptions.labelElements[f].innerHTML!==v&&(this.descriptions.labelElements[f].innerHTML=v):this._describeElementHTML("label",f,v)))},u.default.prototype._describeHTML=function(f,m){var y,g=this.canvas.id;f==="fallback"?(this.dummyDOM.querySelector("#".concat(g+a))?this.dummyDOM.querySelector("#"+g+l).insertAdjacentHTML("beforebegin",'<p id="'.concat(g+s,'"></p>')):(y='<div id="'.concat(g).concat(a,'" role="region" aria-label="Canvas Description"><p id="').concat(g).concat(s,'"></p></div>'),this.dummyDOM.querySelector("#".concat(g,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(g,"accessibleOutput")).insertAdjacentHTML("beforebegin",y):this.dummyDOM.querySelector("#".concat(g)).innerHTML=y),this.descriptions.fallback=this.dummyDOM.querySelector("#".concat(g).concat(s)),this.descriptions.fallback.innerHTML=m):f==="label"&&(this.dummyDOM.querySelector("#".concat(g+h))?this.dummyDOM.querySelector("#".concat(g+c))&&this.dummyDOM.querySelector("#".concat(g+c)).insertAdjacentHTML("beforebegin",'<p id="'.concat(g).concat(p,'"></p>')):(y='<div id="'.concat(g).concat(h,'" class="p5Label"><p id="').concat(g).concat(p,'"></p></div>'),this.dummyDOM.querySelector("#".concat(g,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(g,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",y):this.dummyDOM.querySelector("#"+g).insertAdjacentHTML("afterend",y)),this.descriptions.label=this.dummyDOM.querySelector("#"+g+p),this.descriptions.label.innerHTML=m)},u.default.prototype._describeElementHTML=function(f,m,y){var g,v=this.canvas.id;f==="fallback"?(this.dummyDOM.querySelector("#".concat(v+a))?this.dummyDOM.querySelector("#"+v+l)||this.dummyDOM.querySelector("#"+v+s).insertAdjacentHTML("afterend",'<table id="'.concat(v).concat(l,'"><caption>Canvas elements and their descriptions</caption></table>')):(g='<div id="'.concat(v).concat(a,'" role="region" aria-label="Canvas Description"><table id="').concat(v).concat(l,'"><caption>Canvas elements and their descriptions</caption></table></div>'),this.dummyDOM.querySelector("#".concat(v,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(v,"accessibleOutput")).insertAdjacentHTML("beforebegin",g):this.dummyDOM.querySelector("#"+v).innerHTML=g),(g=document.createElement("tr")).id=v+"_fte_"+m,this.dummyDOM.querySelector("#"+v+l).appendChild(g),this.descriptions.fallbackElements[m]=this.dummyDOM.querySelector("#".concat(v).concat("_fte_").concat(m)),this.descriptions.fallbackElements[m].innerHTML=y):f==="label"&&(this.dummyDOM.querySelector("#".concat(v+h))?this.dummyDOM.querySelector("#".concat(v+c))||this.dummyDOM.querySelector("#"+v+p).insertAdjacentHTML("afterend",'<table id="'.concat(v+c,'"></table>')):(g='<div id="'.concat(v).concat(h,'" class="p5Label"><table id="').concat(v).concat(c,'"></table></div>'),this.dummyDOM.querySelector("#".concat(v,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(v,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",g):this.dummyDOM.querySelector("#"+v).insertAdjacentHTML("afterend",g)),(f=document.createElement("tr")).id=v+"_lte_"+m,this.dummyDOM.querySelector("#"+v+c).appendChild(f),this.descriptions.labelElements[m]=this.dummyDOM.querySelector("#".concat(v).concat("_lte_").concat(m)),this.descriptions.labelElements[m].innerHTML=y)},e=u.default,i.default=e},{"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.ends-with":184,"core-js/modules/es.string.replace":189}],248:[function(e,o,i){e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.map"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,e=(e=e("../core/main"))&&e.__esModule?e:{default:e},e.default.prototype._updateGridOutput=function(u){var a,s,l,h;this.dummyDOM.querySelector("#".concat(u,"_summary"))&&(a=this._accessibleOutputs[u],l=function(p,c,d,f){return c="".concat(c," canvas, ").concat(d," by ").concat(f," pixels, contains ").concat(p[0]),c=(p[0]===1?"".concat(c," shape: "):"".concat(c," shapes: ")).concat(p[1]),c}((s=function(p,c){var d,f="",m="",y=0;for(d in c){var g,v=0;for(g in c[d]){var b='<li id="'.concat(p,"shape").concat(y,'">').concat(c[d][g].color," ").concat(d,",");d==="line"?b+=" location = ".concat(c[d][g].pos,", length = ").concat(c[d][g].length," pixels"):(b+=" location = ".concat(c[d][g].pos),d!=="point"&&(b+=", area = ".concat(c[d][g].area," %")),b+="</li>"),f+=b,v++,y++}m=1<v?"".concat(m," ").concat(v," ").concat(d,"s"):"".concat(m," ").concat(v," ").concat(d)}return{numShapes:[y,m],details:f}}(u,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),h=function(p,c){var d,f,m,y=0,g="",v=Array.apply(null,Array(10)).map(function(){});for(d in v)v[d]=Array.apply(null,Array(10)).map(function(){});for(f in c)for(var b in c[f]){var w=void 0;w=f!=="line"?'<a href="#'.concat(p,"shape").concat(y,'">').concat(c[f][b].color," ").concat(f,"</a>"):'<a href="#'.concat(p,"shape").concat(y,'">').concat(c[f][b].color," ").concat(f," midpoint</a>"),v[c[f][b].loc.locY][c[f][b].loc.locX]?v[c[f][b].loc.locY][c[f][b].loc.locX]=v[c[f][b].loc.locY][c[f][b].loc.locX]+"  "+w:v[c[f][b].loc.locY][c[f][b].loc.locX]=w,y++}for(m in v){var _,j="<tr>";for(_ in v[m])j+="<td>",v[m][_]!==void 0&&(j+=v[m][_]),j+="</td>";g=g+j+"</tr>"}return g}(u,this.ingredients.shapes),l!==a.summary.innerHTML&&(a.summary.innerHTML=l),h!==a.map.innerHTML&&(a.map.innerHTML=h),s.details!==a.shapeDetails.innerHTML&&(a.shapeDetails.innerHTML=s.details),this._accessibleOutputs[u]=a)},e=e.default,i.default=e},{"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.map":161}],249:[function(e,o,i){e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.map"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.map"),e("core-js/modules/es.number.to-fixed"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=(e=e("../core/main"))&&e.__esModule?e:{default:e};function a(l,h,p){return l[0]<.4*h?l[1]<.4*p?"top left":l[1]>.6*p?"bottom left":"mid left":l[0]>.6*h?l[1]<.4*p?"top right":l[1]>.6*p?"bottom right":"mid right":l[1]<.4*p?"top middle":l[1]>.6*p?"bottom middle":"middle"}function s(l,h,p){return h=Math.floor(l[0]/h*10),l=Math.floor(l[1]/p*10),h===10&&(h-=1),l===10&&(l-=1),{locX:h,locY:l}}u.default.prototype.textOutput=function(l){u.default._validateParameters("textOutput",arguments),this._accessibleOutputs.text||(this._accessibleOutputs.text=!0,this._createOutput("textOutput","Fallback"),l===this.LABEL&&(this._accessibleOutputs.textLabel=!0,this._createOutput("textOutput","Label")))},u.default.prototype.gridOutput=function(l){u.default._validateParameters("gridOutput",arguments),this._accessibleOutputs.grid||(this._accessibleOutputs.grid=!0,this._createOutput("gridOutput","Fallback"),l===this.LABEL&&(this._accessibleOutputs.gridLabel=!0,this._createOutput("gridOutput","Label")))},u.default.prototype._addAccsOutput=function(){return this._accessibleOutputs||(this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1}),this._accessibleOutputs.grid||this._accessibleOutputs.text},u.default.prototype._createOutput=function(l,h){var p,c,d,f=this.canvas.id,m=(this.ingredients||(this.ingredients={shapes:{},colors:{background:"white",fill:"white",stroke:"black"},pShapes:""}),this.dummyDOM||(this.dummyDOM=document.getElementById(f).parentNode),"");h==="Fallback"?(p=f+l,this.dummyDOM.querySelector("#".concat(c=f+"accessibleOutput"))||(this.dummyDOM.querySelector("#".concat(f,"_Description"))?this.dummyDOM.querySelector("#".concat(f,"_Description")).insertAdjacentHTML("afterend",'<div id="'.concat(c,'" role="region" aria-label="Canvas Outputs"></div>')):this.dummyDOM.querySelector("#".concat(f)).innerHTML='<div id="'.concat(c,'" role="region" aria-label="Canvas Outputs"></div>'))):h==="Label"&&(p=f+l+(m=h),this.dummyDOM.querySelector("#".concat(c=f+"accessibleOutput"+h))||(this.dummyDOM.querySelector("#".concat(f,"_Label"))?this.dummyDOM.querySelector("#".concat(f,"_Label")):this.dummyDOM.querySelector("#".concat(f))).insertAdjacentHTML("afterend",'<div id="'.concat(c,'"></div>'))),this._accessibleOutputs[p]={},l==="textOutput"?(m="#".concat(f,"gridOutput").concat(m),d='<div id="'.concat(p,'">Text Output<div id="').concat(p,'Summary" aria-label="text output summary"><p id="').concat(p,'_summary"></p><ul id="').concat(p,'_list"></ul></div><table id="').concat(p,'_shapeDetails" summary="text output shape details"></table></div>'),this.dummyDOM.querySelector(m)?this.dummyDOM.querySelector(m).insertAdjacentHTML("beforebegin",d):this.dummyDOM.querySelector("#".concat(c)).innerHTML=d,this._accessibleOutputs[p].list=this.dummyDOM.querySelector("#".concat(p,"_list"))):l==="gridOutput"&&(m="#".concat(f,"textOutput").concat(m),d='<div id="'.concat(p,'">Grid Output<p id="').concat(p,'_summary" aria-label="grid output summary"><table id="').concat(p,'_map" summary="grid output content"></table><ul id="').concat(p,'_shapeDetails" aria-label="grid output shape details"></ul></div>'),this.dummyDOM.querySelector(m)?this.dummyDOM.querySelector(m).insertAdjacentHTML("afterend",d):this.dummyDOM.querySelector("#".concat(c)).innerHTML=d,this._accessibleOutputs[p].map=this.dummyDOM.querySelector("#".concat(p,"_map"))),this._accessibleOutputs[p].shapeDetails=this.dummyDOM.querySelector("#".concat(p,"_shapeDetails")),this._accessibleOutputs[p].summary=this.dummyDOM.querySelector("#".concat(p,"_summary"))},u.default.prototype._updateAccsOutput=function(){var l=this.canvas.id;JSON.stringify(this.ingredients.shapes)!==this.ingredients.pShapes&&(this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this._accessibleOutputs.text&&this._updateTextOutput(l+"textOutput"),this._accessibleOutputs.grid&&this._updateGridOutput(l+"gridOutput"),this._accessibleOutputs.textLabel&&this._updateTextOutput(l+"textOutputLabel"),this._accessibleOutputs.gridLabel&&this._updateGridOutput(l+"gridOutputLabel"))},u.default.prototype._accsBackground=function(l){this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this.ingredients.shapes={},this.ingredients.colors.backgroundRGBA!==l&&(this.ingredients.colors.backgroundRGBA=l,this.ingredients.colors.background=this._rgbColorName(l))},u.default.prototype._accsCanvasColors=function(l,h){l==="fill"?this.ingredients.colors.fillRGBA!==h&&(this.ingredients.colors.fillRGBA=h,this.ingredients.colors.fill=this._rgbColorName(h)):l==="stroke"&&this.ingredients.colors.strokeRGBA!==h&&(this.ingredients.colors.strokeRGBA=h,this.ingredients.colors.stroke=this._rgbColorName(h))},u.default.prototype._accsOutput=function(l,h){l==="ellipse"&&h[2]===h[3]?l="circle":l==="rectangle"&&h[2]===h[3]&&(l="square");var p,c,d={},f=!0,m=function(g,v){var b;return g=g==="rectangle"||g==="ellipse"||g==="arc"||g==="circle"||g==="square"?(b=Math.round(v[0]+v[2]/2),Math.round(v[1]+v[3]/2)):g==="triangle"?(b=(v[0]+v[2]+v[4])/3,(v[1]+v[3]+v[5])/3):g==="quadrilateral"?(b=(v[0]+v[2]+v[4]+v[6])/4,(v[1]+v[3]+v[5]+v[7])/4):g==="line"?(b=(v[0]+v[2])/2,(v[1]+v[3])/2):(b=v[0],v[1]),[b,g]}(l,h);if(l==="line"?(d.color=this.ingredients.colors.stroke,d.length=Math.round(this.dist(h[0],h[1],h[2],h[3])),p=a([h[0],[1]],this.width,this.height),c=a([h[2],[3]],this.width,this.height),d.loc=s(m,this.width,this.height),d.pos=p===c?"at ".concat(p):"from ".concat(p," to ").concat(c)):(l==="point"?d.color=this.ingredients.colors.stroke:(d.color=this.ingredients.colors.fill,d.area=function(g,v,b,w){var _=0;{var j,E,T,R,M,I,D;g==="arc"?(j=((v[5]-v[4])%(2*Math.PI)+2*Math.PI)%(2*Math.PI),_=j*v[2]*v[3]/8,v[6]!=="open"&&v[6]!=="chord"||(D=v[0],E=v[1],T=v[0]+v[2]/2*Math.cos(v[4]).toFixed(2),R=v[1]+v[3]/2*Math.sin(v[4]).toFixed(2),M=v[0]+v[2]/2*Math.cos(v[5]).toFixed(2),I=v[1]+v[3]/2*Math.sin(v[5]).toFixed(2),D=Math.abs(D*(R-I)+T*(I-E)+M*(E-R))/2,j>Math.PI?_+=D:_-=D)):g==="ellipse"||g==="circle"?_=3.14*v[2]/2*v[3]/2:g==="line"||g==="point"?_=0:g==="quadrilateral"?_=Math.abs((v[6]+v[0])*(v[7]-v[1])+(v[0]+v[2])*(v[1]-v[3])+(v[2]+v[4])*(v[3]-v[5])+(v[4]+v[6])*(v[5]-v[7]))/2:g==="rectangle"||g==="square"?_=v[2]*v[3]:g==="triangle"&&(_=Math.abs(v[0]*(v[3]-v[5])+v[2]*(v[5]-v[1])+v[4]*(v[1]-v[3]))/2)}return Math.round(100*_/(b*w))}(l,h,this.width,this.height)),d.pos=a(m,this.width,this.height),d.loc=s(m,this.width,this.height)),this.ingredients.shapes[l]){if(this.ingredients.shapes[l]!==[d]){for(var y in this.ingredients.shapes[l])JSON.stringify(this.ingredients.shapes[l][y])===JSON.stringify(d)&&(f=!1);f===!0&&this.ingredients.shapes[l].push(d)}}else this.ingredients.shapes[l]=[d]},e=u.default,i.default=e},{"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.fill":152,"core-js/modules/es.array.map":161,"core-js/modules/es.number.to-fixed":171}],250:[function(e,o,i){e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.concat"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,e=(e=e("../core/main"))&&e.__esModule?e:{default:e},e.default.prototype._updateTextOutput=function(u){var a,s,l,h;this.dummyDOM.querySelector("#".concat(u,"_summary"))&&(a=this._accessibleOutputs[u],l=function(p,c,d,f){return d="Your output is a, ".concat(d," by ").concat(f," pixels, ").concat(c," canvas containing the following"),d=p===1?"".concat(d," shape:"):"".concat(d," ").concat(p," shapes:"),d}((s=function(p,c){var d,f="",m=0;for(d in c)for(var y in c[d]){var g='<li><a href="#'.concat(p,"shape").concat(m,'">').concat(c[d][y].color," ").concat(d,"</a>");d==="line"?g+=", ".concat(c[d][y].pos,", ").concat(c[d][y].length," pixels long.</li>"):(g+=", at ".concat(c[d][y].pos),d!=="point"&&(g+=", covering ".concat(c[d][y].area,"% of the canvas")),g+=".</li>"),f+=g,m++}return{numShapes:m,listShapes:f}}(u,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),h=function(p,c){var d,f="",m=0;for(d in c)for(var y in c[d]){var g='<tr id="'.concat(p,"shape").concat(m,'"><th>').concat(c[d][y].color," ").concat(d,"</th>");d==="line"?g+="<td>location = ".concat(c[d][y].pos,"</td><td>length = ").concat(c[d][y].length," pixels</td></tr>"):(g+="<td>location = ".concat(c[d][y].pos,"</td>"),d!=="point"&&(g+="<td> area = ".concat(c[d][y].area,"%</td>")),g+="</tr>"),f+=g,m++}return f}(u,this.ingredients.shapes),l!==a.summary.innerHTML&&(a.summary.innerHTML=l),s.listShapes!==a.list.innerHTML&&(a.list.innerHTML=s.listShapes),h!==a.shapeDetails.innerHTML&&(a.shapeDetails.innerHTML=h),this._accessibleOutputs[u]=a)},e=e.default,i.default=e},{"../core/main":267,"core-js/modules/es.array.concat":149}],251:[function(e,o,i){var u=(u=e("./core/main"))&&u.__esModule?u:{default:u};e("./core/constants"),e("./core/environment"),e("./core/friendly_errors/stacktrace"),e("./core/friendly_errors/validate_params"),e("./core/friendly_errors/file_errors"),e("./core/friendly_errors/fes_core"),e("./core/friendly_errors/sketch_reader"),e("./core/helpers"),e("./core/legacy"),e("./core/preload"),e("./core/p5.Element"),e("./core/p5.Graphics"),e("./core/p5.Renderer"),e("./core/p5.Renderer2D"),e("./core/rendering"),e("./core/shim"),e("./core/structure"),e("./core/transform"),e("./core/shape/2d_primitives"),e("./core/shape/attributes"),e("./core/shape/curves"),e("./core/shape/vertex"),e("./accessibility/outputs"),e("./accessibility/textOutput"),e("./accessibility/gridOutput"),e("./accessibility/color_namer"),e("./color/color_conversion"),e("./color/creating_reading"),e("./color/p5.Color"),e("./color/setting"),e("./data/p5.TypedDict"),e("./data/local_storage.js"),e("./dom/dom"),e("./accessibility/describe"),e("./events/acceleration"),e("./events/keyboard"),e("./events/mouse"),e("./events/touch"),e("./image/filters"),e("./image/image"),e("./image/loading_displaying"),e("./image/p5.Image"),e("./image/pixels"),e("./io/files"),e("./io/p5.Table"),e("./io/p5.TableRow"),e("./io/p5.XML"),e("./math/calculation"),e("./math/math"),e("./math/noise"),e("./math/p5.Vector"),e("./math/random"),e("./math/trigonometry"),e("./typography/attributes"),e("./typography/loading_displaying"),e("./typography/p5.Font"),e("./utilities/array_functions"),e("./utilities/conversion"),e("./utilities/string_functions"),e("./utilities/time_date"),e("./webgl/3d_primitives"),e("./webgl/interaction"),e("./webgl/light"),e("./webgl/loading"),e("./webgl/material"),e("./webgl/p5.Camera"),e("./webgl/p5.Geometry"),e("./webgl/p5.Matrix"),e("./webgl/p5.RendererGL.Immediate"),e("./webgl/p5.RendererGL"),e("./webgl/p5.RendererGL.Retained"),e("./webgl/p5.Shader"),e("./webgl/p5.RenderBuffer"),e("./webgl/p5.Texture"),e("./webgl/text"),e("./core/init"),o.exports=u.default},{"./accessibility/color_namer":246,"./accessibility/describe":247,"./accessibility/gridOutput":248,"./accessibility/outputs":249,"./accessibility/textOutput":250,"./color/color_conversion":252,"./color/creating_reading":253,"./color/p5.Color":254,"./color/setting":255,"./core/constants":256,"./core/environment":257,"./core/friendly_errors/fes_core":258,"./core/friendly_errors/file_errors":259,"./core/friendly_errors/sketch_reader":260,"./core/friendly_errors/stacktrace":261,"./core/friendly_errors/validate_params":262,"./core/helpers":263,"./core/init":264,"./core/legacy":266,"./core/main":267,"./core/p5.Element":268,"./core/p5.Graphics":269,"./core/p5.Renderer":270,"./core/p5.Renderer2D":271,"./core/preload":272,"./core/rendering":273,"./core/shape/2d_primitives":274,"./core/shape/attributes":275,"./core/shape/curves":276,"./core/shape/vertex":277,"./core/shim":278,"./core/structure":279,"./core/transform":280,"./data/local_storage.js":281,"./data/p5.TypedDict":282,"./dom/dom":283,"./events/acceleration":284,"./events/keyboard":285,"./events/mouse":286,"./events/touch":287,"./image/filters":288,"./image/image":289,"./image/loading_displaying":290,"./image/p5.Image":291,"./image/pixels":292,"./io/files":293,"./io/p5.Table":294,"./io/p5.TableRow":295,"./io/p5.XML":296,"./math/calculation":297,"./math/math":298,"./math/noise":299,"./math/p5.Vector":300,"./math/random":301,"./math/trigonometry":302,"./typography/attributes":303,"./typography/loading_displaying":304,"./typography/p5.Font":305,"./utilities/array_functions":306,"./utilities/conversion":307,"./utilities/string_functions":308,"./utilities/time_date":309,"./webgl/3d_primitives":310,"./webgl/interaction":311,"./webgl/light":312,"./webgl/loading":313,"./webgl/material":314,"./webgl/p5.Camera":315,"./webgl/p5.Geometry":316,"./webgl/p5.Matrix":317,"./webgl/p5.RenderBuffer":318,"./webgl/p5.RendererGL":321,"./webgl/p5.RendererGL.Immediate":319,"./webgl/p5.RendererGL.Retained":320,"./webgl/p5.Shader":322,"./webgl/p5.Texture":323,"./webgl/text":324}],252:[function(e,o,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,e=(e=e("../core/main"))&&e.__esModule?e:{default:e},e.default.ColorConversion={},e.default.ColorConversion._hsbaToHSLA=function(u){var a=u[0],s=u[1],l=u[2],h=(2-s)*l/2;return h!=0&&(h==1?s=0:h<.5?s/=2-s:s=s*l/(2-2*h)),[a,s,h,u[3]]},e.default.ColorConversion._hsbaToRGBA=function(u){var a,s,l,h,p,c=6*u[0],d=u[1],f=u[2];return d===0?[f,f,f,u[3]]:(s=f*(1-d),l=f*(1-d*(c-(a=Math.floor(c)))),d=f*(1-d*(1+a-c)),c=a===1?(h=l,p=f,s):a===2?(h=s,p=f,d):a===3?(h=s,p=l,f):a===4?(h=d,p=s,f):a===5?(h=f,p=s,l):(h=f,p=d,s),[h,p,c,u[3]])},e.default.ColorConversion._hslaToHSBA=function(u){var a=u[0],s=u[1],l=u[2],h=l<.5?(1+s)*l:l+s-l*s;return[a,s=2*(h-l)/h,h,u[3]]},e.default.ColorConversion._hslaToRGBA=function(u){var a,s=6*u[0],l=u[1],h=u[2];return l===0?[h,h,h,u[3]]:[(a=function(p,c,d){return p<0?p+=6:6<=p&&(p-=6),p<1?c+(d-c)*p:p<3?d:p<4?c+(d-c)*(4-p):c})(2+s,l=2*h-(h=h<.5?(1+l)*h:h+l-h*l),h),a(s,l,h),a(s-2,l,h),u[3]]},e.default.ColorConversion._rgbaToHSBA=function(u){var a,s,l=u[0],h=u[1],p=u[2],c=Math.max(l,h,p),d=c-Math.min(l,h,p);return d==0?s=a=0:(s=d/c,l===c?a=(h-p)/d:h===c?a=2+(p-l)/d:p===c&&(a=4+(l-h)/d),a<0?a+=6:6<=a&&(a-=6)),[a/6,s,c,u[3]]},e.default.ColorConversion._rgbaToHSLA=function(u){var a,s,l=u[0],h=u[1],p=u[2],c=Math.max(l,h,p),f=Math.min(l,h,p),d=c+f,f=c-f;return f==0?s=a=0:(s=d<1?f/d:f/(2-d),l===c?a=(h-p)/f:h===c?a=2+(p-l)/f:p===c&&(a=4+(l-h)/f),a<0?a+=6:6<=a&&(a-=6)),[a/6,s,d/2,u[3]]},e=e.default.ColorConversion,i.default=e},{"../core/main":267}],253:[function(e,o,i){function u(c){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(c)}function a(c){return(a=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(d){return u(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":u(d)})(c)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.map"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=(p=e("../core/main"))&&p.__esModule?p:{default:p},l=function(c){if(c&&c.__esModule)return c;if(c===null||a(c)!=="object"&&typeof c!="function")return{default:c};var d=h();if(d&&d.has(c))return d.get(c);var f,m={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(f in c){var g;Object.prototype.hasOwnProperty.call(c,f)&&((g=y?Object.getOwnPropertyDescriptor(c,f):null)&&(g.get||g.set)?Object.defineProperty(m,f,g):m[f]=c[f])}return m.default=c,d&&d.set(c,m),m}(e("../core/constants"));function h(){var c;return typeof WeakMap!="function"?null:(c=new WeakMap,h=function(){return c},c)}e("./p5.Color"),e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),s.default.prototype.alpha=function(c){return s.default._validateParameters("alpha",arguments),this.color(c)._getAlpha()},s.default.prototype.blue=function(c){return s.default._validateParameters("blue",arguments),this.color(c)._getBlue()},s.default.prototype.brightness=function(c){return s.default._validateParameters("brightness",arguments),this.color(c)._getBrightness()},s.default.prototype.color=function(){var c;return s.default._validateParameters("color",arguments),arguments[0]instanceof s.default.Color?arguments[0]:(c=arguments[0]instanceof Array?arguments[0]:arguments,new s.default.Color(this,c))},s.default.prototype.green=function(c){return s.default._validateParameters("green",arguments),this.color(c)._getGreen()},s.default.prototype.hue=function(c){return s.default._validateParameters("hue",arguments),this.color(c)._getHue()},s.default.prototype.lerpColor=function(c,d,f){s.default._validateParameters("lerpColor",arguments);var m,y,g,v=this._colorMode,b=this._colorMaxes;if(v===l.RGB)y=c.levels.map(function(w){return w/255}),g=d.levels.map(function(w){return w/255});else if(v===l.HSB)c._getBrightness(),d._getBrightness(),y=c.hsba,g=d.hsba;else{if(v!==l.HSL)throw new Error("".concat(v,"cannot be used for interpolation."));c._getLightness(),d._getLightness(),y=c.hsla,g=d.hsla}return f=Math.max(Math.min(f,1),0),this.lerp===void 0&&(this.lerp=function(w,_,j){return j*(_-w)+w}),c=this.lerp(y[0],g[0],f),d=this.lerp(y[1],g[1],f),m=this.lerp(y[2],g[2],f),y=this.lerp(y[3],g[3],f),c*=b[v][0],d*=b[v][1],m*=b[v][2],y*=b[v][3],this.color(c,d,m,y)},s.default.prototype.lightness=function(c){return s.default._validateParameters("lightness",arguments),this.color(c)._getLightness()},s.default.prototype.red=function(c){return s.default._validateParameters("red",arguments),this.color(c)._getRed()},s.default.prototype.saturation=function(c){return s.default._validateParameters("saturation",arguments),this.color(c)._getSaturation()};var p=s.default;i.default=p},{"../core/constants":256,"../core/friendly_errors/fes_core":258,"../core/friendly_errors/file_errors":259,"../core/friendly_errors/validate_params":262,"../core/main":267,"./p5.Color":254,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.map":161,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],254:[function(f,o,i){function u(b){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(b)}function a(b){return(a=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(w){return u(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":u(w)})(b)}f("core-js/modules/es.symbol"),f("core-js/modules/es.symbol.description"),f("core-js/modules/es.symbol.iterator"),f("core-js/modules/es.array.iterator"),f("core-js/modules/es.array.join"),f("core-js/modules/es.array.map"),f("core-js/modules/es.array.slice"),f("core-js/modules/es.object.get-own-property-descriptor"),f("core-js/modules/es.object.to-string"),f("core-js/modules/es.regexp.constructor"),f("core-js/modules/es.regexp.exec"),f("core-js/modules/es.regexp.to-string"),f("core-js/modules/es.string.iterator"),f("core-js/modules/es.string.trim"),f("core-js/modules/es.weak-map"),f("core-js/modules/web.dom-collections.iterator"),f("core-js/modules/es.array.join"),f("core-js/modules/es.array.map"),f("core-js/modules/es.array.slice"),f("core-js/modules/es.object.to-string"),f("core-js/modules/es.regexp.constructor"),f("core-js/modules/es.regexp.exec"),f("core-js/modules/es.regexp.to-string"),f("core-js/modules/es.string.trim"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=c(f("../core/main")),l=function(b){if(b&&b.__esModule)return b;if(b===null||a(b)!=="object"&&typeof b!="function")return{default:b};var w=p();if(w&&w.has(b))return w.get(b);var _,j={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(_ in b){var T;Object.prototype.hasOwnProperty.call(b,_)&&((T=E?Object.getOwnPropertyDescriptor(b,_):null)&&(T.get||T.set)?Object.defineProperty(j,_,T):j[_]=b[_])}return j.default=b,w&&w.set(b,j),j}(f("../core/constants")),h=c(f("./color_conversion"));function p(){var b;return typeof WeakMap!="function"?null:(b=new WeakMap,p=function(){return b},b)}function c(b){return b&&b.__esModule?b:{default:b}}s.default.Color=function(b,w){if(this._storeModeAndMaxes(b._colorMode,b._colorMaxes),this.mode!==l.RGB&&this.mode!==l.HSL&&this.mode!==l.HSB)throw new Error("".concat(this.mode," is an invalid colorMode."));return this._array=s.default.Color._parseInputs.apply(this,w),this._calculateLevels(),this},s.default.Color.prototype.toString=function(b){var w=this.levels,_=this._array,j=_[3];switch(b){case"#rrggbb":return"#".concat(w[0]<16?"0".concat(w[0].toString(16)):w[0].toString(16),w[1]<16?"0".concat(w[1].toString(16)):w[1].toString(16),w[2]<16?"0".concat(w[2].toString(16)):w[2].toString(16));case"#rrggbbaa":return"#".concat(w[0]<16?"0".concat(w[0].toString(16)):w[0].toString(16),w[1]<16?"0".concat(w[1].toString(16)):w[1].toString(16),w[2]<16?"0".concat(w[2].toString(16)):w[2].toString(16),w[3]<16?"0".concat(w[3].toString(16)):w[3].toString(16));case"#rgb":return"#".concat(Math.round(15*_[0]).toString(16),Math.round(15*_[1]).toString(16),Math.round(15*_[2]).toString(16));case"#rgba":return"#".concat(Math.round(15*_[0]).toString(16),Math.round(15*_[1]).toString(16),Math.round(15*_[2]).toString(16),Math.round(15*_[3]).toString(16));case"rgb":return"rgb(".concat(w[0],", ",w[1],", ",w[2],")");case"rgb%":return"rgb(".concat((100*_[0]).toPrecision(3),"%, ",(100*_[1]).toPrecision(3),"%, ",(100*_[2]).toPrecision(3),"%)");case"rgba%":return"rgba(".concat((100*_[0]).toPrecision(3),"%, ",(100*_[1]).toPrecision(3),"%, ",(100*_[2]).toPrecision(3),"%, ",(100*_[3]).toPrecision(3),"%)");case"hsb":case"hsv":return this.hsba||(this.hsba=h.default._rgbaToHSBA(this._array)),"hsb(".concat(this.hsba[0]*this.maxes[l.HSB][0],", ",this.hsba[1]*this.maxes[l.HSB][1],", ",this.hsba[2]*this.maxes[l.HSB][2],")");case"hsb%":case"hsv%":return this.hsba||(this.hsba=h.default._rgbaToHSBA(this._array)),"hsb(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%)");case"hsba":case"hsva":return this.hsba||(this.hsba=h.default._rgbaToHSBA(this._array)),"hsba(".concat(this.hsba[0]*this.maxes[l.HSB][0],", ",this.hsba[1]*this.maxes[l.HSB][1],", ",this.hsba[2]*this.maxes[l.HSB][2],", ",j,")");case"hsba%":case"hsva%":return this.hsba||(this.hsba=h.default._rgbaToHSBA(this._array)),"hsba(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%, ",(100*j).toPrecision(3),"%)");case"hsl":return this.hsla||(this.hsla=h.default._rgbaToHSLA(this._array)),"hsl(".concat(this.hsla[0]*this.maxes[l.HSL][0],", ",this.hsla[1]*this.maxes[l.HSL][1],", ",this.hsla[2]*this.maxes[l.HSL][2],")");case"hsl%":return this.hsla||(this.hsla=h.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%)");case"hsla":return this.hsla||(this.hsla=h.default._rgbaToHSLA(this._array)),"hsla(".concat(this.hsla[0]*this.maxes[l.HSL][0],", ",this.hsla[1]*this.maxes[l.HSL][1],", ",this.hsla[2]*this.maxes[l.HSL][2],", ",j,")");case"hsla%":return this.hsla||(this.hsla=h.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%, ",(100*j).toPrecision(3),"%)");default:return"rgba(".concat(w[0],",",w[1],",",w[2],",",j,")")}},s.default.Color.prototype.setRed=function(b){this._array[0]=b/this.maxes[l.RGB][0],this._calculateLevels()},s.default.Color.prototype.setGreen=function(b){this._array[1]=b/this.maxes[l.RGB][1],this._calculateLevels()},s.default.Color.prototype.setBlue=function(b){this._array[2]=b/this.maxes[l.RGB][2],this._calculateLevels()},s.default.Color.prototype.setAlpha=function(b){this._array[3]=b/this.maxes[this.mode][3],this._calculateLevels()},s.default.Color.prototype._calculateLevels=function(){for(var b=this._array,w=this.levels=new Array(b.length),_=b.length-1;0<=_;--_)w[_]=Math.round(255*b[_]);this.hsla=null,this.hsba=null},s.default.Color.prototype._getAlpha=function(){return this._array[3]*this.maxes[this.mode][3]},s.default.Color.prototype._storeModeAndMaxes=function(b,w){this.mode=b,this.maxes=w},s.default.Color.prototype._getMode=function(){return this.mode},s.default.Color.prototype._getMaxes=function(){return this.maxes},s.default.Color.prototype._getBlue=function(){return this._array[2]*this.maxes[l.RGB][2]},s.default.Color.prototype._getBrightness=function(){return this.hsba||(this.hsba=h.default._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[l.HSB][2]},s.default.Color.prototype._getGreen=function(){return this._array[1]*this.maxes[l.RGB][1]},s.default.Color.prototype._getHue=function(){return this.mode===l.HSB?(this.hsba||(this.hsba=h.default._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[l.HSB][0]):(this.hsla||(this.hsla=h.default._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[l.HSL][0])},s.default.Color.prototype._getLightness=function(){return this.hsla||(this.hsla=h.default._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[l.HSL][2]},s.default.Color.prototype._getRed=function(){return this._array[0]*this.maxes[l.RGB][0]},s.default.Color.prototype._getSaturation=function(){return this.mode===l.HSB?(this.hsba||(this.hsba=h.default._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[l.HSB][1]):(this.hsla||(this.hsla=h.default._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[l.HSL][1])};var d={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},f=/\s*/,v=/(\d{1,3})/,m=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,y=new RegExp("".concat(m.source,"%")),g={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX4:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,HEX8:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",v.source,",",v.source,",",v.source,"\\)$"].join(f.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",y.source,",",y.source,",",y.source,"\\)$"].join(f.source),"i"),RGBA:new RegExp(["^rgba\\(",v.source,",",v.source,",",v.source,",",m.source,"\\)$"].join(f.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",y.source,",",y.source,",",y.source,",",m.source,"\\)$"].join(f.source),"i"),HSL:new RegExp(["^hsl\\(",v.source,",",y.source,",",y.source,"\\)$"].join(f.source),"i"),HSLA:new RegExp(["^hsla\\(",v.source,",",y.source,",",y.source,",",m.source,"\\)$"].join(f.source),"i"),HSB:new RegExp(["^hsb\\(",v.source,",",y.source,",",y.source,"\\)$"].join(f.source),"i"),HSBA:new RegExp(["^hsba\\(",v.source,",",y.source,",",y.source,",",m.source,"\\)$"].join(f.source),"i")},v=(s.default.Color._parseInputs=function(b,w,_,j){var E,T=arguments.length,R=this.mode,M=this.maxes[R],I=[];if(3<=T){for(I[0]=b/M[0],I[1]=w/M[1],I[2]=_/M[2],I[3]=typeof j=="number"?j/M[3]:1,E=I.length-1;0<=E;--E){var D=I[E];D<0?I[E]=0:1<D&&(I[E]=1)}return R===l.HSL?h.default._hslaToRGBA(I):R===l.HSB?h.default._hsbaToRGBA(I):I}if(T===1&&typeof b=="string"){if(_=b.trim().toLowerCase(),d[_])return s.default.Color._parseInputs.call(this,d[_]);if(g.HEX3.test(_))return(I=g.HEX3.exec(_).slice(1).map(function(L){return parseInt(L+L,16)/255}))[3]=1,I;if(g.HEX6.test(_))return(I=g.HEX6.exec(_).slice(1).map(function(L){return parseInt(L,16)/255}))[3]=1,I;if(g.HEX4.test(_))return I=g.HEX4.exec(_).slice(1).map(function(L){return parseInt(L+L,16)/255});if(g.HEX8.test(_))return I=g.HEX8.exec(_).slice(1).map(function(L){return parseInt(L,16)/255});if(g.RGB.test(_))return(I=g.RGB.exec(_).slice(1).map(function(L){return L/255}))[3]=1,I;if(g.RGB_PERCENT.test(_))return(I=g.RGB_PERCENT.exec(_).slice(1).map(function(L){return parseFloat(L)/100}))[3]=1,I;if(g.RGBA.test(_))return I=g.RGBA.exec(_).slice(1).map(function(L,N){return N===3?parseFloat(L):L/255});if(g.RGBA_PERCENT.test(_))return I=g.RGBA_PERCENT.exec(_).slice(1).map(function(L,N){return N===3?parseFloat(L):parseFloat(L)/100});if(g.HSL.test(_)?(I=g.HSL.exec(_).slice(1).map(function(L,N){return N===0?parseInt(L,10)/360:parseInt(L,10)/100}))[3]=1:g.HSLA.test(_)&&(I=g.HSLA.exec(_).slice(1).map(function(L,N){return N===0?parseInt(L,10)/360:N===3?parseFloat(L):parseInt(L,10)/100})),(I=I.map(function(L){return Math.max(Math.min(L,1),0)})).length)return h.default._hslaToRGBA(I);if(g.HSB.test(_)?(I=g.HSB.exec(_).slice(1).map(function(L,N){return N===0?parseInt(L,10)/360:parseInt(L,10)/100}))[3]=1:g.HSBA.test(_)&&(I=g.HSBA.exec(_).slice(1).map(function(L,N){return N===0?parseInt(L,10)/360:N===3?parseFloat(L):parseInt(L,10)/100})),I.length){for(E=I.length-1;0<=E;--E)I[E]=Math.max(Math.min(I[E],1),0);return h.default._hsbaToRGBA(I)}I=[1,1,1,1]}else{if(T!==1&&T!==2||typeof b!="number")throw new Error("".concat(arguments,"is not a valid color representation."));I[0]=b/M[2],I[1]=b/M[2],I[2]=b/M[2],I[3]=typeof w=="number"?w/M[3]:1,I=I.map(function(L){return Math.max(Math.min(L,1),0)})}return I},s.default.Color);i.default=v},{"../core/constants":256,"../core/main":267,"./color_conversion":252,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.trim":193,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],255:[function(e,o,i){function u(c){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(c)}function a(c){return(a=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(d){return u(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":u(d)})(c)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.fill"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=(p=e("../core/main"))&&p.__esModule?p:{default:p},l=function(c){if(c&&c.__esModule)return c;if(c===null||a(c)!=="object"&&typeof c!="function")return{default:c};var d=h();if(d&&d.has(c))return d.get(c);var f,m={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(f in c){var g;Object.prototype.hasOwnProperty.call(c,f)&&((g=y?Object.getOwnPropertyDescriptor(c,f):null)&&(g.get||g.set)?Object.defineProperty(m,f,g):m[f]=c[f])}return m.default=c,d&&d.set(c,m),m}(e("../core/constants"));function h(){var c;return typeof WeakMap!="function"?null:(c=new WeakMap,h=function(){return c},c)}e("./p5.Color"),s.default.prototype.background=function(){var c;return(c=this._renderer).background.apply(c,arguments),this},s.default.prototype.clear=function(){return this._renderer.clear((arguments.length<=0?void 0:arguments[0])||0,(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0,(arguments.length<=3?void 0:arguments[3])||0),this},s.default.prototype.colorMode=function(c,d,f,m,y){return s.default._validateParameters("colorMode",arguments),c!==l.RGB&&c!==l.HSB&&c!==l.HSL||(this._colorMode=c,c=this._colorMaxes[c],arguments.length===2?(c[0]=d,c[1]=d,c[2]=d,c[3]=d):arguments.length===4?(c[0]=d,c[1]=f,c[2]=m):arguments.length===5&&(c[0]=d,c[1]=f,c[2]=m,c[3]=y)),this},s.default.prototype.fill=function(){var c;return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),(c=this._renderer).fill.apply(c,arguments),this},s.default.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this},s.default.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this},s.default.prototype.stroke=function(){var c;return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),(c=this._renderer).stroke.apply(c,arguments),this},s.default.prototype.erase=function(){return this._renderer.erase(0<arguments.length&&arguments[0]!==void 0?arguments[0]:255,1<arguments.length&&arguments[1]!==void 0?arguments[1]:255),this},s.default.prototype.noErase=function(){return this._renderer.noErase(),this};var p=s.default;i.default=p},{"../core/constants":256,"../core/main":267,"./p5.Color":254,"core-js/modules/es.array.fill":152,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],256:[function(e,o,i){Object.defineProperty(i,"__esModule",{value:!0}),i.BEZIER=i.QUADRATIC=i.LINEAR=i._CTX_MIDDLE=i._DEFAULT_LEADMULT=i._DEFAULT_TEXT_FILL=i.WORD=i.CHAR=i.BOLDITALIC=i.BOLD=i.ITALIC=i.NORMAL=i.BLUR=i.ERODE=i.DILATE=i.POSTERIZE=i.INVERT=i.OPAQUE=i.GRAY=i.THRESHOLD=i.BURN=i.DODGE=i.SOFT_LIGHT=i.HARD_LIGHT=i.OVERLAY=i.REPLACE=i.SCREEN=i.MULTIPLY=i.EXCLUSION=i.SUBTRACT=i.DIFFERENCE=i.LIGHTEST=i.DARKEST=i.ADD=i.REMOVE=i.BLEND=i.UP_ARROW=i.TAB=i.SHIFT=i.RIGHT_ARROW=i.RETURN=i.OPTION=i.LEFT_ARROW=i.ESCAPE=i.ENTER=i.DOWN_ARROW=i.DELETE=i.CONTROL=i.BACKSPACE=i.ALT=i.AUTO=i.HSL=i.HSB=i.RGB=i.MITER=i.BEVEL=i.ROUND=i.SQUARE=i.PROJECT=i.PIE=i.CHORD=i.OPEN=i.CLOSE=i.TESS=i.QUAD_STRIP=i.QUADS=i.TRIANGLE_STRIP=i.TRIANGLE_FAN=i.TRIANGLES=i.LINE_LOOP=i.LINE_STRIP=i.LINES=i.POINTS=i.BASELINE=i.BOTTOM=i.TOP=i.CENTER=i.LEFT=i.RIGHT=i.RADIUS=i.CORNERS=i.CORNER=i.RAD_TO_DEG=i.DEG_TO_RAD=i.RADIANS=i.DEGREES=i.TWO_PI=i.TAU=i.QUARTER_PI=i.PI=i.HALF_PI=i.WAIT=i.TEXT=i.MOVE=i.HAND=i.CROSS=i.ARROW=i.WEBGL=i.P2D=i.VERSION=void 0,i.COVER=i.CONTAIN=i.FALLBACK=i.LABEL=i.AXES=i.GRID=i._DEFAULT_FILL=i._DEFAULT_STROKE=i.PORTRAIT=i.LANDSCAPE=i.MIRROR=i.CLAMP=i.REPEAT=i.NEAREST=i.IMAGE=i.IMMEDIATE=i.TEXTURE=i.FILL=i.STROKE=i.CURVE=void 0;var u=Math.PI,a=(i.VERSION="1.5.0",i.P2D="p2d",i.WEBGL="webgl",i.ARROW="default",i.CROSS="crosshair",i.HAND="pointer",i.MOVE="move",i.TEXT="text",i.WAIT="wait",u/2),a=(i.HALF_PI=a,u),a=(i.PI=a,u/4),a=(i.QUARTER_PI=a,2*u),a=(i.TAU=a,2*u),a=(i.TWO_PI=a,i.DEGREES="degrees",i.RADIANS="radians",u/180),a=(i.DEG_TO_RAD=a,180/u);i.RAD_TO_DEG=a,i.CORNER="corner",i.CORNERS="corners",i.RADIUS="radius",i.RIGHT="right",i.LEFT="left",i.CENTER="center",i.TOP="top",i.BOTTOM="bottom",i.BASELINE="alphabetic",i.POINTS=0,i.LINES=1,i.LINE_STRIP=3,i.LINE_LOOP=2,i.TRIANGLES=4,i.TRIANGLE_FAN=6,i.TRIANGLE_STRIP=5,i.QUADS="quads",i.QUAD_STRIP="quad_strip",i.TESS="tess",i.CLOSE="close",i.OPEN="open",i.CHORD="chord",i.PIE="pie",i.PROJECT="square",i.SQUARE="butt",i.ROUND="round",i.BEVEL="bevel",i.MITER="miter",i.RGB="rgb",i.HSB="hsb",i.HSL="hsl",i.AUTO="auto",i.ALT=18,i.BACKSPACE=8,i.CONTROL=17,i.DELETE=46,i.DOWN_ARROW=40,i.ENTER=13,i.ESCAPE=27,i.LEFT_ARROW=37,i.OPTION=18,i.RETURN=13,i.RIGHT_ARROW=39,i.SHIFT=16,i.TAB=9,i.UP_ARROW=38,i.BLEND="source-over",i.REMOVE="destination-out",i.ADD="lighter",i.DARKEST="darken",i.LIGHTEST="lighten",i.DIFFERENCE="difference",i.SUBTRACT="subtract",i.EXCLUSION="exclusion",i.MULTIPLY="multiply",i.SCREEN="screen",i.REPLACE="copy",i.OVERLAY="overlay",i.HARD_LIGHT="hard-light",i.SOFT_LIGHT="soft-light",i.DODGE="color-dodge",i.BURN="color-burn",i.THRESHOLD="threshold",i.GRAY="gray",i.OPAQUE="opaque",i.INVERT="invert",i.POSTERIZE="posterize",i.DILATE="dilate",i.ERODE="erode",i.BLUR="blur",i.NORMAL="normal",i.ITALIC="italic",i.BOLD="bold",i.BOLDITALIC="bold italic",i.CHAR="CHAR",i.WORD="WORD",i._DEFAULT_TEXT_FILL="#000000",i._DEFAULT_LEADMULT=1.25,i._CTX_MIDDLE="middle",i.LINEAR="linear",i.QUADRATIC="quadratic",i.BEZIER="bezier",i.CURVE="curve",i.STROKE="stroke",i.FILL="fill",i.TEXTURE="texture",i.IMMEDIATE="immediate",i.IMAGE="image",i.NEAREST="nearest",i.REPEAT="repeat",i.CLAMP="clamp",i.MIRROR="mirror",i.LANDSCAPE="landscape",i.PORTRAIT="portrait",i._DEFAULT_STROKE="#000000",i._DEFAULT_FILL="#FFFFFF",i.GRID="grid",i.AXES="axes",i.LABEL="label",i.FALLBACK="fallback",i.CONTAIN="contain",i.COVER="cover"},{}],257:[function(e,o,i){function u(m){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(m)}function a(m){return(a=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(y){return u(y)}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":u(y)})(m)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.search"),e("core-js/modules/es.string.split"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.search"),e("core-js/modules/es.string.split"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=(l=e("./main"))&&l.__esModule?l:{default:l},l=function(m){if(m&&m.__esModule)return m;if(m===null||a(m)!=="object"&&typeof m!="function")return{default:m};var y=h();if(y&&y.has(m))return y.get(m);var g,v={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in m){var w;Object.prototype.hasOwnProperty.call(m,g)&&((w=b?Object.getOwnPropertyDescriptor(m,g):null)&&(w.get||w.set)?Object.defineProperty(v,g,w):v[g]=m[g])}return v.default=m,y&&y.set(m,v),v}(e("./constants"));function h(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,h=function(){return m},m)}var p=[l.ARROW,l.CROSS,l.HAND,l.MOVE,l.TEXT,l.WAIT],c=(s.default.prototype._frameRate=0,s.default.prototype._lastFrameTime=window.performance.now(),s.default.prototype._targetFrameRate=60,window.print);function d(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function f(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}s.default.prototype.print=function(){var m;arguments.length?(m=console).log.apply(m,arguments):c()},s.default.prototype.frameCount=0,s.default.prototype.deltaTime=0,s.default.prototype.focused=document.hasFocus(),s.default.prototype.cursor=function(m,y,g){var v,b="auto",w=this._curElement.elt;p.includes(m)?b=m:typeof m=="string"&&(v="",y&&g&&typeof y=="number"&&typeof g=="number"&&(v="".concat(y," ").concat(g)),b=m.substring(0,7)==="http://"||m.substring(0,8)==="https://"||/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(m)?"url(".concat(m,") ").concat(v,", auto"):m),w.style.cursor=b},s.default.prototype.frameRate=function(m){return s.default._validateParameters("frameRate",arguments),typeof m!="number"||m<0?this._frameRate:(this._setProperty("_targetFrameRate",m),m===0&&this._setProperty("_frameRate",m),this)},s.default.prototype.getFrameRate=function(){return this.frameRate()},s.default.prototype.setFrameRate=function(m){return this.frameRate(m)},s.default.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},s.default.prototype.displayWidth=screen.width,s.default.prototype.displayHeight=screen.height,s.default.prototype.windowWidth=d(),s.default.prototype.windowHeight=f(),s.default.prototype._onresize=function(m){this._setProperty("windowWidth",d()),this._setProperty("windowHeight",f());var y=this._isGlobal?window:this;typeof y.windowResized!="function"||(y=y.windowResized(m))===void 0||y||m.preventDefault()},s.default.prototype.width=0,s.default.prototype.height=0,s.default.prototype.fullscreen=function(m){if(s.default._validateParameters("fullscreen",arguments),m===void 0)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;if(m){if(m=document.documentElement,!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))throw new Error("Fullscreen not enabled in this browser.");m.requestFullscreen?m.requestFullscreen():m.mozRequestFullScreen?m.mozRequestFullScreen():m.webkitRequestFullscreen?m.webkitRequestFullscreen():m.msRequestFullscreen&&m.msRequestFullscreen()}else document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},s.default.prototype.pixelDensity=function(m){var y;return s.default._validateParameters("pixelDensity",arguments),typeof m=="number"?(m!==this._pixelDensity&&(this._pixelDensity=m),(y=this).resizeCanvas(this.width,this.height,!0)):y=this._pixelDensity,y},s.default.prototype.displayDensity=function(){return window.devicePixelRatio},s.default.prototype.getURL=function(){return location.href},s.default.prototype.getURLPath=function(){return location.pathname.split("/").filter(function(m){return m!==""})},s.default.prototype.getURLParams=function(){for(var m,y=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,g={};(m=y.exec(location.search))!=null;)m.index===y.lastIndex&&y.lastIndex++,g[m[1]]=m[2];return g},e=s.default,i.default=e},{"./constants":256,"./main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.search":190,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],258:[function(e,o,i){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.some"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.get-own-property-names"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.search"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.some"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.get-own-property-names"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.search"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=(p=e("../main"))&&p.__esModule?p:{default:p};e("../internationalization");function a(c,d){d=d||console.log.bind(console),s||h(),s.some(function(f){var m;if(c.message&&c.message.match("\\W?".concat(f.name,"\\W"))!==null)return m=f.type==="function"?"".concat(f.name,"()"):f.name,d("Did you just try to use p5.js's ".concat(m," ").concat(f.type,`? If so, you may want to move it into your sketch's setup() function.

For more details, see: `).concat(l)),!0})}var s=null,h=null,l=(u.default._friendlyError=u.default._checkForUserDefinedFunctions=u.default._fesErrorMonitor=function(){},s=null,"https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup"),h=function(){function c(f){return Object.getOwnPropertyNames(f).filter(function(m){return m[0]!=="_"&&!(m in d)&&(d[m]=!0)}).map(function(m){var y=typeof f[m]=="function"?"function":m===m.toUpperCase()?"constant":"variable";return{name:m,type:y}})}var d={};(s=[].concat(c(u.default.prototype),c(e("../constants")))).sort(function(f,m){return m.name.length-f.name.length})},p=(u.default.prototype._helpForMisusedAtTopLevelCode=a,document.readyState!=="complete"&&(window.addEventListener("error",a,!1),window.addEventListener("load",function(){window.removeEventListener("error",a,!1)})),u.default);i.default=p},{"../constants":256,"../internationalization":265,"../main":267,"./browser_errors":void 0,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.some":163,"core-js/modules/es.function.name":165,"core-js/modules/es.object.assign":172,"core-js/modules/es.object.get-own-property-names":174,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.match":187,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.search":190,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.for-each":229,"core-js/modules/web.dom-collections.iterator":230}],259:[function(e,o,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=(u=e("../main"))&&u.__esModule?u:{default:u};e("../internationalization"),u.default._friendlyFileLoadError=function(){},e=u.default,i.default=e},{"../internationalization":265,"../main":267}],260:[function(e,o,i){function u(d){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(d)}function a(d){return(a=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(f){return u(f)}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":u(f)})(d)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=p(e("../main"));e("../internationalization"),h(e("../constants"));function l(){var d;return typeof WeakMap!="function"?null:(d=new WeakMap,l=function(){return d},d)}function h(d){if(d&&d.__esModule)return d;if(d===null||a(d)!=="object"&&typeof d!="function")return{default:d};var f=l();if(f&&f.has(d))return f.get(d);var m,y,g={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in d)Object.prototype.hasOwnProperty.call(d,m)&&((y=v?Object.getOwnPropertyDescriptor(d,m):null)&&(y.get||y.set)?Object.defineProperty(g,m,y):g[m]=d[m]);return g.default=d,f&&f.set(d,g),g}function p(d){return d&&d.__esModule?d:{default:d}}s.default._fesCodeReader=function(){};var c=s.default;i.default=c},{"../constants":256,"../internationalization":265,"../main":267,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.from":155,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.match":187,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.for-each":229,"core-js/modules/web.dom-collections.iterator":230}],261:[function(e,o,i){e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,e=(e=e("../main"))&&e.__esModule?e:{default:e};function u(){var a=/(^|@)\S+:\d+/,s=/^\s*at .*(\S+:\d+|\(native\))/m,l=/^(eval@)?(\[native code])?$/;return{parse:function(h){return h.stacktrace!==void 0||h["opera#sourceloc"]!==void 0?this.parseOpera(h):h.stack&&h.stack.match(s)?this.parseV8OrIE(h):h.stack?this.parseFFOrSafari(h):void 0},extractLocation:function(h){return h.indexOf(":")===-1?[h]:[(h=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(h.replace(/[()]/g,"")))[1],h[2]||void 0,h[3]||void 0]},parseV8OrIE:function(h){return h.stack.split(`
`).filter(function(p){return!!p.match(s)},this).map(function(p){var c=(p=-1<p.indexOf("(eval ")?p.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""):p).replace(/^\s+/,"").replace(/\(eval code/g,"("),d=c.match(/ (\((.+):(\d+):(\d+)\)$)/),c=(c=d?c.replace(d[0],""):c).split(/\s+/).slice(1),d=this.extractLocation(d?d[1]:c.pop());return{functionName:c.join(" ")||void 0,fileName:-1<["eval","<anonymous>"].indexOf(d[0])?void 0:d[0],lineNumber:d[1],columnNumber:d[2],source:p}},this)},parseFFOrSafari:function(h){return h.stack.split(`
`).filter(function(p){return!p.match(l)},this).map(function(p){var c,d;return(p=-1<p.indexOf(" > eval")?p.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1"):p).indexOf("@")===-1&&p.indexOf(":")===-1?{functionName:p}:{functionName:(d=p.match(c=/((.*".+"[^@]*)?[^@]*)(?:@)/))&&d[1]?d[1]:void 0,fileName:(d=this.extractLocation(p.replace(c,"")))[0],lineNumber:d[1],columnNumber:d[2],source:p}},this)},parseOpera:function(h){return!h.stacktrace||-1<h.message.indexOf(`
`)&&h.message.split(`
`).length>h.stacktrace.split(`
`).length?this.parseOpera9(h):h.stack?this.parseOpera11(h):this.parseOpera10(h)},parseOpera9:function(h){for(var p=/Line (\d+).*script (?:in )?(\S+)/i,c=h.message.split(`
`),d=[],f=2,m=c.length;f<m;f+=2){var y=p.exec(c[f]);y&&d.push({fileName:y[2],lineNumber:y[1],source:c[f]})}return d},parseOpera10:function(h){for(var p=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,c=h.stacktrace.split(`
`),d=[],f=0,m=c.length;f<m;f+=2){var y=p.exec(c[f]);y&&d.push({functionName:y[3]||void 0,fileName:y[2],lineNumber:y[1],source:c[f]})}return d},parseOpera11:function(h){return h.stack.split(`
`).filter(function(p){return!!p.match(a)&&!p.match(/^Error created at/)},this).map(function(p){var c,f=p.split("@"),d=this.extractLocation(f.pop()),f=f.shift()||"";return{functionName:f.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,args:(c=f.match(/\(([^)]*)\)/)?f.replace(/^[^(]+\(([^)]*)\)$/,"$1"):c)===void 0||c==="[arguments not available]"?void 0:c.split(","),fileName:d[0],lineNumber:d[1],columnNumber:d[2],source:p}},this)}}}e.default._getErrorStackParser=function(){return new u},e=e.default,i.default=e},{"../main":267,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.join":159,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.match":187,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191}],262:[function(e,o,i){function u(h){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(h)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.map"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.reflect.construct"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.set"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.map"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.reflect.construct"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.set"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a=(a=e("../main"))&&a.__esModule?a:{default:a};(function(h){if(!(h&&h.__esModule)&&!(h===null||l(h)!=="object"&&typeof h!="function")){var p=s();if(p&&p.has(h))return p.get(h);var c,d={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(c in h){var m;Object.prototype.hasOwnProperty.call(h,c)&&((m=f?Object.getOwnPropertyDescriptor(h,c):null)&&(m.get||m.set)?Object.defineProperty(d,c,m):d[c]=h[c])}d.default=h,p&&p.set(h,d)}})(e("../constants")),e("../internationalization");function s(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,s=function(){return h},h)}function l(h){return(l=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(p){return u(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":u(p)})(h)}a.default._validateParameters=a.default._clearValidateParamsCache=function(){},e=a.default,i.default=e},{"../../../docs/parameterData.json":void 0,"../constants":256,"../internationalization":265,"../main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.last-index-of":160,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.function.name":165,"core-js/modules/es.map":166,"core-js/modules/es.number.constructor":169,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.get-prototype-of":175,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.reflect.construct":179,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.set":183,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.for-each":229,"core-js/modules/web.dom-collections.iterator":230}],263:[function(e,o,i){function u(h){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(h)}function a(h){return(a=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(p){return u(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":u(p)})(h)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=function(h){if(h&&h.__esModule)return h;if(h===null||a(h)!=="object"&&typeof h!="function")return{default:h};var p=l();if(p&&p.has(h))return p.get(h);var c,d={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(c in h){var m;Object.prototype.hasOwnProperty.call(h,c)&&((m=f?Object.getOwnPropertyDescriptor(h,c):null)&&(m.get||m.set)?Object.defineProperty(d,c,m):d[c]=h[c])}return d.default=h,p&&p.set(h,d),d}(e("./constants"));function l(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,l=function(){return h},h)}i.default={modeAdjust:function(h,p,c,d,f){return f===s.CORNER?{x:h,y:p,w:c,h:d}:f===s.CORNERS?{x:h,y:p,w:c-h,h:d-p}:f===s.RADIUS?{x:h-c,y:p-d,w:2*c,h:2*d}:f===s.CENTER?{x:h-.5*c,y:p-.5*d,w:c,h:d}:void 0}}},{"./constants":256,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],264:[function(e,o,i){e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator");var u=(a=e("../core/main"))&&a.__esModule?a:{default:a};e("./internationalization");var a=Promise.resolve();Promise.all([new Promise(function(s,l){document.readyState==="complete"?s():window.addEventListener("load",s,!1)}),a]).then(function(){window._setupDone!==void 0?console.warn("p5.js seems to have been imported multiple times. Please remove the duplicate import"):window.mocha||(window.setup&&typeof window.setup=="function"||window.draw&&typeof window.draw=="function")&&!u.default.instance&&new u.default})},{"../core/main":267,"./internationalization":265,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.string.iterator":186,"core-js/modules/web.dom-collections.iterator":230}],265:[function(e,o,i){e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.setTranslatorLanguage=i.currentTranslatorLanguage=i.availableTranslatorLanguages=i.initialize=i.translator=void 0;var u,a,s=h(e("i18next")),l=h(e("i18next-browser-languagedetector"));function h(d){return d&&d.__esModule?d:{default:d}}function p(d,f){for(var m=0;m<f.length;m++){var y=f[m];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(d,y.key,y)}}var c=function(){function d(y,g){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this.init(y,g)}var f,m;return f=d,(m=[{key:"fetchWithTimeout",value:function(y,g){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:2e3;return Promise.race([fetch(y,g),new Promise(function(b,w){return setTimeout(function(){return w(new Error("timeout"))},v)})])}},{key:"init",value:function(y){var g=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};this.services=y,this.options=g}},{key:"read",value:function(y,g,v){var b=this.options.loadPath;y===this.options.fallback?v(null,u[y][g]):a.includes(y)?(b=this.services.interpolator.interpolate(b,{lng:y,ns:g}),this.loadUrl(b,v)):v("Not found",!1)}},{key:"loadUrl",value:function(y,g){this.fetchWithTimeout(y).then(function(v){if(v.ok)return v.json();throw new Error("failed loading ".concat(y))},function(){throw new Error("failed loading ".concat(y))}).then(function(v){return g(null,v)}).catch(g)}}])&&p(f.prototype,m),d}();c.type="backend",i.translator=function(d,f){console.debug("p5.js translator called before translations were loaded"),s.default.t(d,f)},i.initialize=function(){return s.default.use(l.default).use(c).init({fallbackLng:"en",nestingPrefix:"$tr(",nestingSuffix:")",defaultNS:"translation",returnEmptyString:!1,interpolation:{escapeValue:!1},detection:{checkWhitelist:!1,order:["querystring","navigator","htmlTag","path","subdomain"],caches:[]},backend:{fallback:"en",loadPath:"https://cdn.jsdelivr.net/npm/p5/translations/{{lng}}/{{ns}}.json"},partialBundledLanguages:!0,resources:u}).then(function(d){i.translator=d},function(d){return console.debug("Translations failed to load (".concat(d,")"))})},i.availableTranslatorLanguages=function(){return s.default.languages},i.currentTranslatorLanguage=function(d){return s.default.language},i.setTranslatorLanguage=function(d){return s.default.changeLanguage(d||void 0,function(f){return console.debug("Translations failed to load (".concat(f,")"))})}},{"../../translations":void 0,"../../translations/dev":void 0,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.split":191,"core-js/modules/web.dom-collections.iterator":230,i18next:3,"i18next-browser-languagedetector":3}],266:[function(e,o,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,e=(e=e("./main"))&&e.__esModule?e:{default:e},e.default.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},e.default.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},e.default.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},e.default.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")},e=e.default,i.default=e},{"./main":267}],267:[function(e,o,i){function u(d){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(d)}function a(d){return(a=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(f){return u(f)}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":u(f)})(d)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.get-own-property-names"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-names"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,e("./shim");var s=function(d){if(d&&d.__esModule)return d;if(d===null||a(d)!=="object"&&typeof d!="function")return{default:d};var f=l();if(f&&f.has(d))return f.get(d);var m,y={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in d){var v;Object.prototype.hasOwnProperty.call(d,m)&&((v=g?Object.getOwnPropertyDescriptor(d,m):null)&&(v.get||v.set)?Object.defineProperty(y,m,v):y[m]=d[m])}return y.default=d,f&&f.set(d,y),y}(e("./constants"));function l(){var d;return typeof WeakMap!="function"?null:(d=new WeakMap,l=function(){return d},d)}function h(d,f){for(var m=0;m<f.length;m++){var y=f[m];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(d,y.key,y)}}var p,c=function(){function d(y,w,v){var b=this;if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this._setupDone=!1,this._preloadDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._userNode=w,this._curElement=null,this._elements=[],this._glAttributes=null,this._requestAnimId=0,this._preloadCount=0,this._isGlobal=!1,this._loop=!0,this._initializeInstanceVariables(),this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,dblclick:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},this._millisStart=-1,this._lcg_random_state=null,this._gaussian_previous=!1,this._events.wheel=null,this._loadingScreenId="p5_loading",this._registeredMethods={};var w=Object.getOwnPropertyNames(d.prototype._registeredMethods),_=!0,j=!1,E=void 0;try{for(var T,R=w[Symbol.iterator]();!(_=(T=R.next()).done);_=!0){var M=T.value;this._registeredMethods[M]=d.prototype._registeredMethods[M].slice()}}catch(G){j=!0,E=G}finally{try{_||R.return==null||R.return()}finally{if(j)throw E}}window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),this._start=function(){b._userNode&&typeof b._userNode=="string"&&(b._userNode=document.getElementById(b._userNode));var G=b._isGlobal?window:b;if(G.preload){var V,X=document.getElementById(b._loadingScreenId),te=(X||((X=document.createElement("div")).innerHTML="Loading...",X.style.position="absolute",X.id=b._loadingScreenId,(b._userNode||document.body).appendChild(X)),b._preloadMethods);for(V in te){te[V]=te[V]||d;var A=te[V];A!==d.prototype&&A!==d||(b._isGlobal&&(window[V]=b._wrapPreload(b,V)),A=b),b._registeredPreloadMethods[V]=A[V],A[V]=b._wrapPreload(A,V)}G.preload(),b._runIfPreloadsAreDone()}else b._setup(),b._draw()},this._runIfPreloadsAreDone=function(){var G,V=this._isGlobal?window:this;V._preloadCount===0&&((G=document.getElementById(V._loadingScreenId))&&G.parentNode.removeChild(G),this._setupDone||(this._lastFrameTime=window.performance.now(),V._setup(),V._draw()))},this._decrementPreload=function(){var G=this._isGlobal?window:this;G._preloadDone||typeof G.preload!="function"||(G._setProperty("_preloadCount",G._preloadCount-1),G._runIfPreloadsAreDone())},this._wrapPreload=function(G,V){var X=this;return function(){X._incrementPreload();for(var te=arguments.length,A=new Array(te),O=0;O<te;O++)A[O]=arguments[O];return X._registeredPreloadMethods[V].apply(G,A)}},this._incrementPreload=function(){var G=this._isGlobal?window:this;G._preloadDone||G._setProperty("_preloadCount",G._preloadCount+1)},this._setup=function(){b.createCanvas(b._defaultCanvasSize.width,b._defaultCanvasSize.height,"p2d");var G=b._isGlobal?window:b;if(typeof G.preload=="function")for(var V in b._preloadMethods)G[V]=b._preloadMethods[V][V],G[V]&&b&&(G[V]=G[V].bind(b));b._millisStart=window.performance.now(),G._preloadDone=!0,typeof G.setup=="function"&&G.setup();var X=document.getElementsByTagName("canvas"),te=!0,A=!1,O=void 0;try{for(var U,Y=X[Symbol.iterator]();!(te=(U=Y.next()).done);te=!0){var J=U.value;J.dataset.hidden==="true"&&(J.style.visibility="",delete J.dataset.hidden)}}catch(ae){A=!0,O=ae}finally{try{te||Y.return==null||Y.return()}finally{if(A)throw O}}b._lastFrameTime=window.performance.now(),b._setupDone=!0,(b._accessibleOutputs.grid||b._accessibleOutputs.text)&&b._updateAccsOutput()},this._draw=function(){var G=window.performance.now(),V=G-b._lastFrameTime,X=1e3/b._targetFrameRate;(!b._loop||X-5<=V)&&(b.redraw(),b._frameRate=1e3/(G-b._lastFrameTime),b.deltaTime=G-b._lastFrameTime,b._setProperty("deltaTime",b.deltaTime),b._lastFrameTime=G,b._updateMouseCoords!==void 0&&(b._updateMouseCoords(),b._setProperty("movedX",0),b._setProperty("movedY",0))),b._loop&&(b._requestAnimId=window.requestAnimationFrame(b._draw))},this._setProperty=function(G,V){b[G]=V,b._isGlobal&&(window[G]=V)},this.remove=function(){var G=document.getElementById(b._loadingScreenId);if(G&&(G.parentNode.removeChild(G),b._incrementPreload()),b._curElement){for(var V in b._loop=!1,b._requestAnimId&&window.cancelAnimationFrame(b._requestAnimId),b._events)window.removeEventListener(V,b._events[V]);var X=!0,G=!1,te=void 0;try{for(var A,O=b._elements[Symbol.iterator]();!(X=(A=O.next()).done);X=!0){var U,Y=A.value;for(U in Y.elt&&Y.elt.parentNode&&Y.elt.parentNode.removeChild(Y.elt),Y._events)Y.elt.removeEventListener(U,Y._events[U])}}catch(ne){G=!0,te=ne}finally{try{X||O.return==null||O.return()}finally{if(G)throw te}}var J=b;b._registeredMethods.remove.forEach(function(ne){ne!==void 0&&ne.call(J)})}if(b._isGlobal){for(var ae in d.prototype)try{delete window[ae]}catch{window[ae]=void 0}for(var ue in b)if(b.hasOwnProperty(ue))try{delete window[ue]}catch{window[ue]=void 0}d.instance=null}},this._registeredMethods.init.forEach(function(G){G!==void 0&&G.call(this)},this),this._setupPromisePreloads();var I,D,L=this._createFriendlyGlobalFunctionBinder();if(y)y(this),d._checkForUserDefinedFunctions(this);else{for(var N in this._isGlobal=!0,d.instance=this,d.prototype)typeof d.prototype[N]=="function"?(I=N.substring(2),this._events.hasOwnProperty(I)||(Math.hasOwnProperty(N)&&Math[N]===d.prototype[N]?L(N,d.prototype[N]):L(N,d.prototype[N].bind(this)))):L(N,d.prototype[N]);for(var W in this)this.hasOwnProperty(W)&&L(W,this[W])}for(D in this._events){var q=this["_on".concat(D)];q&&(q=q.bind(this),window.addEventListener(D,q,{passive:!1}),this._events[D]=q)}function H(){b._setProperty("focused",!0)}function B(){b._setProperty("focused",!1)}window.addEventListener("focus",H),window.addEventListener("blur",B),this.registerMethod("remove",function(){window.removeEventListener("focus",H),window.removeEventListener("blur",B)}),document.readyState==="complete"?this._start():window.addEventListener("load",this._start.bind(this),!1)}var f,m;return f=d,(m=[{key:"_initializeInstanceVariables",value:function(){this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1},this._styles=[],this._bezierDetail=20,this._curveDetail=20,this._colorMode=s.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},this._downKeys={}}},{key:"registerPreloadMethod",value:function(y,g){d.prototype._preloadMethods.hasOwnProperty(y)||(d.prototype._preloadMethods[y]=g)}},{key:"registerMethod",value:function(y,g){var v=this||d.prototype;v._registeredMethods.hasOwnProperty(y)||(v._registeredMethods[y]=[]),v._registeredMethods[y].push(g)}},{key:"_createFriendlyGlobalFunctionBinder",value:function(){var y=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},g=y.globalObject||window;return y.log||console.log.bind(console),function(v,b){d.disableFriendlyErrors,g[v]=b}}}])&&h(f.prototype,m),d}();for(p in c.instance=null,c.disableFriendlyErrors=!1,s)c.prototype[p]=s[p];c.VERSION=s.VERSION,c.prototype._preloadMethods={loadJSON:c.prototype,loadImage:c.prototype,loadStrings:c.prototype,loadXML:c.prototype,loadBytes:c.prototype,loadTable:c.prototype,loadFont:c.prototype,loadModel:c.prototype,loadShader:c.prototype},c.prototype._registeredMethods={init:[],pre:[],post:[],remove:[]},c.prototype._registeredPreloadMethods={},i.default=c},{"./constants":256,"./shim":278,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.get-own-property-names":174,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.for-each":229,"core-js/modules/web.dom-collections.iterator":230}],268:[function(e,o,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=(e=e("./main"))&&e.__esModule?e:{default:e};u.default.Element=function(a,s){this.elt=a,this._pInst=this._pixelsState=s,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight},u.default.Element.prototype.parent=function(a){return a===void 0?this.elt.parentNode:(typeof a=="string"?(a[0]==="#"&&(a=a.substring(1)),a=document.getElementById(a)):a instanceof u.default.Element&&(a=a.elt),a.appendChild(this.elt),this)},u.default.Element.prototype.id=function(a){return a===void 0?this.elt.id:(this.elt.id=a,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)},u.default.Element.prototype.class=function(a){return a===void 0?this.elt.className:(this.elt.className=a,this)},u.default.Element.prototype.mousePressed=function(a){return u.default.Element._adjustListener("mousedown",function(s){return this._pInst._setProperty("mouseIsPressed",!0),this._pInst._setMouseButton(s),a.call(this,s)},this),this},u.default.Element.prototype.doubleClicked=function(a){return u.default.Element._adjustListener("dblclick",a,this),this},u.default.Element.prototype.mouseWheel=function(a){return u.default.Element._adjustListener("wheel",a,this),this},u.default.Element.prototype.mouseReleased=function(a){return u.default.Element._adjustListener("mouseup",a,this),this},u.default.Element.prototype.mouseClicked=function(a){return u.default.Element._adjustListener("click",a,this),this},u.default.Element.prototype.mouseMoved=function(a){return u.default.Element._adjustListener("mousemove",a,this),this},u.default.Element.prototype.mouseOver=function(a){return u.default.Element._adjustListener("mouseover",a,this),this},u.default.Element.prototype.mouseOut=function(a){return u.default.Element._adjustListener("mouseout",a,this),this},u.default.Element.prototype.touchStarted=function(a){return u.default.Element._adjustListener("touchstart",a,this),this},u.default.Element.prototype.touchMoved=function(a){return u.default.Element._adjustListener("touchmove",a,this),this},u.default.Element.prototype.touchEnded=function(a){return u.default.Element._adjustListener("touchend",a,this),this},u.default.Element.prototype.dragOver=function(a){return u.default.Element._adjustListener("dragover",a,this),this},u.default.Element.prototype.dragLeave=function(a){return u.default.Element._adjustListener("dragleave",a,this),this},u.default.Element._adjustListener=function(a,s,l){return s===!1?u.default.Element._detachListener(a,l):u.default.Element._attachListener(a,s,l),this},u.default.Element._attachListener=function(a,s,l){l._events[a]&&u.default.Element._detachListener(a,l),s=s.bind(l),l.elt.addEventListener(a,s,!1),l._events[a]=s},u.default.Element._detachListener=function(a,s){var l=s._events[a];s.elt.removeEventListener(a,l,!1),s._events[a]=null},u.default.Element.prototype._setProperty=function(a,s){this[a]=s},e=u.default.Element,i.default=e},{"./main":267}],269:[function(e,o,i){function u(c){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(c)}function a(c){return(a=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(d){return u(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":u(d)})(c)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.splice"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=(p=e("./main"))&&p.__esModule?p:{default:p},l=function(c){if(c&&c.__esModule)return c;if(c===null||a(c)!=="object"&&typeof c!="function")return{default:c};var d=h();if(d&&d.has(c))return d.get(c);var f,m={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(f in c){var g;Object.prototype.hasOwnProperty.call(c,f)&&((g=y?Object.getOwnPropertyDescriptor(c,f):null)&&(g.get||g.set)?Object.defineProperty(m,f,g):m[f]=c[f])}return m.default=c,d&&d.set(c,m),m}(e("./constants"));function h(){var c;return typeof WeakMap!="function"?null:(c=new WeakMap,h=function(){return c},c)}s.default.Graphics=function(c,d,g,m){var y,g=g||l.P2D;for(y in this.canvas=document.createElement("canvas"),(m._userNode||document.body).appendChild(this.canvas),s.default.Element.call(this,this.canvas,m),s.default.prototype)this[y]||(typeof s.default.prototype[y]=="function"?this[y]=s.default.prototype[y].bind(this):this[y]=s.default.prototype[y]);return s.default.prototype._initializeInstanceVariables.apply(this),this.width=c,this.height=d,this._pixelDensity=m._pixelDensity,g===l.WEBGL?this._renderer=new s.default.RendererGL(this.canvas,this,!1):this._renderer=new s.default.Renderer2D(this.canvas,this,!1),m._elements.push(this),Object.defineProperty(this,"deltaTime",{get:function(){return this._pInst.deltaTime}}),this._renderer.resize(c,d),this._renderer._applyDefaults(),this},s.default.Graphics.prototype=Object.create(s.default.Element.prototype),s.default.Graphics.prototype.reset=function(){this._renderer.resetMatrix(),this._renderer.isP3D&&this._renderer._update()},s.default.Graphics.prototype.remove=function(){this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt);var c,d=this._pInst._elements.indexOf(this);for(c in d!==-1&&this._pInst._elements.splice(d,1),this._events)this.elt.removeEventListener(c,this._events[c])};var p=s.default.Graphics;i.default=p},{"./constants":256,"./main":267,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.splice":164,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],270:[function(e,o,i){function u(d){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(d)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a=(c=e("./main"))&&c.__esModule?c:{default:c},s=function(d){if(d&&d.__esModule)return d;if(d===null||h(d)!=="object"&&typeof d!="function")return{default:d};var f=l();if(f&&f.has(d))return f.get(d);var m,y={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in d){var v;Object.prototype.hasOwnProperty.call(d,m)&&((v=g?Object.getOwnPropertyDescriptor(d,m):null)&&(v.get||v.set)?Object.defineProperty(y,m,v):y[m]=d[m])}return y.default=d,f&&f.set(d,y),y}(e("../core/constants"));function l(){var d;return typeof WeakMap!="function"?null:(d=new WeakMap,l=function(){return d},d)}function h(d){return(h=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(f){return u(f)}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":u(f)})(d)}function p(d){var f=0,m=0;if(d.offsetParent)for(;f+=d.offsetLeft,m+=d.offsetTop,d=d.offsetParent;);else f+=d.offsetLeft,m+=d.offsetTop;return[f,m]}a.default.Renderer=function(d,f,m){a.default.Element.call(this,d,f),this.canvas=d,this._pixelsState=f,m?(this._isMainCanvas=!0,this._pInst._setProperty("_curElement",this),this._pInst._setProperty("canvas",this.canvas),this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height)):(this.canvas.style.display="none",this._styles=[]),this._textSize=12,this._textLeading=15,this._textFont="sans-serif",this._textStyle=s.NORMAL,this._textAscent=null,this._textDescent=null,this._textAlign=s.LEFT,this._textBaseline=s.BASELINE,this._textWrap=s.WORD,this._rectMode=s.CORNER,this._ellipseMode=s.CENTER,this._curveTightness=0,this._imageMode=s.CORNER,this._tint=null,this._doStroke=!0,this._doFill=!0,this._strokeSet=!1,this._fillSet=!1,this._leadingSet=!1},a.default.Renderer.prototype=Object.create(a.default.Element.prototype),a.default.Renderer.prototype.push=function(){return{properties:{_doStroke:this._doStroke,_strokeSet:this._strokeSet,_doFill:this._doFill,_fillSet:this._fillSet,_tint:this._tint,_imageMode:this._imageMode,_rectMode:this._rectMode,_ellipseMode:this._ellipseMode,_textFont:this._textFont,_textLeading:this._textLeading,_leadingSet:this._leadingSet,_textSize:this._textSize,_textAlign:this._textAlign,_textBaseline:this._textBaseline,_textStyle:this._textStyle,_textWrap:this._textWrap}}},a.default.Renderer.prototype.pop=function(d){d.properties&&Object.assign(this,d.properties)},a.default.Renderer.prototype.resize=function(d,f){this.width=d,this.height=f,this.elt.width=d*this._pInst._pixelDensity,this.elt.height=f*this._pInst._pixelDensity,this.elt.style.width="".concat(d,"px"),this.elt.style.height="".concat(f,"px"),this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))},a.default.Renderer.prototype.get=function(d,f,m,y){var g=this._pixelsState,v=g._pixelDensity,b=this.canvas;if(d===void 0&&f===void 0)d=f=0,m=g.width,y=g.height;else if(d*=v,f*=v,m===void 0&&y===void 0)return d<0||f<0||d>=b.width||f>=b.height?[0,0,0,0]:this._getPixel(d,f);return g=new a.default.Image(m,y),g.canvas.getContext("2d").drawImage(b,d,f,m*v,y*v,0,0,m,y),g},a.default.Renderer.prototype.textLeading=function(d){return typeof d=="number"?(this._setProperty("_leadingSet",!0),this._setProperty("_textLeading",d),this._pInst):this._textLeading},a.default.Renderer.prototype.textSize=function(d){return typeof d=="number"?(this._setProperty("_textSize",d),this._leadingSet||this._setProperty("_textLeading",d*s._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},a.default.Renderer.prototype.textStyle=function(d){return d?(d!==s.NORMAL&&d!==s.ITALIC&&d!==s.BOLD&&d!==s.BOLDITALIC||this._setProperty("_textStyle",d),this._applyTextProperties()):this._textStyle},a.default.Renderer.prototype.textAscent=function(){return this._textAscent===null&&this._updateTextMetrics(),this._textAscent},a.default.Renderer.prototype.textDescent=function(){return this._textDescent===null&&this._updateTextMetrics(),this._textDescent},a.default.Renderer.prototype.textAlign=function(d,f){return d!==void 0?(this._setProperty("_textAlign",d),f!==void 0&&this._setProperty("_textBaseline",f),this._applyTextProperties()):{horizontal:this._textAlign,vertical:this._textBaseline}},a.default.Renderer.prototype.textWrap=function(d){return this._setProperty("_textWrap",d),this._textWrap},a.default.Renderer.prototype.text=function(d,f,m,y,g){var v,b,w,_,j=this._pInst,E=this._textWrap,T=Number.MAX_VALUE,R=m;if((this._doFill||this._doStroke)&&d!==void 0){if(v=(d=(d=typeof d!="string"?d.toString():d).replace(/(\t)/g,"  ")).split(`
`),y!==void 0){switch(this._rectMode===s.CENTER&&(f-=y/2),this._textAlign){case s.CENTER:f+=y/2;break;case s.RIGHT:f+=y}if(g!==void 0){this._rectMode===s.CENTER&&(m-=g/2);var d=m,M=j.textAscent();switch(this._textBaseline){case s.BOTTOM:_=m+g,m=Math.max(_,m),R+=M;break;case s.CENTER:_=m+g/2,m=Math.max(_,m),R+=M/2}T=m+g-M,this._textBaseline===s.CENTER&&(T=d+g-M/2)}else{if(this._textBaseline===s.BOTTOM)return console.warn("textAlign(*, BOTTOM) requires x, y, width and height");if(this._textBaseline===s.CENTER)return console.warn("textAlign(*, CENTER) requires x, y, width and height")}if(E===s.WORD){for(var I=[],D=0;D<v.length;D++){for(var L="",N=v[D].split(" "),W=0;W<N.length;W++)b="".concat(L+N[W])+" ",L=y<(w=this.textWidth(b))&&0<L.length?(I.push(L),"".concat(N[W])+" "):b;I.push(L)}var q=0;this._textBaseline===s.CENTER?q=(I.length-1)*j.textLeading()/2:this._textBaseline===s.BOTTOM&&(q=(I.length-1)*j.textLeading());for(var H=0;H<v.length;H++){L="",N=v[H].split(" ");for(var B=0;B<N.length;B++)b="".concat(L+N[B])+" ",y<(w=this.textWidth(b))&&0<L.length?(this._renderText(j,L.trim(),f,m-q,T,R),L="".concat(N[B])+" ",m+=j.textLeading()):L=b;this._renderText(j,L.trim(),f,m-q,T,R),m+=j.textLeading()}}else{for(var G=[],V=0;V<v.length;V++)for(var X=v[V].split(L=""),te=0;te<X.length;te++)b="".concat(L+X[te]),(w=this.textWidth(b))<=y?L+=X[te]:y<w&&0<L.length&&(G.push(L),L="".concat(X[te]));G.push(L);var A=0;this._textBaseline===s.CENTER?A=(G.length-1)*j.textLeading()/2:this._textBaseline===s.BOTTOM&&(A=(G.length-1)*j.textLeading());for(var O=0;O<v.length;O++){X=v[O].split(L="");for(var U=0;U<X.length;U++)b="".concat(L+X[U]),(w=this.textWidth(b))<=y?L+=X[U]:y<w&&0<L.length&&(this._renderText(j,L.trim(),f,m-A,T,R),m+=j.textLeading(),L="".concat(X[U]))}this._renderText(j,L.trim(),f,m-A,T,R),m+=j.textLeading()}}else{var Y=0;this._textBaseline===s.CENTER?Y=(v.length-1)*j.textLeading()/2:this._textBaseline===s.BOTTOM&&(Y=(v.length-1)*j.textLeading());for(var J=0;J<v.length;J++)this._renderText(j,v[J],f,m-Y,T,R),m+=j.textLeading()}return j}},a.default.Renderer.prototype._applyDefaults=function(){return this},a.default.Renderer.prototype._isOpenType=function(){var d=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this._textFont;return h(d)==="object"&&d.font&&d.font.supported},a.default.Renderer.prototype._updateTextMetrics=function(){var d,f,m,y,g,v;return this._isOpenType()?(this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent())):((d=document.createElement("span")).style.fontFamily=this._textFont,d.style.fontSize="".concat(this._textSize,"px"),d.innerHTML="ABCjgq|",(v=document.createElement("div")).style.display="inline-block",v.style.width="1px",v.style.height="0px",y=((f=document.createElement("div")).appendChild(d),f.appendChild(v),f.style.height="0px",f.style.overflow="hidden",document.body.appendChild(f),v.style.verticalAlign="baseline",p(v)),g=p(d),m=y[1]-g[1],y=(v.style.verticalAlign="bottom",p(v)),g=p(d),v=y[1]-g[1]-m,document.body.removeChild(f),this._setProperty("_textAscent",m),this._setProperty("_textDescent",v)),this};var c=a.default.Renderer;i.default=c},{"../core/constants":256,"./main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.number.constructor":169,"core-js/modules/es.object.assign":172,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],271:[function(e,o,i){function u(d){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(d)}function a(d){return(a=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(f){return u(f)}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":u(f)})(d)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=(c=e("./main"))&&c.__esModule?c:{default:c},l=function(d){if(d&&d.__esModule)return d;if(d===null||a(d)!=="object"&&typeof d!="function")return{default:d};var f=h();if(f&&f.has(d))return f.get(d);var m,y={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in d){var v;Object.prototype.hasOwnProperty.call(d,m)&&((v=g?Object.getOwnPropertyDescriptor(d,m):null)&&(v.get||v.set)?Object.defineProperty(y,m,v):y[m]=d[m])}return y.default=d,f&&f.set(d,y),y}(e("./constants"));function h(){var d;return typeof WeakMap!="function"?null:(d=new WeakMap,h=function(){return d},d)}e("./p5.Renderer");var p="rgba(0,0,0,0)",c=(s.default.Renderer2D=function(d,f,m){return s.default.Renderer.call(this,d,f,m),this.drawingContext=this.canvas.getContext("2d"),this._pInst._setProperty("drawingContext",this.drawingContext),this},s.default.Renderer2D.prototype=Object.create(s.default.Renderer.prototype),s.default.Renderer2D.prototype._applyDefaults=function(){this._cachedFillStyle=this._cachedStrokeStyle=void 0,this._cachedBlendMode=l.BLEND,this._setFill(l._DEFAULT_FILL),this._setStroke(l._DEFAULT_STROKE),this.drawingContext.lineCap=l.ROUND,this.drawingContext.font="normal 12px sans-serif"},s.default.Renderer2D.prototype.resize=function(d,f){s.default.Renderer.prototype.resize.call(this,d,f),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)},s.default.Renderer2D.prototype.background=function(){var d,f;this.drawingContext.save(),this.resetMatrix(),(arguments.length<=0?void 0:arguments[0])instanceof s.default.Image?0<=(arguments.length<=1?void 0:arguments[1])?(d=arguments.length<=0?void 0:arguments[0],this.drawingContext.globalAlpha=(arguments.length<=1?void 0:arguments[1])/255,this._pInst.image(d,0,0,this.width,this.height)):this._pInst.image(arguments.length<=0?void 0:arguments[0],0,0,this.width,this.height):(d=this._getFill(),f=(f=this._pInst).color.apply(f,arguments),this._pInst._addAccsOutput()&&this._pInst._accsBackground(f.levels),f=f.toString(),this._setFill(f),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.fillRect(0,0,this.width,this.height),this._setFill(d),this._isErasing&&this._pInst.erase()),this.drawingContext.restore()},s.default.Renderer2D.prototype.clear=function(){this.drawingContext.save(),this.resetMatrix(),this.drawingContext.clearRect(0,0,this.width,this.height),this.drawingContext.restore()},s.default.Renderer2D.prototype.fill=function(){var d=(d=this._pInst).color.apply(d,arguments);this._setFill(d.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("fill",d.levels)},s.default.Renderer2D.prototype.stroke=function(){var d=(d=this._pInst).color.apply(d,arguments);this._setStroke(d.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("stroke",d.levels)},s.default.Renderer2D.prototype.erase=function(d,f){this._isErasing||(this._cachedFillStyle=this.drawingContext.fillStyle,d=this._pInst.color(255,d).toString(),this.drawingContext.fillStyle=d,this._cachedStrokeStyle=this.drawingContext.strokeStyle,d=this._pInst.color(255,f).toString(),this.drawingContext.strokeStyle=d,f=this._cachedBlendMode,this.blendMode(l.REMOVE),this._cachedBlendMode=f,this._isErasing=!0)},s.default.Renderer2D.prototype.noErase=function(){this._isErasing&&(this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode),this._isErasing=!1)},s.default.Renderer2D.prototype.image=function(d,f,m,y,g,v,b,w,_){d.gifProperties&&d._animateGif(this._pInst);try{var j=(j=this._tint&&d.canvas?this._getTintedImageCanvas(d):j)||d.canvas||d.elt,E=1;d.width&&0<d.width&&(E=j.width/d.width),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.drawImage(j,E*f,E*m,E*y,E*g,v,b,w,_),this._isErasing&&this._pInst.erase()}catch(T){if(T.name!=="NS_ERROR_NOT_AVAILABLE")throw T}},s.default.Renderer2D.prototype._getTintedImageCanvas=function(d){if(!d.canvas)return d;d.tintCanvas||(d.tintCanvas=document.createElement("canvas")),d.tintCanvas.width!==d.canvas.width&&(d.tintCanvas.width=d.canvas.width),d.tintCanvas.height!==d.canvas.height&&(d.tintCanvas.height=d.canvas.height);var f=d.tintCanvas.getContext("2d");return f.save(),f.clearRect(0,0,d.canvas.width,d.canvas.height),(this._tint[0]<255||this._tint[1]<255||this._tint[2]<255)&&(f.drawImage(d.canvas,0,0),f.globalCompositeOperation="luminosity",f.drawImage(d.canvas,0,0),f.globalCompositeOperation="color",f.drawImage(d.canvas,0,0),f.globalCompositeOperation="multiply",f.fillStyle="rgb(".concat(this._tint.slice(0,3).join(", "),")"),f.fillRect(0,0,d.canvas.width,d.canvas.height),f.globalCompositeOperation="destination-in"),f.globalAlpha=this._tint[3]/255,f.drawImage(d.canvas,0,0),f.restore(),d.tintCanvas},s.default.Renderer2D.prototype.blendMode=function(d){if(d===l.SUBTRACT)console.warn("blendMode(SUBTRACT) only works in WEBGL mode.");else{if(d!==l.BLEND&&d!==l.REMOVE&&d!==l.DARKEST&&d!==l.LIGHTEST&&d!==l.DIFFERENCE&&d!==l.MULTIPLY&&d!==l.EXCLUSION&&d!==l.SCREEN&&d!==l.REPLACE&&d!==l.OVERLAY&&d!==l.HARD_LIGHT&&d!==l.SOFT_LIGHT&&d!==l.DODGE&&d!==l.BURN&&d!==l.ADD)throw new Error("Mode ".concat(d," not recognized."));this._cachedBlendMode=d,this.drawingContext.globalCompositeOperation=d}},s.default.Renderer2D.prototype.blend=function(){for(var d=this.drawingContext.globalCompositeOperation,f=arguments.length,m=new Array(f),y=0;y<f;y++)m[y]=arguments[y];var g=m[m.length-1],v=Array.prototype.slice.call(m,0,m.length-1);this.drawingContext.globalCompositeOperation=g,s.default.prototype.copy.apply(this,v),this.drawingContext.globalCompositeOperation=d},s.default.Renderer2D.prototype._getPixel=function(d,f){return d=this.drawingContext.getImageData(d,f,1,1).data,[d[0],d[1],d[2],d[3]]},s.default.Renderer2D.prototype.loadPixels=function(){var d=this._pixelsState,f=d._pixelDensity,m=this.width*f,f=this.height*f,m=this.drawingContext.getImageData(0,0,m,f);d._setProperty("imageData",m),d._setProperty("pixels",m.data)},s.default.Renderer2D.prototype.set=function(d,f,m){d=Math.floor(d),f=Math.floor(f);var y=this._pixelsState;if(m instanceof s.default.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(y._pixelDensity,y._pixelDensity),this.drawingContext.clearRect(d,f,m.width,m.height),this.drawingContext.drawImage(m.canvas,d,f),this.drawingContext.restore();else{var g=0,v=0,b=0,w=0,_=4*(f*y._pixelDensity*(this.width*y._pixelDensity)+d*y._pixelDensity);if(y.imageData||y.loadPixels.call(y),typeof m=="number")_<y.pixels.length&&(b=v=g=m,w=255);else if(m instanceof Array){if(m.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");_<y.pixels.length&&(g=m[0],v=m[1],b=m[2],w=m[3])}else m instanceof s.default.Color&&_<y.pixels.length&&(g=m.levels[0],v=m.levels[1],b=m.levels[2],w=m.levels[3]);for(var j=0;j<y._pixelDensity;j++)for(var E=0;E<y._pixelDensity;E++)_=4*((f*y._pixelDensity+E)*this.width*y._pixelDensity+(d*y._pixelDensity+j)),y.pixels[_]=g,y.pixels[_+1]=v,y.pixels[_+2]=b,y.pixels[_+3]=w}},s.default.Renderer2D.prototype.updatePixels=function(d,f,m,y){var g=this._pixelsState,v=g._pixelDensity;d===void 0&&f===void 0&&m===void 0&&y===void 0&&(f=d=0,m=this.width,y=this.height),d*=v,f*=v,m*=v,y*=v,this.gifProperties&&(this.gifProperties.frames[this.gifProperties.displayIndex].image=g.imageData),this.drawingContext.putImageData(g.imageData,d,f,0,0,m,y)},s.default.Renderer2D.prototype._acuteArcToBezier=function(d,f){var v=f/2,m=Math.cos(v),w=Math.sin(v),y=1/Math.tan(v),v=d+v,g=Math.cos(v),v=Math.sin(v),b=(4-m)/3,w=w+(m-b)*y;return{ax:Math.cos(d).toFixed(7),ay:Math.sin(d).toFixed(7),bx:(b*g+w*v).toFixed(7),by:(b*v-w*g).toFixed(7),cx:(b*g-w*v).toFixed(7),cy:(b*v+w*g).toFixed(7),dx:Math.cos(d+f).toFixed(7),dy:Math.sin(d+f).toFixed(7)}},s.default.Renderer2D.prototype.arc=function(d,f,m,y,g,v,b){var w,_=this.drawingContext,j=m/2,E=y/2,T=[];for(d+=j,f+=E;1e-5<=v-g;)w=Math.min(v-g,l.HALF_PI),T.push(this._acuteArcToBezier(g,w)),g+=w;return this._doFill&&(_.beginPath(),T.forEach(function(R,M){M===0&&_.moveTo(d+R.ax*j,f+R.ay*E),_.bezierCurveTo(d+R.bx*j,f+R.by*E,d+R.cx*j,f+R.cy*E,d+R.dx*j,f+R.dy*E)}),b!==l.PIE&&b!=null||_.lineTo(d,f),_.closePath(),_.fill()),this._doStroke&&(_.beginPath(),T.forEach(function(R,M){M===0&&_.moveTo(d+R.ax*j,f+R.ay*E),_.bezierCurveTo(d+R.bx*j,f+R.by*E,d+R.cx*j,f+R.cy*E,d+R.dx*j,f+R.dy*E)}),b===l.PIE?(_.lineTo(d,f),_.closePath()):b===l.CHORD&&_.closePath(),_.stroke()),this},s.default.Renderer2D.prototype.ellipse=function(T){var f=this.drawingContext,m=this._doFill,y=this._doStroke,g=parseFloat(T[0]),v=parseFloat(T[1]),E=parseFloat(T[2]),T=parseFloat(T[3]);if(m&&!y){if(this._getFill()===p)return this}else if(!m&&y&&this._getStroke()===p)return this;var b=E/2*.5522847498,w=T/2*.5522847498,_=g+E,j=v+T,E=g+E/2,T=v+T/2;f.beginPath(),f.moveTo(g,T),f.bezierCurveTo(g,T-w,E-b,v,E,v),f.bezierCurveTo(E+b,v,_,T-w,_,T),f.bezierCurveTo(_,T+w,E+b,j,E,j),f.bezierCurveTo(E-b,j,g,T+w,g,T),m&&f.fill(),y&&f.stroke()},s.default.Renderer2D.prototype.line=function(d,f,m,y){var g=this.drawingContext;return this._doStroke&&this._getStroke()!==p&&(g.beginPath(),g.moveTo(d,f),g.lineTo(m,y),g.stroke()),this},s.default.Renderer2D.prototype.point=function(d,f){var m,y,g=this.drawingContext;return!this._doStroke||this._getStroke()===p?this:(m=this._getStroke(),y=this._getFill(),this._setFill(m),g.beginPath(),g.arc(d,f,g.lineWidth/2,0,l.TWO_PI,!1),g.fill(),void this._setFill(y))},s.default.Renderer2D.prototype.quad=function(d,f,m,y,g,v,b,w){var _=this.drawingContext,j=this._doFill,E=this._doStroke;if(j&&!E){if(this._getFill()===p)return this}else if(!j&&E&&this._getStroke()===p)return this;return _.beginPath(),_.moveTo(d,f),_.lineTo(m,y),_.lineTo(g,v),_.lineTo(b,w),_.closePath(),j&&_.fill(),E&&_.stroke(),this},s.default.Renderer2D.prototype.rect=function(E){var f,m,y=E[0],g=E[1],v=E[2],b=E[3],w=E[4],_=E[5],j=E[6],E=E[7],T=this.drawingContext,R=this._doFill,M=this._doStroke;if(R&&!M){if(this._getFill()===p)return this}else if(!R&&M&&this._getStroke()===p)return this;return T.beginPath(),w===void 0?T.rect(y,g,v,b):(_===void 0&&(_=w),j===void 0&&(j=_),E===void 0&&(E=j),M=(R=Math.abs(v))/2,m=(f=Math.abs(b))/2,f<2*(w=R<2*w?M:w)&&(w=m),f<2*(_=R<2*_?M:_)&&(_=m),f<2*(j=R<2*j?M:j)&&(j=m),f<2*(E=R<2*E?M:E)&&(E=m),T.beginPath(),T.moveTo(y+w,g),T.arcTo(y+v,g,y+v,g+b,_),T.arcTo(y+v,g+b,y,g+b,j),T.arcTo(y,g+b,y,g,E),T.arcTo(y,g,y+v,g,w),T.closePath()),this._doFill&&T.fill(),this._doStroke&&T.stroke(),this},s.default.Renderer2D.prototype.triangle=function(j){var f=this.drawingContext,m=this._doFill,y=this._doStroke,g=j[0],v=j[1],b=j[2],w=j[3],_=j[4],j=j[5];if(m&&!y){if(this._getFill()===p)return this}else if(!m&&y&&this._getStroke()===p)return this;f.beginPath(),f.moveTo(g,v),f.lineTo(b,w),f.lineTo(_,j),f.closePath(),m&&f.fill(),y&&f.stroke()},s.default.Renderer2D.prototype.endShape=function(d,f,m,y,g,v,b){if(f.length!==0&&(this._doStroke||this._doFill)){var w,_,j,E=d===l.CLOSE,T=(E&&!v&&f.push(f[0]),f.length);if(!m||b!==l.POLYGON&&b!==null)if(!y||b!==l.POLYGON&&b!==null)if(!g||b!==l.POLYGON&&b!==null)if(b===l.POINTS)for(_=0;_<T;_++)w=f[_],this._doStroke&&this._pInst.stroke(w[6]),this._pInst.point(w[0],w[1]);else if(b===l.LINES)for(_=0;_+1<T;_+=2)w=f[_],this._doStroke&&this._pInst.stroke(f[_+1][6]),this._pInst.line(w[0],w[1],f[_+1][0],f[_+1][1]);else if(b===l.TRIANGLES)for(_=0;_+2<T;_+=3)w=f[_],this.drawingContext.beginPath(),this.drawingContext.moveTo(w[0],w[1]),this.drawingContext.lineTo(f[_+1][0],f[_+1][1]),this.drawingContext.lineTo(f[_+2][0],f[_+2][1]),this.drawingContext.closePath(),this._doFill&&(this._pInst.fill(f[_+2][5]),this.drawingContext.fill()),this._doStroke&&(this._pInst.stroke(f[_+2][6]),this.drawingContext.stroke());else if(b===l.TRIANGLE_STRIP)for(_=0;_+1<T;_++)w=f[_],this.drawingContext.beginPath(),this.drawingContext.moveTo(f[_+1][0],f[_+1][1]),this.drawingContext.lineTo(w[0],w[1]),this._doStroke&&this._pInst.stroke(f[_+1][6]),this._doFill&&this._pInst.fill(f[_+1][5]),_+2<T&&(this.drawingContext.lineTo(f[_+2][0],f[_+2][1]),this._doStroke&&this._pInst.stroke(f[_+2][6]),this._doFill&&this._pInst.fill(f[_+2][5])),this._doFillStrokeClose(E);else if(b===l.TRIANGLE_FAN){if(2<T){for(this.drawingContext.beginPath(),_=2;_<T;_++)w=f[_],this.drawingContext.moveTo(f[0][0],f[0][1]),this.drawingContext.lineTo(f[_-1][0],f[_-1][1]),this.drawingContext.lineTo(w[0],w[1]),this.drawingContext.lineTo(f[0][0],f[0][1]),_<T-1&&(this._doFill&&w[5]!==f[_+1][5]||this._doStroke&&w[6]!==f[_+1][6])&&(this._doFill&&(this._pInst.fill(w[5]),this.drawingContext.fill(),this._pInst.fill(f[_+1][5])),this._doStroke&&(this._pInst.stroke(w[6]),this.drawingContext.stroke(),this._pInst.stroke(f[_+1][6])),this.drawingContext.closePath(),this.drawingContext.beginPath());this._doFillStrokeClose(E)}}else if(b===l.QUADS)for(_=0;_+3<T;_+=4){for(w=f[_],this.drawingContext.beginPath(),this.drawingContext.moveTo(w[0],w[1]),j=1;j<4;j++)this.drawingContext.lineTo(f[_+j][0],f[_+j][1]);this.drawingContext.lineTo(w[0],w[1]),this._doFill&&this._pInst.fill(f[_+3][5]),this._doStroke&&this._pInst.stroke(f[_+3][6]),this._doFillStrokeClose(E)}else if(b===l.QUAD_STRIP){if(3<T)for(_=0;_+1<T;_+=2)w=f[_],this.drawingContext.beginPath(),_+3<T?(this.drawingContext.moveTo(f[_+2][0],f[_+2][1]),this.drawingContext.lineTo(w[0],w[1]),this.drawingContext.lineTo(f[_+1][0],f[_+1][1]),this.drawingContext.lineTo(f[_+3][0],f[_+3][1]),this._doFill&&this._pInst.fill(f[_+3][5]),this._doStroke&&this._pInst.stroke(f[_+3][6])):(this.drawingContext.moveTo(w[0],w[1]),this.drawingContext.lineTo(f[_+1][0],f[_+1][1])),this._doFillStrokeClose(E)}else{for(this.drawingContext.beginPath(),this.drawingContext.moveTo(f[0][0],f[0][1]),_=1;_<T;_++)(w=f[_]).isVert&&(w.moveTo?this.drawingContext.moveTo(w[0],w[1]):this.drawingContext.lineTo(w[0],w[1]));this._doFillStrokeClose(E)}else{for(this.drawingContext.beginPath(),_=0;_<T;_++)f[_].isVert?f[_].moveTo?this.drawingContext.moveTo(f[_][0],f[_][1]):this.drawingContext.lineTo(f[_][0],f[_][1]):this.drawingContext.quadraticCurveTo(f[_][0],f[_][1],f[_][2],f[_][3]);this._doFillStrokeClose(E)}else{for(this.drawingContext.beginPath(),_=0;_<T;_++)f[_].isVert?f[_].moveTo?this.drawingContext.moveTo(f[_][0],f[_][1]):this.drawingContext.lineTo(f[_][0],f[_][1]):this.drawingContext.bezierCurveTo(f[_][0],f[_][1],f[_][2],f[_][3],f[_][4],f[_][5]);this._doFillStrokeClose(E)}else if(3<T){var R=[],M=1-this._curveTightness;for(this.drawingContext.beginPath(),this.drawingContext.moveTo(f[1][0],f[1][1]),_=1;_+2<T;_++)w=f[_],R[0]=[w[0],w[1]],R[1]=[w[0]+(M*f[_+1][0]-M*f[_-1][0])/6,w[1]+(M*f[_+1][1]-M*f[_-1][1])/6],R[2]=[f[_+1][0]+(M*f[_][0]-M*f[_+2][0])/6,f[_+1][1]+(M*f[_][1]-M*f[_+2][1])/6],R[3]=[f[_+1][0],f[_+1][1]],this.drawingContext.bezierCurveTo(R[1][0],R[1][1],R[2][0],R[2][1],R[3][0],R[3][1]);E&&this.drawingContext.lineTo(f[_+1][0],f[_+1][1]),this._doFillStrokeClose(E)}v=g=y=m=!1,E&&f.pop()}return this},s.default.Renderer2D.prototype.strokeCap=function(d){return d!==l.ROUND&&d!==l.SQUARE&&d!==l.PROJECT||(this.drawingContext.lineCap=d),this},s.default.Renderer2D.prototype.strokeJoin=function(d){return d!==l.ROUND&&d!==l.BEVEL&&d!==l.MITER||(this.drawingContext.lineJoin=d),this},s.default.Renderer2D.prototype.strokeWeight=function(d){return this.drawingContext.lineWidth=d===void 0||d===0?1e-4:d,this},s.default.Renderer2D.prototype._getFill=function(){return this._cachedFillStyle||(this._cachedFillStyle=this.drawingContext.fillStyle),this._cachedFillStyle},s.default.Renderer2D.prototype._setFill=function(d){d!==this._cachedFillStyle&&(this.drawingContext.fillStyle=d,this._cachedFillStyle=d)},s.default.Renderer2D.prototype._getStroke=function(){return this._cachedStrokeStyle||(this._cachedStrokeStyle=this.drawingContext.strokeStyle),this._cachedStrokeStyle},s.default.Renderer2D.prototype._setStroke=function(d){d!==this._cachedStrokeStyle&&(this.drawingContext.strokeStyle=d,this._cachedStrokeStyle=d)},s.default.Renderer2D.prototype.bezier=function(d,f,m,y,g,v,b,w){return this._pInst.beginShape(),this._pInst.vertex(d,f),this._pInst.bezierVertex(m,y,g,v,b,w),this._pInst.endShape(),this},s.default.Renderer2D.prototype.curve=function(d,f,m,y,g,v,b,w){return this._pInst.beginShape(),this._pInst.curveVertex(d,f),this._pInst.curveVertex(m,y),this._pInst.curveVertex(g,v),this._pInst.curveVertex(b,w),this._pInst.endShape(),this},s.default.Renderer2D.prototype._doFillStrokeClose=function(d){d&&this.drawingContext.closePath(),this._doFill&&this.drawingContext.fill(),this._doStroke&&this.drawingContext.stroke()},s.default.Renderer2D.prototype.applyMatrix=function(d,f,m,y,g,v){this.drawingContext.transform(d,f,m,y,g,v)},s.default.Renderer2D.prototype.resetMatrix=function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this},s.default.Renderer2D.prototype.rotate=function(d){this.drawingContext.rotate(d)},s.default.Renderer2D.prototype.scale=function(d,f){return this.drawingContext.scale(d,f),this},s.default.Renderer2D.prototype.translate=function(d,f){return d instanceof s.default.Vector&&(f=d.y,d=d.x),this.drawingContext.translate(d,f),this},s.default.Renderer2D.prototype.text=function(d,f,m,b,g){b!==void 0&&this.drawingContext.textBaseline===l.BASELINE&&(v=!0,this.drawingContext.textBaseline=l.TOP);var v,b=s.default.Renderer.prototype.text.apply(this,arguments);return v&&(this.drawingContext.textBaseline=l.BASELINE),b},s.default.Renderer2D.prototype._renderText=function(d,f,m,y,g,v){if(!(y<v||g<=y))return d.push(),this._isOpenType()?this._textFont._renderPath(f,m,y,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(f,m,y),this._doFill&&(this._fillSet||this._setFill(l._DEFAULT_TEXT_FILL),this.drawingContext.fillText(f,m,y))),d.pop(),d},s.default.Renderer2D.prototype.textWidth=function(d){return this._isOpenType()?this._textFont._textWidth(d,this._textSize):this.drawingContext.measureText(d).width},s.default.Renderer2D.prototype._applyTextProperties=function(){var d,f=this._pInst;return this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),d=this._textFont,this._isOpenType()&&(d=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),this.drawingContext.font="".concat(this._textStyle||"normal"," ").concat(this._textSize||12,"px ").concat(d||"sans-serif"),this.drawingContext.textAlign=this._textAlign,this._textBaseline===l.CENTER?this.drawingContext.textBaseline=l._CTX_MIDDLE:this.drawingContext.textBaseline=this._textBaseline,f},s.default.Renderer2D.prototype.push=function(){return this.drawingContext.save(),s.default.Renderer.prototype.push.apply(this)},s.default.Renderer2D.prototype.pop=function(d){this.drawingContext.restore(),this._cachedFillStyle=this.drawingContext.fillStyle,this._cachedStrokeStyle=this.drawingContext.strokeStyle,s.default.Renderer.prototype.pop.call(this,d)},s.default.Renderer2D);i.default=c},{"./constants":256,"./main":267,"./p5.Renderer":270,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.fill":152,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.slice":162,"core-js/modules/es.function.name":165,"core-js/modules/es.number.to-fixed":171,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],272:[function(e,o,i){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator");var u=(e=e("./main"))&&e.__esModule?e:{default:e};u.default.prototype._promisePreloads=[];function a(){return{}}var s=!(u.default.prototype.registerPromisePreload=function(l){u.default.prototype._promisePreloads.push(l)});u.default.prototype._setupPromisePreloads=function(){var l=!0,h=!1,p=void 0;try{for(var c,d=this._promisePreloads[Symbol.iterator]();!(l=(c=d.next()).done);l=!0){var f=c.value,m=this,y=f.method,g=f.addCallbacks,v=f.legacyPreloadSetup,b=f.target||this,w=b[y].bind(b);if(b===u.default.prototype){if(s)continue;m=null,w=b[y]}b[y]=this._wrapPromisePreload(m,w,g),v&&(b[v.method]=this._legacyPreloadGenerator(m,v,b[y]))}}catch(_){h=!0,p=_}finally{try{l||d.return==null||d.return()}finally{if(h)throw p}}s=!0},u.default.prototype._wrapPromisePreload=function(l,h,p){var c=function(){for(var d=this,f=(this._incrementPreload(),null),m=null,y=arguments.length,g=new Array(y),v=0;v<y;v++)g[v]=arguments[v];if(p)for(var b=g.length-1;0<=b&&!m&&typeof g[b]=="function";b--)m=f,f=g.pop();var w=Promise.resolve(h.apply(this,g));return f&&w.then(f),m&&w.catch(m),w.then(function(){return d._decrementPreload()}),w};return c=l?c.bind(l):c},u.default.prototype._legacyPreloadGenerator=function(l,d,p){var c=d.createBaseObject||a,d=function(){var f=this,m=(this._incrementPreload(),c.apply(this,arguments));return p.apply(this,arguments).then(function(y){Object.assign(m,y),f._decrementPreload()}),m};return d=l?d.bind(l):d}},{"./main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.assign":172,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":230}],273:[function(e,o,i){function u(d){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(d)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a=(c=e("./main"))&&c.__esModule?c:{default:c},s=function(d){if(d&&d.__esModule)return d;if(d===null||h(d)!=="object"&&typeof d!="function")return{default:d};var f=l();if(f&&f.has(d))return f.get(d);var m,y={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in d){var v;Object.prototype.hasOwnProperty.call(d,m)&&((v=g?Object.getOwnPropertyDescriptor(d,m):null)&&(v.get||v.set)?Object.defineProperty(y,m,v):y[m]=d[m])}return y.default=d,f&&f.set(d,y),y}(e("./constants"));function l(){var d;return typeof WeakMap!="function"?null:(d=new WeakMap,l=function(){return d},d)}function h(d){return(h=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(f){return u(f)}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":u(f)})(d)}e("./p5.Graphics"),e("./p5.Renderer2D"),e("../webgl/p5.RendererGL");var p="defaultCanvas0",c=(a.default.prototype.createCanvas=function(d,f,b){a.default._validateParameters("createCanvas",arguments);var y,g,v,b=b||s.P2D;if(b===s.WEBGL)(g=document.getElementById(p))&&(g.parentNode.removeChild(g),y=this._renderer,this._elements=this._elements.filter(function(_){return _!==y})),(g=document.createElement("canvas")).id=p,g.classList.add("p5Canvas");else if(this._defaultGraphicsCreated)g=this.canvas;else{g=document.createElement("canvas");for(var w=0;document.getElementById("defaultCanvas".concat(w));)w++;p="defaultCanvas".concat(w),g.id=p,g.classList.add("p5Canvas")}return this._setupDone||(g.dataset.hidden=!0,g.style.visibility="hidden"),(this._userNode||(document.getElementsByTagName("main").length===0&&(v=document.createElement("main"),document.body.appendChild(v)),document.getElementsByTagName("main")[0])).appendChild(g),b===s.WEBGL?(this._setProperty("_renderer",new a.default.RendererGL(g,this,!0)),this._elements.push(this._renderer)):this._defaultGraphicsCreated||(this._setProperty("_renderer",new a.default.Renderer2D(g,this,!0)),this._defaultGraphicsCreated=!0,this._elements.push(this._renderer)),this._renderer.resize(d,f),this._renderer._applyDefaults(),this._renderer},a.default.prototype.resizeCanvas=function(d,f,m){if(a.default._validateParameters("resizeCanvas",arguments),this._renderer){var y,g,v={};for(y in this.drawingContext){var b=this.drawingContext[y];h(b)!=="object"&&typeof b!="function"&&(v[y]=b)}for(g in this._renderer.resize(d,f),this.width=d,this.height=f,v)try{this.drawingContext[g]=v[g]}catch{}m||this.redraw()}this._addAccsOutput()&&this._updateAccsOutput()},a.default.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},a.default.prototype.createGraphics=function(d,f,m){return a.default._validateParameters("createGraphics",arguments),new a.default.Graphics(d,f,m,this)},a.default.prototype.blendMode=function(d){a.default._validateParameters("blendMode",arguments),d===s.NORMAL&&(console.warn("NORMAL has been deprecated for use in blendMode. defaulting to BLEND instead."),d=s.BLEND),this._renderer.blendMode(d)},a.default);i.default=c},{"../webgl/p5.RendererGL":321,"./constants":256,"./main":267,"./p5.Graphics":269,"./p5.Renderer2D":271,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],274:[function(e,o,i){function u(d){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(d)}function a(d){return(a=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(f){return u(f)}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":u(f)})(d)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.slice"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=c(e("../main")),l=function(d){if(d&&d.__esModule)return d;if(d===null||a(d)!=="object"&&typeof d!="function")return{default:d};var f=p();if(f&&f.has(d))return f.get(d);var m,y={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in d){var v;Object.prototype.hasOwnProperty.call(d,m)&&((v=g?Object.getOwnPropertyDescriptor(d,m):null)&&(v.get||v.set)?Object.defineProperty(y,m,v):y[m]=d[m])}return y.default=d,f&&f.set(d,y),y}(e("../constants")),h=c(e("../helpers"));function p(){var d;return typeof WeakMap!="function"?null:(d=new WeakMap,p=function(){return d},d)}function c(d){return d&&d.__esModule?d:{default:d}}e("../friendly_errors/fes_core"),e("../friendly_errors/file_errors"),e("../friendly_errors/validate_params"),s.default.prototype._normalizeArcAngles=function(d,f,m,y,g){var v;return d-=l.TWO_PI*Math.floor(d/l.TWO_PI),f-=l.TWO_PI*Math.floor(f/l.TWO_PI),v=Math.min(Math.abs(d-f),l.TWO_PI-Math.abs(d-f)),g&&(d=d<=l.HALF_PI?Math.atan(m/y*Math.tan(d)):d>l.HALF_PI&&d<=3*l.HALF_PI?Math.atan(m/y*Math.tan(d))+l.PI:Math.atan(m/y*Math.tan(d))+l.TWO_PI,f=f<=l.HALF_PI?Math.atan(m/y*Math.tan(f)):f>l.HALF_PI&&f<=3*l.HALF_PI?Math.atan(m/y*Math.tan(f))+l.PI:Math.atan(m/y*Math.tan(f))+l.TWO_PI),f<d&&(f+=l.TWO_PI),{start:d,stop:f,correspondToSamePoint:v<1e-5}},s.default.prototype.arc=function(d,f,m,y,g,v,b,w){return s.default._validateParameters("arc",arguments),(this._renderer._doStroke||this._renderer._doFill)&&g!==v&&(g=this._toRadians(g),v=this._toRadians(v),m=Math.abs(m),y=Math.abs(y),d=h.default.modeAdjust(d,f,m,y,this._renderer._ellipseMode),(f=this._normalizeArcAngles(g,v,d.w,d.h,!0)).correspondToSamePoint?this._renderer.ellipse([d.x,d.y,d.w,d.h,w]):(this._renderer.arc(d.x,d.y,d.w,d.h,f.start,f.stop,b,w),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("arc",[d.x,d.y,d.w,d.h,f.start,f.stop,b]))),this},s.default.prototype.ellipse=function(d,f,m,y,g){return s.default._validateParameters("ellipse",arguments),this._renderEllipse.apply(this,arguments)},s.default.prototype.circle=function(){s.default._validateParameters("circle",arguments);var d=Array.prototype.slice.call(arguments,0,2);return d.push(arguments[2]),d.push(arguments[2]),this._renderEllipse.apply(this,d)},s.default.prototype._renderEllipse=function(d,f,m,y,g){return(this._renderer._doStroke||this._renderer._doFill)&&(m<0&&(m=Math.abs(m)),y===void 0?y=m:y<0&&(y=Math.abs(y)),d=h.default.modeAdjust(d,f,m,y,this._renderer._ellipseMode),this._renderer.ellipse([d.x,d.y,d.w,d.h,g]),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("ellipse",[d.x,d.y,d.w,d.h])),this},s.default.prototype.line=function(){for(var d,f=arguments.length,m=new Array(f),y=0;y<f;y++)m[y]=arguments[y];return s.default._validateParameters("line",m),this._renderer._doStroke&&(d=this._renderer).line.apply(d,m),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("line",m),this},s.default.prototype.point=function(){for(var d,f=arguments.length,m=new Array(f),y=0;y<f;y++)m[y]=arguments[y];return s.default._validateParameters("point",m),this._renderer._doStroke&&(m.length===1&&m[0]instanceof s.default.Vector?this._renderer.point.call(this._renderer,m[0].x,m[0].y,m[0].z):((d=this._renderer).point.apply(d,m),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("point",m))),this},s.default.prototype.quad=function(){for(var d,f=arguments.length,m=new Array(f),y=0;y<f;y++)m[y]=arguments[y];return s.default._validateParameters("quad",m),(this._renderer._doStroke||this._renderer._doFill)&&(this._renderer.isP3D&&m.length<=12?this._renderer.quad.call(this._renderer,m[0],m[1],0,m[2],m[3],0,m[4],m[5],0,m[6],m[7],0,m[8],m[9]):((d=this._renderer).quad.apply(d,m),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("quadrilateral",m))),this},s.default.prototype.rect=function(){return s.default._validateParameters("rect",arguments),this._renderRect.apply(this,arguments)},s.default.prototype.square=function(d,f,m,y,g,v,b){return s.default._validateParameters("square",arguments),this._renderRect.call(this,d,f,m,m,y,g,v,b)},s.default.prototype._renderRect=function(){if(this._renderer._doStroke||this._renderer._doFill){arguments.length===3&&(arguments[3]=arguments[2]);for(var d=h.default.modeAdjust(arguments[0],arguments[1],arguments[2],arguments[3],this._renderer._rectMode),f=[d.x,d.y,d.w,d.h],m=4;m<arguments.length;m++)f[m]=arguments[m];this._renderer.rect(f),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("rectangle",[d.x,d.y,d.w,d.h])}return this},s.default.prototype.triangle=function(){for(var d=arguments.length,f=new Array(d),m=0;m<d;m++)f[m]=arguments[m];return s.default._validateParameters("triangle",f),(this._renderer._doStroke||this._renderer._doFill)&&this._renderer.triangle(f),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("triangle",f),this},e=s.default,i.default=e},{"../constants":256,"../friendly_errors/fes_core":258,"../friendly_errors/file_errors":259,"../friendly_errors/validate_params":262,"../helpers":263,"../main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],275:[function(e,o,i){function u(c){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(c)}function a(c){return(a=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(d){return u(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":u(d)})(c)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=(p=e("../main"))&&p.__esModule?p:{default:p},l=function(c){if(c&&c.__esModule)return c;if(c===null||a(c)!=="object"&&typeof c!="function")return{default:c};var d=h();if(d&&d.has(c))return d.get(c);var f,m={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(f in c){var g;Object.prototype.hasOwnProperty.call(c,f)&&((g=y?Object.getOwnPropertyDescriptor(c,f):null)&&(g.get||g.set)?Object.defineProperty(m,f,g):m[f]=c[f])}return m.default=c,d&&d.set(c,m),m}(e("../constants"));function h(){var c;return typeof WeakMap!="function"?null:(c=new WeakMap,h=function(){return c},c)}s.default.prototype.ellipseMode=function(c){return s.default._validateParameters("ellipseMode",arguments),c!==l.CORNER&&c!==l.CORNERS&&c!==l.RADIUS&&c!==l.CENTER||(this._renderer._ellipseMode=c),this},s.default.prototype.noSmooth=function(){return this._renderer.isP3D?this.setAttributes("antialias",!1):"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!1),this},s.default.prototype.rectMode=function(c){return s.default._validateParameters("rectMode",arguments),c!==l.CORNER&&c!==l.CORNERS&&c!==l.RADIUS&&c!==l.CENTER||(this._renderer._rectMode=c),this},s.default.prototype.smooth=function(){return this.setAttributes("antialias",!0),this._renderer.isP3D||"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!0),this},s.default.prototype.strokeCap=function(c){return s.default._validateParameters("strokeCap",arguments),c!==l.ROUND&&c!==l.SQUARE&&c!==l.PROJECT||this._renderer.strokeCap(c),this},s.default.prototype.strokeJoin=function(c){return s.default._validateParameters("strokeJoin",arguments),c!==l.ROUND&&c!==l.BEVEL&&c!==l.MITER||this._renderer.strokeJoin(c),this},s.default.prototype.strokeWeight=function(c){return s.default._validateParameters("strokeWeight",arguments),this._renderer.strokeWeight(c),this};var p=s.default;i.default=p},{"../constants":256,"../main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],276:[function(e,o,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=(a=e("../main"))&&a.__esModule?a:{default:a};e("../friendly_errors/fes_core"),e("../friendly_errors/file_errors"),e("../friendly_errors/validate_params"),u.default.prototype.bezier=function(){for(var s,l=arguments.length,h=new Array(l),p=0;p<l;p++)h[p]=arguments[p];return u.default._validateParameters("bezier",h),(this._renderer._doStroke||this._renderer._doFill)&&(s=this._renderer).bezier.apply(s,h),this},u.default.prototype.bezierDetail=function(s){return u.default._validateParameters("bezierDetail",arguments),this._bezierDetail=s,this},u.default.prototype.bezierPoint=function(s,l,h,p,c){u.default._validateParameters("bezierPoint",arguments);var d=1-c;return Math.pow(d,3)*s+3*Math.pow(d,2)*c*l+3*d*Math.pow(c,2)*h+Math.pow(c,3)*p},u.default.prototype.bezierTangent=function(s,l,h,p,c){u.default._validateParameters("bezierTangent",arguments);var d=1-c;return 3*p*Math.pow(c,2)-3*h*Math.pow(c,2)+6*h*d*c-6*l*d*c+3*l*Math.pow(d,2)-3*s*Math.pow(d,2)},u.default.prototype.curve=function(){for(var s,l=arguments.length,h=new Array(l),p=0;p<l;p++)h[p]=arguments[p];return u.default._validateParameters("curve",h),this._renderer._doStroke&&(s=this._renderer).curve.apply(s,h),this},u.default.prototype.curveDetail=function(s){return u.default._validateParameters("curveDetail",arguments),this._curveDetail=s<3?3:s,this},u.default.prototype.curveTightness=function(s){return u.default._validateParameters("curveTightness",arguments),this._renderer._curveTightness=s,this},u.default.prototype.curvePoint=function(s,l,h,p,c){u.default._validateParameters("curvePoint",arguments);var d=c*c*c,f=c*c;return s*(-.5*d+f-.5*c)+l*(1.5*d-2.5*f+1)+h*(-1.5*d+2*f+.5*c)+p*(.5*d-.5*f)},u.default.prototype.curveTangent=function(s,l,h,p,c){u.default._validateParameters("curveTangent",arguments);var d=c*c;return s*(-3*d/2+2*c-.5)+l*(9*d/2-5*c)+h*(-9*d/2+4*c+.5)+p*(3*d/2-c)};var a=u.default;i.default=a},{"../friendly_errors/fes_core":258,"../friendly_errors/file_errors":259,"../friendly_errors/validate_params":262,"../main":267}],277:[function(e,o,i){function u(w){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(w)}function a(w){return(a=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(_){return u(_)}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":u(_)})(w)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.slice"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=(b=e("../main"))&&b.__esModule?b:{default:b},l=function(w){if(w&&w.__esModule)return w;if(w===null||a(w)!=="object"&&typeof w!="function")return{default:w};var _=h();if(_&&_.has(w))return _.get(w);var j,E={},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(j in w){var R;Object.prototype.hasOwnProperty.call(w,j)&&((R=T?Object.getOwnPropertyDescriptor(w,j):null)&&(R.get||R.set)?Object.defineProperty(E,j,R):E[j]=w[j])}return E.default=w,_&&_.set(w,E),E}(e("../constants"));function h(){var w;return typeof WeakMap!="function"?null:(w=new WeakMap,h=function(){return w},w)}var p=null,c=[],d=[],f=!1,m=!1,y=!1,g=!1,v=!0,b=(s.default.prototype.beginContour=function(){return d=[],g=!0,this},s.default.prototype.beginShape=function(w){var _;return s.default._validateParameters("beginShape",arguments),this._renderer.isP3D?(_=this._renderer).beginShape.apply(_,arguments):(p=w===l.POINTS||w===l.LINES||w===l.TRIANGLES||w===l.TRIANGLE_FAN||w===l.TRIANGLE_STRIP||w===l.QUADS||w===l.QUAD_STRIP?w:null,c=[],d=[]),this},s.default.prototype.bezierVertex=function(){for(var w,_=arguments.length,j=new Array(_),E=0;E<_;E++)j[E]=arguments[E];if(s.default._validateParameters("bezierVertex",j),this._renderer.isP3D)(w=this._renderer).bezierVertex.apply(w,j);else if(c.length===0)s.default._friendlyError("vertex() must be used once before calling bezierVertex()","bezierVertex");else{f=!0;for(var T=[],R=0;R<j.length;R++)T[R]=j[R];T.isVert=!1,(g?d:c).push(T)}return this},s.default.prototype.curveVertex=function(){for(var w,_=arguments.length,j=new Array(_),E=0;E<_;E++)j[E]=arguments[E];return s.default._validateParameters("curveVertex",j),this._renderer.isP3D?(w=this._renderer).curveVertex.apply(w,j):(m=!0,this.vertex(j[0],j[1])),this},s.default.prototype.endContour=function(){var w=d[0].slice();w.isVert=d[0].isVert,w.moveTo=!1,d.push(w),v&&(c.push(c[0]),v=!1);for(var _=0;_<d.length;_++)c.push(d[_]);return this},s.default.prototype.endShape=function(w){if(s.default._validateParameters("endShape",arguments),this._renderer.isP3D)this._renderer.endShape(w,m,f,y,g,p);else{if(c.length===0)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;var _=w===l.CLOSE;_&&!g&&c.push(c[0]),this._renderer.endShape(w,c,m,f,y,g,p),v=!(g=y=f=m=!1),_&&c.pop()}return this},s.default.prototype.quadraticVertex=function(){for(var w,_=arguments.length,j=new Array(_),E=0;E<_;E++)j[E]=arguments[E];if(s.default._validateParameters("quadraticVertex",j),this._renderer.isP3D)(w=this._renderer).quadraticVertex.apply(w,j);else{if(this._contourInited)return(w={}).x=j[0],w.y=j[1],w.x3=j[2],w.y3=j[3],w.type=l.QUADRATIC,this._contourVertices.push(w),this;if(0<c.length){y=!0;for(var T=[],R=0;R<j.length;R++)T[R]=j[R];T.isVert=!1,(g?d:c).push(T)}else s.default._friendlyError("vertex() must be used once before calling quadraticVertex()","quadraticVertex")}return this},s.default.prototype.vertex=function(w,_,j,E,T){var R;return this._renderer.isP3D?(R=this._renderer).vertex.apply(R,arguments):((R=[]).isVert=!0,R[0]=w,R[1]=_,R[2]=0,R[3]=0,R[4]=0,R[5]=this._renderer._getFill(),R[6]=this._renderer._getStroke(),j&&(R.moveTo=j),(g?(d.length===0&&(R.moveTo=!0),d):c).push(R)),this},s.default.prototype.normal=function(w,_,j){var E;return this._assert3d("normal"),s.default._validateParameters("normal",arguments),(E=this._renderer).normal.apply(E,arguments),this},s.default);i.default=b},{"../constants":256,"../main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],278:[function(e,o,i){function u(p){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(p)}function a(p){return(a=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(c){return u(c)}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":u(c)})(p)}var s,l,h;e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.uint8-clamped-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.uint8-clamped-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(p,c){window.setTimeout(p,1e3/60)},typeof Uint8ClampedArray>"u"||Uint8ClampedArray.prototype.slice||Object.defineProperty(Uint8ClampedArray.prototype,"slice",{value:Array.prototype.slice,writable:!0,configurable:!0,enumerable:!1}),Object.assign||(s=Object.keys,e=Object.defineProperty,l=typeof Symbol=="function"&&a(Symbol())==="symbol",h=Object.prototype.propertyIsEnumerable,e(Object,"assign",{value:function(p,c){if(p==null)throw new TypeError("target must be an object");for(var d,f,m,y=Object(p),g=1;g<arguments.length;++g)for(d=Object(arguments[g]),m=s(d),l&&Object.getOwnPropertySymbols&&m.push.apply(m,Object.getOwnPropertySymbols(d).filter(function(v){return function(b){return h.call(v,b)}}(d))),f=0;f<m.length;++f)y[m[f]]=d[m[f]];return y},configurable:!0,enumerable:!1,writable:!0}))},{"core-js/modules/es.array.filter":153,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.assign":172,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-clamped-array":227,"core-js/modules/web.dom-collections.iterator":230}],279:[function(e,o,i){e("core-js/modules/es.array.for-each"),e("core-js/modules/es.object.assign"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.object.assign"),e("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,e=(e=e("./main"))&&e.__esModule?e:{default:e},e.default.prototype.noLoop=function(){this._loop=!1},e.default.prototype.loop=function(){this._loop||(this._loop=!0,this._setupDone&&this._draw())},e.default.prototype.isLooping=function(){return this._loop},e.default.prototype.push=function(){this._styles.push({props:{_colorMode:this._colorMode},renderer:this._renderer.push()})},e.default.prototype.pop=function(){var u=this._styles.pop();u?(this._renderer.pop(u.renderer),Object.assign(this,u.props)):console.warn("pop() was called without matching push()")},e.default.prototype.redraw=function(u){if(!this._inUserDraw&&this._setupDone){var a=parseInt(u),s=((isNaN(a)||a<1)&&(a=1),this._isGlobal?window:this);if(typeof s.draw=="function"){s.setup===void 0&&s.scale(s._pixelDensity,s._pixelDensity);for(var l=function(p){p.call(s)},h=0;h<a;h++){s.resetMatrix(),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._updateAccsOutput(),s._renderer.isP3D&&s._renderer._update(),s._setProperty("frameCount",s.frameCount+1),s._registeredMethods.pre.forEach(l),this._inUserDraw=!0;try{s.draw()}finally{this._inUserDraw=!1}s._registeredMethods.post.forEach(l)}}}},e=e.default,i.default=e},{"./main":267,"core-js/modules/es.array.for-each":154,"core-js/modules/es.object.assign":172,"core-js/modules/web.dom-collections.for-each":229}],280:[function(e,o,i){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=(e=e("./main"))&&e.__esModule?e:{default:e};function a(s){return function(l){if(Array.isArray(l)){for(var h=0,p=new Array(l.length);h<l.length;h++)p[h]=l[h];return p}}(s)||function(l){if(Symbol.iterator in Object(l)||Object.prototype.toString.call(l)==="[object Arguments]")return Array.from(l)}(s)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}u.default.prototype.applyMatrix=function(){var s=arguments[0]instanceof Object.getPrototypeOf(Uint8Array);return Array.isArray(arguments[0])||s?(s=this._renderer).applyMatrix.apply(s,a(arguments[0])):(s=this._renderer).applyMatrix.apply(s,arguments),this},u.default.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},u.default.prototype.rotate=function(s,l){return u.default._validateParameters("rotate",arguments),this._renderer.rotate(this._toRadians(s),l),this},u.default.prototype.rotateX=function(s){return this._assert3d("rotateX"),u.default._validateParameters("rotateX",arguments),this._renderer.rotateX(this._toRadians(s)),this},u.default.prototype.rotateY=function(s){return this._assert3d("rotateY"),u.default._validateParameters("rotateY",arguments),this._renderer.rotateY(this._toRadians(s)),this},u.default.prototype.rotateZ=function(s){return this._assert3d("rotateZ"),u.default._validateParameters("rotateZ",arguments),this._renderer.rotateZ(this._toRadians(s)),this},u.default.prototype.scale=function(s,l,h){var p;return u.default._validateParameters("scale",arguments),s instanceof u.default.Vector?(s=(p=s).x,l=p.y,h=p.z):s instanceof Array&&(s=(p=s)[0],l=p[1],h=p[2]||1),isNaN(l)?l=h=s:isNaN(h)&&(h=1),this._renderer.scale.call(this._renderer,s,l,h),this},u.default.prototype.shearX=function(s){return u.default._validateParameters("shearX",arguments),s=this._toRadians(s),this._renderer.applyMatrix(1,0,Math.tan(s),1,0,0),this},u.default.prototype.shearY=function(s){return u.default._validateParameters("shearY",arguments),s=this._toRadians(s),this._renderer.applyMatrix(1,Math.tan(s),0,1,0,0),this},u.default.prototype.translate=function(s,l,h){return u.default._validateParameters("translate",arguments),this._renderer.isP3D?this._renderer.translate(s,l,h):this._renderer.translate(s,l),this},e=u.default,i.default=e},{"./main":267,"core-js/modules/es.array.from":155,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-prototype-of":175,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/web.dom-collections.iterator":230}],281:[function(e,o,i){function u(h){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(h)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.ends-with"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.ends-with"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator");var a=(e=e("../core/main"))&&e.__esModule?e:{default:e};function s(h){return function(p){if(Array.isArray(p)){for(var c=0,d=new Array(p.length);c<p.length;c++)d[c]=p[c];return d}}(h)||function(p){if(Symbol.iterator in Object(p)||Object.prototype.toString.call(p)==="[object Arguments]")return Array.from(p)}(h)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function l(h){return(l=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(p){return u(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":u(p)})(h)}a.default.prototype.storeItem=function(h,p){typeof h!="string"&&console.log("The argument that you passed to storeItem() - ".concat(h," is not a string.")),h.endsWith("p5TypeID")&&console.log("The argument that you passed to storeItem() - ".concat(h," must not end with 'p5TypeID'.")),p===void 0&&console.log("You cannot store undefined variables using storeItem().");var c=l(p);switch(c){case"number":case"boolean":p=p.toString();break;case"object":p instanceof a.default.Color?c="p5.Color":p instanceof a.default.Vector&&(c="p5.Vector",p=[p.x,p.y,p.z]),p=JSON.stringify(p)}localStorage.setItem(h,p),h="".concat(h,"p5TypeID"),localStorage.setItem(h,c)},a.default.prototype.getItem=function(h){var p=localStorage.getItem(h),c=localStorage.getItem("".concat(h,"p5TypeID"));if(c===void 0)console.log("Unable to determine type of item stored under ".concat(h,"in local storage. Did you save the item with something other than setItem()?"));else if(p!==null)switch(c){case"number":p=parseFloat(p);break;case"boolean":p=p==="true";break;case"object":p=JSON.parse(p);break;case"p5.Color":p=JSON.parse(p),p=this.color.apply(this,s(p.levels));break;case"p5.Vector":p=JSON.parse(p),p=this.createVector.apply(this,s(p))}return p},a.default.prototype.clearStorage=function(){localStorage.clear()},a.default.prototype.removeItem=function(h){typeof h!="string"&&console.log("The argument that you passed to removeItem() - ".concat(h," is not a string.")),localStorage.removeItem(h),localStorage.removeItem("".concat(h,"p5TypeID"))}},{"../core/main":267,"core-js/modules/es.array.from":155,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.ends-with":184,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":230}],282:[function(e,o,i){e("core-js/modules/es.array.concat"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.string.sub"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.string.sub"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=(e=e("../core/main"))&&e.__esModule?e:{default:e};u.default.prototype.createStringDict=function(a,s){return u.default._validateParameters("createStringDict",arguments),new u.default.StringDict(a,s)},u.default.prototype.createNumberDict=function(a,s){return u.default._validateParameters("createNumberDict",arguments),new u.default.NumberDict(a,s)},u.default.TypedDict=function(a,s){return a instanceof Object?this.data=a:(this.data={},this.data[a]=s),this},u.default.TypedDict.prototype.size=function(){return Object.keys(this.data).length},u.default.TypedDict.prototype.hasKey=function(a){return this.data.hasOwnProperty(a)},u.default.TypedDict.prototype.get=function(a){if(this.data.hasOwnProperty(a))return this.data[a];console.log("".concat(a," does not exist in this Dictionary"))},u.default.TypedDict.prototype.set=function(a,s){this._validate(s)?this.data[a]=s:console.log("Those values dont work for this dictionary type.")},u.default.TypedDict.prototype._addObj=function(a){for(var s in a)this.set(s,a[s])},u.default.TypedDict.prototype.create=function(a,s){a instanceof Object&&s===void 0?this._addObj(a):a!==void 0?this.set(a,s):console.log("In order to create a new Dictionary entry you must pass an object or a key, value pair")},u.default.TypedDict.prototype.clear=function(){this.data={}},u.default.TypedDict.prototype.remove=function(a){if(!this.data.hasOwnProperty(a))throw new Error("".concat(a," does not exist in this Dictionary"));delete this.data[a]},u.default.TypedDict.prototype.print=function(){for(var a in this.data)console.log("key:".concat(a," value:").concat(this.data[a]))},u.default.TypedDict.prototype.saveTable=function(a){var s,l="";for(s in this.data)l+="".concat(s,",").concat(this.data[s],`
`);var h=new Blob([l],{type:"text/csv"});u.default.prototype.downloadFile(h,a||"mycsv","csv")},u.default.TypedDict.prototype.saveJSON=function(a,s){u.default.prototype.saveJSON(this.data,a,s)},u.default.TypedDict.prototype._validate=function(a){return!0},u.default.StringDict=function(){for(var a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];u.default.TypedDict.apply(this,s)},u.default.StringDict.prototype=Object.create(u.default.TypedDict.prototype),u.default.StringDict.prototype._validate=function(a){return typeof a=="string"},u.default.NumberDict=function(){for(var a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];u.default.TypedDict.apply(this,s)},u.default.NumberDict.prototype=Object.create(u.default.TypedDict.prototype),u.default.NumberDict.prototype._validate=function(a){return typeof a=="number"},u.default.NumberDict.prototype.add=function(a,s){this.data.hasOwnProperty(a)?this.data[a]+=s:console.log("The key - ".concat(a," does not exist in this dictionary."))},u.default.NumberDict.prototype.sub=function(a,s){this.add(a,-s)},u.default.NumberDict.prototype.mult=function(a,s){this.data.hasOwnProperty(a)?this.data[a]*=s:console.log("The key - ".concat(a," does not exist in this dictionary."))},u.default.NumberDict.prototype.div=function(a,s){this.data.hasOwnProperty(a)?this.data[a]/=s:console.log("The key - ".concat(a," does not exist in this dictionary."))},u.default.NumberDict.prototype._valueTest=function(a){if(Object.keys(this.data).length===0)throw new Error("Unable to search for a minimum or maximum value on an empty NumberDict");if(Object.keys(this.data).length===1)return this.data[Object.keys(this.data)[0]];var s,l=this.data[Object.keys(this.data)[0]];for(s in this.data)this.data[s]*a<l*a&&(l=this.data[s]);return l},u.default.NumberDict.prototype.minValue=function(){return this._valueTest(1)},u.default.NumberDict.prototype.maxValue=function(){return this._valueTest(-1)},u.default.NumberDict.prototype._keyTest=function(a){if(Object.keys(this.data).length===0)throw new Error("Unable to use minValue on an empty NumberDict");if(Object.keys(this.data).length===1)return Object.keys(this.data)[0];for(var s=Object.keys(this.data)[0],l=1;l<Object.keys(this.data).length;l++)Object.keys(this.data)[l]*a<s*a&&(s=Object.keys(this.data)[l]);return s},u.default.NumberDict.prototype.minKey=function(){return this._keyTest(1)},u.default.NumberDict.prototype.maxKey=function(){return this._keyTest(-1)},e=u.default.TypedDict,i.default=e},{"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.object.keys":176,"core-js/modules/es.string.sub":192}],283:[function(e,o,i){function u(c){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(c)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.every"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/web.url"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.every"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/web.url"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a=(e=e("../core/main"))&&e.__esModule?e:{default:e};function s(c){return(s=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(d){return u(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":u(d)})(c)}function l(c,d,f){return(d._userNode||document.body).appendChild(c),f=new(f?a.default.MediaElement:a.default.Element)(c,d),d._elements.push(f),f}function h(c,v,f,m){var y=document.createElement(v),g=(typeof(f=f||"")=="string"&&(f=[f]),!0),v=!1,b=void 0;try{for(var w,_=f[Symbol.iterator]();!(g=(w=_.next()).done);g=!0){var j=w.value,E=document.createElement("source");E.setAttribute("src",j),y.appendChild(E)}}catch(R){v=!0,b=R}finally{try{g||_.return==null||_.return()}finally{if(v)throw b}}typeof m=="function"&&y.addEventListener("canplaythrough",function R(){m(),y.removeEventListener("canplaythrough",R)});var T=l(y,c,!0);return T.loadedmetadata=!1,y.addEventListener("loadedmetadata",function(){T.width=y.videoWidth,T.height=y.videoHeight,T.elt.width===0&&(T.elt.width=y.videoWidth),T.elt.height===0&&(T.elt.height=y.videoHeight),T.presetPlaybackRate&&(T.elt.playbackRate=T.presetPlaybackRate,delete T.presetPlaybackRate),T.loadedmetadata=!0}),T}a.default.prototype.select=function(c,d){return a.default._validateParameters("select",arguments),d=this._getContainer(d).querySelector(c),d?this._wrapElement(d):null},a.default.prototype.selectAll=function(c,d){a.default._validateParameters("selectAll",arguments);var f=[],m=this._getContainer(d).querySelectorAll(c);if(m)for(var y=0;y<m.length;y++){var g=this._wrapElement(m[y]);f.push(g)}return f},a.default.prototype._getContainer=function(c){var d=document;return typeof c=="string"?d=document.querySelector(c)||document:c instanceof a.default.Element?d=c.elt:c instanceof HTMLElement&&(d=c),d},a.default.prototype._wrapElement=function(c){var d,f=Array.prototype.slice.call(c.children);return c.tagName==="INPUT"&&c.type==="checkbox"?((d=new a.default.Element(c,this)).checked=function(){return arguments.length===0?this.elt.checked:(this.elt.checked=!!arguments[0],this)},d):c.tagName==="VIDEO"||c.tagName==="AUDIO"?new a.default.MediaElement(c,this):c.tagName==="SELECT"?this.createSelect(new a.default.Element(c,this)):0<f.length&&f.every(function(m){return m.tagName==="INPUT"||m.tagName==="LABEL"})?this.createRadio(new a.default.Element(c,this)):new a.default.Element(c,this)},a.default.prototype.removeElements=function(c){a.default._validateParameters("removeElements",arguments),this._elements.filter(function(d){return!(d.elt instanceof HTMLCanvasElement)}).map(function(d){return d.remove()})},a.default.Element.prototype.changed=function(c){return a.default.Element._adjustListener("change",c,this),this},a.default.Element.prototype.input=function(c){return a.default.Element._adjustListener("input",c,this),this},a.default.prototype.createDiv=function(){var c=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",d=document.createElement("div");return d.innerHTML=c,l(d,this)},a.default.prototype.createP=function(){var c=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",d=document.createElement("p");return d.innerHTML=c,l(d,this)},a.default.prototype.createSpan=function(){var c=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",d=document.createElement("span");return d.innerHTML=c,l(d,this)},a.default.prototype.createImg=function(){a.default._validateParameters("createImg",arguments);var c,d=document.createElement("img"),f=arguments;return 1<f.length&&typeof f[1]=="string"&&(d.alt=f[1]),2<f.length&&typeof f[2]=="string"&&(d.crossOrigin=f[2]),d.src=f[0],c=l(d,this),d.addEventListener("load",function(){c.width=d.offsetWidth||d.width,c.height=d.offsetHeight||d.height;var m=f[f.length-1];typeof m=="function"&&m(c)}),c},a.default.prototype.createA=function(c,d,f){a.default._validateParameters("createA",arguments);var m=document.createElement("a");return m.href=c,m.innerHTML=d,f&&(m.target=f),l(m,this)},a.default.prototype.createSlider=function(c,d,f,m){a.default._validateParameters("createSlider",arguments);var y=document.createElement("input");return y.type="range",y.min=c,y.max=d,m===0?y.step=1e-18:m&&(y.step=m),typeof f=="number"&&(y.value=f),l(y,this)},a.default.prototype.createButton=function(c,d){a.default._validateParameters("createButton",arguments);var f=document.createElement("button");return f.innerHTML=c,d&&(f.value=d),l(f,this)},a.default.prototype.createCheckbox=function(){a.default._validateParameters("createCheckbox",arguments);var c=document.createElement("div"),d=document.createElement("input"),f=(d.type="checkbox",document.createElement("label")),m=(f.appendChild(d),c.appendChild(f),l(c,this));return m.checked=function(){var y=m.elt.firstElementChild.getElementsByTagName("input")[0];if(y){if(arguments.length===0)return y.checked;y.checked=!!arguments[0]}return m},this.value=function(y){return m.value=y,this},arguments[0]&&(m.value(arguments[0]),(c=document.createElement("span")).innerHTML=arguments[0],f.appendChild(c)),arguments[1]&&(d.checked=!0),m},a.default.prototype.createSelect=function(){a.default._validateParameters("createSelect",arguments);var c,d,f=arguments[0];return f instanceof a.default.Element&&f.elt instanceof HTMLSelectElement?this.elt=(c=f).elt:f instanceof HTMLSelectElement?(c=l(f,this),this.elt=f):(d=document.createElement("select"),f&&typeof f=="boolean"&&d.setAttribute("multiple","true"),c=l(d,this),this.elt=d),c.option=function(m,y){var g;if(m!==void 0){for(var v,b=0;b<this.elt.length;b+=1)if(this.elt[b].textContent===m){g=b;break}g!==void 0?y===!1?this.elt.remove(g):this.elt[g].value=y:((v=document.createElement("option")).textContent=m,v.value=y===void 0?m:y,this.elt.appendChild(v),this._pInst._elements.push(v))}},c.selected=function(m){if(m!==void 0){for(var y=0;y<this.elt.length;y+=1)this.elt[y].value.toString()===m.toString()&&(this.elt.selectedIndex=y);return this}if(this.elt.getAttribute("multiple")){var g=[],v=!0,b=!1,w=void 0;try{for(var _,j=this.elt.selectedOptions[Symbol.iterator]();!(v=(_=j.next()).done);v=!0){var E=_.value;g.push(E.value)}}catch(T){b=!0,w=T}finally{try{v||j.return==null||j.return()}finally{if(b)throw w}}return g}return this.elt.value},c.disable=function(m){if(typeof m=="string")for(var y=0;y<this.elt.length;y++)this.elt[y].value.toString()===m&&(this.elt[y].disabled=!0,this.elt[y].selected=!1);else this.elt.disabled=!0;return this},c},a.default.prototype.createRadio=function(){function c(v){return v instanceof HTMLInputElement&&v.type==="radio"}function d(v){return v instanceof HTMLLabelElement}var f,m,y,g=arguments[0];return g instanceof a.default.Element&&(g.elt instanceof HTMLDivElement||g.elt instanceof HTMLSpanElement)?(f=g,this.elt=g.elt):g instanceof HTMLDivElement||g instanceof HTMLSpanElement?(f=l(g,this),m=this.elt=g,typeof arguments[1]=="string"&&(y=arguments[1])):(typeof g=="string"&&(y=g),m=document.createElement("div"),f=l(m,this),this.elt=m),f._name=y||"radioOption",f._getOptionsArray=function(){return Array.from(this.elt.children).filter(function(v){return c(v)||d(v)&&c(v.firstElementChild)}).map(function(v){return c(v)?v:v.firstElementChild})},f.option=function(v,b){var w,_,j,E=!0,T=!1,R=void 0;try{for(var M,I=f._getOptionsArray()[Symbol.iterator]();!(E=(M=I.next()).done);E=!0){var D=M.value;if(D.value===v){w=D;break}}}catch(L){T=!0,R=L}finally{try{E||I.return==null||I.return()}finally{if(T)throw R}}return w===void 0&&((w=document.createElement("input")).setAttribute("type","radio"),w.setAttribute("value",v)),w.setAttribute("name",f._name),d(w.parentElement)?_=w.parentElement:(_=document.createElement("label")).insertAdjacentElement("afterbegin",w),_.lastElementChild instanceof HTMLSpanElement?j=_.lastElementChild:(j=document.createElement("span"),w.insertAdjacentElement("afterend",j)),j.innerHTML=b===void 0?v:b,this.elt.appendChild(_),w},f.remove=function(v){var b=!0,w=!1,_=void 0;try{for(var j,E=f._getOptionsArray()[Symbol.iterator]();!(b=(j=E.next()).done);b=!0){var T=j.value;if(T.value===v)return void(d(T.parentElement)?T.parentElement:T).remove()}}catch(R){w=!0,_=R}finally{try{b||E.return==null||E.return()}finally{if(w)throw _}}},f.value=function(){var v="",b=!0,w=!1,_=void 0;try{for(var j,E=f._getOptionsArray()[Symbol.iterator]();!(b=(j=E.next()).done);b=!0){var T=j.value;if(T.checked){v=T.value;break}}}catch(R){w=!0,_=R}finally{try{b||E.return==null||E.return()}finally{if(w)throw _}}return v},f.selected=function(v){var b=null;if(v===void 0){var w=!0,_=!1,j=void 0;try{for(var E,T=f._getOptionsArray()[Symbol.iterator]();!(w=(E=T.next()).done);w=!0){var R=E.value;if(R.checked){b=R;break}}}catch(N){_=!0,j=N}finally{try{w||T.return==null||T.return()}finally{if(_)throw j}}}else{f._getOptionsArray().forEach(function(q){q.checked=!1,q.removeAttribute("checked")});var M=!0,_=!1,j=void 0;try{for(var I,D=f._getOptionsArray()[Symbol.iterator]();!(M=(I=D.next()).done);M=!0){var L=I.value;L.value===v&&(L.setAttribute("checked",!0),L.checked=!0,b=L)}}catch(q){_=!0,j=q}finally{try{M||D.return==null||D.return()}finally{if(_)throw j}}}return b},f.disable=function(){var v=!(0<arguments.length&&arguments[0]!==void 0)||arguments[0],b=!0,w=!1,_=void 0;try{for(var j,E=f._getOptionsArray()[Symbol.iterator]();!(b=(j=E.next()).done);b=!0)j.value.setAttribute("disabled",v)}catch(T){w=!0,_=T}finally{try{b||E.return==null||E.return()}finally{if(w)throw _}}},f},a.default.prototype.createColorPicker=function(c){a.default._validateParameters("createColorPicker",arguments);var d=document.createElement("input");return d.type="color",c?c instanceof a.default.Color?d.value=c.toString("#rrggbb"):(a.default.prototype._colorMode="rgb",a.default.prototype._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},d.value=a.default.prototype.color(c).toString("#rrggbb")):d.value="#000000",(d=l(d,this)).color=function(){return c&&(c.mode&&(a.default.prototype._colorMode=c.mode),c.maxes&&(a.default.prototype._colorMaxes=c.maxes)),a.default.prototype.color(this.elt.value)},d},a.default.prototype.createInput=function(){var c=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",d=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"text",f=(a.default._validateParameters("createInput",arguments),document.createElement("input"));return f.setAttribute("value",c),f.setAttribute("type",d),l(f,this)},a.default.prototype.createFileInput=function(c){var d,f=1<arguments.length&&arguments[1]!==void 0&&arguments[1];if(a.default._validateParameters("createFileInput",arguments),window.File&&window.FileReader&&window.FileList&&window.Blob)return(d=document.createElement("input")).setAttribute("type","file"),f&&d.setAttribute("multiple",!0),d.addEventListener("change",function(m){var y=!0,g=!1,v=void 0;try{for(var b,w=m.target.files[Symbol.iterator]();!(y=(b=w.next()).done);y=!0){var _=b.value;a.default.File._load(_,c)}}catch(j){g=!0,v=j}finally{try{y||w.return==null||w.return()}finally{if(g)throw v}}},!1),l(d,this);console.log("The File APIs are not fully supported in this browser. Cannot create element.")},a.default.prototype.createVideo=function(c,d){return a.default._validateParameters("createVideo",arguments),h(this,"video",c,d)},a.default.prototype.createAudio=function(c,d){return a.default._validateParameters("createAudio",arguments),h(this,"audio",c,d)},a.default.prototype.VIDEO="video",a.default.prototype.AUDIO="audio",navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(c){var d=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return d?new Promise(function(f,m){d.call(navigator,c,f,m)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),a.default.prototype.createCapture=function(){if(a.default._validateParameters("createCapture",arguments),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new DOMException("getUserMedia not supported in this browser");var c,d=!0,f=!0,m=!0,y=!1,g=void 0;try{for(var v,b=arguments[Symbol.iterator]();!(m=(v=b.next()).done);m=!0){var w=v.value;w===a.default.prototype.VIDEO?f=!1:w===a.default.prototype.AUDIO?d=!1:s(w)==="object"?_=w:typeof w=="function"&&(c=w)}}catch(T){y=!0,g=T}finally{try{m||b.return==null||b.return()}finally{if(y)throw g}}var _=_||{video:d,audio:f},j=document.createElement("video"),E=(j.setAttribute("playsinline",""),navigator.mediaDevices.getUserMedia(_).then(function(T){try{"srcObject"in j?j.srcObject=T:j.src=window.URL.createObjectURL(T)}catch{j.src=T}},console.log),l(j,this,!0));return E.loadedmetadata=!1,j.addEventListener("loadedmetadata",function(){j.play(),j.width?(E.width=j.width,E.height=j.height):(E.width=E.elt.width=j.videoWidth,E.height=E.elt.height=j.videoHeight),E.loadedmetadata=!0,c&&c(j.srcObject)}),E},a.default.prototype.createElement=function(c,d){return a.default._validateParameters("createElement",arguments),c=document.createElement(c),d!==void 0&&(c.innerHTML=d),l(c,this)},a.default.Element.prototype.addClass=function(c){return this.elt.className?this.hasClass(c)||(this.elt.className=this.elt.className+" "+c):this.elt.className=c,this},a.default.Element.prototype.removeClass=function(c){return this.elt.classList.remove(c),this},a.default.Element.prototype.hasClass=function(c){return this.elt.classList.contains(c)},a.default.Element.prototype.toggleClass=function(c){return this.elt.classList.contains(c)?this.elt.classList.remove(c):this.elt.classList.add(c),this},a.default.Element.prototype.child=function(c){return c===void 0?this.elt.childNodes:(typeof c=="string"?(c[0]==="#"&&(c=c.substring(1)),c=document.getElementById(c)):c instanceof a.default.Element&&(c=c.elt),c instanceof HTMLElement&&this.elt.appendChild(c),this)},a.default.Element.prototype.center=function(c){var d=this.elt.style.display,f=this.elt.style.display==="none",m=this.parent().style.display==="none",y={x:this.elt.offsetLeft,y:this.elt.offsetTop},g=(f&&this.show(),m&&this.parent().show(),this.elt.style.display="block",this.position(0,0),Math.abs(this.parent().offsetWidth-this.elt.offsetWidth)),v=Math.abs(this.parent().offsetHeight-this.elt.offsetHeight);return c==="both"||c===void 0?this.position(g/2+this.parent().offsetLeft,v/2+this.parent().offsetTop):c==="horizontal"?this.position(g/2+this.parent().offsetLeft,y.y):c==="vertical"&&this.position(y.x,v/2+this.parent().offsetTop),this.style("display",d),f&&this.hide(),m&&this.parent().hide(),this},a.default.Element.prototype.html=function(){return arguments.length===0?this.elt.innerHTML:(arguments[1]?this.elt.insertAdjacentHTML("beforeend",arguments[0]):this.elt.innerHTML=arguments[0],this)},a.default.Element.prototype.position=function(){return arguments.length===0?{x:this.elt.offsetLeft,y:this.elt.offsetTop}:(this.elt.style.position=arguments[2]!=="static"&&arguments[2]!=="fixed"&&arguments[2]!=="relative"&&arguments[2]!=="sticky"&&arguments[2]!=="initial"&&arguments[2]!=="inherit"?"absolute":arguments[2],this.elt.style.left=arguments[0]+"px",this.elt.style.top=arguments[1]+"px",this.x=arguments[0],this.y=arguments[1],this)},a.default.Element.prototype._translate=function(){this.elt.style.position="absolute";var c="";return this.elt.style.transform&&(c=(c=this.elt.style.transform.replace(/translate3d\(.*\)/g,"")).replace(/translate[X-Z]?\(.*\)/g,"")),arguments.length===2?this.elt.style.transform="translate("+arguments[0]+"px, "+arguments[1]+"px)":2<arguments.length&&(this.elt.style.transform="translate3d("+arguments[0]+"px,"+arguments[1]+"px,"+arguments[2]+"px)",this.elt.parentElement.style.perspective=arguments.length===3?"1000px":arguments[3]+"px"),this.elt.style.transform+=c,this},a.default.Element.prototype._rotate=function(){var c="";return this.elt.style.transform&&(c=(c=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"")).replace(/rotate[X-Z]?\(.*\)/g,"")),arguments.length===1?this.elt.style.transform="rotate("+arguments[0]+"deg)":arguments.length===2?this.elt.style.transform="rotate("+arguments[0]+"deg, "+arguments[1]+"deg)":arguments.length===3&&(this.elt.style.transform="rotateX("+arguments[0]+"deg)",this.elt.style.transform+="rotateY("+arguments[1]+"deg)",this.elt.style.transform+="rotateZ("+arguments[2]+"deg)"),this.elt.style.transform+=c,this},a.default.Element.prototype.style=function(c,d){if((d=d instanceof a.default.Color?"rgba("+d.levels[0]+","+d.levels[1]+","+d.levels[2]+","+d.levels[3]/255+")":d)===void 0){if(c.indexOf(":")===-1)return window.getComputedStyle(this.elt).getPropertyValue(c);for(var f=c.split(";"),m=0;m<f.length;m++){var y=f[m].split(":");y[0]&&y[1]&&(this.elt.style[y[0].trim()]=y[1].trim())}}else this.elt.style[c]=d,c!=="width"&&c!=="height"&&c!=="left"&&c!=="top"||(d=window.getComputedStyle(this.elt).getPropertyValue(c).replace(/[^\d.]/g,""),this[c]=Math.round(parseFloat(d,10)));return this},a.default.Element.prototype.attribute=function(c,d){if(this.elt.firstChild==null||this.elt.firstChild.type!=="checkbox"&&this.elt.firstChild.type!=="radio")return d===void 0?this.elt.getAttribute(c):(this.elt.setAttribute(c,d),this);if(d===void 0)return this.elt.firstChild.getAttribute(c);for(var f=0;f<this.elt.childNodes.length;f++)this.elt.childNodes[f].setAttribute(c,d)},a.default.Element.prototype.removeAttribute=function(c){if(this.elt.firstChild!=null&&(this.elt.firstChild.type==="checkbox"||this.elt.firstChild.type==="radio"))for(var d=0;d<this.elt.childNodes.length;d++)this.elt.childNodes[d].removeAttribute(c);return this.elt.removeAttribute(c),this},a.default.Element.prototype.value=function(){return 0<arguments.length?(this.elt.value=arguments[0],this):this.elt.type==="range"?parseFloat(this.elt.value):this.elt.value},a.default.Element.prototype.show=function(){return this.elt.style.display="block",this},a.default.Element.prototype.hide=function(){return this.elt.style.display="none",this},a.default.Element.prototype.size=function(c,d){if(arguments.length===0)return{width:this.elt.offsetWidth,height:this.elt.offsetHeight};var f=c,m=d,y=a.default.prototype.AUTO;if(f!==y||m!==y){if(f===y?f=d*this.width/this.height:m===y&&(m=c*this.height/this.width),this.elt instanceof HTMLCanvasElement){var g,v={},b=this.elt.getContext("2d");for(g in b)v[g]=b[g];for(g in this.elt.setAttribute("width",f*this._pInst._pixelDensity),this.elt.setAttribute("height",m*this._pInst._pixelDensity),this.elt.style.width=f+"px",this.elt.style.height=m+"px",this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),v)this.elt.getContext("2d")[g]=v[g]}else this.elt.style.width=f+"px",this.elt.style.height=m+"px",this.elt.width=f,this.elt.height=m;this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this._pInst&&this._pInst._curElement&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",this.elt.offsetWidth),this._pInst._setProperty("height",this.elt.offsetHeight))}return this},a.default.Element.prototype.remove=function(){this instanceof a.default.MediaElement&&(this.stop(),(d=this.elt.srcObject)!==null&&d.getTracks().forEach(function(f){f.stop()}));var c,d=this._pInst._elements.indexOf(this);for(c in d!==-1&&this._pInst._elements.splice(d,1),this._events)this.elt.removeEventListener(c,this._events[c]);this.elt&&this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt)},a.default.Element.prototype.drop=function(c,d){var f;return window.File&&window.FileReader&&window.FileList&&window.Blob?(this._dragDisabled||(this._dragDisabled=!0,this.elt.addEventListener("dragover",f=function(m){m.preventDefault()}),this.elt.addEventListener("dragleave",f)),a.default.Element._attachListener("drop",function(m){m.preventDefault(),typeof d=="function"&&d.call(this,m);for(var y=m.dataTransfer.files,g=0;g<y.length;g++){var v=y[g];a.default.File._load(v,c)}},this)):console.log("The File APIs are not fully supported in this browser."),this},a.default.MediaElement=function(c,d){a.default.Element.call(this,c,d);var f=this;this.elt.crossOrigin="anonymous",this._prevTime=0,this._cueIDCounter=0,this._cues=[],(this._pixelsState=this)._pixelDensity=1,this._modified=!1,Object.defineProperty(f,"src",{get:function(){var m=f.elt.children[0].src,y=f.elt.src===window.location.href?"":f.elt.src;return m===window.location.href?y:m},set:function(m){for(var y=0;y<f.elt.children.length;y++)f.elt.removeChild(f.elt.children[y]);var g=document.createElement("source");g.src=m,c.appendChild(g),f.elt.src=m,f.modified=!0}}),f._onended=function(){},f.elt.onended=function(){f._onended(f)}},a.default.MediaElement.prototype=Object.create(a.default.Element.prototype),a.default.MediaElement.prototype.play=function(){var c,d=this;return this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0),1<this.elt.readyState||this.elt.load(),(c=this.elt.play())&&c.catch&&c.catch(function(f){f.name==="NotAllowedError"?a.default._friendlyAutoplayError(d.src):console.error("Media play method encountered an unexpected error",f)}),this},a.default.MediaElement.prototype.stop=function(){return this.elt.pause(),this.elt.currentTime=0,this},a.default.MediaElement.prototype.pause=function(){return this.elt.pause(),this},a.default.MediaElement.prototype.loop=function(){return this.elt.setAttribute("loop",!0),this.play(),this},a.default.MediaElement.prototype.noLoop=function(){return this.elt.removeAttribute("loop"),this},a.default.MediaElement.prototype._setupAutoplayFailDetection=function(){var c=this,d=setTimeout(function(){return a.default._friendlyAutoplayError(c.src)},500);this.elt.addEventListener("play",function(){return clearTimeout(d)},{passive:!0,once:!0})},a.default.MediaElement.prototype.autoplay=function(c){var d=this,f=this.elt.getAttribute("autoplay");return this.elt.setAttribute("autoplay",c),c&&!f&&(c=function(){return d._setupAutoplayFailDetection()},this.elt.readyState===4?c():this.elt.addEventListener("canplay",c,{passive:!0,once:!0})),this},a.default.MediaElement.prototype.volume=function(c){if(c===void 0)return this.elt.volume;this.elt.volume=c},a.default.MediaElement.prototype.speed=function(c){if(c===void 0)return this.presetPlaybackRate||this.elt.playbackRate;this.loadedmetadata?this.elt.playbackRate=c:this.presetPlaybackRate=c},a.default.MediaElement.prototype.time=function(c){return c===void 0?this.elt.currentTime:(this.elt.currentTime=c,this)},a.default.MediaElement.prototype.duration=function(){return this.elt.duration},a.default.MediaElement.prototype.pixels=[],a.default.MediaElement.prototype._ensureCanvas=function(){this.canvas||(this.canvas=document.createElement("canvas"),this.drawingContext=this.canvas.getContext("2d"),this.setModified(!0)),this.loadedmetadata&&(this.canvas.width!==this.elt.width&&(this.canvas.width=this.elt.width,this.canvas.height=this.elt.height,this.width=this.canvas.width,this.height=this.canvas.height),this.drawingContext.drawImage(this.elt,0,0,this.canvas.width,this.canvas.height),this.setModified(!0))},a.default.MediaElement.prototype.loadPixels=function(){return this._ensureCanvas(),a.default.Renderer2D.prototype.loadPixels.apply(this,arguments)},a.default.MediaElement.prototype.updatePixels=function(c,d,f,m){return this.loadedmetadata&&(this._ensureCanvas(),a.default.Renderer2D.prototype.updatePixels.call(this,c,d,f,m)),this.setModified(!0),this},a.default.MediaElement.prototype.get=function(){return this._ensureCanvas(),a.default.Renderer2D.prototype.get.apply(this,arguments)},a.default.MediaElement.prototype._getPixel=function(){return this.loadPixels(),a.default.Renderer2D.prototype._getPixel.apply(this,arguments)},a.default.MediaElement.prototype.set=function(c,d,f){this.loadedmetadata&&(this._ensureCanvas(),a.default.Renderer2D.prototype.set.call(this,c,d,f),this.setModified(!0))},a.default.MediaElement.prototype.copy=function(){this._ensureCanvas(),a.default.prototype.copy.apply(this,arguments)},a.default.MediaElement.prototype.mask=function(){this.loadPixels(),this.setModified(!0),a.default.Image.prototype.mask.apply(this,arguments)},a.default.MediaElement.prototype.isModified=function(){return this._modified},a.default.MediaElement.prototype.setModified=function(c){this._modified=c},a.default.MediaElement.prototype.onended=function(c){return this._onended=c,this},a.default.MediaElement.prototype.connect=function(c){var d,f;if(typeof a.default.prototype.getAudioContext=="function")d=a.default.prototype.getAudioContext(),f=a.default.soundOut.input;else try{f=(d=c.context).destination}catch{throw"connect() is meant to be used with Web Audio API or p5.sound.js"}this.audioSourceNode||(this.audioSourceNode=d.createMediaElementSource(this.elt),this.audioSourceNode.connect(f)),c?c.input?this.audioSourceNode.connect(c.input):this.audioSourceNode.connect(c):this.audioSourceNode.connect(f)},a.default.MediaElement.prototype.disconnect=function(){if(!this.audioSourceNode)throw"nothing to disconnect";this.audioSourceNode.disconnect()},a.default.MediaElement.prototype.showControls=function(){this.elt.style["text-align"]="inherit",this.elt.controls=!0},a.default.MediaElement.prototype.hideControls=function(){this.elt.controls=!1};function p(c,d,f,m){this.callback=c,this.time=d,this.id=f,this.val=m}a.default.MediaElement.prototype.addCue=function(c,y,f){var m=this._cueIDCounter++,y=new p(y,c,m,f);return this._cues.push(y),this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this)),m},a.default.MediaElement.prototype.removeCue=function(c){for(var d=0;d<this._cues.length;d++)this._cues[d].id===c&&(console.log(c),this._cues.splice(d,1));this._cues.length===0&&(this.elt.ontimeupdate=null)},a.default.MediaElement.prototype.clearCues=function(){this._cues=[],this.elt.ontimeupdate=null},a.default.MediaElement.prototype._onTimeUpdate=function(){for(var c=this.time(),d=0;d<this._cues.length;d++){var f=this._cues[d].time,m=this._cues[d].val;this._prevTime<f&&f<=c&&this._cues[d].callback(m)}this._prevTime=c},a.default.File=function(c,d){this.file=c,this._pInst=d,d=c.type.split("/"),this.type=d[0],this.subtype=d[1],this.name=c.name,this.size=c.size,this.data=void 0},a.default.File._createLoader=function(c,d){var f=new FileReader;return f.onload=function(m){var y,g=new a.default.File(c);g.file.type==="application/json"?g.data=JSON.parse(m.target.result):g.file.type==="text/xml"?(y=new DOMParser().parseFromString(m.target.result,"text/xml"),g.data=new a.default.XML(y.documentElement)):g.data=m.target.result,d(g)},f},a.default.File._load=function(c,d){var f;/^text\//.test(c.type)||c.type==="application/json"?a.default.File._createLoader(c,d).readAsText(c):/^(video|audio)\//.test(c.type)?((f=new a.default.File(c)).data=URL.createObjectURL(c),d(f)):a.default.File._createLoader(c,d).readAsDataURL(c)},e=a.default,i.default=e},{"../core/main":267,"core-js/modules/es.array.every":151,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.from":155,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.function.name":165,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.for-each":229,"core-js/modules/web.dom-collections.iterator":230,"core-js/modules/web.url":232}],284:[function(e,o,i){function u(w){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(w)}function a(w){return(a=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(_){return u(_)}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":u(_)})(w)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=(b=e("../core/main"))&&b.__esModule?b:{default:b},l=function(w){if(w&&w.__esModule)return w;if(w===null||a(w)!=="object"&&typeof w!="function")return{default:w};var _=h();if(_&&_.has(w))return _.get(w);var j,E={},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(j in w){var R;Object.prototype.hasOwnProperty.call(w,j)&&((R=T?Object.getOwnPropertyDescriptor(w,j):null)&&(R.get||R.set)?Object.defineProperty(E,j,R):E[j]=w[j])}return E.default=w,_&&_.set(w,E),E}(e("../core/constants"));function h(){var w;return typeof WeakMap!="function"?null:(w=new WeakMap,h=function(){return w},w)}s.default.prototype.deviceOrientation=1<window.innerWidth/window.innerHeight?"landscape":"portrait",s.default.prototype.accelerationX=0,s.default.prototype.accelerationY=0,s.default.prototype.accelerationZ=0,s.default.prototype.pAccelerationX=0,s.default.prototype.pAccelerationY=0,s.default.prototype.pAccelerationZ=0,s.default.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX),this._setProperty("pAccelerationY",this.accelerationY),this._setProperty("pAccelerationZ",this.accelerationZ)},s.default.prototype.rotationX=0,s.default.prototype.rotationY=0,s.default.prototype.rotationZ=0,s.default.prototype.pRotationX=0,s.default.prototype.pRotationY=0;var p=s.default.prototype.pRotationZ=0,c=0,d=0,f="clockwise",m="clockwise",y="clockwise",g=(s.default.prototype.pRotateDirectionX=void 0,s.default.prototype.pRotateDirectionY=void 0,s.default.prototype.pRotateDirectionZ=void 0,s.default.prototype._updatePRotations=function(){this._setProperty("pRotationX",this.rotationX),this._setProperty("pRotationY",this.rotationY),this._setProperty("pRotationZ",this.rotationZ)},s.default.prototype.turnAxis=void 0,.5),v=30,b=(s.default.prototype.setMoveThreshold=function(w){s.default._validateParameters("setMoveThreshold",arguments),g=w},s.default.prototype.setShakeThreshold=function(w){s.default._validateParameters("setShakeThreshold",arguments),v=w},s.default.prototype._ondeviceorientation=function(w){this._updatePRotations(),this._angleMode===l.radians&&(w.beta=w.beta*(_PI/180),w.gamma=w.gamma*(_PI/180),w.alpha=w.alpha*(_PI/180)),this._setProperty("rotationX",w.beta),this._setProperty("rotationY",w.gamma),this._setProperty("rotationZ",w.alpha),this._handleMotion()},s.default.prototype._ondevicemotion=function(w){this._updatePAccelerations(),this._setProperty("accelerationX",2*w.acceleration.x),this._setProperty("accelerationY",2*w.acceleration.y),this._setProperty("accelerationZ",2*w.acceleration.z),this._handleMotion()},s.default.prototype._handleMotion=function(){window.orientation===90||window.orientation===-90?this._setProperty("deviceOrientation","landscape"):window.orientation===0?this._setProperty("deviceOrientation","portrait"):window.orientation===void 0&&this._setProperty("deviceOrientation","undefined");var w,_,j,E,T,R=this._isGlobal?window:this;typeof R.deviceMoved=="function"&&(Math.abs(this.accelerationX-this.pAccelerationX)>g||Math.abs(this.accelerationY-this.pAccelerationY)>g||Math.abs(this.accelerationZ-this.pAccelerationZ)>g)&&R.deviceMoved(),typeof R.deviceTurned=="function"&&(_=this.rotationX+180,w=this.pRotationX+180,j=p+180,0<_-w&&_-w<270||_-w<-270?f="clockwise":(_-w<0||270<_-w)&&(f="counter-clockwise"),f!==this.pRotateDirectionX&&(j=_),90<Math.abs(_-j)&&Math.abs(_-j)<270&&(j=_,this._setProperty("turnAxis","X"),R.deviceTurned()),this.pRotateDirectionX=f,p=j-180,w=this.rotationY+180,_=this.pRotationY+180,j=c+180,0<w-_&&w-_<270||w-_<-270?m="clockwise":(w-_<0||270<w-this.pRotationY)&&(m="counter-clockwise"),m!==this.pRotateDirectionY&&(j=w),90<Math.abs(w-j)&&Math.abs(w-j)<270&&(j=w,this._setProperty("turnAxis","Y"),R.deviceTurned()),this.pRotateDirectionY=m,c=j-180,0<this.rotationZ-this.pRotationZ&&this.rotationZ-this.pRotationZ<270||this.rotationZ-this.pRotationZ<-270?y="clockwise":(this.rotationZ-this.pRotationZ<0||270<this.rotationZ-this.pRotationZ)&&(y="counter-clockwise"),y!==this.pRotateDirectionZ&&(d=this.rotationZ),90<Math.abs(this.rotationZ-d)&&Math.abs(this.rotationZ-d)<270&&(d=this.rotationZ,this._setProperty("turnAxis","Z"),R.deviceTurned()),this.pRotateDirectionZ=y,this._setProperty("turnAxis",void 0)),typeof R.deviceShaken=="function"&&(this.pAccelerationX!==null&&(E=Math.abs(this.accelerationX-this.pAccelerationX),T=Math.abs(this.accelerationY-this.pAccelerationY)),v<E+T&&R.deviceShaken())},s.default);i.default=b},{"../core/constants":256,"../core/main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],285:[function(e,o,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=(e=e("../core/main"))&&e.__esModule?e:{default:e};u.default.prototype.isKeyPressed=!1,u.default.prototype.keyIsPressed=!1,u.default.prototype.key="",u.default.prototype.keyCode=0,u.default.prototype._onkeydown=function(a){var s;this._downKeys[a.which]||(this._setProperty("isKeyPressed",!0),this._setProperty("keyIsPressed",!0),this._setProperty("keyCode",a.which),this._downKeys[a.which]=!0,this._setProperty("key",a.key||String.fromCharCode(a.which)||a.which),typeof(s=this._isGlobal?window:this).keyPressed!="function"||a.charCode||s.keyPressed(a)===!1&&a.preventDefault())},u.default.prototype._onkeyup=function(a){this._downKeys[a.which]=!1,this._areDownKeys()||(this._setProperty("isKeyPressed",!1),this._setProperty("keyIsPressed",!1)),this._setProperty("_lastKeyCodeTyped",null),this._setProperty("key",a.key||String.fromCharCode(a.which)||a.which),this._setProperty("keyCode",a.which);var s=this._isGlobal?window:this;typeof s.keyReleased=="function"&&s.keyReleased(a)===!1&&a.preventDefault()},u.default.prototype._onkeypress=function(a){var s;a.which!==this._lastKeyCodeTyped&&(this._setProperty("_lastKeyCodeTyped",a.which),this._setProperty("key",a.key||String.fromCharCode(a.which)||a.which),typeof(s=this._isGlobal?window:this).keyTyped=="function"&&s.keyTyped(a)===!1&&a.preventDefault())},u.default.prototype._onblur=function(a){this._downKeys={}},u.default.prototype.keyIsDown=function(a){return u.default._validateParameters("keyIsDown",arguments),this._downKeys[a]||!1},u.default.prototype._areDownKeys=function(){for(var a in this._downKeys)if(this._downKeys.hasOwnProperty(a)&&this._downKeys[a]===!0)return!0;return!1},e=u.default,i.default=e},{"../core/main":267}],286:[function(e,o,i){function u(p){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(p)}function a(p){return(a=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(c){return u(c)}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":u(c)})(p)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.string.includes"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=(s=e("../core/main"))&&s.__esModule?s:{default:s},l=function(p){if(p&&p.__esModule)return p;if(p===null||a(p)!=="object"&&typeof p!="function")return{default:p};var c=h();if(c&&c.has(p))return c.get(p);var d,f={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(d in p){var y;Object.prototype.hasOwnProperty.call(p,d)&&((y=m?Object.getOwnPropertyDescriptor(p,d):null)&&(y.get||y.set)?Object.defineProperty(f,d,y):f[d]=p[d])}return f.default=p,c&&c.set(p,f),f}(e("../core/constants"));function h(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,h=function(){return p},p)}s.default.prototype.movedX=0,s.default.prototype.movedY=0,s.default.prototype._hasMouseInteracted=!1,s.default.prototype.mouseX=0,s.default.prototype.mouseY=0,s.default.prototype.pmouseX=0,s.default.prototype.pmouseY=0,s.default.prototype.winMouseX=0,s.default.prototype.winMouseY=0,s.default.prototype.pwinMouseX=0,s.default.prototype.pwinMouseY=0,s.default.prototype.mouseButton=0,s.default.prototype.mouseIsPressed=!1,s.default.prototype._updateNextMouseCoords=function(p){var c,d,f,m,y;this._curElement!==null&&(!p.touches||0<p.touches.length)&&(c=this._curElement.elt,d=this.width,f=this.height,(m=p)&&!m.clientX&&(m.touches?m=m.touches[0]:m.changedTouches&&(m=m.changedTouches[0])),y=c.getBoundingClientRect(),d=c.scrollWidth/d||1,c=c.scrollHeight/f||1,f={x:(m.clientX-y.left)/d,y:(m.clientY-y.top)/c,winX:m.clientX,winY:m.clientY,id:m.identifier},this._setProperty("movedX",p.movementX),this._setProperty("movedY",p.movementY),this._setProperty("mouseX",f.x),this._setProperty("mouseY",f.y),this._setProperty("winMouseX",f.winX),this._setProperty("winMouseY",f.winY)),this._hasMouseInteracted||(this._updateMouseCoords(),this._setProperty("_hasMouseInteracted",!0))},s.default.prototype._updateMouseCoords=function(){this._setProperty("pmouseX",this.mouseX),this._setProperty("pmouseY",this.mouseY),this._setProperty("pwinMouseX",this.winMouseX),this._setProperty("pwinMouseY",this.winMouseY),this._setProperty("_pmouseWheelDeltaY",this._mouseWheelDeltaY)},s.default.prototype._setMouseButton=function(p){p.button===1?this._setProperty("mouseButton",l.CENTER):p.button===2?this._setProperty("mouseButton",l.RIGHT):this._setProperty("mouseButton",l.LEFT)},s.default.prototype._onmousemove=function(p){var c=this._isGlobal?window:this;this._updateNextMouseCoords(p),this.mouseIsPressed?typeof c.mouseDragged=="function"?c.mouseDragged(p)===!1&&p.preventDefault():typeof c.touchMoved=="function"&&c.touchMoved(p)===!1&&p.preventDefault():typeof c.mouseMoved=="function"&&c.mouseMoved(p)===!1&&p.preventDefault()},s.default.prototype._onmousedown=function(p){var c=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._setMouseButton(p),this._updateNextMouseCoords(p),typeof c.mousePressed=="function"?c.mousePressed(p)===!1&&p.preventDefault():navigator.userAgent.toLowerCase().includes("safari")&&typeof c.touchStarted=="function"&&c.touchStarted(p)===!1&&p.preventDefault()},s.default.prototype._onmouseup=function(p){var c=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!1),typeof c.mouseReleased=="function"?c.mouseReleased(p)===!1&&p.preventDefault():typeof c.touchEnded=="function"&&c.touchEnded(p)===!1&&p.preventDefault()},s.default.prototype._ondragend=s.default.prototype._onmouseup,s.default.prototype._ondragover=s.default.prototype._onmousemove,s.default.prototype._onclick=function(p){var c=this._isGlobal?window:this;typeof c.mouseClicked=="function"&&c.mouseClicked(p)===!1&&p.preventDefault()},s.default.prototype._ondblclick=function(p){var c=this._isGlobal?window:this;typeof c.doubleClicked=="function"&&c.doubleClicked(p)===!1&&p.preventDefault()},s.default.prototype._mouseWheelDeltaY=0,s.default.prototype._pmouseWheelDeltaY=0,s.default.prototype._onwheel=function(p){var c=this._isGlobal?window:this;this._setProperty("_mouseWheelDeltaY",p.deltaY),typeof c.mouseWheel=="function"&&(p.delta=p.deltaY,c.mouseWheel(p)===!1&&p.preventDefault())},s.default.prototype.requestPointerLock=function(){var p=this._curElement.elt;return p.requestPointerLock=p.requestPointerLock||p.mozRequestPointerLock,p.requestPointerLock?(p.requestPointerLock(),!0):(console.log("requestPointerLock is not implemented in this browser"),!1)},s.default.prototype.exitPointerLock=function(){document.exitPointerLock()},e=s.default,i.default=e},{"../core/constants":256,"../core/main":267,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],287:[function(e,o,i){e("core-js/modules/es.array.includes"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.string.includes"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,e=(e=e("../core/main"))&&e.__esModule?e:{default:e},e.default.prototype.touches=[],e.default.prototype._updateTouchCoords=function(u){if(this._curElement!==null){for(var a=[],s=0;s<u.touches.length;s++)a[s]=function(y,m,g,c){var d=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,f=y.getBoundingClientRect(),m=y.scrollWidth/m||1,y=y.scrollHeight/g||1,g=c.touches[d]||c.changedTouches[d];return{x:(g.clientX-f.left)/m,y:(g.clientY-f.top)/y,winX:g.clientX,winY:g.clientY,id:g.identifier}}(this._curElement.elt,this.width,this.height,u,s);this._setProperty("touches",a)}},e.default.prototype._ontouchstart=function(u){var a=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._updateTouchCoords(u),this._updateNextMouseCoords(u),this._updateMouseCoords(),typeof a.touchStarted=="function"?a.touchStarted(u)===!1&&u.preventDefault():navigator.userAgent.toLowerCase().includes("safari")&&typeof a.mousePressed=="function"&&a.mousePressed(u)===!1&&u.preventDefault()},e.default.prototype._ontouchmove=function(u){var a=this._isGlobal?window:this;this._updateTouchCoords(u),this._updateNextMouseCoords(u),typeof a.touchMoved=="function"?a.touchMoved(u)===!1&&u.preventDefault():typeof a.mouseDragged=="function"&&a.mouseDragged(u)===!1&&u.preventDefault()},e.default.prototype._ontouchend=function(u){this._setProperty("mouseIsPressed",!1),this._updateTouchCoords(u),this._updateNextMouseCoords(u);var a=this._isGlobal?window:this;typeof a.touchEnded=="function"?a.touchEnded(u)===!1&&u.preventDefault():typeof a.mouseReleased=="function"&&a.mouseReleased(u)===!1&&u.preventDefault()},e=e.default,i.default=e},{"../core/main":267,"core-js/modules/es.array.includes":156,"core-js/modules/es.string.includes":185}],288:[function(e,o,i){e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.typed-array.int32-array"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.typed-array.int32-array"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u,a,s,l,h={};function p(c,d){for(var f,m,y,g,v,b,w,_,j,E,T=h._toPixels(c),R=c.width,M=c.height,I=R*M,D=new Int32Array(I),L=0;L<I;L++)D[L]=h._getARGB(T,L);var N,W,q,H=new Int32Array(I),B=new Int32Array(I),G=new Int32Array(I),V=new Int32Array(I),X=0,te=3.5*d|0;if(u!==(te=te<1?1:te<248?te:248)){a=1+(u=te)<<1,s=new Int32Array(a),l=new Array(a);for(var A,O,U=0;U<a;U++)l[U]=new Int32Array(256);for(var Y=1,J=te-1;Y<te;Y++){s[te+Y]=s[J]=O=J*J;for(var ae=l[te+Y],ue=l[J--],de=0;de<256;de++)ae[de]=ue[de]=O*de}A=s[te]=te*te,ae=l[te];for(var ne=0;ne<256;ne++)ae[ne]=A*ne}for(W=0;W<M;W++){for(N=0;N<R;N++){if(g=y=m=v=f=0,(b=N-u)<0)E=-b,b=0;else{if(R<=b)break;E=0}for(q=E;q<a&&!(R<=b);q++){var le,me=D[b+X];v+=(le=l[q])[(-16777216&me)>>>24],m+=le[(16711680&me)>>16],y+=le[(65280&me)>>8],g+=le[255&me],f+=s[q],b++}H[w=X+N]=v/f,B[w]=m/f,G[w]=y/f,V[w]=g/f}X+=R}for(j=(_=-u)*R,W=X=0;W<M;W++){for(N=0;N<R;N++){if(_<(g=y=m=v=f=0))E=w=-_,b=N;else{if(M<=_)break;E=0,w=_,b=N+j}for(q=E;q<a&&!(M<=w);q++)v+=(le=l[q])[H[b]],m+=le[B[b]],y+=le[G[b]],g+=le[V[b]],f+=s[q],w++,b+=R;D[N+X]=v/f<<24|m/f<<16|y/f<<8|g/f}X+=R,j+=R,_++}h._setPixels(T,D)}h._toPixels=function(c){var d,f;return c instanceof ImageData?c.data:c.getContext("2d")?c.getContext("2d").getImageData(0,0,c.width,c.height).data:c.getContext("webgl")?(f=(d=c.getContext("webgl")).drawingBufferWidth*d.drawingBufferHeight*4,f=new Uint8Array(f),d.readPixels(0,0,c.width,c.height,d.RGBA,d.UNSIGNED_BYTE,f),f):void 0},h._getARGB=function(c,d){return d*=4,c[3+d]<<24&4278190080|c[d]<<16&16711680|c[1+d]<<8&65280|255&c[2+d]},h._setPixels=function(c,d){for(var f,m=0,y=c.length;m<y;m++)c[0+(f=4*m)]=(16711680&d[m])>>>16,c[1+f]=(65280&d[m])>>>8,c[2+f]=255&d[m],c[3+f]=(4278190080&d[m])>>>24},h._toImageData=function(c){return c instanceof ImageData?c:c.getContext("2d").getImageData(0,0,c.width,c.height)},h._createImageData=function(c,d){return h._tmpCanvas=document.createElement("canvas"),h._tmpCtx=h._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(c,d)},h.apply=function(c,g,f){var m=c.getContext("2d"),y=m.getImageData(0,0,c.width,c.height),g=g(y,f);g instanceof ImageData?m.putImageData(g,0,0,0,0,c.width,c.height):m.putImageData(y,0,0,0,0,c.width,c.height)},h.threshold=function(c,d){for(var f=h._toPixels(c),m=(d===void 0&&(d=.5),Math.floor(255*d)),y=0;y<f.length;y+=4){var g=void 0,g=m<=.2126*f[y]+.7152*f[y+1]+.0722*f[y+2]?255:0;f[y]=f[y+1]=f[y+2]=g}},h.gray=function(c){for(var d=h._toPixels(c),f=0;f<d.length;f+=4){var m=d[f],y=d[f+1],g=d[f+2];d[f]=d[f+1]=d[f+2]=.2126*m+.7152*y+.0722*g}},h.opaque=function(c){for(var d=h._toPixels(c),f=0;f<d.length;f+=4)d[f+3]=255;return d},h.invert=function(c){for(var d=h._toPixels(c),f=0;f<d.length;f+=4)d[f]=255-d[f],d[f+1]=255-d[f+1],d[f+2]=255-d[f+2]},h.posterize=function(c,d){var f=h._toPixels(c);if(d<2||255<d)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var m=d-1,y=0;y<f.length;y+=4){var g=f[y],v=f[y+1],b=f[y+2];f[y]=255*(g*d>>8)/m,f[y+1]=255*(v*d>>8)/m,f[y+2]=255*(b*d>>8)/m}},h.dilate=function(c){for(var d,f,m,y,g,v,b,w,_,j=h._toPixels(c),E=0,T=j.length?j.length/4:0,R=new Int32Array(T);E<T;)for(f=(d=E)+c.width;E<f;)y=m=h._getARGB(j,E),(_=E-1)<d&&(_=E),f<=(w=E+1)&&(w=E),(g=E-c.width)<0&&(g=0),T<=(v=E+c.width)&&(v=E),g=h._getARGB(j,g),_=h._getARGB(j,_),v=h._getARGB(j,v),(y=77*(y>>16&255)+151*(y>>8&255)+28*(255&y))<(b=77*(_>>16&255)+151*(_>>8&255)+28*(255&_))&&(m=_,y=b),y<(b=77*((_=h._getARGB(j,w))>>16&255)+151*(_>>8&255)+28*(255&_))&&(m=_,y=b),y<(w=77*(g>>16&255)+151*(g>>8&255)+28*(255&g))&&(m=g,y=w),y<(_=77*(v>>16&255)+151*(v>>8&255)+28*(255&v))&&(m=v,y=_),R[E++]=m;h._setPixels(j,R)},h.erode=function(c){for(var d,f,m,y,g,v,b,w,_,j=h._toPixels(c),E=0,T=j.length?j.length/4:0,R=new Int32Array(T);E<T;)for(f=(d=E)+c.width;E<f;)y=m=h._getARGB(j,E),(_=E-1)<d&&(_=E),f<=(w=E+1)&&(w=E),(g=E-c.width)<0&&(g=0),T<=(v=E+c.width)&&(v=E),g=h._getARGB(j,g),_=h._getARGB(j,_),v=h._getARGB(j,v),(b=77*(_>>16&255)+151*(_>>8&255)+28*(255&_))<(y=77*(y>>16&255)+151*(y>>8&255)+28*(255&y))&&(m=_,y=b),(b=77*((_=h._getARGB(j,w))>>16&255)+151*(_>>8&255)+28*(255&_))<y&&(m=_,y=b),(w=77*(g>>16&255)+151*(g>>8&255)+28*(255&g))<y&&(m=g,y=w),(_=77*(v>>16&255)+151*(v>>8&255)+28*(255&v))<y&&(m=v,y=_),R[E++]=m;h._setPixels(j,R)},h.blur=function(c,d){p(c,d)},i.default=h},{"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.int32-array":209,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226}],289:[function(e,o,i){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.set"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.set"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=s(e("../core/main")),a=s(e("omggif"));function s(h){return h&&h.__esModule?h:{default:h}}function l(h){return function(p){if(Array.isArray(p)){for(var c=0,d=new Array(p.length);c<p.length;c++)d[c]=p[c];return d}}(h)||function(p){if(Symbol.iterator in Object(p)||Object.prototype.toString.call(p)==="[object Arguments]")return Array.from(p)}(h)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}u.default.prototype.createImage=function(h,p){return u.default._validateParameters("createImage",arguments),new u.default.Image(h,p)},u.default.prototype.saveCanvas=function(){u.default._validateParameters("saveCanvas",arguments);var h,p,c,d,f=[].slice.call(arguments);switch(arguments[0]instanceof HTMLCanvasElement?(h=arguments[0],f.shift()):arguments[0]instanceof u.default.Element?(h=arguments[0].elt,f.shift()):h=this._curElement&&this._curElement.elt,1<=f.length&&(p=f[0]),c=(c=2<=f.length?f[1]:c)||u.default.prototype._checkFileExtension(p,c)[1]||"png"){default:d="image/png";break;case"jpeg":case"jpg":d="image/jpeg"}h.toBlob(function(m){u.default.prototype.downloadFile(m,p,c)},d)},u.default.prototype.encodeAndDownloadGif=function(h,p){for(var c=h.gifProperties,d=c.loopLimit,f=(d===1?d=null:d===null&&(d=0),new Uint8Array(h.width*h.height*c.numFrames)),m=[],y={},g=0;g<c.numFrames;g++){for(var v=new Set,b=c.frames[g].image.data,w=b.length,_=new Uint32Array(h.width*h.height),j=0,E=0;j<w;j+=4,E++){var T=b[j+0]<<16|b[j+1]<<8|b[j+2]<<0;v.add(T),_[E]=T}var R=l(v).sort().toString();y[R]===void 0?y[R]={freq:1,frames:[g]}:(y[R].freq+=1,y[R].frames.push(g)),m.push(_)}for(var D=[],M=Object.keys(y).sort(function(A,O){return y[O].freq-y[A].freq}),I=M[0].split(",").map(function(A){return parseInt(A)}),D=D.concat(y[I].frames),L=new Set(I),N=1;N<M.length;N++){var W=M[N].split(",").map(function(A){return parseInt(A)}).filter(function(A){return!L.has(A)});if(I.length+W.length<=256){for(var q=0;q<W.length;q++)I.push(W[q]),L.add(W[q]);D=D.concat(y[M[N]].frames)}}D=new Set(D);for(var H={},B=0;B<I.length;B++)H[I[B]]||(H[I[B]]=B);for(var G=1;G<I.length;)G<<=1;I.length=G;for(var d={loop:d,palette:new Uint32Array(I)},V=new a.default.GifWriter(f,h.width,h.height,d),X={},te=0;te<c.numFrames;te++)(function(O){for(var U=!D.has(O),Y=U?[]:I,J=new Uint8Array(h.width*h.height),ae={},ue=new Set,de=0;de<m[O].length;de++){var ne=m[O][de];U?(ae[ne]===void 0&&(ae[ne]=Y.length,Y.push(ne)),J[de]=ae[ne]):J[de]=H[ne],0<O&&m[O-1][de]!==ne&&ue.add(ne)}var le={},me=Y.filter(function(we){return!ue.has(we)});if(0<me.length){var me=me[0],Q=(U?ae:H)[me];if(0<O){for(var pe=0;pe<m[O].length;pe++)m[O-1][pe]===m[O][pe]&&(J[pe]=Q);le.transparent=Q,X.frameOpts.disposal=1}}if(le.delay=c.frames[O].delay/10,U){for(var ye=1;ye<Y.length;)ye<<=1;Y.length=ye,le.palette=new Uint32Array(Y)}0<O&&V.addFrame(0,0,h.width,h.height,X.pixelPaletteIndex,X.frameOpts),X={pixelPaletteIndex:J,frameOpts:le}})(te);X.frameOpts.disposal=1,V.addFrame(0,0,h.width,h.height,X.pixelPaletteIndex,X.frameOpts),d=new Blob([f.slice(0,V.end())],{type:"image/gif"}),u.default.prototype.downloadFile(d,p,"gif")},u.default.prototype.saveFrames=function(h,p,c,m,f){u.default._validateParameters("saveFrames",arguments),c=u.default.prototype.constrain(c=c||3,0,15),c*=1e3;var m=u.default.prototype.constrain(m||15,0,22),y=0,g=u.default.prototype._makeFrame,v=this._curElement.elt,b=[],w=setInterval(function(){b.push(g(h+y,p,v)),y++},1e3/m);setTimeout(function(){if(clearInterval(w),f)f(b);else{var _=!0,j=!1,E=void 0;try{for(var T,R=b[Symbol.iterator]();!(_=(T=R.next()).done);_=!0){var M=T.value;u.default.prototype.downloadFile(M.imageData,M.filename,M.ext)}}catch(I){j=!0,E=I}finally{try{_||R.return==null||R.return()}finally{if(j)throw E}}}b=[]},.01+c)},u.default.prototype._makeFrame=function(h,p,f){var d,f=this?this._curElement.elt:f;if(p)switch(p.toLowerCase()){case"png":d="image/png";break;case"jpeg":case"jpg":d="image/jpeg";break;default:d="image/png"}else p="png",d="image/png";var f=(f=f.toDataURL(d)).replace(d,"image/octet-stream"),m={};return m.imageData=f,m.filename=h,m.ext=p,m},e=u.default,i.default=e},{"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.from":155,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.set":183,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint32-array":225,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/web.dom-collections.iterator":230,omggif:240}],290:[function(e,o,i){function u(v){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(v)}function a(v){return(a=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(b){return u(b)}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":u(b)})(v)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.copy-within"),e("core-js/modules/es.array.every"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint8-clamped-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.copy-within"),e("core-js/modules/es.array.every"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint8-clamped-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,e("regenerator-runtime/runtime");var s=f(e("../core/main")),l=f(e("../core/helpers")),h=function(v){if(v&&v.__esModule)return v;if(v===null||a(v)!=="object"&&typeof v!="function")return{default:v};var b=d();if(b&&b.has(v))return b.get(v);var w,_={},j=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(w in v){var E;Object.prototype.hasOwnProperty.call(v,w)&&((E=j?Object.getOwnPropertyDescriptor(v,w):null)&&(E.get||E.set)?Object.defineProperty(_,w,E):_[w]=v[w])}return _.default=v,b&&b.set(v,_),_}(e("../core/constants")),p=f(e("omggif")),c=e("gifenc");function d(){var v;return typeof WeakMap!="function"?null:(v=new WeakMap,d=function(){return v},v)}function f(v){return v&&v.__esModule?v:{default:v}}function m(v,b,w,_,j,E,T){try{var R=v[E](T),M=R.value}catch(I){return void w(I)}R.done?b(M):Promise.resolve(M).then(_,j)}function y(v,b,w,_,j,E,T,R,M,I,D){var L,N,W,q,H,B,G,V,X;return v===h.COVER&&(L=b,W=w,G=E,V=T,B=R,X=M,N=I,q=D,H=Math.max(G/N,V/q),G/=H,V/=H,H=B,B=X,L===h.CENTER?H+=(N-G)/2:L===h.RIGHT&&(H+=N-G),W===h.CENTER?B+=(q-V)/2:W===h.BOTTOM&&(B+=q-V),R=(X={x:H,y:B,w:G,h:V}).x,M=X.y,I=X.w,D=X.h),v===h.CONTAIN&&(L=b,N=w,W=_,q=j,H=E,B=T,G=I,V=D,X=Math.max(G/H,V/B),G/=X,V/=X,X=W,W=q,L===h.CENTER?X+=(H-G)/2:L===h.RIGHT&&(X+=H-G),N===h.CENTER?W+=(B-V)/2:N===h.BOTTOM&&(W+=B-V),_=(v={x:X,y:W,w:G,h:V}).x,j=v.y,E=v.w,T=v.h),{sx:R,sy:M,sw:I,sh:D,dx:_,dy:j,dw:E,dh:T}}function g(v,b){return 0<v&&v<b?v:b}e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),s.default.prototype.loadImage=function(v,b,w){s.default._validateParameters("loadImage",arguments);var _=new s.default.Image(1,1,this),j=this,E=new Request(v,{method:"GET",mode:"cors"});return fetch(v,E).then(function(T){var R,M=T.headers.get("content-type");M===null&&console.warn("The image you loaded does not have a Content-Type header. If you are using the online editor consider reuploading the asset."),M&&M.includes("image/gif")?T.arrayBuffer().then(function(I){if(I){var I=new Uint8Array(I),D=_,L=b,N=w,W=function(U){j._decrementPreload()}.bind(j),q=new p.default.GifReader(I),H=(D.width=D.canvas.width=q.width,D.height=D.canvas.height=q.height,[]),B=q.numFrames(),G=new Uint8ClampedArray(D.width*D.height*4);if(1<B){for(var V=0;V<B;V++){var X=q.frameInfo(V),te=D.drawingContext.getImageData(0,0,D.width,D.height),A=(G=te.data.slice(),function(U,Y){try{Y.decodeAndBlitFrameRGBA(U,G)}catch(J){s.default._friendlyFileLoadError(8,D.src),typeof N=="function"?N(J):console.error(J)}}(V,q),new ImageData(G,D.width,D.height)),A=(D.drawingContext.putImageData(A,0,0),X.delay);A===0&&(A=10),H.push({image:D.drawingContext.getImageData(0,0,D.width,D.height),delay:10*A}),X.disposal===2?D.drawingContext.clearRect(X.x,X.y,X.width,X.height):X.disposal===3&&D.drawingContext.putImageData(te,0,0,X.x,X.y,X.width,X.height)}I=q.loopCount(),I===null?I=1:I===0&&(I=null),D.drawingContext.putImageData(H[0].image,0,0),D.gifProperties={displayIndex:0,loopLimit:I,loopCount:0,frames:H,numFrames:B,playing:!0,timeDisplayed:0,lastChangeTime:0}}typeof L=="function"&&L(D),W()}},function(I){typeof w=="function"?w(I):console.error(I)}):((R=new Image).onload=function(){_.width=_.canvas.width=R.width,_.height=_.canvas.height=R.height,_.drawingContext.drawImage(R,0,0),_.modified=!0,typeof b=="function"&&b(_),j._decrementPreload()},R.onerror=function(I){s.default._friendlyFileLoadError(0,R.src),typeof w=="function"?w(I):console.error(I)},v.indexOf("data:image/")!==0&&(R.crossOrigin="Anonymous"),R.src=v),_.modified=!0}).catch(function(T){s.default._friendlyFileLoadError(0,v),typeof w=="function"?w(T):console.error(T)}),_},s.default.prototype.saveGif=function(){v=regeneratorRuntime.mark(function w(_,j){var E,T,R,M,I,D,L,N,W,q,H,B,G,V,X,te,A,O,U,Y,J,ae,ue,de,ne,le=arguments;return regeneratorRuntime.wrap(function(me){for(;;)switch(me.prev=me.next){case 0:if(E=2<le.length&&le[2]!==void 0?le[2]:{delay:0,units:"seconds"},typeof _!="string")throw TypeError("fileName parameter must be a string");me.next=3;break;case 3:if(typeof j!="number")throw TypeError("Duration parameter must be a number");me.next=5;break;case 5:if(typeof E.delay!="number")throw TypeError("Delay parameter must be a number");me.next=7;break;case 7:if(E.units!=="seconds"&&E.units!=="frames")throw TypeError('Units parameter must be either "frames" or "seconds"');me.next=9;break;case 9:D=E.units,I=E.delay,M=this._targetFrameRate,T=(T=1/(M=M!==1/0&&M!==void 0&&M!==0?M:60)*1e3)<20?20:T,M=(R=D==="seconds"?j*M:j)+(D=D==="seconds"?I*M:I),I=D,this.frameCount=I,D=this._pixelDensity,this.pixelDensity(1),L=[],N="p5.gif.progressBar",document.getElementById(N)!==null&&document.getElementById(N).remove(),(N=this.createP("")).id("progressBar"),N.style("font-size","16px"),N.style("font-family","Montserrat"),N.style("background-color","#ffffffa0"),N.style("padding","8px"),N.style("border-radius","10px"),N.position(0,0),this.drawingContext instanceof WebGLRenderingContext&&(q=document.getElementById("defaultCanvas0").getContext("webgl"),W=new Uint8Array(q.drawingBufferWidth*q.drawingBufferHeight*4)),this.noLoop();case 35:if(I<M)return this.redraw(),X=void 0,X=this.drawingContext instanceof WebGLRenderingContext?(W=new Uint8Array(q.drawingBufferWidth*q.drawingBufferHeight*4),q.readPixels(0,0,q.drawingBufferWidth,q.drawingBufferHeight,q.RGBA,q.UNSIGNED_BYTE,W),function(Q){for(var pe=parseInt(height/2),ye=4*width,we=new Uint8Array(4*width),ge=0;ge<pe;++ge){var Pe=ge*ye,Ie=(height-ge-1)*ye;we.set(Q.subarray(Pe,Pe+ye)),Q.copyWithin(Pe,Ie,Ie+ye),Q.set(we,Ie)}return Q}(W)):this.drawingContext.getImageData(0,0,this.width,this.height).data,L.push(X),I++,N.html("Saved frame <b>"+L.length.toString()+"</b> out of "+R.toString()),me.next=44,new Promise(function(Q){return setTimeout(Q,0)});me.next=46;break;case 44:me.next=35;break;case 46:N.html("Frames processed, generating color palette..."),this.loop(),this.pixelDensity(D),H=(0,c.GIFEncoder)(),B=function(Q){for(var pe=new Uint8Array(Q.length*Q[0].length),ye=0;ye<Q.length;ye++)pe.set(Q[0],ye*Q[0].length);var we=(0,c.quantize)(pe,256,{format:"rgba444",oneBitAlpha:!0});return we.length===256?we[we.length-1]=[255*Math.random(),255*Math.random(),255*Math.random(),0]:we.push([255*Math.random(),255*Math.random(),255*Math.random(),0]),we}(L),G=B.length-1,V=0;case 53:if(V<L.length){if(V===0)return X=(0,c.applyPalette)(L[V],B,{format:"rgba4444"}),H.writeFrame(X,this.width,this.height,{palette:B,delay:T,dispose:1}),me.abrupt("continue",68);me.next=58}else me.next=71;break;case 58:for(te=L[V],A=L[V-1],O=[],U=0;U<te.length;U+=4)Y=[te[U],te[U+1],te[U+2],te[U+3]],J=[A[U],A[U+1],A[U+2],A[U+3]],!function(Q,pe){return Array.isArray(Q)&&Array.isArray(pe)&&Q.length===pe.length&&Q.every(function(ye,we){return ye===pe[we]})}(Y,J)||O.push(U/4);for(ae=(0,c.applyPalette)(te,B,{format:"rgba4444"}),ue=0;ue<O.length;ue++)de=O[ue],ae[de]=G;return H.writeFrame(ae,this.width,this.height,{delay:T,transparent:!0,transparentIndex:G,dispose:1}),N.html("Rendered frame <b>"+V.toString()+"</b> out of "+R.toString()),me.next=68,new Promise(function(Q){return setTimeout(Q,0)});case 68:V++,me.next=53;break;case 71:H.finish(),ne=H.bytesView(),ne=new Blob([ne],{type:"image/gif"}),L=[],this.loop(),N.html("Done. Downloading your gif!"),s.default.prototype.downloadFile(ne,_,"gif");case 79:case"end":return me.stop()}},w,this)});var v,b=function(){var w=this,_=arguments;return new Promise(function(j,E){var T=v.apply(w,_);function R(I){m(T,j,E,R,M,"next",I)}function M(I){m(T,j,E,R,M,"throw",I)}R(void 0)})};return function(w,_){return b.apply(this,arguments)}}(),s.default.prototype.image=function(v,b,w,_,q,H,B,G,X,I,D,L){s.default._validateParameters("image",arguments);var V=v.width,N=v.height,W=(L=L||h.CENTER,D=D||h.CENTER,v.elt&&v.elt.videoWidth&&!v.canvas&&(V=v.elt.videoWidth,N=v.elt.videoHeight),_||V),q=q||N,H=H||0,B=B||0,G=g(G||V,V),V=g(X||N,N),X=1;v.elt&&!v.canvas&&v.elt.style.width&&(X=v.elt.videoWidth&&!_?v.elt.videoWidth:v.elt.width,X/=parseInt(v.elt.style.width,10)),H*=X,B*=X,V*=X,G*=X,N=y(I,D,L,(N=l.default.modeAdjust(b,w,W,q,this._renderer._imageMode)).x,N.y,N.w,N.h,H,B,G,V),this._renderer.image(v,N.sx,N.sy,N.sw,N.sh,N.dx,N.dy,N.dw,N.dh)},s.default.prototype.tint=function(){for(var v=arguments.length,b=new Array(v),w=0;w<v;w++)b[w]=arguments[w];s.default._validateParameters("tint",b);var _=this.color.apply(this,b);this._renderer._tint=_.levels},s.default.prototype.noTint=function(){this._renderer._tint=null},s.default.prototype._getTintedImageCanvas=s.default.Renderer2D.prototype._getTintedImageCanvas,s.default.prototype.imageMode=function(v){s.default._validateParameters("imageMode",arguments),v!==h.CORNER&&v!==h.CORNERS&&v!==h.CENTER||(this._renderer._imageMode=v)},e=s.default,i.default=e},{"../core/constants":256,"../core/friendly_errors/fes_core":258,"../core/friendly_errors/file_errors":259,"../core/friendly_errors/validate_params":262,"../core/helpers":263,"../core/main":267,"core-js/modules/es.array.copy-within":150,"core-js/modules/es.array.every":151,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/es.typed-array.uint8-clamped-array":227,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230,gifenc:237,omggif:240,"regenerator-runtime/runtime":244}],291:[function(e,o,i){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=s(e("../core/main")),a=s(e("./filters"));function s(l){return l&&l.__esModule?l:{default:l}}u.default.Image=function(l,h){this.width=l,this.height=h,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),(this._pixelsState=this)._pixelDensity=1,this.gifProperties=null,this._modified=!1,this.pixels=[]},u.default.Image.prototype._animateGif=function(c){var h,p=this.gifProperties,c=c._lastFrameTime;p.lastChangeTime===0&&(p.lastChangeTime=c),p.playing&&(p.timeDisplayed=c-p.lastChangeTime,h=p.frames[p.displayIndex].delay,p.timeDisplayed>=h&&(h=Math.floor(p.timeDisplayed/h),p.timeDisplayed=0,p.lastChangeTime=c,p.displayIndex+=h,p.loopCount=Math.floor(p.displayIndex/p.numFrames),p.loopLimit!==null&&p.loopCount>=p.loopLimit?p.playing=!1:(c=p.displayIndex%p.numFrames,this.drawingContext.putImageData(p.frames[c].image,0,0),p.displayIndex=c,this.setModified(!0))))},u.default.Image.prototype._setProperty=function(l,h){this[l]=h,this.setModified(!0)},u.default.Image.prototype.loadPixels=function(){u.default.Renderer2D.prototype.loadPixels.call(this),this.setModified(!0)},u.default.Image.prototype.updatePixels=function(l,h,p,c){u.default.Renderer2D.prototype.updatePixels.call(this,l,h,p,c),this.setModified(!0)},u.default.Image.prototype.get=function(l,h,p,c){return u.default._validateParameters("p5.Image.get",arguments),u.default.Renderer2D.prototype.get.apply(this,arguments)},u.default.Image.prototype._getPixel=u.default.Renderer2D.prototype._getPixel,u.default.Image.prototype.set=function(l,h,p){u.default.Renderer2D.prototype.set.call(this,l,h,p),this.setModified(!0)},u.default.Image.prototype.resize=function(l,h){l===0&&h===0?(l=this.canvas.width,h=this.canvas.height):l===0?l=this.canvas.width*h/this.canvas.height:h===0&&(h=this.canvas.height*l/this.canvas.width),l=Math.floor(l),h=Math.floor(h);var p=document.createElement("canvas");if(p.width=l,p.height=h,this.gifProperties)for(var c=this.gifProperties,d=0;d<c.numFrames;d++){for(var f=this.drawingContext.createImageData(l,h),m=(w=w=b=v=g=void 0,c.frames[d].image),y=f,g=0,v=0;v<y.height;v++)for(var b=0;b<y.width;b++){var w=Math.floor(b*m.width/y.width),w=4*(Math.floor(v*m.height/y.height)*m.width+w);y.data[g++]=m.data[w++],y.data[g++]=m.data[w++],y.data[g++]=m.data[w++],y.data[g++]=m.data[+w]}c.frames[d].image=f}p.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,p.width,p.height),this.canvas.width=this.width=l,this.canvas.height=this.height=h,this.drawingContext.drawImage(p,0,0,l,h,0,0,l,h),0<this.pixels.length&&this.loadPixels(),this.setModified(!0)},u.default.Image.prototype.copy=function(){for(var l=arguments.length,h=new Array(l),p=0;p<l;p++)h[p]=arguments[p];u.default.prototype.copy.apply(this,h)},u.default.Image.prototype.mask=function(l){var h=this.drawingContext.globalCompositeOperation,p=1,c=[l=l===void 0?this:l,0,0,(p=l instanceof u.default.Renderer?l._pInst._pixelDensity:p)*l.width,p*l.height,0,0,this.width,this.height];if(this.drawingContext.globalCompositeOperation="destination-in",this.gifProperties){for(var d=0;d<this.gifProperties.frames.length;d++)this.drawingContext.putImageData(this.gifProperties.frames[d].image,0,0),u.default.Image.prototype.copy.apply(this,c),this.gifProperties.frames[d].image=this.drawingContext.getImageData(0,0,this.width,this.height);this.drawingContext.putImageData(this.gifProperties.frames[this.gifProperties.displayIndex].image,0,0)}else u.default.Image.prototype.copy.apply(this,c);this.drawingContext.globalCompositeOperation=h,this.setModified(!0)},u.default.Image.prototype.filter=function(l,h){a.default.apply(this.canvas,a.default[l],h),this.setModified(!0)},u.default.Image.prototype.blend=function(){for(var l=arguments.length,h=new Array(l),p=0;p<l;p++)h[p]=arguments[p];u.default._validateParameters("p5.Image.blend",arguments),u.default.prototype.blend.apply(this,h),this.setModified(!0)},u.default.Image.prototype.setModified=function(l){this._modified=l},u.default.Image.prototype.isModified=function(){return this._modified},u.default.Image.prototype.save=function(l,h){this.gifProperties?u.default.prototype.encodeAndDownloadGif(this,l):u.default.prototype.saveCanvas(this.canvas,l,h)},u.default.Image.prototype.reset=function(){var l;this.gifProperties&&((l=this.gifProperties).playing=!0,l.timeSinceStart=0,l.timeDisplayed=0,l.lastChangeTime=0,l.loopCount=0,l.displayIndex=0,this.drawingContext.putImageData(l.frames[0].image,0,0))},u.default.Image.prototype.getCurrentFrame=function(){var l;if(this.gifProperties)return(l=this.gifProperties).displayIndex%l.numFrames},u.default.Image.prototype.setFrame=function(l){var h;this.gifProperties&&(l<(h=this.gifProperties).numFrames&&0<=l?(h.timeDisplayed=0,h.lastChangeTime=0,h.displayIndex=l,this.drawingContext.putImageData(h.frames[l].image,0,0)):console.log("Cannot set GIF to a frame number that is higher than total number of frames or below zero."))},u.default.Image.prototype.numFrames=function(){if(this.gifProperties)return this.gifProperties.numFrames},u.default.Image.prototype.play=function(){this.gifProperties&&(this.gifProperties.playing=!0)},u.default.Image.prototype.pause=function(){this.gifProperties&&(this.gifProperties.playing=!1)},u.default.Image.prototype.delay=function(l,h){if(this.gifProperties){var p=this.gifProperties;if(h<p.numFrames&&0<=h)p.frames[h].delay=l;else{var c=!0,h=!1,d=void 0;try{for(var f,m=p.frames[Symbol.iterator]();!(c=(f=m.next()).done);c=!0)f.value.delay=l}catch(g){h=!0,d=g}finally{try{c||m.return==null||m.return()}finally{if(h)throw d}}}}},e=u.default.Image,i.default=e},{"../core/main":267,"./filters":288,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":230}],292:[function(e,o,i){e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.filter"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=s(e("../core/main")),a=s(e("./filters"));function s(l){return l&&l.__esModule?l:{default:l}}e("../color/p5.Color"),u.default.prototype.pixels=[],u.default.prototype.blend=function(){for(var l,h=arguments.length,p=new Array(h),c=0;c<h;c++)p[c]=arguments[c];u.default._validateParameters("blend",p),this._renderer?(l=this._renderer).blend.apply(l,p):u.default.Renderer2D.prototype.blend.apply(this,p)},u.default.prototype.copy=function(){for(var l,h,p,c,d,f,m,y,g,v=arguments.length,b=new Array(v),w=0;w<v;w++)b[w]=arguments[w];if(u.default._validateParameters("copy",b),b.length===9)l=b[0],h=b[1],p=b[2],c=b[3],d=b[4],f=b[5],m=b[6],y=b[7],g=b[8];else{if(b.length!==8)throw new Error("Signature not supported");l=this,h=b[0],p=b[1],c=b[2],d=b[3],f=b[4],m=b[5],y=b[6],g=b[7]}u.default.prototype._copyHelper(this,l,h,p,c,d,f,m,y,g)},u.default.prototype._copyHelper=function(l,h,p,c,d,f,m,y,g,v){h.loadPixels();var b=h.canvas.width/h.width,w=0,_=0;h._renderer&&h._renderer.isP3D&&(w=h.width/2,_=h.height/2),l._renderer&&l._renderer.isP3D?u.default.RendererGL.prototype.image.call(l._renderer,h,p+w,c+_,d,f,m,y,g,v):l.drawingContext.drawImage(h.canvas,b*(p+w),b*(c+_),b*d,b*f,m,y,g,v)},u.default.prototype.filter=function(l,h){u.default._validateParameters("filter",arguments),this.canvas!==void 0?a.default.apply(this.canvas,a.default[l],h):a.default.apply(this.elt,a.default[l],h)},u.default.prototype.get=function(l,h,p,c){var d;return u.default._validateParameters("get",arguments),(d=this._renderer).get.apply(d,arguments)},u.default.prototype.loadPixels=function(){for(var l=arguments.length,h=new Array(l),p=0;p<l;p++)h[p]=arguments[p];u.default._validateParameters("loadPixels",h),this._renderer.loadPixels()},u.default.prototype.set=function(l,h,p){this._renderer.set(l,h,p)},u.default.prototype.updatePixels=function(l,h,p,c){u.default._validateParameters("updatePixels",arguments),this.pixels.length!==0&&this._renderer.updatePixels(l,h,p,c)},e=u.default,i.default=e},{"../color/p5.Color":254,"../core/main":267,"./filters":288,"core-js/modules/es.array.filter":153}],293:[function(e,o,i){function u(f){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(f)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/web.url"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/web.url"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a=h(e("../core/main")),s=(e("whatwg-fetch"),e("es6-promise/auto"),h(e("fetch-jsonp"))),l=h(e("file-saver"));function h(f){return f&&f.__esModule?f:{default:f}}function p(f){return(p=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(m){return u(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":u(m)})(f)}function c(f){return f.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function d(f,m){m&&m!==!0&&m!=="true"||(m="");var y="";return(f=f||"untitled")&&f.includes(".")&&(y=f.split(".").pop()),m&&y!==m&&(y=m,f="".concat(f,".").concat(y)),[f,y]}e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),a.default.prototype.loadJSON=function(){for(var f=arguments.length,m=new Array(f),y=0;y<f;y++)m[y]=arguments[y];a.default._validateParameters("loadJSON",m);for(var g,v,b,w=m[0],_={},j="json",E=1;E<m.length;E++){var T=m[E];typeof T=="string"?T!=="jsonp"&&T!=="json"||(j=T):typeof T=="function"?g?v=T:g=T:p(T)==="object"&&(T.hasOwnProperty("jsonpCallback")||T.hasOwnProperty("jsonpCallbackFunction"))&&(j="jsonp",b=T)}var R=this;return this.httpDo(w,"GET",b,j,function(M){for(var I in M)_[I]=M[I];g!==void 0&&g(M),R._decrementPreload()},function(M){if(a.default._friendlyFileLoadError(5,w),!v)throw M;v(M)}),_},a.default.prototype.loadStrings=function(){for(var f=arguments.length,m=new Array(f),y=0;y<f;y++)m[y]=arguments[y];a.default._validateParameters("loadStrings",m);for(var g,v,b=[],w=1;w<m.length;w++){var _=m[w];typeof _=="function"&&(g===void 0?g=_:v===void 0&&(v=_))}var j=this;return a.default.prototype.httpDo.call(this,m[0],"GET","text",function(E){for(var T=E.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/),R=0,M=T.length;R<M;R+=32768)Array.prototype.push.apply(b,T.slice(R,Math.min(R+32768,M)));g!==void 0&&g(b),j._decrementPreload()},function(E){if(a.default._friendlyFileLoadError(3,E),!v)throw E;v(E)}),b},a.default.prototype.loadTable=function(f){var m,y,g,v=!1,b=f.substring(f.lastIndexOf(".")+1,f.length);b==="csv"?g=",":b==="ssv"?g=";":b==="tsv"&&(g="	");for(var w=1;w<arguments.length;w++)typeof arguments[w]=="function"?m===void 0?m=arguments[w]:y===void 0&&(y=arguments[w]):typeof arguments[w]=="string"&&(arguments[w]==="header"&&(v=!0),arguments[w]==="csv"?g=",":arguments[w]==="ssv"?g=";":arguments[w]==="tsv"&&(g="	"));var _=new a.default.Table,j=this;return this.httpDo(f,"GET","table",function(E){for(var T,R,M={},I=0,D=[],L=0,N=null,W=function(){M.currentState=I,M.token=""},q=function(){N.push(M.token),W()},H=function(){M.currentState=4,D.push(N),N=null};;){if((T=E[L++])==null){if(M.escaped)throw new Error("Unclosed quote in file.");if(N){q(),H();break}}if(N===null&&(M.escaped=!1,N=[],W()),M.currentState===I){if(T==='"'){M.escaped=!0,M.currentState=1;continue}M.currentState=1}if(M.currentState===1&&M.escaped)if(T==='"')E[L]==='"'?(M.token+='"',L++):(M.escaped=!1,M.currentState=2);else{if(T==="\r")continue;M.token+=T}else T==="\r"?(E[L]===`
`&&L++,q(),H()):T===`
`?(q(),H()):T===g?q():M.currentState===1&&(M.token+=T)}if(v)_.columns=D.shift();else for(var B=0;B<D[0].length;B++)_.columns[B]="null";for(var G=0;G<D.length;G++)(D[G].length!==1||D[G][0]!=="undefined"&&D[G][0]!=="")&&((R=new a.default.TableRow).arr=D[G],R.obj=function(V,X){var te={};if((X=X||[])===void 0)for(var A=0;A<V.length;A++)X[A.toString()]=A;for(var O=0;O<X.length;O++){var U=X[O],Y=V[O];te[U]=Y}return te}(D[G],_.columns),_.addRow(R));typeof m=="function"&&m(_),j._decrementPreload()},function(E){a.default._friendlyFileLoadError(2,f),y?y(E):console.error(E)}),_},a.default.prototype.loadXML=function(){for(var f=arguments.length,m=new Array(f),y=0;y<f;y++)m[y]=arguments[y];for(var g,v,b=new a.default.XML,w=1;w<m.length;w++){var _=m[w];typeof _=="function"&&(g===void 0?g=_:v===void 0&&(v=_))}var j=this;return this.httpDo(m[0],"GET","xml",function(E){for(var T in E)b[T]=E[T];g!==void 0&&g(b),j._decrementPreload()},function(E){if(a.default._friendlyFileLoadError(1,E),!v)throw E;v(E)}),b},a.default.prototype.loadBytes=function(f,m,y){var g={},v=this;return this.httpDo(f,"GET","arrayBuffer",function(b){g.bytes=new Uint8Array(b),typeof m=="function"&&m(g),v._decrementPreload()},function(b){if(a.default._friendlyFileLoadError(6,f),!y)throw b;y(b)}),g},a.default.prototype.httpGet=function(){a.default._validateParameters("httpGet",arguments);var f=Array.prototype.slice.call(arguments);return f.splice(1,0,"GET"),a.default.prototype.httpDo.apply(this,f)},a.default.prototype.httpPost=function(){a.default._validateParameters("httpPost",arguments);var f=Array.prototype.slice.call(arguments);return f.splice(1,0,"POST"),a.default.prototype.httpDo.apply(this,f)},a.default.prototype.httpDo=function(){for(var f,m,y,g={},v=0,b="text/plain",w=arguments.length-1;0<w&&typeof(w<0||arguments.length<=w?void 0:arguments[w])=="function";w--)v++;var _=arguments.length-v,j=arguments.length<=0?void 0:arguments[0];if(_==2&&typeof j=="string"&&p(arguments.length<=1?void 0:arguments[1])==="object")D=new Request(j,arguments.length<=1?void 0:arguments[1]),m=arguments.length<=2?void 0:arguments[2],y=arguments.length<=3?void 0:arguments[3];else{for(var E,T="GET",R=1;R<arguments.length;R++){var M=R<0||arguments.length<=R?void 0:arguments[R];if(typeof M=="string")M==="GET"||M==="POST"||M==="PUT"||M==="DELETE"?T=M:M==="json"||M==="jsonp"||M==="binary"||M==="arrayBuffer"||M==="xml"||M==="text"||M==="table"?f=M:E=M;else if(typeof M=="number")E=M.toString();else if(p(M)==="object")if(M.hasOwnProperty("jsonpCallback")||M.hasOwnProperty("jsonpCallbackFunction"))for(var I in M)g[I]=M[I];else b=M instanceof a.default.XML?(E=M.serialize(),"application/xml"):(E=JSON.stringify(M),"application/json");else typeof M=="function"&&(m?y=M:m=M)}var _=T==="GET"?new Headers:new Headers({"Content-Type":b}),D=new Request(j,{method:T,mode:"cors",body:E,headers:_})}return(_=(_=(f=f||(j.includes("json")?"json":j.includes("xml")?"xml":"text"))==="jsonp"?(0,s.default)(j,g):fetch(D)).then(function(L){if(!L.ok)throw(N=new Error(L.body)).status=L.status,N.ok=!1,N;var N=0;switch((N=f!=="jsonp"?L.headers.get("content-length"):N)&&64e6<N&&a.default._friendlyFileLoadError(7,j),f){case"json":case"jsonp":return L.json();case"binary":return L.blob();case"arrayBuffer":return L.arrayBuffer();case"xml":return L.text().then(function(W){return W=new DOMParser().parseFromString(W,"text/xml"),new a.default.XML(W.documentElement)});default:return L.text()}})).then(m||function(){}),_.catch(y||console.error),_},window.URL=window.URL||window.webkitURL,a.default.prototype._pWriters=[],a.default.prototype.createWriter=function(f,m){var y,g;for(g in a.default.prototype._pWriters)if(a.default.prototype._pWriters[g].name===f)return y=new a.default.PrintWriter(f+this.millis(),m),a.default.prototype._pWriters.push(y),y;return y=new a.default.PrintWriter(f,m),a.default.prototype._pWriters.push(y),y},a.default.PrintWriter=function(f,m){var y=this;this.name=f,this.content="",this.write=function(g){this.content+=g},this.print=function(g){this.content+="".concat(g,`
`)},this.clear=function(){this.content=""},this.close=function(){var g,v=[];for(g in v.push(this.content),a.default.prototype.writeFile(v,f,m),a.default.prototype._pWriters)a.default.prototype._pWriters[g].name===this.name&&a.default.prototype._pWriters.splice(g,1);y.clear(),y={}}},a.default.prototype.save=function(f,m,y){var g=arguments,v=(this._curElement||this).elt;if(g.length===0)a.default.prototype.saveCanvas(v);else if(g[0]instanceof a.default.Renderer||g[0]instanceof a.default.Graphics)a.default.prototype.saveCanvas(g[0].elt,g[1],g[2]);else if(g.length===1&&typeof g[0]=="string")a.default.prototype.saveCanvas(v,g[0]);else switch(d(g[1],g[2])[1]){case"json":return void a.default.prototype.saveJSON(g[0],g[1],g[2]);case"txt":return void a.default.prototype.saveStrings(g[0],g[1],g[2]);default:g[0]instanceof Array?a.default.prototype.saveStrings(g[0],g[1],g[2]):g[0]instanceof a.default.Table?a.default.prototype.saveTable(g[0],g[1],g[2]):g[0]instanceof a.default.Image?a.default.prototype.saveCanvas(g[0].canvas,g[1]):g[0]instanceof a.default.SoundFile&&a.default.prototype.saveSound(g[0],g[1],g[2],g[3])}},a.default.prototype.saveJSON=function(f,m,y){a.default._validateParameters("saveJSON",arguments),y=y?JSON.stringify(f):JSON.stringify(f,void 0,2),this.saveStrings(y.split(`
`),m,"json")},a.default.prototype.saveJSONObject=a.default.prototype.saveJSON,a.default.prototype.saveJSONArray=a.default.prototype.saveJSON,a.default.prototype.saveStrings=function(f,m,y,g){a.default._validateParameters("saveStrings",arguments);for(var v=this.createWriter(m,y||"txt"),b=0;b<f.length;b++)g?v.write(f[b]+`\r
`):v.write(f[b]+`
`);v.close(),v.clear()},a.default.prototype.saveTable=function(f,m,y){a.default._validateParameters("saveTable",arguments),g=y===void 0?m.substring(m.lastIndexOf(".")+1,m.length):y;var g,v=this.createWriter(m,g),b=f.columns,w=g==="tsv"?"	":",";if(g!=="html"){if(b[0]!=="0"){for(var _=0;_<b.length;_++)_<b.length-1?v.write(b[_]+w):v.write(b[_]);v.write(`
`)}for(var j=0;j<f.rows.length;j++){for(var E=void 0,E=0;E<f.rows[j].arr.length;E++)E<f.rows[j].arr.length-1?g==="csv"&&String(f.rows[j].arr[E]).includes(",")?v.write('"'+f.rows[j].arr[E]+'"'+w):v.write(f.rows[j].arr[E]+w):g==="csv"&&String(f.rows[j].arr[E]).includes(",")?v.write('"'+f.rows[j].arr[E]+'"'):v.write(f.rows[j].arr[E]);v.write(`
`)}}else{if(v.print("<html>"),v.print("<head>"),v.print('  <meta http-equiv="content-type" content="text/html;charset=utf-8" />'),v.print("</head>"),v.print("<body>"),v.print("  <table>"),b[0]!=="0"){v.print("    <tr>");for(var T=0;T<b.length;T++){var R=c(b[T]);v.print("      <td>".concat(R)),v.print("      </td>")}v.print("    </tr>")}for(var M=0;M<f.rows.length;M++){v.print("    <tr>");for(var I=0;I<f.columns.length;I++){var D=c(f.rows[M].getString(I));v.print("      <td>".concat(D)),v.print("      </td>")}v.print("    </tr>")}v.print("  </table>"),v.print("</body>"),v.print("</html>")}v.close(),v.clear()},a.default.prototype.writeFile=function(v,m,y){var g="application/octet-stream",v=(a.default.prototype._isSafari()&&(g="text/plain"),new Blob(v,{type:g}));a.default.prototype.downloadFile(v,m,y)},a.default.prototype.downloadFile=function(f,v,b){var g,v=d(v,b),b=v[0];f instanceof Blob?l.default.saveAs(f,b):((g=document.createElement("a")).href=f,g.download=b,g.onclick=function(w){document.body.removeChild(w.target),w.stopPropagation()},g.style.display="none",document.body.appendChild(g),a.default.prototype._isSafari()&&(f=(f=`Hello, Safari user! To download this file...
1. Go to File --> Save As.
2. Choose "Page Source" as the Format.
`)+'3. Name it with this extension: ."'.concat(v[1],'"'),alert(f)),g.click())},a.default.prototype._checkFileExtension=d,a.default.prototype._isSafari=function(){return 0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")},e=a.default,i.default=e},{"../core/friendly_errors/fes_core":258,"../core/friendly_errors/file_errors":259,"../core/friendly_errors/validate_params":262,"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.last-index-of":160,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.function.name":165,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/web.dom-collections.iterator":230,"core-js/modules/web.url":232,"es6-promise/auto":233,"fetch-jsonp":235,"file-saver":236,"whatwg-fetch":245}],294:[function(e,o,i){e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.trim"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.trim"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=(e=e("../core/main"))&&e.__esModule?e:{default:e};u.default.Table=function(a){this.columns=[],this.rows=[]},u.default.Table.prototype.addRow=function(a){if(a=a||new u.default.TableRow,a.arr===void 0||a.obj===void 0)throw new Error("invalid TableRow: ".concat(a));return(a.table=this).rows.push(a),a},u.default.Table.prototype.removeRow=function(a){this.rows[a].table=null,a=this.rows.splice(a+1,this.rows.length),this.rows.pop(),this.rows=this.rows.concat(a)},u.default.Table.prototype.getRow=function(a){return this.rows[a]},u.default.Table.prototype.getRows=function(){return this.rows},u.default.Table.prototype.findRow=function(a,s){if(typeof s=="string"){for(var l=0;l<this.rows.length;l++)if(this.rows[l].obj[s]===a)return this.rows[l]}else for(var h=0;h<this.rows.length;h++)if(this.rows[h].arr[s]===a)return this.rows[h];return null},u.default.Table.prototype.findRows=function(a,s){var l=[];if(typeof s=="string")for(var h=0;h<this.rows.length;h++)this.rows[h].obj[s]===a&&l.push(this.rows[h]);else for(var p=0;p<this.rows.length;p++)this.rows[p].arr[s]===a&&l.push(this.rows[p]);return l},u.default.Table.prototype.matchRow=function(a,s){if(typeof s=="number"){for(var l=0;l<this.rows.length;l++)if(this.rows[l].arr[s].match(a))return this.rows[l]}else for(var h=0;h<this.rows.length;h++)if(this.rows[h].obj[s].match(a))return this.rows[h];return null},u.default.Table.prototype.matchRows=function(a,s){var l=[];if(typeof s=="number")for(var h=0;h<this.rows.length;h++)this.rows[h].arr[s].match(a)&&l.push(this.rows[h]);else for(var p=0;p<this.rows.length;p++)this.rows[p].obj[s].match(a)&&l.push(this.rows[p]);return l},u.default.Table.prototype.getColumn=function(a){var s=[];if(typeof a=="string")for(var l=0;l<this.rows.length;l++)s.push(this.rows[l].obj[a]);else for(var h=0;h<this.rows.length;h++)s.push(this.rows[h].arr[a]);return s},u.default.Table.prototype.clearRows=function(){delete this.rows,this.rows=[]},u.default.Table.prototype.addColumn=function(a){this.columns.push(a||null)},u.default.Table.prototype.getColumnCount=function(){return this.columns.length},u.default.Table.prototype.getRowCount=function(){return this.rows.length},u.default.Table.prototype.removeTokens=function(a,s){for(var l=[],h=0;h<a.length;h++)l.push(a.charAt(h).replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"));var p=new RegExp(l.join("|"),"g");if(s===void 0)for(var c=0;c<this.columns.length;c++)for(var d=0;d<this.rows.length;d++){var f=(f=this.rows[d].arr[c]).replace(p,"");this.rows[d].arr[c]=f,this.rows[d].obj[this.columns[c]]=f}else if(typeof s=="string")for(var m=0;m<this.rows.length;m++){var y=(y=this.rows[m].obj[s]).replace(p,""),g=(this.rows[m].obj[s]=y,this.columns.indexOf(s));this.rows[m].arr[g]=y}else for(var v=0;v<this.rows.length;v++){var b=(b=this.rows[v].arr[s]).replace(p,"");this.rows[v].arr[s]=b,this.rows[v].obj[this.columns[s]]=b}},u.default.Table.prototype.trim=function(a){var s=new RegExp(" ","g");if(a===void 0)for(var l=0;l<this.columns.length;l++)for(var h=0;h<this.rows.length;h++){var p=(p=this.rows[h].arr[l]).replace(s,"");this.rows[h].arr[l]=p,this.rows[h].obj[this.columns[l]]=p}else if(typeof a=="string")for(var c=0;c<this.rows.length;c++){var d=(d=this.rows[c].obj[a]).replace(s,""),f=(this.rows[c].obj[a]=d,this.columns.indexOf(a));this.rows[c].arr[f]=d}else for(var m=0;m<this.rows.length;m++){var y=(y=this.rows[m].arr[a]).replace(s,"");this.rows[m].arr[a]=y,this.rows[m].obj[this.columns[a]]=y}},u.default.Table.prototype.removeColumn=function(h){typeof h=="string"?l=this.columns.indexOf(s=h):s=this.columns[l=h];var s,l,h=this.columns.splice(l+1,this.columns.length);this.columns.pop(),this.columns=this.columns.concat(h);for(var p=0;p<this.rows.length;p++){var c=this.rows[p].arr,d=c.splice(l+1,c.length);c.pop(),this.rows[p].arr=c.concat(d),delete this.rows[p].obj[s]}},u.default.Table.prototype.set=function(a,s,l){this.rows[a].set(s,l)},u.default.Table.prototype.setNum=function(a,s,l){this.rows[a].setNum(s,l)},u.default.Table.prototype.setString=function(a,s,l){this.rows[a].setString(s,l)},u.default.Table.prototype.get=function(a,s){return this.rows[a].get(s)},u.default.Table.prototype.getNum=function(a,s){return this.rows[a].getNum(s)},u.default.Table.prototype.getString=function(a,s){return this.rows[a].getString(s)},u.default.Table.prototype.getObject=function(a){for(var s,l={},h=0;h<this.rows.length;h++)if(s=this.rows[h].obj,typeof a=="string"){if(!(0<=this.columns.indexOf(a)))throw new Error('This table has no column named "'.concat(a,'"'));l[s[a]]=s}else l[h]=this.rows[h].obj;return l},u.default.Table.prototype.getArray=function(){for(var a=[],s=0;s<this.rows.length;s++)a.push(this.rows[s].arr);return a},e=u.default,i.default=e},{"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.join":159,"core-js/modules/es.array.splice":164,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.match":187,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.trim":193}],295:[function(e,o,i){e("core-js/modules/es.array.index-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.split"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.split"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,e=(e=e("../core/main"))&&e.__esModule?e:{default:e},e.default.TableRow=function(u,a){var s=[],l={};u&&(s=u.split(a=a||","));for(var h=0;h<s.length;h++){var p=h,c=s[h];l[p]=c}this.arr=s,this.obj=l,this.table=null},e.default.TableRow.prototype.set=function(u,a){if(typeof u=="string"){var s=this.table.columns.indexOf(u);if(!(0<=s))throw new Error('This table has no column named "'.concat(u,'"'));this.obj[u]=a,this.arr[s]=a}else{if(!(u<this.table.columns.length))throw new Error("Column #".concat(u," is out of the range of this table"));this.arr[u]=a,s=this.table.columns[u],this.obj[s]=a}},e.default.TableRow.prototype.setNum=function(u,a){a=parseFloat(a),this.set(u,a)},e.default.TableRow.prototype.setString=function(u,a){a=a.toString(),this.set(u,a)},e.default.TableRow.prototype.get=function(u){return(typeof u=="string"?this.obj:this.arr)[u]},e.default.TableRow.prototype.getNum=function(u){var a=parseFloat(typeof u=="string"?this.obj[u]:this.arr[u]);if(a.toString()==="NaN")throw"Error: ".concat(this.obj[u]," is NaN (Not a Number)");return a},e.default.TableRow.prototype.getString=function(u){return(typeof u=="string"?this.obj:this.arr)[u].toString()},e=e.default,i.default=e},{"../core/main":267,"core-js/modules/es.array.index-of":157,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.split":191}],296:[function(e,o,i){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=(e=e("../core/main"))&&e.__esModule?e:{default:e};function a(s){for(var l=[],h=0;h<s.length;h++)l.push(new u.default.XML(s[h]));return l}u.default.XML=function(s){s?this.DOM=s:(s=document.implementation.createDocument(null,"doc"),this.DOM=s.createElement("root"))},u.default.XML.prototype.getParent=function(){return new u.default.XML(this.DOM.parentElement)},u.default.XML.prototype.getName=function(){return this.DOM.tagName},u.default.XML.prototype.setName=function(s){var l=this.DOM.innerHTML,h=this.DOM.attributes,p=document.implementation.createDocument(null,"default").createElement(s);p.innerHTML=l;for(var c=0;c<h.length;c++)p.setAttribute(h[c].nodeName,h.nodeValue);this.DOM=p},u.default.XML.prototype.hasChildren=function(){return 0<this.DOM.children.length},u.default.XML.prototype.listChildren=function(){for(var s=[],l=0;l<this.DOM.childNodes.length;l++)s.push(this.DOM.childNodes[l].nodeName);return s},u.default.XML.prototype.getChildren=function(s){return a(s?this.DOM.getElementsByTagName(s):this.DOM.children)},u.default.XML.prototype.getChild=function(s){if(typeof s!="string")return new u.default.XML(this.DOM.children[s]);var l=!0,h=!1,p=void 0;try{for(var c,d=this.DOM.children[Symbol.iterator]();!(l=(c=d.next()).done);l=!0){var f=c.value;if(f.tagName===s)return new u.default.XML(f)}}catch(m){h=!0,p=m}finally{try{l||d.return==null||d.return()}finally{if(h)throw p}}},u.default.XML.prototype.addChild=function(s){s instanceof u.default.XML&&this.DOM.appendChild(s.DOM)},u.default.XML.prototype.removeChild=function(s){var l=-1;if(typeof s=="string"){for(var h=0;h<this.DOM.children.length;h++)if(this.DOM.children[h].tagName===s){l=h;break}}else l=s;l!==-1&&this.DOM.removeChild(this.DOM.children[l])},u.default.XML.prototype.getAttributeCount=function(){return this.DOM.attributes.length},u.default.XML.prototype.listAttributes=function(){var s=[],l=!0,h=!1,p=void 0;try{for(var c,d=this.DOM.attributes[Symbol.iterator]();!(l=(c=d.next()).done);l=!0){var f=c.value;s.push(f.nodeName)}}catch(m){h=!0,p=m}finally{try{l||d.return==null||d.return()}finally{if(h)throw p}}return s},u.default.XML.prototype.hasAttribute=function(s){var l={},h=!0,p=!1,c=void 0;try{for(var d,f=this.DOM.attributes[Symbol.iterator]();!(h=(d=f.next()).done);h=!0){var m=d.value;l[m.nodeName]=m.nodeValue}}catch(y){p=!0,c=y}finally{try{h||f.return==null||f.return()}finally{if(p)throw c}}return!!l[s]},u.default.XML.prototype.getNum=function(s,l){var h={},p=!0,c=!1,d=void 0;try{for(var f,m=this.DOM.attributes[Symbol.iterator]();!(p=(f=m.next()).done);p=!0){var y=f.value;h[y.nodeName]=y.nodeValue}}catch(g){c=!0,d=g}finally{try{p||m.return==null||m.return()}finally{if(c)throw d}}return Number(h[s])||l||0},u.default.XML.prototype.getString=function(s,l){var h={},p=!0,c=!1,d=void 0;try{for(var f,m=this.DOM.attributes[Symbol.iterator]();!(p=(f=m.next()).done);p=!0){var y=f.value;h[y.nodeName]=y.nodeValue}}catch(g){c=!0,d=g}finally{try{p||m.return==null||m.return()}finally{if(c)throw d}}return h[s]?String(h[s]):l||null},u.default.XML.prototype.setAttribute=function(s,l){this.DOM.setAttribute(s,l)},u.default.XML.prototype.getContent=function(s){var l=this.DOM.textContent;return(l=l.replace(/\s\s+/g,","))||s||null},u.default.XML.prototype.setContent=function(s){this.DOM.children.length||(this.DOM.textContent=s)},u.default.XML.prototype.serialize=function(){return new XMLSerializer().serializeToString(this.DOM)},e=u.default,i.default=e},{"../core/main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.number.constructor":169,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":230}],297:[function(e,o,i){e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.math.hypot"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.math.hypot"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.string.includes"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=(e=e("../core/main"))&&e.__esModule?e:{default:e};function a(){if(typeof Math.hypot=="function")return Math.hypot.apply(null,arguments);for(var s=arguments.length,l=[],h=0,p=0;p<s;p++){var c=arguments[p];if((c=+c)===1/0||c===-1/0)return 1/0;h<(c=Math.abs(c))&&(h=c),l[p]=c}h===0&&(h=1);for(var g=0,y=0,d=0;d<s;d++)var f=l[d]/h,f=f*f-y,m=g+f,y=m-g-f,g=m;return Math.sqrt(g)*h}u.default.prototype.abs=Math.abs,u.default.prototype.ceil=Math.ceil,u.default.prototype.constrain=function(s,l,h){return u.default._validateParameters("constrain",arguments),Math.max(Math.min(s,h),l)},u.default.prototype.dist=function(){for(var s=arguments.length,l=new Array(s),h=0;h<s;h++)l[h]=arguments[h];return u.default._validateParameters("dist",l),l.length===4?a(l[2]-l[0],l[3]-l[1]):l.length===6?a(l[3]-l[0],l[4]-l[1],l[5]-l[2]):void 0},u.default.prototype.exp=Math.exp,u.default.prototype.floor=Math.floor,u.default.prototype.lerp=function(s,l,h){return u.default._validateParameters("lerp",arguments),h*(l-s)+s},u.default.prototype.log=Math.log,u.default.prototype.mag=function(s,l){return u.default._validateParameters("mag",arguments),a(s,l)},u.default.prototype.map=function(s,l,h,p,c,d){return u.default._validateParameters("map",arguments),s=(s-l)/(h-l)*(c-p)+p,d?p<c?this.constrain(s,p,c):this.constrain(s,c,p):s},u.default.prototype.max=function(){for(var s=arguments.length,l=new Array(s),h=0;h<s;h++)l[h]=arguments[h];return l[0]instanceof Array?Math.max.apply(null,l[0]):Math.max.apply(null,l)},u.default.prototype.min=function(){for(var s=arguments.length,l=new Array(s),h=0;h<s;h++)l[h]=arguments[h];return l[0]instanceof Array?Math.min.apply(null,l[0]):Math.min.apply(null,l)},u.default.prototype.norm=function(s,l,h){return u.default._validateParameters("norm",arguments),this.map(s,l,h,0,1)},u.default.prototype.pow=Math.pow,u.default.prototype.round=function(s,l){return l?(l=Math.pow(10,l),Math.round(s*l)/l):Math.round(s)},u.default.prototype.sq=function(s){return s*s},u.default.prototype.sqrt=Math.sqrt,u.default.prototype.fract=function(p){u.default._validateParameters("fract",arguments);var l,h=0,p=Number(p);return isNaN(p)||Math.abs(p)===1/0?p:(p<0&&(p=-p,h=1),String(p).includes(".")&&!String(p).includes("e")?(l=String(p),l=Number("0"+l.slice(l.indexOf("."))),Math.abs(h-l)):p<1?Math.abs(h-p):0)},e=u.default,i.default=e},{"../core/main":267,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.math.hypot":167,"core-js/modules/es.number.constructor":169,"core-js/modules/es.string.includes":185}],298:[function(e,o,i){e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.reflect.construct"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.reflect.construct"),e("core-js/modules/es.regexp.to-string"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=(e=e("../core/main"))&&e.__esModule?e:{default:e};function a(l,h,p){return(a=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?Reflect.construct:function(c,d,f){var m=[null];return m.push.apply(m,d),d=new(Function.bind.apply(c,m)),f&&s(d,f.prototype),d}).apply(null,arguments)}function s(l,h){return(s=Object.setPrototypeOf||function(p,c){return p.__proto__=c,p})(l,h)}u.default.prototype.createVector=function(l,h,p){return this instanceof u.default?a(u.default.Vector,[this._fromRadians.bind(this),this._toRadians.bind(this)].concat(Array.prototype.slice.call(arguments))):new u.default.Vector(l,h,p)},e=u.default,i.default=e},{"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.to-string":177,"core-js/modules/es.reflect.construct":179,"core-js/modules/es.regexp.to-string":182}],299:[function(p,o,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,p=(p=p("../core/main"))&&p.__esModule?p:{default:p};function u(c){return .5*(1-Math.cos(c*Math.PI))}var a,s=4095,l=4,h=.5,p=(p.default.prototype.noise=function(c){var d=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(a==null){a=new Array(4096);for(var m=0;m<4096;m++)a[m]=Math.random()}c<0&&(c=-c),d<0&&(d=-d),f<0&&(f=-f);for(var y,g,v=Math.floor(c),b=Math.floor(d),w=Math.floor(f),_=c-v,j=d-b,E=f-w,T=0,R=.5,M=0;M<l;M++){var I=v+(b<<4)+(w<<8),D=u(_),L=u(j),N=a[I&s];N+=D*(a[I+1&s]-N),y=a[I+16&s],N+=L*((y+=D*(a[I+16+1&s]-y))-N),y=a[(I+=256)&s],y+=D*(a[I+1&s]-y),g=a[I+16&s],y+=L*((g+=D*(a[I+16+1&s]-g))-y),T+=(N+=u(E)*(y-N))*R,R*=h,v<<=1,b<<=1,w<<=1,1<=(_*=2)&&(v++,_--),1<=(j*=2)&&(b++,j--),1<=(E*=2)&&(w++,E--)}return T},p.default.prototype.noiseDetail=function(c,d){0<c&&(l=c),0<d&&(h=d)},p.default.prototype.noiseSeed=function(c){m=4294967296;var d,f,m,y={setSeed:function(v){f=d=(v??Math.random()*m)>>>0},getSeed:function(){return d},rand:function(){return(f=(1664525*f+1013904223)%m)/m}};y.setSeed(c),a=new Array(4096);for(var g=0;g<4096;g++)a[g]=y.rand()},p.default);i.default=p},{"../core/main":267}],300:[function(e,o,i){function u(f){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(f)}function a(f){return(a=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(m){return u(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":u(m)})(f)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.every"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.some"),e("core-js/modules/es.math.sign"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.number.is-finite"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.sub"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.every"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.some"),e("core-js/modules/es.math.sign"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.number.is-finite"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.sub"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=(d=e("../core/main"))&&d.__esModule?d:{default:d},l=function(f){if(f&&f.__esModule)return f;if(f===null||a(f)!=="object"&&typeof f!="function")return{default:f};var m=h();if(m&&m.has(f))return m.get(f);var y,g={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in f){var b;Object.prototype.hasOwnProperty.call(f,y)&&((b=v?Object.getOwnPropertyDescriptor(f,y):null)&&(b.get||b.set)?Object.defineProperty(g,y,b):g[y]=f[y])}return g.default=f,m&&m.set(f,g),g}(e("../core/constants"));function h(){var f;return typeof WeakMap!="function"?null:(f=new WeakMap,h=function(){return f},f)}s.default.Vector=function(){var f,m,y={}.toString.call(arguments[0])==="[object Function]"?(this.isPInst=!0,this._fromRadians=arguments[0],this._toRadians=arguments[1],f=arguments[2]||0,m=arguments[3]||0,arguments[4]||0):(f=arguments[0]||0,m=arguments[1]||0,arguments[2]||0);this.x=f,this.y=m,this.z=y},s.default.Vector.prototype.toString=function(){return"p5.Vector Object : [".concat(this.x,", ").concat(this.y,", ").concat(this.z,"]")},s.default.Vector.prototype.set=function(f,m,y){return f instanceof s.default.Vector?(this.x=f.x||0,this.y=f.y||0,this.z=f.z||0):f instanceof Array?(this.x=f[0]||0,this.y=f[1]||0,this.z=f[2]||0):(this.x=f||0,this.y=m||0,this.z=y||0),this},s.default.Vector.prototype.copy=function(){return this.isPInst?new s.default.Vector(this._fromRadians,this._toRadians,this.x,this.y,this.z):new s.default.Vector(this.x,this.y,this.z)},s.default.Vector.prototype.add=function(f,m,y){return f instanceof s.default.Vector?(this.x+=f.x||0,this.y+=f.y||0,this.z+=f.z||0):f instanceof Array?(this.x+=f[0]||0,this.y+=f[1]||0,this.z+=f[2]||0):(this.x+=f||0,this.y+=m||0,this.z+=y||0),this};function p(f,m){return f!==0&&(this.x=this.x%f),m!==0&&(this.y=this.y%m),this}function c(f,m,y){return f!==0&&(this.x=this.x%f),m!==0&&(this.y=this.y%m),y!==0&&(this.z=this.z%y),this}s.default.Vector.prototype.rem=function(f,m,y){var g;if(f instanceof s.default.Vector){if(Number.isFinite(f.x)&&Number.isFinite(f.y)&&Number.isFinite(f.z))return v=parseFloat(f.x),b=parseFloat(f.y),g=parseFloat(f.z),c.call(this,v,b,g)}else if(f instanceof Array){if(f.every(function(w){return Number.isFinite(w)}))return f.length===2?p.call(this,f[0],f[1]):f.length===3?c.call(this,f[0],f[1],f[2]):void 0}else if(arguments.length===1){if(Number.isFinite(f)&&f!==0)return this.x=this.x%f,this.y=this.y%f,this.z=this.z%f,this}else if(arguments.length===2){var v=Array.prototype.slice.call(arguments);if(v.every(function(w){return Number.isFinite(w)})&&v.length===2)return p.call(this,v[0],v[1])}else if(arguments.length===3){var b=Array.prototype.slice.call(arguments);if(b.every(function(w){return Number.isFinite(w)})&&b.length===3)return c.call(this,b[0],b[1],b[2])}},s.default.Vector.prototype.sub=function(f,m,y){return f instanceof s.default.Vector?(this.x-=f.x||0,this.y-=f.y||0,this.z-=f.z||0):f instanceof Array?(this.x-=f[0]||0,this.y-=f[1]||0,this.z-=f[2]||0):(this.x-=f||0,this.y-=m||0,this.z-=y||0),this},s.default.Vector.prototype.mult=function(f,m,y){var g;return f instanceof s.default.Vector?Number.isFinite(f.x)&&Number.isFinite(f.y)&&Number.isFinite(f.z)&&typeof f.x=="number"&&typeof f.y=="number"&&typeof f.z=="number"?(this.x*=f.x,this.y*=f.y,this.z*=f.z):console.warn("p5.Vector.prototype.mult:","x contains components that are either undefined or not finite numbers"):f instanceof Array?f.every(function(v){return Number.isFinite(v)})&&f.every(function(v){return typeof v=="number"})?f.length===1?(this.x*=f[0],this.y*=f[0],this.z*=f[0]):f.length===2?(this.x*=f[0],this.y*=f[1]):f.length===3&&(this.x*=f[0],this.y*=f[1],this.z*=f[2]):console.warn("p5.Vector.prototype.mult:","x contains elements that are either undefined or not finite numbers"):(g=Array.prototype.slice.call(arguments)).every(function(v){return Number.isFinite(v)})&&g.every(function(v){return typeof v=="number"})?(arguments.length===1&&(this.x*=f,this.y*=f,this.z*=f),arguments.length===2&&(this.x*=f,this.y*=m),arguments.length===3&&(this.x*=f,this.y*=m,this.z*=y)):console.warn("p5.Vector.prototype.mult:","x, y, or z arguments are either undefined or not a finite number"),this},s.default.Vector.prototype.div=function(f,m,y){if(f instanceof s.default.Vector)if(Number.isFinite(f.x)&&Number.isFinite(f.y)&&Number.isFinite(f.z)&&typeof f.x=="number"&&typeof f.y=="number"&&typeof f.z=="number"){if(f.x===0||f.y===0||f.z===0)return console.warn("p5.Vector.prototype.div:","divide by 0"),this;this.x/=f.x,this.y/=f.y,this.z/=f.z}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(f instanceof Array)if(f.every(function(v){return Number.isFinite(v)})&&f.every(function(v){return typeof v=="number"})){if(f.some(function(v){return v===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;f.length===1?(this.x/=f[0],this.y/=f[0],this.z/=f[0]):f.length===2?(this.x/=f[0],this.y/=f[1]):f.length===3&&(this.x/=f[0],this.y/=f[1],this.z/=f[2])}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else{var g=Array.prototype.slice.call(arguments);if(g.every(function(v){return Number.isFinite(v)})&&g.every(function(v){return typeof v=="number"})){if(g.some(function(v){return v===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;arguments.length===1&&(this.x/=f,this.y/=f,this.z/=f),arguments.length===2&&(this.x/=f,this.y/=m),arguments.length===3&&(this.x/=f,this.y/=m,this.z/=y)}else console.warn("p5.Vector.prototype.div:","x, y, or z arguments are either undefined or not a finite number")}return this},s.default.Vector.prototype.mag=function(){return Math.sqrt(this.magSq())},s.default.Vector.prototype.magSq=function(){var f=this.x,m=this.y,y=this.z;return f*f+m*m+y*y},s.default.Vector.prototype.dot=function(f,m,y){return f instanceof s.default.Vector?this.dot(f.x,f.y,f.z):this.x*(f||0)+this.y*(m||0)+this.z*(y||0)},s.default.Vector.prototype.cross=function(g){var m=this.y*g.z-this.z*g.y,y=this.z*g.x-this.x*g.z,g=this.x*g.y-this.y*g.x;return this.isPInst?new s.default.Vector(this._fromRadians,this._toRadians,m,y,g):new s.default.Vector(m,y,g)},s.default.Vector.prototype.dist=function(f){return f.copy().sub(this).mag()},s.default.Vector.prototype.normalize=function(){var f=this.mag();return f!==0&&this.mult(1/f),this},s.default.Vector.prototype.limit=function(f){var m=this.magSq();return f*f<m&&this.div(Math.sqrt(m)).mult(f),this},s.default.Vector.prototype.setMag=function(f){return this.normalize().mult(f)},s.default.Vector.prototype.heading=function(){var f=Math.atan2(this.y,this.x);return this.isPInst?this._fromRadians(f):f},s.default.Vector.prototype.setHeading=function(f){this.isPInst&&(f=this._toRadians(f));var m=this.mag();return this.x=m*Math.cos(f),this.y=m*Math.sin(f),this},s.default.Vector.prototype.rotate=function(m){var m=this.heading()+m,y=(this.isPInst&&(m=this._toRadians(m)),this.mag());return this.x=Math.cos(m)*y,this.y=Math.sin(m)*y,this},s.default.Vector.prototype.angleBetween=function(f){var m=this.dot(f)/(this.mag()*f.mag()),m=Math.acos(Math.min(1,Math.max(-1,m)));return m*=Math.sign(this.cross(f).z||1),m=this.isPInst?this._fromRadians(m):m},s.default.Vector.prototype.lerp=function(f,m,y,g){return f instanceof s.default.Vector?this.lerp(f.x,f.y,f.z,m):(this.x+=(f-this.x)*g||0,this.y+=(m-this.y)*g||0,this.z+=(y-this.z)*g||0,this)},s.default.Vector.prototype.reflect=function(f){return f.normalize(),this.sub(f.mult(2*this.dot(f)))},s.default.Vector.prototype.array=function(){return[this.x||0,this.y||0,this.z||0]},s.default.Vector.prototype.equals=function(b,m,y){var g,v,b=b instanceof s.default.Vector?(g=b.x||0,v=b.y||0,b.z||0):b instanceof Array?(g=b[0]||0,v=b[1]||0,b[2]||0):(g=b||0,v=m||0,y||0);return this.x===g&&this.y===v&&this.z===b},s.default.Vector.fromAngle=function(f,m){return new s.default.Vector((m=m===void 0?1:m)*Math.cos(f),m*Math.sin(f),0)},s.default.Vector.fromAngles=function(w,v,y){y===void 0&&(y=1);var g=Math.cos(v),v=Math.sin(v),b=Math.cos(w),w=Math.sin(w);return new s.default.Vector(y*w*v,-y*b,y*w*g)},s.default.Vector.random2D=function(){return this.fromAngle(Math.random()*l.TWO_PI)},s.default.Vector.random3D=function(){var f=Math.random()*l.TWO_PI,m=2*Math.random()-1,g=Math.sqrt(1-m*m),y=g*Math.cos(f),g=g*Math.sin(f);return new s.default.Vector(y,g,m)},s.default.Vector.add=function(f,m,y){return y?y.set(f):(y=f.copy(),arguments.length===3&&s.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.add")),y.add(m),y},s.default.Vector.rem=function(f,m){if(f instanceof s.default.Vector&&m instanceof s.default.Vector)return(f=f.copy()).rem(m),f},s.default.Vector.sub=function(f,m,y){return y?y.set(f):(y=f.copy(),arguments.length===3&&s.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.sub")),y.sub(m),y},s.default.Vector.mult=function(f,m,y){return y?y.set(f):(y=f.copy(),arguments.length===3&&s.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.mult")),y.mult(m),y},s.default.Vector.rotate=function(f,m,y){return arguments.length===2?y=f.copy():(y instanceof s.default.Vector||s.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.rotate"),y.set(f)),y.rotate(m),y},s.default.Vector.div=function(f,m,y){return y?y.set(f):(y=f.copy(),arguments.length===3&&s.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.div")),y.div(m),y},s.default.Vector.dot=function(f,m){return f.dot(m)},s.default.Vector.cross=function(f,m){return f.cross(m)},s.default.Vector.dist=function(f,m){return f.dist(m)},s.default.Vector.lerp=function(f,m,y,g){return g?g.set(f):(g=f.copy(),arguments.length===4&&s.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.lerp")),g.lerp(m,y),g},s.default.Vector.mag=function(g){var m=g.x,y=g.y,g=g.z;return Math.sqrt(m*m+y*y+g*g)},s.default.Vector.normalize=function(f,m){return arguments.length<2?m=f.copy():(m instanceof s.default.Vector||s.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.normalize"),m.set(f)),m.normalize()};var d=s.default.Vector;i.default=d},{"../core/constants":256,"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.every":151,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.some":163,"core-js/modules/es.math.sign":168,"core-js/modules/es.number.constructor":169,"core-js/modules/es.number.is-finite":170,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.sub":192,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],301:[function(h,o,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=(h=h("../core/main"))&&h.__esModule?h:{default:h},a="_lcg_random_state",s=4294967296,l=0,h=(u.default.prototype._lcg=function(p){return this[p]=(1664525*this[p]+1013904223)%s,this[p]/s},u.default.prototype._lcgSetSeed=function(p,c){this[p]=(c??Math.random()*s)>>>0},u.default.prototype.randomSeed=function(p){this._lcgSetSeed(a,p),this._gaussian_previous=!1},u.default.prototype.random=function(p,c){var d,f;return u.default._validateParameters("random",arguments),d=this[a]!=null?this._lcg(a):Math.random(),p===void 0?d:c===void 0?p instanceof Array?p[Math.floor(d*p.length)]:d*p:(c<p&&(f=p,p=c,c=f),d*(c-p)+p)},u.default.prototype.randomGaussian=function(p){var c,d,f,m,y=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(this._gaussian_previous)c=l,this._gaussian_previous=!1;else{for(;1<=(m=(d=this.random(2)-1)*d+(f=this.random(2)-1)*f););c=d*(m=Math.sqrt(-2*Math.log(m)/m)),l=f*m,this._gaussian_previous=!0}return c*y+(p||0)},u.default);i.default=h},{"../core/main":267}],302:[function(e,o,i){function u(c){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(c)}function a(c){return(a=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(d){return u(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":u(d)})(c)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=(p=e("../core/main"))&&p.__esModule?p:{default:p},l=function(c){if(c&&c.__esModule)return c;if(c===null||a(c)!=="object"&&typeof c!="function")return{default:c};var d=h();if(d&&d.has(c))return d.get(c);var f,m={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(f in c){var g;Object.prototype.hasOwnProperty.call(c,f)&&((g=y?Object.getOwnPropertyDescriptor(c,f):null)&&(g.get||g.set)?Object.defineProperty(m,f,g):m[f]=c[f])}return m.default=c,d&&d.set(c,m),m}(e("../core/constants"));function h(){var c;return typeof WeakMap!="function"?null:(c=new WeakMap,h=function(){return c},c)}s.default.prototype._angleMode=l.RADIANS,s.default.prototype.acos=function(c){return this._fromRadians(Math.acos(c))},s.default.prototype.asin=function(c){return this._fromRadians(Math.asin(c))},s.default.prototype.atan=function(c){return this._fromRadians(Math.atan(c))},s.default.prototype.atan2=function(c,d){return this._fromRadians(Math.atan2(c,d))},s.default.prototype.cos=function(c){return Math.cos(this._toRadians(c))},s.default.prototype.sin=function(c){return Math.sin(this._toRadians(c))},s.default.prototype.tan=function(c){return Math.tan(this._toRadians(c))},s.default.prototype.degrees=function(c){return c*l.RAD_TO_DEG},s.default.prototype.radians=function(c){return c*l.DEG_TO_RAD},s.default.prototype.angleMode=function(c){if(s.default._validateParameters("angleMode",arguments),c===void 0)return this._angleMode;c!==l.DEGREES&&c!==l.RADIANS||(this._angleMode=c)},s.default.prototype._toRadians=function(c){return this._angleMode===l.DEGREES?c*l.DEG_TO_RAD:c},s.default.prototype._toDegrees=function(c){return this._angleMode===l.RADIANS?c*l.RAD_TO_DEG:c},s.default.prototype._fromRadians=function(c){return this._angleMode===l.DEGREES?c*l.RAD_TO_DEG:c};var p=s.default;i.default=p},{"../core/constants":256,"../core/main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],303:[function(e,o,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=(e=e("../core/main"))&&e.__esModule?e:{default:e};u.default.prototype.textAlign=function(a,s){var l;return u.default._validateParameters("textAlign",arguments),(l=this._renderer).textAlign.apply(l,arguments)},u.default.prototype.textLeading=function(a){var s;return u.default._validateParameters("textLeading",arguments),(s=this._renderer).textLeading.apply(s,arguments)},u.default.prototype.textSize=function(a){var s;return u.default._validateParameters("textSize",arguments),(s=this._renderer).textSize.apply(s,arguments)},u.default.prototype.textStyle=function(a){var s;return u.default._validateParameters("textStyle",arguments),(s=this._renderer).textStyle.apply(s,arguments)},u.default.prototype.textWidth=function(){for(var a,s=arguments.length,l=new Array(s),h=0;h<s;h++)l[h]=arguments[h];return l[0]+="",u.default._validateParameters("textWidth",l),l[0].length===0?0:(a=this._renderer).textWidth.apply(a,l)},u.default.prototype.textAscent=function(){for(var a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];return u.default._validateParameters("textAscent",s),this._renderer.textAscent()},u.default.prototype.textDescent=function(){for(var a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];return u.default._validateParameters("textDescent",s),this._renderer.textDescent()},u.default.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()},u.default.prototype.textWrap=function(a){if(a!=="WORD"&&a!=="CHAR")throw"Error: textWrap accepts only WORD or CHAR";return this._renderer.textWrap(a)},e=u.default,i.default=e},{"../core/main":267}],304:[function(e,o,i){function u(f){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(f)}function a(f){return(a=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(m){return u(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":u(m)})(f)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.split"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=(d=e("../core/main"))&&d.__esModule?d:{default:d},l=c(e("../core/constants")),h=c(e("opentype.js"));function p(){var f;return typeof WeakMap!="function"?null:(f=new WeakMap,p=function(){return f},f)}function c(f){if(f&&f.__esModule)return f;if(f===null||a(f)!=="object"&&typeof f!="function")return{default:f};var m=p();if(m&&m.has(f))return m.get(f);var y,g,v={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in f)Object.prototype.hasOwnProperty.call(f,y)&&((g=b?Object.getOwnPropertyDescriptor(f,y):null)&&(g.get||g.set)?Object.defineProperty(v,y,g):v[y]=f[y]);return v.default=f,m&&m.set(f,v),v}e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),s.default.prototype.loadFont=function(f,m,y){s.default._validateParameters("loadFont",arguments);var g=new s.default.Font(this),v=this;return h.load(f,function(_,j){if(_)return s.default._friendlyFileLoadError(4,f),y!==void 0?y(_):void console.error(_,f);g.font=j,m!==void 0&&m(g),v._decrementPreload();var _=f.split("\\").pop().split("/").pop(),j=_.lastIndexOf("."),E=j<1?null:_.slice(j+1);["ttf","otf","woff","woff2"].includes(E)&&(E=_.slice(0,j!==-1?j:0),(_=document.createElement("style")).appendChild(document.createTextNode(`
@font-face {
font-family: `.concat(E,`;
src: url(`).concat(f,`);
}
`))),document.head.appendChild(_))}),g},s.default.prototype.text=function(f,m,y,g,v){var b;return s.default._validateParameters("text",arguments),this._renderer._doFill||this._renderer._doStroke?(b=this._renderer).text.apply(b,arguments):this},s.default.prototype.textFont=function(f,m){if(s.default._validateParameters("textFont",arguments),arguments.length){if(f)return this._renderer._setProperty("_textFont",f),m&&(this._renderer._setProperty("_textSize",m),this._renderer._leadingSet||this._renderer._setProperty("_textLeading",m*l._DEFAULT_LEADMULT)),this._renderer._applyTextProperties();throw new Error("null font passed to textFont")}return this._renderer._textFont};var d=s.default;i.default=d},{"../core/constants":256,"../core/friendly_errors/fes_core":258,"../core/friendly_errors/file_errors":259,"../core/friendly_errors/validate_params":262,"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.last-index-of":160,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230,"opentype.js":241}],305:[function(e,o,i){function u(E){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T})(E)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a=(a=e("../core/main"))&&a.__esModule?a:{default:a},s=function(E){if(E&&E.__esModule)return E;if(E===null||h(E)!=="object"&&typeof E!="function")return{default:E};var T=l();if(T&&T.has(E))return T.get(E);var R,M={},I=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(R in E){var D;Object.prototype.hasOwnProperty.call(E,R)&&((D=I?Object.getOwnPropertyDescriptor(E,R):null)&&(D.get||D.set)?Object.defineProperty(M,R,D):M[R]=E[R])}return M.default=E,T&&T.set(E,M),M}(e("../core/constants"));function l(){var E;return typeof WeakMap!="function"?null:(E=new WeakMap,l=function(){return E},E)}function h(E){return(h=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(T){return u(T)}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":u(T)})(E)}function p(E,T){var R=E.length;return E[T<0?T%R+R:T%R]}function c(E,T,R,M){var I,D,L;return M?(c.tmpPoint1===void 0&&(c.tmpPoint1=[],c.tmpPoint2=[]),D=c.tmpPoint1,L=c.tmpPoint2,D.x=T.x-E.x,D.y=T.y-E.y,L.x=R.x-T.x,L.y=R.y-T.y,I=D.x*L.x+D.y*L.y,D=Math.sqrt(D.x*D.x+D.y*D.y),L=Math.sqrt(L.x*L.x+L.y*L.y),Math.acos(I/(D*L))<M):(T[0]-E[0])*(R[1]-E[1])-(R[0]-E[0])*(T[1]-E[1])==0}function d(A,U,O,Y,J,D,L,N,W){var q=1-W,B=Math.pow(q,3),G=Math.pow(q,2),te=W*W,V=te*W,H=B*A+3*G*W*O+3*q*W*W*J+V*L,B=B*U+3*G*W*Y+3*q*W*W*D+V*N,G=A+2*W*(O-A)+te*(J-2*O+A),V=U+2*W*(Y-U)+te*(D-2*Y+U),X=O+2*W*(J-O)+te*(L-2*J+O),te=Y+2*W*(D-Y)+te*(N-2*D+Y),A=q*A+W*O,O=q*U+W*Y,U=q*J+W*L,Y=q*D+W*N,J=90-180*Math.atan2(G-X,V-te)/Math.PI;return(X<G||V<te)&&(J+=180),{x:H,y:B,m:{x:G,y:V},n:{x:X,y:te},start:{x:A,y:O},end:{x:U,y:Y},alpha:J}}function f(E,T,R,M,I,D,L,N,W){return W==null?_(E,T,R,M,I,D,L,N):d(E,T,R,M,I,D,L,N,function(q,H,B,G,V,X,te,A,O){if(!(O<0||_(q,H,B,G,V,X,te,A)<O)){var U,Y=.5,J=1-Y;for(U=_(q,H,B,G,V,X,te,A,J);.01<Math.abs(U-O);)U=_(q,H,B,G,V,X,te,A,J+=(U<O?1:-1)*(Y/=2));return J}}(E,T,R,M,I,D,L,N,W))}function m(E,T,R){for(var M,I,D,L,N,W=0,q=0,H=(E=function(B,G){function V(we,ge,Pe){var Ie,Fe;if(!we)return["C",ge.x,ge.y,ge.x,ge.y,ge.x,ge.y];switch(we[0]in{T:1,Q:1}||(ge.qx=ge.qy=null),we[0]){case"M":ge.X=we[1],ge.Y=we[2];break;case"A":we=["C"].concat(g.apply(0,[ge.x,ge.y].concat(we.slice(1))));break;case"S":Fe=Pe==="C"||Pe==="S"?(Ie=2*ge.x-ge.bx,2*ge.y-ge.by):(Ie=ge.x,ge.y),we=["C",Ie,Fe].concat(we.slice(1));break;case"T":Pe==="Q"||Pe==="T"?(ge.qx=2*ge.x-ge.qx,ge.qy=2*ge.y-ge.qy):(ge.qx=ge.x,ge.qy=ge.y),we=["C"].concat(w(ge.x,ge.y,ge.qx,ge.qy,we[1],we[2]));break;case"Q":ge.qx=we[1],ge.qy=we[2],we=["C"].concat(w(ge.x,ge.y,we[1],we[2],we[3],we[4]));break;case"L":we=["C"].concat(b(ge.x,ge.y,we[1],we[2]));break;case"H":we=["C"].concat(b(ge.x,ge.y,we[1],ge.y));break;case"V":we=["C"].concat(b(ge.x,ge.y,ge.x,we[1]));break;case"Z":we=["C"].concat(b(ge.x,ge.y,ge.X,ge.Y))}return we}function X(we,ge){if(7<we[ge].length){we[ge].shift();for(var Pe=we[ge];Pe.length;)ae[ge]="A",U&&(ue[ge]="A"),we.splice(ge++,0,["C"].concat(Pe.splice(0,6)));we.splice(ge,1),A=Math.max(O.length,U&&U.length||0)}}function te(we,ge,Pe,Ie,Fe){we&&ge&&we[Fe][0]==="M"&&ge[Fe][0]!=="M"&&(ge.splice(Fe,0,["M",Ie.x,Ie.y]),Pe.bx=0,Pe.by=0,Pe.x=we[Fe][1],Pe.y=we[Fe][2],A=Math.max(O.length,U&&U.length||0))}var A,O=y(B),U=G&&y(G),Y={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},J={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},ae=[],ue=[],de="",ne="";A=Math.max(O.length,U&&U.length||0);for(var le=0;le<A;le++){(de=O[le]?O[le][0]:de)!=="C"&&(ae[le]=de,le&&(ne=ae[le-1])),O[le]=V(O[le],Y,ne),ae[le]!=="A"&&de==="C"&&(ae[le]="C"),X(O,le),U&&((de=U[le]?U[le][0]:de)!=="C"&&(ue[le]=de,le&&(ne=ue[le-1])),U[le]=V(U[le],J,ne),ue[le]!=="A"&&de==="C"&&(ue[le]="C"),X(U,le)),te(O,U,Y,J,le),te(U,O,J,Y,le);var me=O[le],Q=U&&U[le],pe=me.length,ye=U&&Q.length;Y.x=me[pe-2],Y.y=me[pe-1],Y.bx=parseFloat(me[pe-4])||Y.x,Y.by=parseFloat(me[pe-3])||Y.y,J.bx=U&&(parseFloat(Q[ye-4])||J.x),J.by=U&&(parseFloat(Q[ye-3])||J.y),J.x=U&&Q[ye-2],J.y=U&&Q[ye-1]}return U?[O,U]:O}(E)).length;q<H;q++){if((D=E[q])[0]==="M")M=+D[1],I=+D[2];else{if(T<W+(L=f(M,I,D[1],D[2],D[3],D[4],D[5],D[6]))&&!R)return{x:(N=f(M,I,D[1],D[2],D[3],D[4],D[5],D[6],T-W)).x,y:N.y,alpha:N.alpha};W+=L,M=+D[5],I=+D[6]}D.shift()}return N=(N=R?W:d(M,I,D[0],D[1],D[2],D[3],D[4],D[5],1)).alpha?{x:N.x,y:N.y,alpha:N.alpha}:N}function y(E){var T=[],R=0,M=0,I=0,D=0,L=0;if(E){E[0][0]==="M"&&(I=R=+E[0][1],D=M=+E[0][2],L++,T[0]=["M",R,M]);for(var N,W,q=E.length===3&&E[0][0]==="M"&&E[1][0].toUpperCase()==="R"&&E[2][0].toUpperCase()==="Z",H=L,B=E.length;H<B;H++){if(T.push(N=[]),(W=E[H])[0]!==String.prototype.toUpperCase.call(W[0]))switch(N[0]=String.prototype.toUpperCase.call(W[0]),N[0]){case"A":N[1]=W[1],N[2]=W[2],N[3]=W[3],N[4]=W[4],N[5]=W[5],N[6]=+(W[6]+R),N[7]=+(W[7]+M);break;case"V":N[1]=+W[1]+M;break;case"H":N[1]=+W[1]+R;break;case"R":for(var G,V=2,X=(G=[R,M].concat(W.slice(1))).length;V<X;V++)G[V]=+G[V]+R,G[++V]=+G[V]+M;T.pop(),T=T.concat(v(G,q));break;case"M":I=+W[1]+R,D=+W[2]+M;break;default:for(var te=1,A=W.length;te<A;te++)N[te]=+W[te]+(te%2?R:M)}else if(W[0]==="R")G=[R,M].concat(W.slice(1)),T.pop(),T=T.concat(v(G,q)),N=["R"].concat(W.slice(-2));else for(var O=0,U=W.length;O<U;O++)N[O]=W[O];switch(N[0]){case"Z":R=I,M=D;break;case"H":R=N[1];break;case"V":M=N[1];break;case"M":I=N[N.length-2],D=N[N.length-1];break;default:R=N[N.length-2],M=N[N.length-1]}}}return T}function g(E,T,R,M,U,ae,Y,N,W,q){function H(ye,we,ge){return{x:ye*Math.cos(ge)-we*Math.sin(ge),y:ye*Math.sin(ge)+we*Math.cos(ge)}}var B,A=Math.PI,O=120*A/180,G=A/180*(+U||0),V=[],X=(q?(le=q[0],B=q[1],de=q[2],ne=q[3]):(E=(J=H(E,T,-G)).x,T=J.y,1<(X=(te=(E-(N=(J=H(N,W,-G)).x))/2)*te/(R*R)+(J=(T-(W=J.y))/2)*J/(M*M))&&(R*=X=Math.sqrt(X),M*=X),X=R*R,ue=M*M,de=(ae=(ae===Y?-1:1)*Math.sqrt(Math.abs((X*ue-X*J*J-ue*te*te)/(X*J*J+ue*te*te))))*R*J/M+(E+N)/2,ne=ae*-M*te/R+(T+W)/2,le=Math.asin(((T-ne)/M).toFixed(9)),B=Math.asin(((W-ne)/M).toFixed(9)),(le=E<de?A-le:le)<0&&(le=2*A+le),(B=N<de?A-B:B)<0&&(B=2*A+B),Y&&B<le&&(le-=2*A),!Y&&le<B&&(B-=2*A)),B-le),te=(Math.abs(X)>O&&(ue=B,J=N,ae=W,B=le+O*(Y&&le<B?1:-1),V=g(N=de+R*Math.cos(B),W=ne+M*Math.sin(B),R,M,U,0,Y,J,ae,[B,ue,de,ne])),X=B-le,Math.cos(le)),A=Math.sin(le),O=Math.cos(B),U=Math.sin(B),Y=Math.tan(X/4),J=4/3*R*Y,ae=4/3*M*Y,ue=[E,T],de=[E+J*A,T-ae*te],ne=[N+J*U,W-ae*O],le=[N,W];if(de[0]=2*ue[0]-de[0],de[1]=2*ue[1]-de[1],q)return[de,ne,le].concat(V);for(var me=[],Q=0,pe=(V=[de,ne,le].concat(V).join().split(",")).length;Q<pe;Q++)me[Q]=Q%2?H(V[Q-1],V[Q],G).y:H(V[Q],V[Q+1],G).x;return me}function v(E,T){for(var R=[],M=0,I=E.length;M<I-2*!T;M+=2){var D=[{x:+E[M-2],y:+E[M-1]},{x:+E[M],y:+E[M+1]},{x:+E[M+2],y:+E[M+3]},{x:+E[M+4],y:+E[M+5]}];T?M?I-4===M?D[3]={x:+E[0],y:+E[1]}:I-2===M&&(D[2]={x:+E[0],y:+E[1]},D[3]={x:+E[2],y:+E[3]}):D[0]={x:+E[I-2],y:+E[I-1]}:I-4===M?D[3]=D[2]:M||(D[0]={x:+E[M],y:+E[M+1]}),R.push(["C",(-D[0].x+6*D[1].x+D[2].x)/6,(-D[0].y+6*D[1].y+D[2].y)/6,(D[1].x+6*D[2].x-D[3].x)/6,(D[1].y+6*D[2].y-D[3].y)/6,D[2].x,D[2].y])}return R}function b(E,T,R,M){return[E,T,R,M,R,M]}function w(E,T,R,M,I,D){return[1/3*E+2/3*R,1/3*T+2/3*M,1/3*I+2/3*R,1/3*D+2/3*M,I,D]}function _(E,T,R,M,I,D,L,N,W){for(var q=(W=1<(W=W??1)?1:W<0?0:W)/2,H=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],B=0,G=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],V=0;V<12;V++){var te=q*H[V]+q,X=j(te,E,R,I,L),te=j(te,T,M,D,N);B+=G[V]*Math.sqrt(X*X+te*te)}return q*B}function j(E,T,R,M,I){return E*(E*(-3*T+9*R-9*M+3*I)+6*T-12*R+6*M)-3*T+3*R}a.default.Font=function(E){this.parent=E,this.cache={},this.font=void 0},a.default.Font.prototype.textBounds=function(E){var T=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,R=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,L=3<arguments.length?arguments[3]:void 0,M=4<arguments.length?arguments[4]:void 0,I=M&&M.renderer&&M.renderer._pInst||this.parent,D=I._renderer.drawingContext,L=(D.textAlign||s.LEFT,D.textBaseline||s.BASELINE,L||I._renderer._textSize);if(!O){for(var N=[],W=[],q=[],H=(q[0]=[],[]),B=this._scale(L),G=I._renderer.textLeading(),V=0,X=(this.font.forEachGlyph(E,T,R,L,M,function(J,ae,ue,de){var ne=J.getMetrics();J.index===0||J.index===10?q[V+=1]=[]:(q[V].push(ae+ne.xMin*B),q[V].push(ae+ne.xMax*B),H.push(ue+V*G+-ne.yMin*B),H.push(ue+V*G+-ne.yMax*B))}),0<q[V].length&&(N[V]=Math.min.apply(null,q[V]),W[V]=Math.max.apply(null,q[V])),0),te=0;te<=V;te++){N[te]=Math.min.apply(null,q[te]),W[te]=Math.max.apply(null,q[te]);var A=W[te]-N[te];X<A&&(X=A)}var D=Math.min.apply(null,N),O={x:D,y:R=Math.min.apply(null,H),h:Math.max.apply(null,H)-R,w:X,advance:D-T},L=this._handleAlignment(I._renderer,E,O.x,O.y,O.w+O.advance);O.x=L.x,O.y=L.y}return O},a.default.Font.prototype.textToPoints=function(E,T,R,M,I){var D=0,L=[],N=this._getGlyphs(E);M=M||this.parent._renderer._textSize;for(var W,q=0;q<N.length;q++){if(!(N[W=q].name&&N[W].name==="space"||E.length===N.length&&E[W]===" "))for(var H=function(X){for(var te,A=[],O=0;O<X.length;O++)X[O].type==="M"&&(te&&A.push(te),te=[]),te.push(function(U){var Y=[U.type];return U.type==="M"||U.type==="L"?Y.push(U.x,U.y):U.type==="C"?Y.push(U.x1,U.y1,U.x2,U.y2,U.x,U.y):U.type==="Q"&&Y.push(U.x1,U.y1,U.x,U.y),Y}(X[O]));return A.push(te),A}(N[q].getPath(T,R,M).commands),B=0;B<H.length;B++)for(var G=function(X,te){for(var te=function(ae,ue){if(h(ae)!=="object")ae=ue;else for(var de in ue)ae[de]===void 0&&(ae[de]=ue[de]);return ae}(te,{sampleFactor:.1,simplifyThreshold:0}),A=m(X,0,1),O=A/(A*te.sampleFactor),U=[],Y=0;Y<A;Y+=O)U.push(m(X,Y));return te.simplifyThreshold&&function(J){for(var ae=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,ue=0,de=J.length-1;3<J.length&&0<=de;--de)c(p(J,de-1),p(J,de),p(J,de+1),ae)&&(J.splice(de%J.length,1),ue++)}(U,te.simplifyThreshold),U}(H[B],I),V=0;V<G.length;V++)G[V].x+=D,L.push(G[V]);D+=N[q].advanceWidth*this._scale(M)}return L},a.default.Font.prototype._getGlyphs=function(E){return this.font.stringToGlyphs(E)},a.default.Font.prototype._getPath=function(E,D,R,M){var I=(M&&M.renderer&&M.renderer._pInst||this.parent)._renderer,D=this._handleAlignment(I,E,D,R);return this.font.getPath(E,D.x,D.y,I._textSize,M)},a.default.Font.prototype._getPathData=function(E,T,R,M){var I=3;return typeof E=="string"&&2<arguments.length?E=this._getPath(E,T,R,M):h(T)==="object"&&(M=T),M&&typeof M.decimals=="number"&&(I=M.decimals),E.toPathData(I)},a.default.Font.prototype._getSVG=function(E,T,R,M){var I=3;return typeof E=="string"&&2<arguments.length?E=this._getPath(E,T,R,M):h(T)==="object"&&(M=T),M&&(typeof M.decimals=="number"&&(I=M.decimals),typeof M.strokeWidth=="number"&&(E.strokeWidth=M.strokeWidth),M.fill!==void 0&&(E.fill=M.fill),M.stroke!==void 0&&(E.stroke=M.stroke)),E.toSVG(I)},a.default.Font.prototype._renderPath=function(L,W,q,M){var I=M&&M.renderer||this.parent._renderer,D=I.drawingContext,L=(h(L)==="object"&&L.commands?L:this._getPath(L,W,q,M)).commands,N=(D.beginPath(),!0),W=!1,q=void 0;try{for(var H,B=L[Symbol.iterator]();!(N=(H=B.next()).done);N=!0){var G=H.value;G.type==="M"?D.moveTo(G.x,G.y):G.type==="L"?D.lineTo(G.x,G.y):G.type==="C"?D.bezierCurveTo(G.x1,G.y1,G.x2,G.y2,G.x,G.y):G.type==="Q"?D.quadraticCurveTo(G.x1,G.y1,G.x,G.y):G.type==="Z"&&D.closePath()}}catch(V){W=!0,q=V}finally{try{N||B.return==null||B.return()}finally{if(W)throw q}}return I._doStroke&&I._strokeSet&&D.stroke(),I._doFill&&(I._fillSet||I._setFill(s._DEFAULT_TEXT_FILL),D.fill()),this},a.default.Font.prototype._textWidth=function(E,T){return this.font.getAdvanceWidth(E,T)},a.default.Font.prototype._textAscent=function(E){return this.font.ascender*this._scale(E)},a.default.Font.prototype._textDescent=function(E){return-this.font.descender*this._scale(E)},a.default.Font.prototype._scale=function(E){return 1/this.font.unitsPerEm*(E||this.parent._renderer._textSize)},a.default.Font.prototype._handleAlignment=function(E,T,R,M,I){var D=E._textSize;switch(I===void 0&&(I=this._textWidth(T,D)),E._textAlign){case s.CENTER:R-=I/2;break;case s.RIGHT:R-=I}switch(E._textBaseline){case s.TOP:M+=this._textAscent(D);break;case s.CENTER:M+=this._textAscent(D)/2;break;case s.BOTTOM:M-=this._textDescent(D)}return{x:R,y:M}},e=a.default,i.default=e},{"../core/constants":256,"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.fill":152,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.function.name":165,"core-js/modules/es.number.to-fixed":171,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],306:[function(e,o,i){e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.array-buffer.constructor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.array-buffer.constructor"),e("core-js/modules/es.object.to-string"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,e=(e=e("../core/main"))&&e.__esModule?e:{default:e},e.default.prototype.append=function(u,a){return u.push(a),u},e.default.prototype.arrayCopy=function(u,a,s,l,h){var p,c;u=h!==void 0?(c=Math.min(h,u.length),p=l,u.slice(a,c+a)):(c=s!==void 0?(c=s,Math.min(c,u.length)):u.length,s=a,u.slice(p=0,c)),Array.prototype.splice.apply(s,[p,c].concat(u))},e.default.prototype.concat=function(u,a){return u.concat(a)},e.default.prototype.reverse=function(u){return u.reverse()},e.default.prototype.shorten=function(u){return u.pop(),u},e.default.prototype.shuffle=function(u,a){for(var s,l,h=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(u),p=(u=a||h?u:u.slice()).length;1<p;)s=this.random(0,1)*p|0,l=u[--p],u[p]=u[s],u[s]=l;return u},e.default.prototype.sort=function(u,l){var s=l?u.slice(0,Math.min(l,u.length)):u,l=l?u.slice(Math.min(l,u.length)):[];return(s=typeof s[0]=="string"?s.sort():s.sort(function(h,p){return h-p})).concat(l)},e.default.prototype.splice=function(u,a,s){return Array.prototype.splice.apply(u,[s,0].concat(a)),u},e.default.prototype.subset=function(u,a,s){return s!==void 0?u.slice(a,a+s):u.slice(a,u.length)},e=e.default,i.default=e},{"../core/main":267,"core-js/modules/es.array-buffer.constructor":148,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.object.to-string":177}],307:[function(e,o,i){e("core-js/modules/es.array.map"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.repeat"),e("core-js/modules/es.array.map"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.repeat"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=(e=e("../core/main"))&&e.__esModule?e:{default:e};u.default.prototype.float=function(a){return a instanceof Array?a.map(parseFloat):parseFloat(a)},u.default.prototype.int=function(a){var s=1<arguments.length&&arguments[1]!==void 0?arguments[1]:10;return a===1/0||a==="Infinity"?1/0:a===-1/0||a==="-Infinity"?-1/0:typeof a=="string"?parseInt(a,s):typeof a=="number"?0|a:typeof a=="boolean"?a?1:0:a instanceof Array?a.map(function(l){return u.default.prototype.int(l,s)}):void 0},u.default.prototype.str=function(a){return a instanceof Array?a.map(u.default.prototype.str):String(a)},u.default.prototype.boolean=function(a){return typeof a=="number"?a!==0:typeof a=="string"?a.toLowerCase()==="true":typeof a=="boolean"?a:a instanceof Array?a.map(u.default.prototype.boolean):void 0},u.default.prototype.byte=function(a){return a=u.default.prototype.int(a,10),typeof a=="number"?(a+128)%256-128:a instanceof Array?a.map(u.default.prototype.byte):void 0},u.default.prototype.char=function(a){return typeof a!="number"||isNaN(a)?a instanceof Array?a.map(u.default.prototype.char):typeof a=="string"?u.default.prototype.char(parseInt(a,10)):void 0:String.fromCharCode(a)},u.default.prototype.unchar=function(a){return typeof a=="string"&&a.length===1?a.charCodeAt(0):a instanceof Array?a.map(u.default.prototype.unchar):void 0},u.default.prototype.hex=function(a,s){if(s=s??8,a instanceof Array)return a.map(function(h){return u.default.prototype.hex(h,s)});if(a===1/0||a===-1/0)return(a===1/0?"F":"0").repeat(s);if(typeof a=="number"){a<0&&(a=4294967295+a+1);for(var l=Number(a).toString(16).toUpperCase();l.length<s;)l="0".concat(l);return l=l.length>=s?l.substring(l.length-s,l.length):l}},u.default.prototype.unhex=function(a){return a instanceof Array?a.map(u.default.prototype.unhex):parseInt("0x".concat(a),16)},e=u.default,i.default=e},{"../core/main":267,"core-js/modules/es.array.map":161,"core-js/modules/es.number.constructor":169,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.repeat":188}],308:[function(e,o,i){e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=(p=e("../core/main"))&&p.__esModule?p:{default:p};function a(y,d,f){var m=y<0,y=m?y.toString().substring(1):y.toString(),g=y.indexOf("."),v=g!==-1?y.substring(0,g):y,b=g!==-1?y.substring(g+1):"",w=m?"-":"";if(f!==void 0){m="",(g!==-1||0<f-b.length)&&(m="."),b.length>f&&(b=b.substring(0,f));for(var _=0;_<d-v.length;_++)w+="0";for(var w=(w+=v)+m+b,j=0;j<f-b.length;j++)w+="0";return w}for(var E=0;E<Math.max(d-v.length,0);E++)w+="0";return w+=y}function s(y,d){var f=(y=y.toString()).indexOf("."),m=f!==-1?y.substring(f):"",y=(y=f!==-1?y.substring(0,f):y).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(d===0)m="";else if(d!==void 0)if(d>m.length)for(var g=d-(m+=f===-1?".":"").length+1,v=0;v<g;v++)m+="0";else m=m.substring(0,d+1);return y+m}function l(c){return 0<parseFloat(c)?"+".concat(c.toString()):c.toString()}function h(c){return 0<=parseFloat(c)?" ".concat(c.toString()):c.toString()}e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),u.default.prototype.join=function(c,d){return u.default._validateParameters("join",arguments),c.join(d)},u.default.prototype.match=function(c,d){return u.default._validateParameters("match",arguments),c.match(d)},u.default.prototype.matchAll=function(c,d){u.default._validateParameters("matchAll",arguments);for(var f=new RegExp(d,"g"),m=f.exec(c),y=[];m!==null;)y.push(m),m=f.exec(c);return y},u.default.prototype.nf=function(c,d,f){return u.default._validateParameters("nf",arguments),c instanceof Array?c.map(function(m){return a(m,d,f)}):Object.prototype.toString.call(c)==="[object Arguments]"?c.length===3?this.nf(c[0],c[1],c[2]):c.length===2?this.nf(c[0],c[1]):this.nf(c[0]):a(c,d,f)},u.default.prototype.nfc=function(c,d){return u.default._validateParameters("nfc",arguments),c instanceof Array?c.map(function(f){return s(f,d)}):s(c,d)},u.default.prototype.nfp=function(){for(var c=arguments.length,d=new Array(c),f=0;f<c;f++)d[f]=arguments[f];u.default._validateParameters("nfp",d);var m=u.default.prototype.nf.apply(this,d);return m instanceof Array?m.map(l):l(m)},u.default.prototype.nfs=function(){for(var c=arguments.length,d=new Array(c),f=0;f<c;f++)d[f]=arguments[f];u.default._validateParameters("nfs",d);var m=u.default.prototype.nf.apply(this,d);return m instanceof Array?m.map(h):h(m)},u.default.prototype.split=function(c,d){return u.default._validateParameters("split",arguments),c.split(d)},u.default.prototype.splitTokens=function(c,d){var f,m;return u.default._validateParameters("splitTokens",arguments),m=d!==void 0?(m=/\]/g.exec(d=d),(f=/\[/g.exec(d))&&m?(d=d.slice(0,m.index)+d.slice(m.index+1),f=/\[/g.exec(d),d=d.slice(0,f.index)+d.slice(f.index+1),new RegExp("[\\[".concat(d,"\\]]"),"g")):m?(d=d.slice(0,m.index)+d.slice(m.index+1),new RegExp("[".concat(d,"\\]]"),"g")):f?(d=d.slice(0,f.index)+d.slice(f.index+1),new RegExp("[".concat(d,"\\[]"),"g")):new RegExp("[".concat(d,"]"),"g")):/\s/g,c.split(m).filter(function(y){return y})},u.default.prototype.trim=function(c){return u.default._validateParameters("trim",arguments),c instanceof Array?c.map(this.trim):c.trim()};var p=u.default;i.default=p},{"../core/friendly_errors/fes_core":258,"../core/friendly_errors/file_errors":259,"../core/friendly_errors/validate_params":262,"../core/main":267,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.join":159,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.match":187,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193}],309:[function(e,o,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,e=(e=e("../core/main"))&&e.__esModule?e:{default:e},e.default.prototype.day=function(){return new Date().getDate()},e.default.prototype.hour=function(){return new Date().getHours()},e.default.prototype.minute=function(){return new Date().getMinutes()},e.default.prototype.millis=function(){return this._millisStart===-1?0:window.performance.now()-this._millisStart},e.default.prototype.month=function(){return new Date().getMonth()+1},e.default.prototype.second=function(){return new Date().getSeconds()},e.default.prototype.year=function(){return new Date().getFullYear()},e=e.default,i.default=e},{"../core/main":267}],310:[function(e,o,i){function u(d){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(d)}function a(d){return(a=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(f){return u(f)}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":u(f)})(d)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=(c=e("../core/main"))&&c.__esModule?c:{default:c},l=(e("./p5.Geometry"),function(d){if(d&&d.__esModule)return d;if(d===null||a(d)!=="object"&&typeof d!="function")return{default:d};var f=h();if(f&&f.has(d))return f.get(d);var m,y={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in d){var v;Object.prototype.hasOwnProperty.call(d,m)&&((v=g?Object.getOwnPropertyDescriptor(d,m):null)&&(v.get||v.set)?Object.defineProperty(y,m,v):y[m]=d[m])}return y.default=d,f&&f.set(d,y),y}(e("../core/constants")));function h(){var d;return typeof WeakMap!="function"?null:(d=new WeakMap,h=function(){return d},d)}s.default.prototype.plane=function(d,f,m,y){this._assert3d("plane"),s.default._validateParameters("plane",arguments),d===void 0&&(d=50),f===void 0&&(f=d),y===void 0&&(y=1);var g,v="plane|".concat(m=m===void 0?1:m,"|").concat(y);return this._renderer.geometryInHash(v)||((g=new s.default.Geometry(m,y,function(){for(var b,w,_=0;_<=this.detailY;_++)for(var j=_/this.detailY,E=0;E<=this.detailX;E++)b=E/this.detailX,w=new s.default.Vector(b-.5,j-.5,0),this.vertices.push(w),this.uvs.push(b,j)})).computeFaces().computeNormals(),m<=1&&y<=1?g._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on plane objects with more than 1 detailX or 1 detailY"),this._renderer.createBuffers(v,g)),this._renderer.drawBuffersScaled(v,d,f,1),this},s.default.prototype.box=function(d,f,m,y,g){this._assert3d("box"),s.default._validateParameters("box",arguments),d===void 0&&(d=50),f===void 0&&(f=d),m===void 0&&(m=f);var v,b=this._renderer.attributes&&this._renderer.attributes.perPixelLighting,b=(g===void 0&&(g=b?1:4),"box|".concat(y=y===void 0?b?1:4:y,"|").concat(g));return this._renderer.geometryInHash(b)||((v=new s.default.Geometry(y,g,function(){var w=[[0,4,2,6],[1,3,5,7],[0,1,4,5],[2,6,3,7],[0,2,1,3],[4,5,6,7]];this.strokeIndices=[[0,1],[1,3],[3,2],[6,7],[8,9],[9,11],[14,15],[16,17],[17,19],[18,19],[20,21],[22,23]];for(var _=0;_<w.length;_++){for(var j=w[_],E=4*_,T=0;T<4;T++){var R=j[T],R=new s.default.Vector((2*(1&R)-1)/2,((2&R)-1)/2,((4&R)/2-1)/2);this.vertices.push(R),this.uvs.push(1&T,(2&T)/2)}this.faces.push([E,1+E,2+E]),this.faces.push([2+E,1+E,3+E])}})).computeNormals(),y<=4&&g<=4?v._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on box objects with more than 4 detailX or 4 detailY"),this._renderer.createBuffers(b,v)),this._renderer.drawBuffersScaled(b,d,f,m),this},s.default.prototype.sphere=function(d,f,m){return this._assert3d("sphere"),s.default._validateParameters("sphere",arguments),this.ellipsoid(d=d===void 0?50:d,d,d,f=f===void 0?24:f,m=m===void 0?16:m),this};function p(d,f,m,y,g,v,b){d=d<=0?1:d,f=f<0?0:f,m=m<=0?d:m,y=y<3?3:y;for(var w,_,j=(v=v===void 0||v)?-2:0,E=(g=g<1?1:g)+((b=b===void 0?f!==0:b)?2:0),T=Math.atan2(d-f,m),R=Math.sin(T),M=Math.cos(T),I=j;I<=E;++I){var D=I/g,L=m*D,N=void 0,N=I<0?(D=L=0,d):g<I?(L=m,D=1,f):d+(f-d)*D;for(I!==-2&&I!==g+2||(N=0),L-=m/2,w=0;w<y;++w){var W=w/(y-1),H=2*Math.PI*W,q=Math.sin(H),H=Math.cos(H),B=(this.vertices.push(new s.default.Vector(q*N,L,H*N)),void 0),B=I<0?new s.default.Vector(0,-1,0):g<I&&f?new s.default.Vector(0,1,0):new s.default.Vector(q*M,R,H*M);this.vertexNormals.push(B),this.uvs.push(W,D)}}var G=0;if(v){for(_=0;_<y;++_)this.faces.push([G+_,G+y+(_+1)%y,G+y+_]);G+=2*y}for(I=0;I<g;++I){for(w=0;w<y;++w){var V=(w+1)%y;this.faces.push([G+w,G+V,G+y+V]),this.faces.push([G+w,G+y+V,G+y+w])}G+=y}if(b)for(G+=y,w=0;w<y;++w)this.faces.push([G+w,G+(w+1)%y,G+y])}s.default.prototype.cylinder=function(d,f,m,y,g,v){this._assert3d("cylinder"),s.default._validateParameters("cylinder",arguments),d===void 0&&(d=50),f===void 0&&(f=d),y===void 0&&(y=1),v===void 0&&(v=!0),g===void 0&&(g=!0);var b,w="cylinder|".concat(m=m===void 0?24:m,"|").concat(y,"|").concat(g,"|").concat(v);return this._renderer.geometryInHash(w)||(b=new s.default.Geometry(m,y),p.call(b,1,1,1,m,y,g,v),m<=24&&y<=16?b._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cylinder objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(w,b)),this._renderer.drawBuffersScaled(w,d,f,d),this},s.default.prototype.cone=function(d,f,m,y,g){this._assert3d("cone"),s.default._validateParameters("cone",arguments),d===void 0&&(d=50),f===void 0&&(f=d),y===void 0&&(y=1),g===void 0&&(g=!0);var v,b="cone|".concat(m=m===void 0?24:m,"|").concat(y,"|").concat(g);return this._renderer.geometryInHash(b)||(v=new s.default.Geometry(m,y),p.call(v,1,0,1,m,y,g,!1),m<=24&&y<=16?v._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cone objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(b,v)),this._renderer.drawBuffersScaled(b,d,f,d),this},s.default.prototype.ellipsoid=function(d,f,m,y,g){this._assert3d("ellipsoid"),s.default._validateParameters("ellipsoid",arguments),d===void 0&&(d=50),f===void 0&&(f=d),m===void 0&&(m=d),g===void 0&&(g=16);var v,b="ellipsoid|".concat(y=y===void 0?24:y,"|").concat(g);return this._renderer.geometryInHash(b)||((v=new s.default.Geometry(y,g,function(){for(var w=0;w<=this.detailY;w++)for(var _=w/this.detailY,j=Math.PI*_-Math.PI/2,E=Math.cos(j),T=Math.sin(j),R=0;R<=this.detailX;R++){var M=R/this.detailX,D=2*Math.PI*M,I=Math.cos(D),D=Math.sin(D),D=new s.default.Vector(E*D,T,E*I);this.vertices.push(D),this.vertexNormals.push(D),this.uvs.push(M,_)}})).computeFaces(),y<=24&&g<=24?v._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on ellipsoids with more than 24 detailX or 24 detailY"),this._renderer.createBuffers(b,v)),this._renderer.drawBuffersScaled(b,d,f,m),this},s.default.prototype.torus=function(d,b,m,y){if(this._assert3d("torus"),s.default._validateParameters("torus",arguments),d===void 0)d=50;else if(!d)return;if(b===void 0)b=10;else if(!b)return;m===void 0&&(m=24),y===void 0&&(y=16);var g,v=(b/d).toPrecision(4),b="torus|".concat(v,"|").concat(m,"|").concat(y);return this._renderer.geometryInHash(b)||((g=new s.default.Geometry(m,y,function(){for(var w=0;w<=this.detailY;w++)for(var _=w/this.detailY,j=2*Math.PI*_,E=Math.cos(j),T=Math.sin(j),R=1+v*E,M=0;M<=this.detailX;M++){var I=M/this.detailX,D=2*Math.PI*I,N=Math.cos(D),D=Math.sin(D),L=new s.default.Vector(R*N,R*D,v*T),N=new s.default.Vector(E*N,E*D,T);this.vertices.push(L),this.vertexNormals.push(N),this.uvs.push(I,_)}})).computeFaces(),m<=24&&y<=16?g._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw strokes on torus object with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(b,g)),this._renderer.drawBuffersScaled(b,d,d,d),this},s.default.RendererGL.prototype.point=function(d,f,m){var y=[];return y.push(new s.default.Vector(d,f,m=m===void 0?0:m)),this._drawPoints(y,this.immediateMode.buffers.point),this},s.default.RendererGL.prototype.triangle=function(b){var f=b[0],m=b[1],y=b[2],g=b[3],v=b[4],b=b[5],w=(this.geometryInHash("tri")||((w=new s.default.Geometry(1,1,function(){var j=[];j.push(new s.default.Vector(0,0,0)),j.push(new s.default.Vector(0,1,0)),j.push(new s.default.Vector(1,0,0)),this.strokeIndices=[[0,1],[1,2],[2,0]],this.vertices=j,this.faces=[[0,1,2]],this.uvs=[0,0,0,1,1,1]}))._makeTriangleEdges()._edgesToVertices(),w.computeNormals(),this.createBuffers("tri",w)),this.uMVMatrix.copy());try{var _=new s.default.Matrix([y-f,g-m,0,0,v-f,b-m,0,0,0,0,1,0,f,m,0,1]).mult(this.uMVMatrix);this.uMVMatrix=_,this.drawBuffers("tri")}finally{this.uMVMatrix=w}return this},s.default.RendererGL.prototype.ellipse=function(d){this.arc(d[0],d[1],d[2],d[3],0,l.TWO_PI,l.OPEN,d[4])},s.default.RendererGL.prototype.arc=function(d){var f,m=arguments[1],y=arguments[2],g=arguments[3],v=arguments[4],b=arguments[5],w=arguments[6],_=arguments[7]||25,j=(Math.abs(b-v)>=l.TWO_PI?"".concat(E="ellipse","|"):"".concat(E="arc","|").concat(v,"|").concat(b,"|").concat(w,"|")).concat(_,"|"),E=(this.geometryInHash(j)||((f=new s.default.Geometry(_,1,function(){if(this.strokeIndices=[],v.toFixed(10)!==b.toFixed(10)){w!==l.PIE&&w!==void 0||(this.vertices.push(new s.default.Vector(.5,.5,0)),this.uvs.push([.5,.5]));for(var T=0;T<=_;T++){var M=(b-v)*(T/_)+v,R=.5+Math.cos(M)/2,M=.5+Math.sin(M)/2;this.vertices.push(new s.default.Vector(R,M,0)),this.uvs.push([R,M]),T<_-1&&(this.faces.push([0,T+1,T+2]),this.strokeIndices.push([T+1,T+2]))}switch(w){case l.PIE:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.strokeIndices.push([0,1]),this.strokeIndices.push([this.vertices.length-2,this.vertices.length-1]),this.strokeIndices.push([0,this.vertices.length-1]);break;case l.CHORD:this.strokeIndices.push([0,1]),this.strokeIndices.push([0,this.vertices.length-1]);break;case l.OPEN:this.strokeIndices.push([0,1]);break;default:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.strokeIndices.push([this.vertices.length-2,this.vertices.length-1])}}})).computeNormals(),_<=50?f._makeTriangleEdges()._edgesToVertices(f):this._doStroke&&console.log("Cannot apply a stroke to an ".concat(E," with more than 50 detail")),this.createBuffers(j,f)),this.uMVMatrix.copy());try{this.uMVMatrix.translate([d,m,0]),this.uMVMatrix.scale(y,g,1),this.drawBuffers(j)}finally{this.uMVMatrix=E}return this},s.default.RendererGL.prototype.rect=function(d){var f=d[0],m=d[1],y=d[2],g=d[3];if(d[4]===void 0){var w=this._pInst._glAttributes.perPixelLighting,v=d[4]||(w?1:24),b=d[5]||(w?1:16),w="rect|".concat(v,"|").concat(b),_=(this.geometryInHash(w)||((_=new s.default.Geometry(v,b,function(){for(var B=0;B<=this.detailY;B++)for(var G=B/this.detailY,V=0;V<=this.detailX;V++){var X=V/this.detailX,te=new s.default.Vector(X,G,0);this.vertices.push(te),this.uvs.push(X,G)}0<v&&0<b&&(this.strokeIndices=[[0,v],[v,(v+1)*(b+1)-1],[(v+1)*(b+1)-1,(v+1)*b],[(v+1)*b,0]])})).computeFaces().computeNormals()._makeTriangleEdges()._edgesToVertices(),this.createBuffers(w,_)),this.uMVMatrix.copy());try{this.uMVMatrix.translate([f,m,0]),this.uMVMatrix.scale(y,g,1),this.drawBuffers(w)}finally{this.uMVMatrix=_}}else{var w=d[4],_=d[5]===void 0?w:d[5],j=d[6]===void 0?_:d[6],d=d[7]===void 0?j:d[7],D=y,E=g,M=((D+=f)<f&&(M=f,f=D,D=M),(E+=m)<m&&(M=m,m=E,E=M),Math.min((D-f)/2,(E-m)/2)),T=(M<w&&(w=M),M<_&&(_=M),M<j&&(j=M),M<d&&(d=M),f),R=m,M=D,f=E,I=(this.beginShape(),_!==0?(this.vertex(M-_,R),this.quadraticVertex(M,R,M,R+_)):this.vertex(M,R),j!==0?(this.vertex(M,f-j),this.quadraticVertex(M,f,M-j,f)):this.vertex(M,f),d!==0?(this.vertex(T+d,f),this.quadraticVertex(T,f,T,f-d)):this.vertex(T,f),w!==0?(this.vertex(T,R+w),this.quadraticVertex(T,R,T+w,R)):this.vertex(T,R),!(this.immediateMode.geometry.uvs.length=0)),m=!1,D=void 0;try{for(var L,N=this.immediateMode.geometry.vertices[Symbol.iterator]();!(I=(L=N.next()).done);I=!0){var W=L.value,q=(W.x-T)/y,H=(W.y-R)/g;this.immediateMode.geometry.uvs.push(q,H)}}catch(A){m=!0,D=A}finally{try{I||N.return==null||N.return()}finally{if(m)throw D}}this.endShape(l.CLOSE)}return this},s.default.RendererGL.prototype.quad=function(d,f,m,y,g,v,b,w,_,j,E,T,R,M){R===void 0&&(R=2),M===void 0&&(M=2);var I="quad|".concat(d,"|").concat(f,"|").concat(m,"|").concat(y,"|").concat(g,"|").concat(v,"|").concat(b,"|").concat(w,"|").concat(_,"|").concat(j,"|").concat(E,"|").concat(T,"|").concat(R,"|").concat(M);if(!this.geometryInHash(I)){var D=new s.default.Geometry(R,M,function(){for(var B=1/(this.detailX-1),G=1/(this.detailY-1),V=0;V<this.detailY;V++)for(var X=0;X<this.detailX;X++){var te=X*B,A=V*G;this.vertices.push(new s.default.Vector((1-te)*((1-A)*d+A*j)+te*((1-A)*y+A*b),(1-te)*((1-A)*f+A*E)+te*((1-A)*g+A*w),(1-te)*((1-A)*m+A*T)+te*((1-A)*v+A*_))),this.uvs.push([te,A])}});D.faces=[];for(var L=0;L<M-1;L++)for(var N=0;N<R-1;N++){var W=N+L*R,q=N+1+(L+1)*R,H=N+(L+1)*R;D.faces.push([W,N+1+L*R,q]),D.faces.push([W,q,H])}D.computeNormals()._makeTriangleEdges()._edgesToVertices(),this.createBuffers(I,D)}return this.drawBuffers(I),this},s.default.RendererGL.prototype.bezier=function(d,f,m,y,g,v,b,w,_,j,E,T){arguments.length===8&&(E=w,j=b,w=v,b=g,g=y,y=m,m=v=_=T=0);var R=this._pInst._bezierDetail||20;this.beginShape();for(var M=0;M<=R;M++){var I=Math.pow(1-M/R,3),D=M/R*3*Math.pow(1-M/R,2),L=3*Math.pow(M/R,2)*(1-M/R),N=Math.pow(M/R,3);this.vertex(d*I+y*D+b*L+j*N,f*I+g*D+w*L+E*N,m*I+v*D+_*L+T*N)}return this.endShape(),this},s.default.RendererGL.prototype.curve=function(d,f,m,y,g,v,b,w,_,j,E,T){arguments.length===8&&(j=b,E=w,b=g,w=y,g=y=m,m=v=_=T=0);var R=this._pInst._curveDetail;this.beginShape();for(var M=0;M<=R;M++){var I=.5*Math.pow(M/R,3),D=.5*Math.pow(M/R,2),L=M/R*.5;this.vertex(I*(3*y-d-3*b+j)+D*(2*d-5*y+4*b-j)+L*(-d+b)+2*y*.5,I*(3*g-f-3*w+E)+D*(2*f-5*g+4*w-E)+L*(-f+w)+2*g*.5,I*(3*v-m-3*_+T)+D*(2*m-5*v+4*_-T)+L*(-m+_)+2*v*.5)}return this.endShape(),this},s.default.RendererGL.prototype.line=function(){return arguments.length===6?(this.beginShape(l.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]),this.vertex(arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]),this.endShape()):arguments.length===4&&(this.beginShape(l.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],0),this.vertex(arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],0),this.endShape()),this},s.default.RendererGL.prototype.bezierVertex=function(){if(this.immediateMode._bezierVertex.length===0)throw Error("vertex() must be used once before calling bezierVertex()");var d,f,m,y,g,v,b=[],w=[],_=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var j=1/this._lutBezierDetail,E=0,T=1,R=0;E<1;){if(v=parseFloat(E.toFixed(6)),this._lookUpTableBezier[R]=this._bezierCoefficients(v),T.toFixed(6)===j.toFixed(6)){v=parseFloat(T.toFixed(6))+parseFloat(E.toFixed(6)),++R,this._lookUpTableBezier[R]=this._bezierCoefficients(v);break}E+=j,T-=j,++R}}var M=this._lookUpTableBezier.length;if(_===6){for(this.isBezier=!0,b=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2],arguments.length<=4?void 0:arguments[4]],w=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3],arguments.length<=5?void 0:arguments[5]],g=0;g<M;g++)f=b[0]*this._lookUpTableBezier[g][0]+b[1]*this._lookUpTableBezier[g][1]+b[2]*this._lookUpTableBezier[g][2]+b[3]*this._lookUpTableBezier[g][3],m=w[0]*this._lookUpTableBezier[g][0]+w[1]*this._lookUpTableBezier[g][1]+w[2]*this._lookUpTableBezier[g][2]+w[3]*this._lookUpTableBezier[g][3],this.vertex(f,m);this.immediateMode._bezierVertex[0]=arguments.length<=4?void 0:arguments[4],this.immediateMode._bezierVertex[1]=arguments.length<=5?void 0:arguments[5]}else if(_===9){for(this.isBezier=!0,b=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3],arguments.length<=6?void 0:arguments[6]],w=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4],arguments.length<=7?void 0:arguments[7]],d=[this.immediateMode._bezierVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5],arguments.length<=8?void 0:arguments[8]],g=0;g<M;g++)f=b[0]*this._lookUpTableBezier[g][0]+b[1]*this._lookUpTableBezier[g][1]+b[2]*this._lookUpTableBezier[g][2]+b[3]*this._lookUpTableBezier[g][3],m=w[0]*this._lookUpTableBezier[g][0]+w[1]*this._lookUpTableBezier[g][1]+w[2]*this._lookUpTableBezier[g][2]+w[3]*this._lookUpTableBezier[g][3],y=d[0]*this._lookUpTableBezier[g][0]+d[1]*this._lookUpTableBezier[g][1]+d[2]*this._lookUpTableBezier[g][2]+d[3]*this._lookUpTableBezier[g][3],this.vertex(f,m,y);this.immediateMode._bezierVertex[0]=arguments.length<=6?void 0:arguments[6],this.immediateMode._bezierVertex[1]=arguments.length<=7?void 0:arguments[7],this.immediateMode._bezierVertex[2]=arguments.length<=8?void 0:arguments[8]}},s.default.RendererGL.prototype.quadraticVertex=function(){if(this.immediateMode._quadraticVertex.length===0)throw Error("vertex() must be used once before calling quadraticVertex()");var d,f,m,y,g,v,b=[],w=[],_=arguments.length;if(this._lookUpTableQuadratic.length===0||this._lutQuadraticDetail!==this._pInst._curveDetail){this._lookUpTableQuadratic=[],this._lutQuadraticDetail=this._pInst._curveDetail;for(var j=1/this._lutQuadraticDetail,E=0,T=1,R=0;E<1;){if(v=parseFloat(E.toFixed(6)),this._lookUpTableQuadratic[R]=this._quadraticCoefficients(v),T.toFixed(6)===j.toFixed(6)){v=parseFloat(T.toFixed(6))+parseFloat(E.toFixed(6)),++R,this._lookUpTableQuadratic[R]=this._quadraticCoefficients(v);break}E+=j,T-=j,++R}}var M=this._lookUpTableQuadratic.length;if(_===4){for(this.isQuadratic=!0,b=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2]],w=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3]],g=0;g<M;g++)f=b[0]*this._lookUpTableQuadratic[g][0]+b[1]*this._lookUpTableQuadratic[g][1]+b[2]*this._lookUpTableQuadratic[g][2],m=w[0]*this._lookUpTableQuadratic[g][0]+w[1]*this._lookUpTableQuadratic[g][1]+w[2]*this._lookUpTableQuadratic[g][2],this.vertex(f,m);this.immediateMode._quadraticVertex[0]=arguments.length<=2?void 0:arguments[2],this.immediateMode._quadraticVertex[1]=arguments.length<=3?void 0:arguments[3]}else if(_===6){for(this.isQuadratic=!0,b=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3]],w=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4]],d=[this.immediateMode._quadraticVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5]],g=0;g<M;g++)f=b[0]*this._lookUpTableQuadratic[g][0]+b[1]*this._lookUpTableQuadratic[g][1]+b[2]*this._lookUpTableQuadratic[g][2],m=w[0]*this._lookUpTableQuadratic[g][0]+w[1]*this._lookUpTableQuadratic[g][1]+w[2]*this._lookUpTableQuadratic[g][2],y=d[0]*this._lookUpTableQuadratic[g][0]+d[1]*this._lookUpTableQuadratic[g][1]+d[2]*this._lookUpTableQuadratic[g][2],this.vertex(f,m,y);this.immediateMode._quadraticVertex[0]=arguments.length<=3?void 0:arguments[3],this.immediateMode._quadraticVertex[1]=arguments.length<=4?void 0:arguments[4],this.immediateMode._quadraticVertex[2]=arguments.length<=5?void 0:arguments[5]}},s.default.RendererGL.prototype.curveVertex=function(){var d,f,m,y,g,v,b=[],w=[],_=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var j=1/this._lutBezierDetail,E=0,T=1,R=0;E<1;){if(v=parseFloat(E.toFixed(6)),this._lookUpTableBezier[R]=this._bezierCoefficients(v),T.toFixed(6)===j.toFixed(6)){v=parseFloat(T.toFixed(6))+parseFloat(E.toFixed(6)),++R,this._lookUpTableBezier[R]=this._bezierCoefficients(v);break}E+=j,T-=j,++R}}var M=this._lookUpTableBezier.length;if(_===2){if(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.length===8){for(this.isCurve=!0,b=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[6]]),w=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[7]]),g=0;g<M;g++)f=b[0]*this._lookUpTableBezier[g][0]+b[1]*this._lookUpTableBezier[g][1]+b[2]*this._lookUpTableBezier[g][2]+b[3]*this._lookUpTableBezier[g][3],m=w[0]*this._lookUpTableBezier[g][0]+w[1]*this._lookUpTableBezier[g][1]+w[2]*this._lookUpTableBezier[g][2]+w[3]*this._lookUpTableBezier[g][3],this.vertex(f,m);for(g=0;g<_;g++)this.immediateMode._curveVertex.shift()}}else if(_===3&&(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.push(arguments.length<=2?void 0:arguments[2]),this.immediateMode._curveVertex.length===12)){for(this.isCurve=!0,b=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[6],this.immediateMode._curveVertex[9]]),w=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[7],this.immediateMode._curveVertex[10]]),d=this._bezierToCatmull([this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[8],this.immediateMode._curveVertex[11]]),g=0;g<M;g++)f=b[0]*this._lookUpTableBezier[g][0]+b[1]*this._lookUpTableBezier[g][1]+b[2]*this._lookUpTableBezier[g][2]+b[3]*this._lookUpTableBezier[g][3],m=w[0]*this._lookUpTableBezier[g][0]+w[1]*this._lookUpTableBezier[g][1]+w[2]*this._lookUpTableBezier[g][2]+w[3]*this._lookUpTableBezier[g][3],y=d[0]*this._lookUpTableBezier[g][0]+d[1]*this._lookUpTableBezier[g][1]+d[2]*this._lookUpTableBezier[g][2]+d[3]*this._lookUpTableBezier[g][3],this.vertex(f,m,y);for(g=0;g<_;g++)this.immediateMode._curveVertex.shift()}},s.default.RendererGL.prototype.image=function(d,T,m,R,g,v,b,w,_){this._isErasing&&this.blendMode(this._cachedBlendMode),this._pInst.push(),this._pInst.noLights(),this._pInst.texture(d),this._pInst.textureMode(l.NORMAL);var j=0,E=(T<=d.width&&(j=T/d.width),1),T=(T+R<=d.width&&(E=(T+R)/d.width),0),R=(m<=d.height&&(T=m/d.height),1);m+g<=d.height&&(R=(m+g)/d.height),this.beginShape(),this.vertex(v,b,0,j,T),this.vertex(v+w,b,0,E,T),this.vertex(v+w,b+_,0,E,R),this.vertex(v,b+_,0,j,R),this.endShape(l.CLOSE),this._pInst.pop(),this._isErasing&&this.blendMode(l.REMOVE)};var c=s.default;i.default=c},{"../core/constants":256,"../core/main":267,"./p5.Geometry":316,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.iterator":158,"core-js/modules/es.number.to-fixed":171,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],311:[function(e,o,i){function u(c){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(c)}function a(c){return(a=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(d){return u(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":u(d)})(c)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=(p=e("../core/main"))&&p.__esModule?p:{default:p},l=function(c){if(c&&c.__esModule)return c;if(c===null||a(c)!=="object"&&typeof c!="function")return{default:c};var d=h();if(d&&d.has(c))return d.get(c);var f,m={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(f in c){var g;Object.prototype.hasOwnProperty.call(c,f)&&((g=y?Object.getOwnPropertyDescriptor(c,f):null)&&(g.get||g.set)?Object.defineProperty(m,f,g):m[f]=c[f])}return m.default=c,d&&d.set(c,m),m}(e("../core/constants"));function h(){var c;return typeof WeakMap!="function"?null:(c=new WeakMap,h=function(){return c},c)}s.default.prototype.orbitControl=function(c,d,f){var m,y;if(this._assert3d("orbitControl"),s.default._validateParameters("orbitControl",arguments),this.mouseX<this.width&&0<this.mouseX&&this.mouseY<this.height&&0<this.mouseY)return m=this._renderer._curCamera,c===void 0&&(c=1),d===void 0&&(d=c),f===void 0&&(f=.5),this.contextMenuDisabled!==!0&&(this.canvas.oncontextmenu=function(){return!1},this._setProperty("contextMenuDisabled",!0)),this.wheelDefaultDisabled!==!0&&(this.canvas.onwheel=function(){return!1},this._setProperty("wheelDefaultDisabled",!0)),y=this.height<this.width?this.height:this.width,this._mouseWheelDeltaY!==this._pmouseWheelDeltaY&&(0<this._mouseWheelDeltaY?this._renderer._curCamera._orbit(0,0,f*y):this._renderer._curCamera._orbit(0,0,-f*y)),this.mouseIsPressed&&(this.mouseButton===this.LEFT?(f=-c*(this.mouseX-this.pmouseX)/y,y=d*(this.mouseY-this.pmouseY)/y,this._renderer._curCamera._orbit(f,y,0)):this.mouseButton===this.RIGHT&&(f=m._getLocalAxes(),(y=Math.sqrt(f.x[0]*f.x[0]+f.x[2]*f.x[2]))!==0&&(f.x[0]/=y,f.x[2]/=y),(y=Math.sqrt(f.y[0]*f.y[0]+f.y[2]*f.y[2]))!==0&&(f.y[0]/=y,f.y[2]/=y),y=-1*c*(this.mouseX-this.pmouseX),c=-1*d*(this.mouseY-this.pmouseY),m.setPosition(m.eyeX+y*f.x[0]+c*f.z[0],m.eyeY,m.eyeZ+y*f.x[2]+c*f.z[2]))),this},s.default.prototype.debugMode=function(){this._assert3d("debugMode");for(var c=arguments.length,d=new Array(c),f=0;f<c;f++)d[f]=arguments[f];s.default._validateParameters("debugMode",d);for(var m=this._registeredMethods.post.length-1;0<=m;m--)this._registeredMethods.post[m].toString()!==this._grid().toString()&&this._registeredMethods.post[m].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(m,1);d[0]===l.GRID?this.registerMethod("post",this._grid.call(this,d[1],d[2],d[3],d[4],d[5])):d[0]===l.AXES?this.registerMethod("post",this._axesIcon.call(this,d[1],d[2],d[3],d[4])):(this.registerMethod("post",this._grid.call(this,d[0],d[1],d[2],d[3],d[4])),this.registerMethod("post",this._axesIcon.call(this,d[5],d[6],d[7],d[8])))},s.default.prototype.noDebugMode=function(){this._assert3d("noDebugMode");for(var c=this._registeredMethods.post.length-1;0<=c;c--)this._registeredMethods.post[c].toString()!==this._grid().toString()&&this._registeredMethods.post[c].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(c,1)},s.default.prototype._grid=function(c,d,f,m,y){c===void 0&&(c=this.width/2),d===void 0&&(d=Math.round(c/30)<4?4:Math.round(c/30)),f===void 0&&(f=0),m===void 0&&(m=0),y===void 0&&(y=0);var g=c/d,v=c/2;return function(){this.push(),this.stroke(255*this._renderer.curStrokeColor[0],255*this._renderer.curStrokeColor[1],255*this._renderer.curStrokeColor[2]),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix.mat4[0],this._renderer._curCamera.cameraMatrix.mat4[1],this._renderer._curCamera.cameraMatrix.mat4[2],this._renderer._curCamera.cameraMatrix.mat4[3],this._renderer._curCamera.cameraMatrix.mat4[4],this._renderer._curCamera.cameraMatrix.mat4[5],this._renderer._curCamera.cameraMatrix.mat4[6],this._renderer._curCamera.cameraMatrix.mat4[7],this._renderer._curCamera.cameraMatrix.mat4[8],this._renderer._curCamera.cameraMatrix.mat4[9],this._renderer._curCamera.cameraMatrix.mat4[10],this._renderer._curCamera.cameraMatrix.mat4[11],this._renderer._curCamera.cameraMatrix.mat4[12],this._renderer._curCamera.cameraMatrix.mat4[13],this._renderer._curCamera.cameraMatrix.mat4[14],this._renderer._curCamera.cameraMatrix.mat4[15]);for(var b=0;b<=d;b++)this.beginShape(this.LINES),this.vertex(-v+f,m,b*g-v+y),this.vertex(v+f,m,b*g-v+y),this.endShape();for(var w=0;w<=d;w++)this.beginShape(this.LINES),this.vertex(w*g-v+f,m,-v+y),this.vertex(w*g-v+f,m,v+y),this.endShape();this.pop()}},s.default.prototype._axesIcon=function(c,d,f,m){return c===void 0&&(c=40<this.width/20?this.width/20:40),d===void 0&&(d=-this.width/4),f===void 0&&(f=d),m===void 0&&(m=d),function(){this.push(),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix.mat4[0],this._renderer._curCamera.cameraMatrix.mat4[1],this._renderer._curCamera.cameraMatrix.mat4[2],this._renderer._curCamera.cameraMatrix.mat4[3],this._renderer._curCamera.cameraMatrix.mat4[4],this._renderer._curCamera.cameraMatrix.mat4[5],this._renderer._curCamera.cameraMatrix.mat4[6],this._renderer._curCamera.cameraMatrix.mat4[7],this._renderer._curCamera.cameraMatrix.mat4[8],this._renderer._curCamera.cameraMatrix.mat4[9],this._renderer._curCamera.cameraMatrix.mat4[10],this._renderer._curCamera.cameraMatrix.mat4[11],this._renderer._curCamera.cameraMatrix.mat4[12],this._renderer._curCamera.cameraMatrix.mat4[13],this._renderer._curCamera.cameraMatrix.mat4[14],this._renderer._curCamera.cameraMatrix.mat4[15]),this.strokeWeight(2),this.stroke(255,0,0),this.beginShape(this.LINES),this.vertex(d,f,m),this.vertex(d+c,f,m),this.endShape(),this.stroke(0,255,0),this.beginShape(this.LINES),this.vertex(d,f,m),this.vertex(d,f+c,m),this.endShape(),this.stroke(0,0,255),this.beginShape(this.LINES),this.vertex(d,f,m),this.vertex(d,f,m+c),this.endShape(),this.pop()}};var p=s.default;i.default=p},{"../core/constants":256,"../core/main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.splice":164,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],312:[function(e,o,i){function u(c){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(c)}function a(c){return(a=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(d){return u(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":u(d)})(c)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=(p=e("../core/main"))&&p.__esModule?p:{default:p},l=function(c){if(c&&c.__esModule)return c;if(c===null||a(c)!=="object"&&typeof c!="function")return{default:c};var d=h();if(d&&d.has(c))return d.get(c);var f,m={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(f in c){var g;Object.prototype.hasOwnProperty.call(c,f)&&((g=y?Object.getOwnPropertyDescriptor(c,f):null)&&(g.get||g.set)?Object.defineProperty(m,f,g):m[f]=c[f])}return m.default=c,d&&d.set(c,m),m}(e("../core/constants"));function h(){var c;return typeof WeakMap!="function"?null:(c=new WeakMap,h=function(){return c},c)}s.default.prototype.ambientLight=function(c,d,f,m){this._assert3d("ambientLight"),s.default._validateParameters("ambientLight",arguments);var y=this.color.apply(this,arguments);return this._renderer.ambientLightColors.push(y._array[0],y._array[1],y._array[2]),this._renderer._enableLighting=!0,this},s.default.prototype.specularColor=function(c,d,f){this._assert3d("specularColor"),s.default._validateParameters("specularColor",arguments);var m=this.color.apply(this,arguments);return this._renderer.specularColors=[m._array[0],m._array[1],m._array[2]],this},s.default.prototype.directionalLight=function(c,_,w,m,y,g){this._assert3d("directionalLight"),s.default._validateParameters("directionalLight",arguments),c=c instanceof s.default.Color?c:this.color(c,_,w);var v,b,_=arguments[arguments.length-1],w=typeof _=="number"?(v=arguments[arguments.length-3],b=arguments[arguments.length-2],arguments[arguments.length-1]):(v=_.x,b=_.y,_.z),_=Math.sqrt(v*v+b*b+w*w);return this._renderer.directionalLightDirections.push(v/_,b/_,w/_),this._renderer.directionalLightDiffuseColors.push(c._array[0],c._array[1],c._array[2]),Array.prototype.push.apply(this._renderer.directionalLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},s.default.prototype.pointLight=function(c,w,_,m,y,g){this._assert3d("pointLight"),s.default._validateParameters("pointLight",arguments),c=c instanceof s.default.Color?c:this.color(c,w,_);var v,b,w=arguments[arguments.length-1],_=typeof w=="number"?(v=arguments[arguments.length-3],b=arguments[arguments.length-2],arguments[arguments.length-1]):(v=w.x,b=w.y,w.z);return this._renderer.pointLightPositions.push(v,b,_),this._renderer.pointLightDiffuseColors.push(c._array[0],c._array[1],c._array[2]),Array.prototype.push.apply(this._renderer.pointLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},s.default.prototype.lights=function(){var c;return this._assert3d("lights"),this._colorMode===l.RGB?(this.ambientLight(128,128,128),this.directionalLight(128,128,128,0,0,-1)):(c=this._colorMaxes[this._colorMode][2],this.ambientLight(0,0,c),this.directionalLight(0,0,c,0,0,-1)),this},s.default.prototype.lightFalloff=function(c,d,f){return this._assert3d("lightFalloff"),s.default._validateParameters("lightFalloff",arguments),c<0&&(c=0,console.warn("Value of constant argument in lightFalloff() should be never be negative. Set to 0.")),d<0&&(d=0,console.warn("Value of linear argument in lightFalloff() should be never be negative. Set to 0.")),f<0&&(f=0,console.warn("Value of quadratic argument in lightFalloff() should be never be negative. Set to 0.")),c===0&&d===0&&f===0&&(c=1,console.warn("Either one of the three arguments in lightFalloff() should be greater than zero. Set constant argument to 1.")),this._renderer.constantAttenuation=c,this._renderer.linearAttenuation=d,this._renderer.quadraticAttenuation=f,this},s.default.prototype.spotLight=function(c,d,f,m,y,g,v,b,w,_,j){this._assert3d("spotLight"),s.default._validateParameters("spotLight",arguments);var E,T,R,M=arguments.length;switch(M){case 11:case 10:E=this.color(c,d,f),T=new s.default.Vector(m,y,g),R=new s.default.Vector(v,b,w);break;case 9:c instanceof s.default.Color?(E=c,T=new s.default.Vector(d,f,m),R=new s.default.Vector(y,g,v),_=b,j=w):m instanceof s.default.Vector?(E=this.color(c,d,f),T=m,R=new s.default.Vector(y,g,v),_=b,j=w):v instanceof s.default.Vector?(E=this.color(c,d,f),T=new s.default.Vector(m,y,g),R=v,_=b,j=w):(E=this.color(c,d,f),T=new s.default.Vector(m,y,g),R=new s.default.Vector(v,b,w));break;case 8:_=(R=c instanceof s.default.Color?(E=c,T=new s.default.Vector(d,f,m),new s.default.Vector(y,g,v)):m instanceof s.default.Vector?(E=this.color(c,d,f),T=m,new s.default.Vector(y,g,v)):(E=this.color(c,d,f),T=new s.default.Vector(m,y,g),v),b);break;case 7:c instanceof s.default.Color&&d instanceof s.default.Vector?(E=c,T=d,R=new s.default.Vector(f,m,y),_=g,j=v):c instanceof s.default.Color&&y instanceof s.default.Vector?(E=c,T=new s.default.Vector(d,f,m),R=y,_=g,j=v):m instanceof s.default.Vector&&y instanceof s.default.Vector?(E=this.color(c,d,f),T=m,R=y,_=g,j=v):R=c instanceof s.default.Color?(E=c,T=new s.default.Vector(d,f,m),new s.default.Vector(y,g,v)):m instanceof s.default.Vector?(E=this.color(c,d,f),T=m,new s.default.Vector(y,g,v)):(E=this.color(c,d,f),T=new s.default.Vector(m,y,g),v);break;case 6:m instanceof s.default.Vector&&y instanceof s.default.Vector?(E=this.color(c,d,f),T=m,R=y,_=g):c instanceof s.default.Color&&y instanceof s.default.Vector?(E=c,T=new s.default.Vector(d,f,m),R=y,_=g):c instanceof s.default.Color&&d instanceof s.default.Vector&&(E=c,T=d,R=new s.default.Vector(f,m,y),_=g);break;case 5:c instanceof s.default.Color&&d instanceof s.default.Vector&&f instanceof s.default.Vector?(E=c,T=d,R=f,_=m,j=y):m instanceof s.default.Vector&&y instanceof s.default.Vector?(E=this.color(c,d,f),T=m,R=y):c instanceof s.default.Color&&y instanceof s.default.Vector?(E=c,T=new s.default.Vector(d,f,m),R=y):c instanceof s.default.Color&&d instanceof s.default.Vector&&(E=c,T=d,R=new s.default.Vector(f,m,y));break;case 4:E=c,T=d,R=f,_=m;break;case 3:E=c,T=d,R=f;break;default:return console.warn("Sorry, input for spotlight() is not in prescribed format. Too ".concat(M<3?"few":"many"," arguments were provided")),this}return this._renderer.spotLightDiffuseColors.push(E._array[0],E._array[1],E._array[2]),Array.prototype.push.apply(this._renderer.spotLightSpecularColors,this._renderer.specularColors),this._renderer.spotLightPositions.push(T.x,T.y,T.z),R.normalize(),this._renderer.spotLightDirections.push(R.x,R.y,R.z),_===void 0&&(_=Math.PI/3),j!==void 0&&j<1?(j=1,console.warn("Value of concentration needs to be greater than 1. Setting it to 1")):j===void 0&&(j=100),_=this._renderer._pInst._toRadians(_),this._renderer.spotLightAngle.push(Math.cos(_)),this._renderer.spotLightConc.push(j),this._renderer._enableLighting=!0,this},s.default.prototype.noLights=function(){return this._assert3d("noLights"),s.default._validateParameters("noLights",arguments),this._renderer._enableLighting=!1,this._renderer.ambientLightColors.length=0,this._renderer.specularColors=[1,1,1],this._renderer.directionalLightDirections.length=0,this._renderer.directionalLightDiffuseColors.length=0,this._renderer.directionalLightSpecularColors.length=0,this._renderer.pointLightPositions.length=0,this._renderer.pointLightDiffuseColors.length=0,this._renderer.pointLightSpecularColors.length=0,this._renderer.spotLightPositions.length=0,this._renderer.spotLightDirections.length=0,this._renderer.spotLightDiffuseColors.length=0,this._renderer.spotLightSpecularColors.length=0,this._renderer.spotLightAngle.length=0,this._renderer.spotLightConc.length=0,this._renderer.constantAttenuation=1,this._renderer.linearAttenuation=0,this._renderer.quadraticAttenuation=0,this._renderer._useShininess=1,this};var p=s.default;i.default=p},{"../core/constants":256,"../core/main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],313:[function(e,o,i){e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=(a=e("../core/main"))&&a.__esModule?a:{default:a};e("./p5.Geometry"),u.default.prototype.loadModel=function(s){u.default._validateParameters("loadModel",arguments);var l,h,p,c=s.slice(-4),d=(typeof arguments[1]=="boolean"?(l=arguments[1],h=arguments[2],p=arguments[3],arguments[4]!==void 0&&(c=arguments[4])):(l=!1,h=arguments[1],p=arguments[2],arguments[3]!==void 0&&(c=arguments[3])),new u.default.Geometry),f=(d.gid="".concat(s,"|").concat(l),this);return c.match(/\.stl$/i)?this.httpDo(s,"GET","arrayBuffer",function(m){(function(y,g){if(function(v){for(var b=new DataView(v),w=[115,111,108,105,100],_=0;_<5;_++)if(function(j,E,T){for(var R=0,M=j.length;R<M;R++)if(j[R]!==E.getUint8(T+R,!1))return;return 1}(w,b,_))return;return 1}(g))(function(v,b){for(var w,_,j,E,T,R,M,I=new DataView(b),D=I.getUint32(80,!0),L=!1,N=0;N<70;N++)I.getUint32(N,!1)===1129270351&&I.getUint8(N+4)===82&&I.getUint8(N+5)===61&&(L=!0,E=[],T=I.getUint8(N+6)/255,R=I.getUint8(N+7)/255,M=I.getUint8(N+8)/255);for(var W=0;W<D;W++){for(var q,H=84+50*W,B=I.getFloat32(H,!0),G=I.getFloat32(4+H,!0),V=I.getFloat32(8+H,!0),X=(L&&(q=I.getUint16(48+H,!0),j=32768&q?(w=T,_=R,M):(w=(31&q)/31,_=(q>>5&31)/31,(q>>10&31)/31)),new u.default.Vector(B,G,V)),te=1;te<=3;te++){var A=H+12*te,A=new u.default.Vector(I.getFloat32(A,!0),I.getFloat32(4+A,!0),I.getFloat32(8+A,!0));v.vertices.push(A),v.vertexNormals.push(X),L&&E.push(w,_,j)}v.faces.push([3*W,3*W+1,3*W+2]),v.uvs.push([0,0],[0,0],[0,0])}})(y,g);else{if(g=new DataView(g),!("TextDecoder"in window))return console.warn("Sorry, ASCII STL loading only works in browsers that support TextDecoder (https://caniuse.com/#feat=textencoder)");g=new TextDecoder("utf-8").decode(g).split(`
`),function(v,b){for(var w,_,j="",E=[],T=0;T<b.length;++T){for(var R=b[T].trim(),M=R.split(" "),I=0;I<M.length;++I)M[I]===""&&M.splice(I,1);if(M.length!==0)switch(j){case"":if(M[0]!=="solid")return console.error(R),console.error('Invalid state "'.concat(M[0],'", should be "solid"'));j="solid";break;case"solid":if(M[0]!=="facet"||M[1]!=="normal")return console.error(R),console.error('Invalid state "'.concat(M[0],'", should be "facet normal"'));w=new u.default.Vector(parseFloat(M[2]),parseFloat(M[3]),parseFloat(M[4])),v.vertexNormals.push(w,w,w),j="facet normal";break;case"facet normal":if(M[0]!=="outer"||M[1]!=="loop")return console.error(R),console.error('Invalid state "'.concat(M[0],'", should be "outer loop"'));j="vertex";break;case"vertex":if(M[0]==="vertex")_=new u.default.Vector(parseFloat(M[1]),parseFloat(M[2]),parseFloat(M[3])),v.vertices.push(_),v.uvs.push([0,0]),E.push(v.vertices.indexOf(_));else{if(M[0]!=="endloop")return console.error(R),console.error('Invalid state "'.concat(M[0],'", should be "vertex" or "endloop"'));v.faces.push(E),E=[],j="endloop"}break;case"endloop":if(M[0]!=="endfacet")return console.error(R),console.error('Invalid state "'.concat(M[0],'", should be "endfacet"'));j="endfacet";break;case"endfacet":if(M[0]!=="endsolid"){if(M[0]!=="facet"||M[1]!=="normal")return console.error(R),console.error('Invalid state "'.concat(M[0],'", should be "endsolid" or "facet normal"'));w=new u.default.Vector(parseFloat(M[2]),parseFloat(M[3]),parseFloat(M[4])),v.vertexNormals.push(w,w,w),j="facet normal"}break;default:console.error('Invalid state "'.concat(j,'"'))}}}(y,g)}})(d,m),l&&d.normalize(),f._decrementPreload(),typeof h=="function"&&h(d)},p):c.match(/\.obj$/i)?this.loadStrings(s,function(m){for(var y=d,g=m,v={v:[],vt:[],vn:[]},b={},w=0;w<g.length;++w){var _=g[w].trim().split(/\b\s+/);if(0<_.length){if(_[0]==="v"||_[0]==="vn"){var j=new u.default.Vector(parseFloat(_[1]),parseFloat(_[2]),parseFloat(_[3]));v[_[0]].push(j)}else if(_[0]==="vt")j=[parseFloat(_[1]),1-parseFloat(_[2])],v[_[0]].push(j);else if(_[0]==="f")for(var E=3;E<_.length;++E){for(var T=[],R=[1,E-1,E],M=0;M<R.length;++M){var I=_[R[M]],D=0;if(b[I]!==void 0)D=b[I];else{for(var L=I.split("/"),N=0;N<L.length;N++)L[N]=parseInt(L[N])-1;D=b[I]=y.vertices.length,y.vertices.push(v.v[L[0]].copy()),v.vt[L[1]]?y.uvs.push(v.vt[L[1]].slice()):y.uvs.push([0,0]),v.vn[L[2]]&&y.vertexNormals.push(v.vn[L[2]].copy())}T.push(D)}T[0]!==T[1]&&T[0]!==T[2]&&T[1]!==T[2]&&y.faces.push(T)}}}y.vertexNormals.length===0&&y.computeNormals(),l&&d.normalize(),f._decrementPreload(),typeof h=="function"&&h(d)},p):(u.default._friendlyFileLoadError(3,s),p?p():console.error("Sorry, the file type is invalid. Only OBJ and STL files are supported.")),d},u.default.prototype.model=function(s){this._assert3d("model"),u.default._validateParameters("model",arguments),0<s.vertices.length&&(this._renderer.geometryInHash(s.gid)||(s._makeTriangleEdges()._edgesToVertices(),this._renderer.createBuffers(s.gid,s)),this._renderer.drawBuffers(s.gid))};var a=u.default;i.default=a},{"../core/main":267,"./p5.Geometry":316,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.match":187,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193}],314:[function(e,o,i){function u(c){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(c)}function a(c){return(a=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(d){return u(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":u(d)})(c)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.join"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=(p=e("../core/main"))&&p.__esModule?p:{default:p},l=function(c){if(c&&c.__esModule)return c;if(c===null||a(c)!=="object"&&typeof c!="function")return{default:c};var d=h();if(d&&d.has(c))return d.get(c);var f,m={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(f in c){var g;Object.prototype.hasOwnProperty.call(c,f)&&((g=y?Object.getOwnPropertyDescriptor(c,f):null)&&(g.get||g.set)?Object.defineProperty(m,f,g):m[f]=c[f])}return m.default=c,d&&d.set(c,m),m}(e("../core/constants"));function h(){var c;return typeof WeakMap!="function"?null:(c=new WeakMap,h=function(){return c},c)}e("./p5.Texture"),s.default.prototype.loadShader=function(c,d,f,m){s.default._validateParameters("loadShader",arguments),m=m||console.error;function y(){v._decrementPreload(),f&&f(g)}var g=new s.default.Shader,v=this,b=!1,w=!1;return this.loadStrings(c,function(_){g._vertSrc=_.join(`
`),w=!0,b&&y()},m),this.loadStrings(d,function(_){g._fragSrc=_.join(`
`),b=!0,w&&y()},m),g},s.default.prototype.createShader=function(c,d){return this._assert3d("createShader"),s.default._validateParameters("createShader",arguments),new s.default.Shader(this._renderer,c,d)},s.default.prototype.shader=function(c){return this._assert3d("shader"),s.default._validateParameters("shader",arguments),c._renderer===void 0&&(c._renderer=this._renderer),c.init(),c.isStrokeShader()?this._renderer.userStrokeShader=c:(this._renderer.userFillShader=c,this._renderer._useNormalMaterial=!1),this},s.default.prototype.resetShader=function(){return this._renderer.userFillShader=this._renderer.userStrokeShader=null,this},s.default.prototype.texture=function(c){return this._assert3d("texture"),s.default._validateParameters("texture",arguments),c.gifProperties&&c._animateGif(this),this._renderer.drawMode=l.TEXTURE,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!1,this._renderer._tex=c,this._renderer._setProperty("_doFill",!0),this},s.default.prototype.textureMode=function(c){c!==l.IMAGE&&c!==l.NORMAL?console.warn("You tried to set ".concat(c," textureMode only supports IMAGE & NORMAL ")):this._renderer.textureMode=c},s.default.prototype.textureWrap=function(c){for(var d=1<arguments.length&&arguments[1]!==void 0?arguments[1]:c,f=(this._renderer.textureWrapX=c,this._renderer.textureWrapY=d,this._renderer.textures),m=0;m<f.length;m++)f[m].setWrapMode(c,d)},s.default.prototype.normalMaterial=function(){this._assert3d("normalMaterial");for(var c=arguments.length,d=new Array(c),f=0;f<c;f++)d[f]=arguments[f];return s.default._validateParameters("normalMaterial",d),this._renderer.drawMode=l.FILL,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!0,this._renderer.curFillColor=[1,1,1,1],this._renderer._setProperty("_doFill",!0),this.noStroke(),this},s.default.prototype.ambientMaterial=function(c,d,f){this._assert3d("ambientMaterial"),s.default._validateParameters("ambientMaterial",arguments);var m=s.default.prototype.color.apply(this,arguments);return this._renderer.curAmbientColor=m._array,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._tex=null,this._renderer._setProperty("_doFill",!0),this},s.default.prototype.emissiveMaterial=function(c,d,f,m){this._assert3d("emissiveMaterial"),s.default._validateParameters("emissiveMaterial",arguments);var y=s.default.prototype.color.apply(this,arguments);return this._renderer.curEmissiveColor=y._array,this._renderer._useEmissiveMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._tex=null,this},s.default.prototype.specularMaterial=function(c,d,f,m){this._assert3d("specularMaterial"),s.default._validateParameters("specularMaterial",arguments);var y=s.default.prototype.color.apply(this,arguments);return this._renderer.curSpecularColor=y._array,this._renderer._useSpecularMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._tex=null,this},s.default.prototype.shininess=function(c){return this._assert3d("shininess"),s.default._validateParameters("shininess",arguments),this._renderer._useShininess=c=c<1?1:c,this},s.default.RendererGL.prototype._applyColorBlend=function(c){var d=this.GL,f=this.drawMode===l.TEXTURE||this.curBlendMode!==l.BLEND||c[c.length-1]<1||this._isErasing;return f!==this._isBlending&&(f||this.curBlendMode!==l.BLEND&&this.curBlendMode!==l.ADD?d.enable(d.BLEND):d.disable(d.BLEND),d.depthMask(!0),this._isBlending=f),this._applyBlendMode(),c},s.default.RendererGL.prototype._applyBlendMode=function(){if(this._cachedBlendMode!==this.curBlendMode){var c=this.GL;switch(this.curBlendMode){case l.BLEND:c.blendEquation(c.FUNC_ADD),c.blendFunc(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA);break;case l.ADD:c.blendEquation(c.FUNC_ADD),c.blendFunc(c.SRC_ALPHA,c.ONE);break;case l.REMOVE:c.blendEquation(c.FUNC_REVERSE_SUBTRACT),c.blendFunc(c.SRC_ALPHA,c.DST_ALPHA);break;case l.MULTIPLY:c.blendEquationSeparate(c.FUNC_ADD,c.FUNC_ADD),c.blendFuncSeparate(c.ZERO,c.SRC_COLOR,c.ONE,c.ONE);break;case l.SCREEN:c.blendEquationSeparate(c.FUNC_ADD,c.FUNC_ADD),c.blendFuncSeparate(c.ONE_MINUS_DST_COLOR,c.ONE,c.ONE,c.ONE);break;case l.EXCLUSION:c.blendEquationSeparate(c.FUNC_ADD,c.FUNC_ADD),c.blendFuncSeparate(c.ONE_MINUS_DST_COLOR,c.ONE_MINUS_SRC_COLOR,c.ONE,c.ONE);break;case l.REPLACE:c.blendEquation(c.FUNC_ADD),c.blendFunc(c.ONE,c.ZERO);break;case l.SUBTRACT:c.blendEquationSeparate(c.FUNC_REVERSE_SUBTRACT,c.FUNC_ADD),c.blendFuncSeparate(c.SRC_ALPHA,c.ONE,c.ONE,c.ONE);break;case l.DARKEST:this.blendExt?(c.blendEquationSeparate(this.blendExt.MIN_EXT,c.FUNC_ADD),c.blendFuncSeparate(c.ONE,c.ONE,c.ONE,c.ONE)):console.warn("blendMode(DARKEST) does not work in your browser in WEBGL mode.");break;case l.LIGHTEST:this.blendExt?(c.blendEquationSeparate(this.blendExt.MAX_EXT,c.FUNC_ADD),c.blendFuncSeparate(c.ONE,c.ONE,c.ONE,c.ONE)):console.warn("blendMode(LIGHTEST) does not work in your browser in WEBGL mode.");break;default:console.error("Oops! Somehow RendererGL set curBlendMode to an unsupported mode.")}this._isErasing||(this._cachedBlendMode=this.curBlendMode)}};var p=s.default;i.default=p},{"../core/constants":256,"../core/main":267,"./p5.Texture":323,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],315:[function(e,o,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=(e=e("../core/main"))&&e.__esModule?e:{default:e};u.default.prototype.camera=function(){var a;this._assert3d("camera");for(var s=arguments.length,l=new Array(s),h=0;h<s;h++)l[h]=arguments[h];return u.default._validateParameters("camera",l),(a=this._renderer._curCamera).camera.apply(a,l),this},u.default.prototype.perspective=function(){var a;this._assert3d("perspective");for(var s=arguments.length,l=new Array(s),h=0;h<s;h++)l[h]=arguments[h];return u.default._validateParameters("perspective",l),(a=this._renderer._curCamera).perspective.apply(a,l),this},u.default.prototype.ortho=function(){var a;this._assert3d("ortho");for(var s=arguments.length,l=new Array(s),h=0;h<s;h++)l[h]=arguments[h];return u.default._validateParameters("ortho",l),(a=this._renderer._curCamera).ortho.apply(a,l),this},u.default.prototype.frustum=function(){var a;this._assert3d("frustum");for(var s=arguments.length,l=new Array(s),h=0;h<s;h++)l[h]=arguments[h];return u.default._validateParameters("frustum",l),(a=this._renderer._curCamera).frustum.apply(a,l),this},u.default.prototype.createCamera=function(){this._assert3d("createCamera");var a=new u.default.Camera(this._renderer);return a._computeCameraDefaultSettings(),a._setDefaultCamera(),this._renderer._curCamera=a},u.default.Camera=function(a){this._renderer=a,this.cameraType="default",this.cameraMatrix=new u.default.Matrix,this.projMatrix=new u.default.Matrix},u.default.Camera.prototype.perspective=function(p,s,l,h){this.cameraType=0<arguments.length?"custom":"default",p===void 0?(p=this.defaultCameraFOV,this.cameraFOV=p):this.cameraFOV=this._renderer._pInst._toRadians(p),s===void 0&&(s=this.defaultAspectRatio),l===void 0&&(l=this.defaultCameraNear),h===void 0&&(h=this.defaultCameraFar),l<=1e-4&&(l=.01,console.log("Avoid perspective near plane values close to or below 0. Setting value to 0.01.")),h<l&&console.log("Perspective far plane value is less than near plane value. Nothing will be shown."),this.aspectRatio=s,this.cameraNear=l,this.cameraFar=h,this.projMatrix=u.default.Matrix.identity();var p=1/Math.tan(this.cameraFOV/2),c=1/(this.cameraNear-this.cameraFar);this.projMatrix.set(p/s,0,0,0,0,-p,0,0,0,0,(h+l)*c,-1,0,0,2*h*l*c,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15])},u.default.Camera.prototype.ortho=function(b,v,l,h,p,c){b===void 0&&(b=-this._renderer.width/2),v===void 0&&(v=+this._renderer.width/2),l===void 0&&(l=-this._renderer.height/2),p===void 0&&(p=0);var w=v-b,d=(h=h===void 0?+this._renderer.height/2:h)-l,f=(c=c===void 0?Math.max(this._renderer.width,this._renderer.height):c)-p,m=2/w,y=2/d,g=-2/f,v=-(v+b)/w,b=-(h+l)/d,w=-(c+p)/f;this.projMatrix=u.default.Matrix.identity(),this.projMatrix.set(m,0,0,0,0,-y,0,0,0,0,g,0,v,b,w,1),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom"},u.default.Camera.prototype.frustum=function(b,v,l,h,p,c){b===void 0&&(b=-this._renderer.width/2),v===void 0&&(v=+this._renderer.width/2),l===void 0&&(l=-this._renderer.height/2),p===void 0&&(p=0);var w=v-b,d=(h=h===void 0?+this._renderer.height/2:h)-l,f=(c=c===void 0?Math.max(this._renderer.width,this._renderer.height):c)-p,m=2*p/w,y=2*p/d,g=-2*c*p/f,v=(v+b)/w,b=(h+l)/d,w=-(c+p)/f;this.projMatrix=u.default.Matrix.identity(),this.projMatrix.set(m,0,0,0,0,y,0,0,v,b,w,-1,0,0,g,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom"},u.default.Camera.prototype._rotateView=function(m,s,l,h){var p=this.centerX,c=this.centerY,d=this.centerZ,f=(p-=this.eyeX,c-=this.eyeY,d-=this.eyeZ,u.default.Matrix.identity(this._renderer._pInst)),m=(f.rotate(this._renderer._pInst._toRadians(m),s,l,h),[p*f.mat4[0]+c*f.mat4[4]+d*f.mat4[8],p*f.mat4[1]+c*f.mat4[5]+d*f.mat4[9],p*f.mat4[2]+c*f.mat4[6]+d*f.mat4[10]]);m[0]+=this.eyeX,m[1]+=this.eyeY,m[2]+=this.eyeZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,m[0],m[1],m[2],this.upX,this.upY,this.upZ)},u.default.Camera.prototype.pan=function(a){var s=this._getLocalAxes();this._rotateView(a,s.y[0],s.y[1],s.y[2])},u.default.Camera.prototype.tilt=function(a){var s=this._getLocalAxes();this._rotateView(a,s.x[0],s.x[1],s.x[2])},u.default.Camera.prototype.lookAt=function(a,s,l){this.camera(this.eyeX,this.eyeY,this.eyeZ,a,s,l,this.upX,this.upY,this.upZ)},u.default.Camera.prototype.camera=function(a,s,l,h,p,c,d,f,m){return a===void 0&&(a=this.defaultEyeX,s=this.defaultEyeY,l=this.defaultEyeZ,h=a,p=s,f=1,m=d=c=0),this.eyeX=a,this.eyeY=s,this.eyeZ=l,h!==void 0&&(this.centerX=h,this.centerY=p,this.centerZ=c),d!==void 0&&(this.upX=d,this.upY=f,this.upZ=m),h=this._getLocalAxes(),this.cameraMatrix.set(h.x[0],h.y[0],h.z[0],0,h.x[1],h.y[1],h.z[1],0,h.x[2],h.y[2],h.z[2],0,0,0,0,1),p=-a,this.cameraMatrix.translate([p,-s,-l]),this._isActive()&&this._renderer.uMVMatrix.set(this.cameraMatrix.mat4[0],this.cameraMatrix.mat4[1],this.cameraMatrix.mat4[2],this.cameraMatrix.mat4[3],this.cameraMatrix.mat4[4],this.cameraMatrix.mat4[5],this.cameraMatrix.mat4[6],this.cameraMatrix.mat4[7],this.cameraMatrix.mat4[8],this.cameraMatrix.mat4[9],this.cameraMatrix.mat4[10],this.cameraMatrix.mat4[11],this.cameraMatrix.mat4[12],this.cameraMatrix.mat4[13],this.cameraMatrix.mat4[14],this.cameraMatrix.mat4[15]),this},u.default.Camera.prototype.move=function(h,p,l){var c=this._getLocalAxes(),h=[c.x[0]*h,c.x[1]*h,c.x[2]*h],p=[c.y[0]*p,c.y[1]*p,c.y[2]*p],c=[c.z[0]*l,c.z[1]*l,c.z[2]*l];this.camera(this.eyeX+h[0]+p[0]+c[0],this.eyeY+h[1]+p[1]+c[1],this.eyeZ+h[2]+p[2]+c[2],this.centerX+h[0]+p[0]+c[0],this.centerY+h[1]+p[1]+c[1],this.centerZ+h[2]+p[2]+c[2],0,1,0)},u.default.Camera.prototype.setPosition=function(a,s,l){var h=a-this.eyeX,p=s-this.eyeY,c=l-this.eyeZ;this.camera(a,s,l,this.centerX+h,this.centerY+p,this.centerZ+c,0,1,0)},u.default.Camera.prototype._computeCameraDefaultSettings=function(){this.defaultCameraFOV=60/180*Math.PI,this.defaultAspectRatio=this._renderer.width/this._renderer.height,this.defaultEyeX=0,this.defaultEyeY=0,this.defaultEyeZ=this._renderer.height/2/Math.tan(this.defaultCameraFOV/2),this.defaultCenterX=0,this.defaultCenterY=0,this.defaultCenterZ=0,this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ},u.default.Camera.prototype._setDefaultCamera=function(){this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.eyeX=this.defaultEyeX,this.eyeY=this.defaultEyeY,this.eyeZ=this.defaultEyeZ,this.centerX=this.defaultCenterX,this.centerY=this.defaultCenterY,this.centerZ=this.defaultCenterZ,this.upX=0,this.upY=1,this.upZ=0,this.cameraNear=this.defaultCameraNear,this.cameraFar=this.defaultCameraFar,this.perspective(),this.camera(),this.cameraType="default"},u.default.Camera.prototype._resize=function(){this.cameraType==="default"?(this._computeCameraDefaultSettings(),this._setDefaultCamera()):this.perspective(this.cameraFOV,this._renderer.width/this._renderer.height)},u.default.Camera.prototype.copy=function(){var a=new u.default.Camera(this._renderer);return a.cameraFOV=this.cameraFOV,a.aspectRatio=this.aspectRatio,a.eyeX=this.eyeX,a.eyeY=this.eyeY,a.eyeZ=this.eyeZ,a.centerX=this.centerX,a.centerY=this.centerY,a.centerZ=this.centerZ,a.cameraNear=this.cameraNear,a.cameraFar=this.cameraFar,a.cameraType=this.cameraType,a.cameraMatrix=this.cameraMatrix.copy(),a.projMatrix=this.projMatrix.copy(),a},u.default.Camera.prototype._getLocalAxes=function(){var a=this.eyeX-this.centerX,s=this.eyeY-this.centerY,l=this.eyeZ-this.centerZ,d=Math.sqrt(a*a+s*s+l*l),d=(d!==0&&(a/=d,s/=d,l/=d),this.upX),h=(f=this.upY)*l-(m=this.upZ)*s,p=-d*l+m*a,c=d*s-f*a,d=s*c-l*p,f=-a*c+l*h,m=a*p-s*h,y=Math.sqrt(h*h+p*p+c*c),y=(y!==0&&(h/=y,p/=y,c/=y),Math.sqrt(d*d+f*f+m*m));return y!==0&&(d/=y,f/=y,m/=y),{x:[h,p,c],y:[d,f,m],z:[a,s,l]}},u.default.Camera.prototype._orbit=function(f,s,m){var p=this.eyeX-this.centerX,d=this.eyeY-this.centerY,c=this.eyeZ-this.centerZ,h=Math.sqrt(p*p+d*d+c*c),p=Math.atan2(p,c),c=Math.acos(Math.max(-1,Math.min(1,d/h))),d=(p+=f,(h+=m)<0&&(h=.1),(c+=s)>Math.PI?c=Math.PI:c<=0&&(c=.001),Math.sin(c)*h*Math.sin(p)),f=Math.cos(c)*h,m=Math.sin(c)*h*Math.cos(p);this.camera(d+this.centerX,f+this.centerY,m+this.centerZ,this.centerX,this.centerY,this.centerZ,0,1,0)},u.default.Camera.prototype._isActive=function(){return this===this._renderer._curCamera},u.default.prototype.setCamera=function(a){this._renderer._curCamera=a,this._renderer.uPMatrix.set(a.projMatrix.mat4[0],a.projMatrix.mat4[1],a.projMatrix.mat4[2],a.projMatrix.mat4[3],a.projMatrix.mat4[4],a.projMatrix.mat4[5],a.projMatrix.mat4[6],a.projMatrix.mat4[7],a.projMatrix.mat4[8],a.projMatrix.mat4[9],a.projMatrix.mat4[10],a.projMatrix.mat4[11],a.projMatrix.mat4[12],a.projMatrix.mat4[13],a.projMatrix.mat4[14],a.projMatrix.mat4[15])},e=u.default.Camera,i.default=e},{"../core/main":267}],316:[function(e,o,i){e("core-js/modules/es.string.sub"),e("core-js/modules/es.string.sub"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=(e=e("../core/main"))&&e.__esModule?e:{default:e};u.default.Geometry=function(a,s,l){return this.vertices=[],this.lineVertices=[],this.lineNormals=[],this.vertexNormals=[],this.faces=[],this.uvs=[],this.edges=[],this.vertexColors=[],this.detailX=a!==void 0?a:1,this.detailY=s!==void 0?s:1,this.dirtyFlags={},l instanceof Function&&l.call(this),this},u.default.Geometry.prototype.reset=function(){this.lineVertices.length=0,this.lineNormals.length=0,this.vertices.length=0,this.edges.length=0,this.vertexColors.length=0,this.vertexNormals.length=0,this.uvs.length=0,this.dirtyFlags={}},u.default.Geometry.prototype.computeFaces=function(){this.faces.length=0;for(var a,s,l,h=this.detailX+1,p=0;p<this.detailY;p++)for(var c=0;c<this.detailX;c++)s=(p+1)*h+c+1,this.faces.push([p*h+c,a=p*h+c+1,l=(p+1)*h+c]),this.faces.push([l,a,s]);return this},u.default.Geometry.prototype._getFaceNormal=function(s){var s=this.faces[s],l=this.vertices[s[0]],p=this.vertices[s[1]],s=this.vertices[s[2]],p=u.default.Vector.sub(p,l),s=u.default.Vector.sub(s,l),l=u.default.Vector.cross(p,s),h=u.default.Vector.mag(l),p=h/(u.default.Vector.mag(p)*u.default.Vector.mag(s));return p===0||isNaN(p)?(console.warn("p5.Geometry.prototype._getFaceNormal:","face has colinear sides or a repeated vertex"),l):(1<p&&(p=1),l.mult(Math.asin(p)/h))},u.default.Geometry.prototype.computeNormals=function(){for(var a=this.vertexNormals,s=this.vertices,l=this.faces,h=a.length=0;h<s.length;++h)a.push(new u.default.Vector);for(var p=0;p<l.length;++p)for(var c=l[p],d=this._getFaceNormal(p),f=0;f<3;++f)a[c[f]].add(d);for(h=0;h<s.length;++h)a[h].normalize();return this},u.default.Geometry.prototype.averageNormals=function(){for(var a=0;a<=this.detailY;a++){var s=this.detailX+1,l=u.default.Vector.add(this.vertexNormals[a*s],this.vertexNormals[a*s+this.detailX]),l=u.default.Vector.div(l,2);this.vertexNormals[a*s]=l,this.vertexNormals[a*s+this.detailX]=l}return this},u.default.Geometry.prototype.averagePoleNormals=function(){for(var a=new u.default.Vector(0,0,0),s=0;s<this.detailX;s++)a.add(this.vertexNormals[s]);for(var a=u.default.Vector.div(a,this.detailX),l=0;l<this.detailX;l++)this.vertexNormals[l]=a;a=new u.default.Vector(0,0,0);for(var h=this.vertices.length-1;h>this.vertices.length-1-this.detailX;h--)a.add(this.vertexNormals[h]);a=u.default.Vector.div(a,this.detailX);for(var p=this.vertices.length-1;p>this.vertices.length-1-this.detailX;p--)this.vertexNormals[p]=a;return this},u.default.Geometry.prototype._makeTriangleEdges=function(){if(this.edges.length=0,Array.isArray(this.strokeIndices))for(var a=0,s=this.strokeIndices.length;a<s;a++)this.edges.push(this.strokeIndices[a]);else for(var l=0;l<this.faces.length;l++)this.edges.push([this.faces[l][0],this.faces[l][1]]),this.edges.push([this.faces[l][1],this.faces[l][2]]),this.edges.push([this.faces[l][2],this.faces[l][0]]);return this},u.default.Geometry.prototype._edgesToVertices=function(){this.lineVertices.length=0;for(var a=this.lineNormals.length=0;a<this.edges.length;a++){var l=this.vertices[this.edges[a][0]],p=this.vertices[this.edges[a][1]],d=p.copy().sub(l).normalize(),s=l.array(),l=l.array(),h=p.array(),p=p.array(),c=d.array(),d=d.array();c.push(1),d.push(-1),this.lineNormals.push(c,d,c,c,d,d),this.lineVertices.push(s,l,h,h,l,p)}return this},u.default.Geometry.prototype.normalize=function(){if(0<this.vertices.length){for(var a=this.vertices[0].copy(),s=this.vertices[0].copy(),l=0;l<this.vertices.length;l++)a.x=Math.max(a.x,this.vertices[l].x),s.x=Math.min(s.x,this.vertices[l].x),a.y=Math.max(a.y,this.vertices[l].y),s.y=Math.min(s.y,this.vertices[l].y),a.z=Math.max(a.z,this.vertices[l].z),s.z=Math.min(s.z,this.vertices[l].z);for(var h=u.default.Vector.lerp(a,s,.5),p=u.default.Vector.sub(a,s),c=200/Math.max(Math.max(p.x,p.y),p.z),d=0;d<this.vertices.length;d++)this.vertices[d].sub(h),this.vertices[d].mult(c)}return this},e=u.default.Geometry,i.default=e},{"../core/main":267,"core-js/modules/es.string.sub":192}],317:[function(l,o,i){l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.typed-array.float32-array"),l("core-js/modules/es.typed-array.copy-within"),l("core-js/modules/es.typed-array.every"),l("core-js/modules/es.typed-array.fill"),l("core-js/modules/es.typed-array.filter"),l("core-js/modules/es.typed-array.find"),l("core-js/modules/es.typed-array.find-index"),l("core-js/modules/es.typed-array.for-each"),l("core-js/modules/es.typed-array.includes"),l("core-js/modules/es.typed-array.index-of"),l("core-js/modules/es.typed-array.iterator"),l("core-js/modules/es.typed-array.join"),l("core-js/modules/es.typed-array.last-index-of"),l("core-js/modules/es.typed-array.map"),l("core-js/modules/es.typed-array.reduce"),l("core-js/modules/es.typed-array.reduce-right"),l("core-js/modules/es.typed-array.reverse"),l("core-js/modules/es.typed-array.set"),l("core-js/modules/es.typed-array.slice"),l("core-js/modules/es.typed-array.some"),l("core-js/modules/es.typed-array.sort"),l("core-js/modules/es.typed-array.subarray"),l("core-js/modules/es.typed-array.to-locale-string"),l("core-js/modules/es.typed-array.to-string"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.typed-array.float32-array"),l("core-js/modules/es.typed-array.copy-within"),l("core-js/modules/es.typed-array.every"),l("core-js/modules/es.typed-array.fill"),l("core-js/modules/es.typed-array.filter"),l("core-js/modules/es.typed-array.find"),l("core-js/modules/es.typed-array.find-index"),l("core-js/modules/es.typed-array.for-each"),l("core-js/modules/es.typed-array.includes"),l("core-js/modules/es.typed-array.index-of"),l("core-js/modules/es.typed-array.iterator"),l("core-js/modules/es.typed-array.join"),l("core-js/modules/es.typed-array.last-index-of"),l("core-js/modules/es.typed-array.map"),l("core-js/modules/es.typed-array.reduce"),l("core-js/modules/es.typed-array.reduce-right"),l("core-js/modules/es.typed-array.reverse"),l("core-js/modules/es.typed-array.set"),l("core-js/modules/es.typed-array.slice"),l("core-js/modules/es.typed-array.some"),l("core-js/modules/es.typed-array.sort"),l("core-js/modules/es.typed-array.subarray"),l("core-js/modules/es.typed-array.to-locale-string"),l("core-js/modules/es.typed-array.to-string"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=(l=l("../core/main"))&&l.__esModule?l:{default:l},a=Array,s=function(h){return h instanceof Array},l=(typeof Float32Array<"u"&&(a=Float32Array,s=function(h){return h instanceof Array||h instanceof Float32Array}),u.default.Matrix=function(){for(var h=new Array(arguments.length),p=0;p<h.length;++p)h[p]=arguments[p];return h.length&&h[h.length-1]instanceof u.default&&(this.p5=h[h.length-1]),h[0]==="mat3"?this.mat3=Array.isArray(h[1])?h[1]:new a([1,0,0,0,1,0,0,0,1]):this.mat4=Array.isArray(h[0])?h[0]:new a([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this},u.default.Matrix.prototype.set=function(h){return h instanceof u.default.Matrix?this.mat4=h.mat4:s(h)?this.mat4=h:arguments.length===16&&(this.mat4[0]=h,this.mat4[1]=arguments[1],this.mat4[2]=arguments[2],this.mat4[3]=arguments[3],this.mat4[4]=arguments[4],this.mat4[5]=arguments[5],this.mat4[6]=arguments[6],this.mat4[7]=arguments[7],this.mat4[8]=arguments[8],this.mat4[9]=arguments[9],this.mat4[10]=arguments[10],this.mat4[11]=arguments[11],this.mat4[12]=arguments[12],this.mat4[13]=arguments[13],this.mat4[14]=arguments[14],this.mat4[15]=arguments[15]),this},u.default.Matrix.prototype.get=function(){return new u.default.Matrix(this.mat4,this.p5)},u.default.Matrix.prototype.copy=function(){var h=new u.default.Matrix(this.p5);return h.mat4[0]=this.mat4[0],h.mat4[1]=this.mat4[1],h.mat4[2]=this.mat4[2],h.mat4[3]=this.mat4[3],h.mat4[4]=this.mat4[4],h.mat4[5]=this.mat4[5],h.mat4[6]=this.mat4[6],h.mat4[7]=this.mat4[7],h.mat4[8]=this.mat4[8],h.mat4[9]=this.mat4[9],h.mat4[10]=this.mat4[10],h.mat4[11]=this.mat4[11],h.mat4[12]=this.mat4[12],h.mat4[13]=this.mat4[13],h.mat4[14]=this.mat4[14],h.mat4[15]=this.mat4[15],h},u.default.Matrix.identity=function(h){return new u.default.Matrix(h)},u.default.Matrix.prototype.transpose=function(h){var p,c,d,f,m,y;return h instanceof u.default.Matrix?(p=h.mat4[1],c=h.mat4[2],d=h.mat4[3],f=h.mat4[6],m=h.mat4[7],y=h.mat4[11],this.mat4[0]=h.mat4[0],this.mat4[1]=h.mat4[4],this.mat4[2]=h.mat4[8],this.mat4[3]=h.mat4[12],this.mat4[4]=p,this.mat4[5]=h.mat4[5],this.mat4[6]=h.mat4[9],this.mat4[7]=h.mat4[13],this.mat4[8]=c,this.mat4[9]=f,this.mat4[10]=h.mat4[10],this.mat4[11]=h.mat4[14],this.mat4[12]=d,this.mat4[13]=m,this.mat4[14]=y,this.mat4[15]=h.mat4[15]):s(h)&&(p=h[1],c=h[2],d=h[3],f=h[6],m=h[7],y=h[11],this.mat4[0]=h[0],this.mat4[1]=h[4],this.mat4[2]=h[8],this.mat4[3]=h[12],this.mat4[4]=p,this.mat4[5]=h[5],this.mat4[6]=h[9],this.mat4[7]=h[13],this.mat4[8]=c,this.mat4[9]=f,this.mat4[10]=h[10],this.mat4[11]=h[14],this.mat4[12]=d,this.mat4[13]=m,this.mat4[14]=y,this.mat4[15]=h[15]),this},u.default.Matrix.prototype.invert=function(I){I instanceof u.default.Matrix?(p=I.mat4[0],c=I.mat4[1],d=I.mat4[2],f=I.mat4[3],m=I.mat4[4],y=I.mat4[5],g=I.mat4[6],v=I.mat4[7],b=I.mat4[8],w=I.mat4[9],_=I.mat4[10],j=I.mat4[11],E=I.mat4[12],T=I.mat4[13],R=I.mat4[14],M=I.mat4[15]):s(I)&&(p=I[0],c=I[1],d=I[2],f=I[3],m=I[4],y=I[5],g=I[6],v=I[7],b=I[8],w=I[9],_=I[10],j=I[11],E=I[12],T=I[13],R=I[14],M=I[15]);var p,c,d,f,m,y,g,v,b,w,_,j,E,T,R,M,I=p*y-c*m,D=p*g-d*m,L=p*v-f*m,N=c*g-d*y,W=c*v-f*y,q=d*v-f*g,H=b*T-w*E,B=b*R-_*E,G=b*M-j*E,V=w*R-_*T,X=w*M-j*T,te=_*M-j*R,A=I*te-D*X+L*V+N*G-W*B+q*H;return A?(this.mat4[0]=(y*te-g*X+v*V)*(A=1/A),this.mat4[1]=(d*X-c*te-f*V)*A,this.mat4[2]=(T*q-R*W+M*N)*A,this.mat4[3]=(_*W-w*q-j*N)*A,this.mat4[4]=(g*G-m*te-v*B)*A,this.mat4[5]=(p*te-d*G+f*B)*A,this.mat4[6]=(R*L-E*q-M*D)*A,this.mat4[7]=(b*q-_*L+j*D)*A,this.mat4[8]=(m*X-y*G+v*H)*A,this.mat4[9]=(c*G-p*X-f*H)*A,this.mat4[10]=(E*W-T*L+M*I)*A,this.mat4[11]=(w*L-b*W-j*I)*A,this.mat4[12]=(y*B-m*V-g*H)*A,this.mat4[13]=(p*V-c*B+d*H)*A,this.mat4[14]=(T*D-E*N-R*I)*A,this.mat4[15]=(b*N-w*D+_*I)*A,this):null},u.default.Matrix.prototype.invert3x3=function(){var h=this.mat3[0],p=this.mat3[1],c=this.mat3[2],d=this.mat3[3],f=this.mat3[4],m=this.mat3[5],y=this.mat3[6],g=this.mat3[7],v=this.mat3[8],b=v*f-m*g,w=-v*d+m*y,_=g*d-f*y,j=h*b+p*w+c*_;return j?(this.mat3[0]=b*(j=1/j),this.mat3[1]=(-v*p+c*g)*j,this.mat3[2]=(m*p-c*f)*j,this.mat3[3]=w*j,this.mat3[4]=(v*h-c*y)*j,this.mat3[5]=(-m*h+c*d)*j,this.mat3[6]=_*j,this.mat3[7]=(-g*h+p*y)*j,this.mat3[8]=(f*h-p*d)*j,this):null},u.default.Matrix.prototype.transpose3x3=function(h){var p=h[1],c=h[2],d=h[5];return this.mat3[1]=h[3],this.mat3[2]=h[6],this.mat3[3]=p,this.mat3[5]=h[7],this.mat3[6]=c,this.mat3[7]=d,this},u.default.Matrix.prototype.inverseTranspose=function(h){if(this.mat3===void 0?console.error("sorry, this function only works with mat3"):(this.mat3[0]=h.mat4[0],this.mat3[1]=h.mat4[1],this.mat3[2]=h.mat4[2],this.mat3[3]=h.mat4[4],this.mat3[4]=h.mat4[5],this.mat3[5]=h.mat4[6],this.mat3[6]=h.mat4[8],this.mat3[7]=h.mat4[9],this.mat3[8]=h.mat4[10]),h=this.invert3x3(),h)h.transpose3x3(this.mat3);else for(var p=0;p<9;p++)this.mat3[p]=0;return this},u.default.Matrix.prototype.determinant=function(){var h=this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4],p=this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4],c=this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4],d=this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5],f=this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5],m=this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6],y=this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12],g=this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12],v=this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12],b=this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13],w=this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13];return h*(this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14])-p*w+c*b+d*v-f*g+m*y},u.default.Matrix.prototype.mult=function(c){var p;if(c===this||c===this.mat4)p=this.copy().mat4;else if(c instanceof u.default.Matrix)p=c.mat4;else if(s(c))p=c;else{if(arguments.length!==16)return;p=arguments}var c=this.mat4[0],d=this.mat4[1],f=this.mat4[2],m=this.mat4[3];return this.mat4[0]=c*p[0]+d*p[4]+f*p[8]+m*p[12],this.mat4[1]=c*p[1]+d*p[5]+f*p[9]+m*p[13],this.mat4[2]=c*p[2]+d*p[6]+f*p[10]+m*p[14],this.mat4[3]=c*p[3]+d*p[7]+f*p[11]+m*p[15],c=this.mat4[4],d=this.mat4[5],f=this.mat4[6],m=this.mat4[7],this.mat4[4]=c*p[0]+d*p[4]+f*p[8]+m*p[12],this.mat4[5]=c*p[1]+d*p[5]+f*p[9]+m*p[13],this.mat4[6]=c*p[2]+d*p[6]+f*p[10]+m*p[14],this.mat4[7]=c*p[3]+d*p[7]+f*p[11]+m*p[15],c=this.mat4[8],d=this.mat4[9],f=this.mat4[10],m=this.mat4[11],this.mat4[8]=c*p[0]+d*p[4]+f*p[8]+m*p[12],this.mat4[9]=c*p[1]+d*p[5]+f*p[9]+m*p[13],this.mat4[10]=c*p[2]+d*p[6]+f*p[10]+m*p[14],this.mat4[11]=c*p[3]+d*p[7]+f*p[11]+m*p[15],c=this.mat4[12],d=this.mat4[13],f=this.mat4[14],m=this.mat4[15],this.mat4[12]=c*p[0]+d*p[4]+f*p[8]+m*p[12],this.mat4[13]=c*p[1]+d*p[5]+f*p[9]+m*p[13],this.mat4[14]=c*p[2]+d*p[6]+f*p[10]+m*p[14],this.mat4[15]=c*p[3]+d*p[7]+f*p[11]+m*p[15],this},u.default.Matrix.prototype.apply=function(c){var p;if(c===this||c===this.mat4)p=this.copy().mat4;else if(c instanceof u.default.Matrix)p=c.mat4;else if(s(c))p=c;else{if(arguments.length!==16)return;p=arguments}var c=this.mat4,d=c[0],f=c[4],m=c[8],y=c[12],d=(c[0]=p[0]*d+p[1]*f+p[2]*m+p[3]*y,c[4]=p[4]*d+p[5]*f+p[6]*m+p[7]*y,c[8]=p[8]*d+p[9]*f+p[10]*m+p[11]*y,c[12]=p[12]*d+p[13]*f+p[14]*m+p[15]*y,c[1]),f=c[5],m=c[9],y=c[13],d=(c[1]=p[0]*d+p[1]*f+p[2]*m+p[3]*y,c[5]=p[4]*d+p[5]*f+p[6]*m+p[7]*y,c[9]=p[8]*d+p[9]*f+p[10]*m+p[11]*y,c[13]=p[12]*d+p[13]*f+p[14]*m+p[15]*y,c[2]),f=c[6],m=c[10],y=c[14],d=(c[2]=p[0]*d+p[1]*f+p[2]*m+p[3]*y,c[6]=p[4]*d+p[5]*f+p[6]*m+p[7]*y,c[10]=p[8]*d+p[9]*f+p[10]*m+p[11]*y,c[14]=p[12]*d+p[13]*f+p[14]*m+p[15]*y,c[3]),f=c[7],m=c[11],y=c[15];return c[3]=p[0]*d+p[1]*f+p[2]*m+p[3]*y,c[7]=p[4]*d+p[5]*f+p[6]*m+p[7]*y,c[11]=p[8]*d+p[9]*f+p[10]*m+p[11]*y,c[15]=p[12]*d+p[13]*f+p[14]*m+p[15]*y,this},u.default.Matrix.prototype.scale=function(h,p,c){return h instanceof u.default.Vector?(p=h.y,c=h.z,h=h.x):h instanceof Array&&(p=h[1],c=h[2],h=h[0]),this.mat4[0]*=h,this.mat4[1]*=h,this.mat4[2]*=h,this.mat4[3]*=h,this.mat4[4]*=p,this.mat4[5]*=p,this.mat4[6]*=p,this.mat4[7]*=p,this.mat4[8]*=c,this.mat4[9]*=c,this.mat4[10]*=c,this.mat4[11]*=c,this},u.default.Matrix.prototype.rotate=function(I,X,V,d){X instanceof u.default.Vector?(V=X.y,d=X.z,X=X.x):X instanceof Array&&(V=X[1],d=X[2],X=X[0]);var f=Math.sqrt(X*X+V*V+d*d),f=(X*=1/f,V*=1/f,d*=1/f,this.mat4[0]),m=this.mat4[1],y=this.mat4[2],g=this.mat4[3],v=this.mat4[4],b=this.mat4[5],w=this.mat4[6],_=this.mat4[7],j=this.mat4[8],E=this.mat4[9],T=this.mat4[10],R=this.mat4[11],M=Math.sin(I),I=Math.cos(I),D=1-I,L=X*X*D+I,N=V*X*D+d*M,W=d*X*D-V*M,q=X*V*D-d*M,H=V*V*D+I,B=d*V*D+X*M,G=X*d*D+V*M,V=V*d*D-X*M,X=d*d*D+I;return this.mat4[0]=f*L+v*N+j*W,this.mat4[1]=m*L+b*N+E*W,this.mat4[2]=y*L+w*N+T*W,this.mat4[3]=g*L+_*N+R*W,this.mat4[4]=f*q+v*H+j*B,this.mat4[5]=m*q+b*H+E*B,this.mat4[6]=y*q+w*H+T*B,this.mat4[7]=g*q+_*H+R*B,this.mat4[8]=f*G+v*V+j*X,this.mat4[9]=m*G+b*V+E*X,this.mat4[10]=y*G+w*V+T*X,this.mat4[11]=g*G+_*V+R*X,this},u.default.Matrix.prototype.translate=function(d){var p=d[0],c=d[1],d=d[2]||0;this.mat4[12]+=this.mat4[0]*p+this.mat4[4]*c+this.mat4[8]*d,this.mat4[13]+=this.mat4[1]*p+this.mat4[5]*c+this.mat4[9]*d,this.mat4[14]+=this.mat4[2]*p+this.mat4[6]*c+this.mat4[10]*d,this.mat4[15]+=this.mat4[3]*p+this.mat4[7]*c+this.mat4[11]*d},u.default.Matrix.prototype.rotateX=function(h){this.rotate(h,1,0,0)},u.default.Matrix.prototype.rotateY=function(h){this.rotate(h,0,1,0)},u.default.Matrix.prototype.rotateZ=function(h){this.rotate(h,0,0,1)},u.default.Matrix.prototype.perspective=function(f,p,c,d){var f=1/Math.tan(f/2),m=1/(c-d);return this.mat4[0]=f/p,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=f,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(d+c)*m,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*d*c*m,this.mat4[15]=0,this},u.default.Matrix.prototype.ortho=function(h,p,c,d,f,m){var y=1/(h-p),g=1/(c-d),v=1/(f-m);return this.mat4[0]=-2*y,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*g,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*v,this.mat4[11]=0,this.mat4[12]=(h+p)*y,this.mat4[13]=(d+c)*g,this.mat4[14]=(m+f)*v,this.mat4[15]=1,this},u.default.Matrix);i.default=l},{"../core/main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.float32-array":203,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223}],318:[function(e,o,i){e("core-js/modules/es.array.map"),e("core-js/modules/es.array.map"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,e=(e=e("../core/main"))&&e.__esModule?e:{default:e},e.default.RenderBuffer=function(u,a,s,l,h,p){this.size=u,this.src=a,this.dst=s,this.attr=l,this._renderer=h,this.map=p},e.default.RenderBuffer.prototype._prepareBuffer=function(u,a){var s,l,h,d=a.attributes,p=this._renderer.GL,c=u.model||u,d=d[this.attr];d&&(s=u[this.dst],0<(l=c[this.src]).length&&((h=!s)&&(u[this.dst]=s=p.createBuffer()),p.bindBuffer(p.ARRAY_BUFFER,s),!h&&c.dirtyFlags[this.src]===!1||(h=(u=this.map)?u(l):l,this._renderer._bindBuffer(s,p.ARRAY_BUFFER,h),c.dirtyFlags[this.src]=!1),a.enableAttrib(d,this.size)))},e=e.default.RenderBuffer,i.default=e},{"../core/main":267,"core-js/modules/es.array.map":161}],319:[function(e,o,i){function u(f){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(f)}function a(f){return(a=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(m){return u(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":u(m)})(f)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=(d=e("../core/main"))&&d.__esModule?d:{default:d},l=function(f){if(f&&f.__esModule)return f;if(f===null||a(f)!=="object"&&typeof f!="function")return{default:f};var m=h();if(m&&m.has(f))return m.get(f);var y,g={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in f){var b;Object.prototype.hasOwnProperty.call(f,y)&&((b=v?Object.getOwnPropertyDescriptor(f,y):null)&&(b.get||b.set)?Object.defineProperty(g,y,b):g[y]=f[y])}return g.default=f,m&&m.set(f,g),g}(e("../core/constants"));function h(){var f;return typeof WeakMap!="function"?null:(f=new WeakMap,h=function(){return f},f)}function p(f){return function(m){if(Array.isArray(m)){for(var y=0,g=new Array(m.length);y<m.length;y++)g[y]=m[y];return g}}(f)||function(m){if(Symbol.iterator in Object(m)||Object.prototype.toString.call(m)==="[object Arguments]")return Array.from(m)}(f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}e("./p5.RenderBuffer"),s.default.RendererGL.prototype.beginShape=function(f){return this.immediateMode.shapeMode=f!==void 0?f:l.TRIANGLE_FAN,this.immediateMode.geometry.reset(),this};var c={vertices:1,vertexNormals:1,vertexColors:4,uvs:2},d=(s.default.RendererGL.prototype.vertex=function(f,m){if(this.immediateMode.shapeMode===l.QUADS&&this.immediateMode.geometry.vertices.length%6==3)for(var y in c){var g=c[y],y=this.immediateMode.geometry[y];y.push.apply(y,p(y.slice(y.length-3*g,y.length-2*g)).concat(p(y.slice(y.length-g,y.length))))}var v,b,w=v=b=0,_=(arguments.length===3?w=arguments[2]:arguments.length===4?(v=arguments[2],b=arguments[3]):arguments.length===5&&(w=arguments[2],v=arguments[3],b=arguments[4]),new s.default.Vector(f,m,w)),_=(this.immediateMode.geometry.vertices.push(_),this.immediateMode.geometry.vertexNormals.push(this._currentNormal),this.curFillColor||[.5,.5,.5,1]);return this.immediateMode.geometry.vertexColors.push(_[0],_[1],_[2],_[3]),this.textureMode===l.IMAGE&&(this._tex!==null?0<this._tex.width&&0<this._tex.height&&(v/=this._tex.width,b/=this._tex.height):this._tex===null&&4<=arguments.length&&console.warn("You must first call texture() before using vertex() with image based u and v coordinates")),this.immediateMode.geometry.uvs.push(v,b),this.immediateMode._bezierVertex[0]=f,this.immediateMode._bezierVertex[1]=m,this.immediateMode._bezierVertex[2]=w,this.immediateMode._quadraticVertex[0]=f,this.immediateMode._quadraticVertex[1]=m,this.immediateMode._quadraticVertex[2]=w,this},s.default.RendererGL.prototype.normal=function(f,m,y){return f instanceof s.default.Vector?this._currentNormal=f:this._currentNormal=new s.default.Vector(f,m,y),this},s.default.RendererGL.prototype.endShape=function(f,m,y,g,v,b){return this.immediateMode.shapeMode===l.POINTS?this._drawPoints(this.immediateMode.geometry.vertices,this.immediateMode.buffers.point):(this._processVertices.apply(this,arguments),this._doFill&&1<this.immediateMode.geometry.vertices.length&&this._drawImmediateFill(),this._doStroke&&1<this.immediateMode.geometry.lineVertices.length&&this._drawImmediateStroke(),this.isBezier=!1,this.isQuadratic=!1,this.isCurve=!1,this.immediateMode._bezierVertex.length=0,this.immediateMode._quadraticVertex.length=0,this.immediateMode._curveVertex.length=0),this},s.default.RendererGL.prototype._processVertices=function(f){var m;this.immediateMode.geometry.vertices.length!==0&&(m=this._doStroke&&this.drawMode!==l.TEXTURE,f=f===l.CLOSE,m&&(this.immediateMode.geometry.edges=this._calculateEdges(this.immediateMode.shapeMode,this.immediateMode.geometry.vertices,f),this.immediateMode.geometry._edgesToVertices()),m=this.immediateMode.shapeMode===l.TESS,(this.isBezier||this.isQuadratic||this.isCurve||m)&&this.immediateMode.shapeMode!==l.LINES&&this._tesselateShape())},s.default.RendererGL.prototype._calculateEdges=function(f,m,y){var g=[],v=0;switch(f){case l.TRIANGLE_STRIP:for(v=0;v<m.length-2;v++)g.push([v,v+1]),g.push([v,v+2]);g.push([v,v+1]);break;case l.TRIANGLES:for(v=0;v<m.length-2;v+=3)g.push([v,v+1]),g.push([v+1,v+2]),g.push([v+2,v]);break;case l.LINES:for(v=0;v<m.length-1;v+=2)g.push([v,v+1]);break;case l.QUADS:for(v=0;v<m.length-5;v+=6)g.push([v,v+1]),g.push([v+1,v+2]),g.push([v+3,v+5]),g.push([v+4,v+5]);break;case l.QUAD_STRIP:for(v=0;v<m.length-2;v+=2)g.push([v,v+1]),g.push([v,v+2]),g.push([v+1,v+3]);g.push([v,v+1]);break;default:for(v=0;v<m.length-1;v++)g.push([v,v+1])}return y&&g.push([m.length-1,0]),g},s.default.RendererGL.prototype._tesselateShape=function(){for(var f=this,m=(this.immediateMode.shapeMode=l.TRIANGLES,[this._flatten(this.immediateMode.geometry.vertices.map(function(w,_){return[w.x,w.y,w.z,f.immediateMode.geometry.uvs[2*_],f.immediateMode.geometry.uvs[2*_+1],f.immediateMode.geometry.vertexColors[4*_],f.immediateMode.geometry.vertexColors[4*_+1],f.immediateMode.geometry.vertexColors[4*_+2],f.immediateMode.geometry.vertexColors[4*_+3],f.immediateMode.geometry.vertexNormals[_].x,f.immediateMode.geometry.vertexNormals[_].y,f.immediateMode.geometry.vertexNormals[_].z]}))]),y=this._triangulate(m),g=(this.immediateMode.geometry.vertices=[],this.immediateMode.geometry.vertexNormals=[],this.immediateMode.geometry.uvs=[],[]),v=0,b=y.length;v<b;v+=12)g.push.apply(g,p(y.slice(v+5,v+9))),this.normal.apply(this,p(y.slice(v+9,v+12))),this.vertex.apply(this,p(y.slice(v,v+5)));this.immediateMode.geometry.vertexColors=g},s.default.RendererGL.prototype._drawImmediateFill=function(){var f=this.GL,m=this._getImmediateFillShader(),y=(this._setFillUniforms(m),!0),g=!1,v=void 0;try{for(var b,w=this.immediateMode.buffers.fill[Symbol.iterator]();!(y=(b=w.next()).done);y=!0)b.value._prepareBuffer(this.immediateMode.geometry,m)}catch(_){g=!0,v=_}finally{try{y||w.return==null||w.return()}finally{if(g)throw v}}this.immediateMode.shapeMode!==l.LINE_STRIP&&this.immediateMode.shapeMode!==l.LINES||(this.immediateMode.shapeMode=l.TRIANGLE_FAN),this.immediateMode.shapeMode===l.QUADS?this.immediateMode.shapeMode=l.TRIANGLES:this.immediateMode.shapeMode===l.QUAD_STRIP&&(this.immediateMode.shapeMode=l.TRIANGLE_STRIP),this._applyColorBlend(this.curFillColor),f.drawArrays(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length),m.unbindShader()},s.default.RendererGL.prototype._drawImmediateStroke=function(){var f=this.GL,m=this._getImmediateStrokeShader(),y=(this._setStrokeUniforms(m),!0),g=!1,v=void 0;try{for(var b,w=this.immediateMode.buffers.stroke[Symbol.iterator]();!(y=(b=w.next()).done);y=!0)b.value._prepareBuffer(this.immediateMode.geometry,m)}catch(_){g=!0,v=_}finally{try{y||w.return==null||w.return()}finally{if(g)throw v}}this._applyColorBlend(this.curStrokeColor),f.drawArrays(f.TRIANGLES,0,this.immediateMode.geometry.lineVertices.length),m.unbindShader()},s.default.RendererGL);i.default=d},{"../core/constants":256,"../core/main":267,"./p5.RenderBuffer":318,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.fill":152,"core-js/modules/es.array.from":155,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],320:[function(e,o,i){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.some"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.uint16-array"),e("core-js/modules/es.typed-array.uint32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.some"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.uint16-array"),e("core-js/modules/es.typed-array.uint32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=(s=e("../core/main"))&&s.__esModule?s:{default:s};e("./p5.RendererGL"),e("./p5.RenderBuffer");var a=0,s=(u.default.RendererGL.prototype._initBufferDefaults=function(l){var h;return this._freeBuffers(l),1e3<++a&&(h=Object.keys(this.retainedMode.geometry)[0],delete this.retainedMode.geometry[h],a--),this.retainedMode.geometry[l]={}},u.default.RendererGL.prototype._freeBuffers=function(l){var h,p=this.retainedMode.geometry[l];function c(d){var f=!0,m=!1,y=void 0;try{for(var g,v=d[Symbol.iterator]();!(f=(g=v.next()).done);f=!0){var b=g.value;p[b.dst]&&(h.deleteBuffer(p[b.dst]),p[b.dst]=null)}}catch(w){m=!0,y=w}finally{try{f||v.return==null||v.return()}finally{if(m)throw y}}}p&&(delete this.retainedMode.geometry[l],a--,h=this.GL,p.indexBuffer&&h.deleteBuffer(p.indexBuffer),c(this.retainedMode.buffers.stroke),c(this.retainedMode.buffers.fill))},u.default.RendererGL.prototype.createBuffers=function(m,h){var p,c,d,f=this.GL,m=this._initBufferDefaults(m),y=(m.model=h,m.indexBuffer);return h.faces.length?(y=y||(m.indexBuffer=f.createBuffer()),d=(c=(p=u.default.RendererGL.prototype._flatten(h.faces)).some(function(g){return 65535<g}))?Uint32Array:Uint16Array,this._bindBuffer(y,f.ELEMENT_ARRAY_BUFFER,p,d),m.indexBufferType=c?f.UNSIGNED_INT:f.UNSIGNED_SHORT,m.vertexCount=3*h.faces.length):(y&&(f.deleteBuffer(y),m.indexBuffer=null),m.vertexCount=h.vertices?h.vertices.length:0),m.lineVertexCount=h.lineVertices?h.lineVertices.length:0,m},u.default.RendererGL.prototype.drawBuffers=function(l){var h=this.GL,p=this.retainedMode.geometry[l];if(this._doStroke&&0<p.lineVertexCount){var c=this._getRetainedStrokeShader(),d=(this._setStrokeUniforms(c),!0),f=!1,m=void 0;try{for(var y,g=this.retainedMode.buffers.stroke[Symbol.iterator]();!(d=(y=g.next()).done);d=!0)y.value._prepareBuffer(p,c)}catch(j){f=!0,m=j}finally{try{d||g.return==null||g.return()}finally{if(f)throw m}}this._applyColorBlend(this.curStrokeColor),this._drawArrays(h.TRIANGLES,l),c.unbindShader()}if(this._doFill){var v=this._getRetainedFillShader(),b=(this._setFillUniforms(v),!0),f=!1,m=void 0;try{for(var w,_=this.retainedMode.buffers.fill[Symbol.iterator]();!(b=(w=_.next()).done);b=!0)w.value._prepareBuffer(p,v)}catch(T){f=!0,m=T}finally{try{b||_.return==null||_.return()}finally{if(f)throw m}}p.indexBuffer&&this._bindBuffer(p.indexBuffer,h.ELEMENT_ARRAY_BUFFER),this._applyColorBlend(this.curFillColor),this._drawElements(h.TRIANGLES,l),v.unbindShader()}return this},u.default.RendererGL.prototype.drawBuffersScaled=function(l,h,p,c){var d=this.uMVMatrix.copy();try{this.uMVMatrix.scale(h,p,c),this.drawBuffers(l)}finally{this.uMVMatrix=d}},u.default.RendererGL.prototype._drawArrays=function(l,h){return this.GL.drawArrays(l,0,this.retainedMode.geometry[h].lineVertexCount),this},u.default.RendererGL.prototype._drawElements=function(l,p){var p=this.retainedMode.geometry[p],c=this.GL;if(p.indexBuffer){if(p.indexBufferType===c.UNSIGNED_INT&&!c.getExtension("OES_element_index_uint"))throw new Error("Unable to render a 3d model with > 65535 triangles. Your web browser does not support the WebGL Extension OES_element_index_uint.");c.drawElements(c.TRIANGLES,p.vertexCount,p.indexBufferType,0)}else c.drawArrays(l||c.TRIANGLES,0,p.vertexCount)},u.default.RendererGL.prototype._drawPoints=function(l,h){var p=this.GL,c=this._getImmediatePointShader();this._setPointUniforms(c),this._bindBuffer(h,p.ARRAY_BUFFER,this._vToNArray(l),Float32Array,p.STATIC_DRAW),c.enableAttrib(c.attributes.aPosition,3),p.drawArrays(p.Points,0,l.length),c.unbindShader()},u.default.RendererGL);i.default=s},{"../core/main":267,"./p5.RenderBuffer":318,"./p5.RendererGL":321,"core-js/modules/es.array.fill":152,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.some":163,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.float32-array":203,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint16-array":224,"core-js/modules/es.typed-array.uint32-array":225,"core-js/modules/web.dom-collections.iterator":230}],321:[function(m,o,i){function u(y){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(y)}function a(y){return(a=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(g){return u(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":u(g)})(y)}m("core-js/modules/es.symbol"),m("core-js/modules/es.symbol.description"),m("core-js/modules/es.symbol.iterator"),m("core-js/modules/es.array.concat"),m("core-js/modules/es.array.fill"),m("core-js/modules/es.array.filter"),m("core-js/modules/es.array.from"),m("core-js/modules/es.array.includes"),m("core-js/modules/es.array.iterator"),m("core-js/modules/es.array.slice"),m("core-js/modules/es.object.assign"),m("core-js/modules/es.object.get-own-property-descriptor"),m("core-js/modules/es.object.to-string"),m("core-js/modules/es.regexp.to-string"),m("core-js/modules/es.string.includes"),m("core-js/modules/es.string.iterator"),m("core-js/modules/es.typed-array.float32-array"),m("core-js/modules/es.typed-array.float64-array"),m("core-js/modules/es.typed-array.int16-array"),m("core-js/modules/es.typed-array.uint8-array"),m("core-js/modules/es.typed-array.uint16-array"),m("core-js/modules/es.typed-array.uint32-array"),m("core-js/modules/es.typed-array.copy-within"),m("core-js/modules/es.typed-array.every"),m("core-js/modules/es.typed-array.fill"),m("core-js/modules/es.typed-array.filter"),m("core-js/modules/es.typed-array.find"),m("core-js/modules/es.typed-array.find-index"),m("core-js/modules/es.typed-array.for-each"),m("core-js/modules/es.typed-array.includes"),m("core-js/modules/es.typed-array.index-of"),m("core-js/modules/es.typed-array.iterator"),m("core-js/modules/es.typed-array.join"),m("core-js/modules/es.typed-array.last-index-of"),m("core-js/modules/es.typed-array.map"),m("core-js/modules/es.typed-array.reduce"),m("core-js/modules/es.typed-array.reduce-right"),m("core-js/modules/es.typed-array.reverse"),m("core-js/modules/es.typed-array.set"),m("core-js/modules/es.typed-array.slice"),m("core-js/modules/es.typed-array.some"),m("core-js/modules/es.typed-array.sort"),m("core-js/modules/es.typed-array.subarray"),m("core-js/modules/es.typed-array.to-locale-string"),m("core-js/modules/es.typed-array.to-string"),m("core-js/modules/es.weak-map"),m("core-js/modules/web.dom-collections.iterator"),m("core-js/modules/es.symbol"),m("core-js/modules/es.symbol.description"),m("core-js/modules/es.symbol.iterator"),m("core-js/modules/es.array.concat"),m("core-js/modules/es.array.fill"),m("core-js/modules/es.array.filter"),m("core-js/modules/es.array.from"),m("core-js/modules/es.array.includes"),m("core-js/modules/es.array.iterator"),m("core-js/modules/es.array.slice"),m("core-js/modules/es.object.assign"),m("core-js/modules/es.object.to-string"),m("core-js/modules/es.regexp.to-string"),m("core-js/modules/es.string.includes"),m("core-js/modules/es.string.iterator"),m("core-js/modules/es.typed-array.float32-array"),m("core-js/modules/es.typed-array.float64-array"),m("core-js/modules/es.typed-array.int16-array"),m("core-js/modules/es.typed-array.uint8-array"),m("core-js/modules/es.typed-array.uint16-array"),m("core-js/modules/es.typed-array.uint32-array"),m("core-js/modules/es.typed-array.copy-within"),m("core-js/modules/es.typed-array.every"),m("core-js/modules/es.typed-array.fill"),m("core-js/modules/es.typed-array.filter"),m("core-js/modules/es.typed-array.find"),m("core-js/modules/es.typed-array.find-index"),m("core-js/modules/es.typed-array.for-each"),m("core-js/modules/es.typed-array.includes"),m("core-js/modules/es.typed-array.index-of"),m("core-js/modules/es.typed-array.iterator"),m("core-js/modules/es.typed-array.join"),m("core-js/modules/es.typed-array.last-index-of"),m("core-js/modules/es.typed-array.map"),m("core-js/modules/es.typed-array.reduce"),m("core-js/modules/es.typed-array.reduce-right"),m("core-js/modules/es.typed-array.reverse"),m("core-js/modules/es.typed-array.set"),m("core-js/modules/es.typed-array.slice"),m("core-js/modules/es.typed-array.some"),m("core-js/modules/es.typed-array.sort"),m("core-js/modules/es.typed-array.subarray"),m("core-js/modules/es.typed-array.to-locale-string"),m("core-js/modules/es.typed-array.to-string"),m("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=c(m("../core/main")),l=function(y){if(y&&y.__esModule)return y;if(y===null||a(y)!=="object"&&typeof y!="function")return{default:y};var g=p();if(g&&g.has(y))return g.get(y);var v,b={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(v in y){var _;Object.prototype.hasOwnProperty.call(y,v)&&((_=w?Object.getOwnPropertyDescriptor(y,v):null)&&(_.get||_.set)?Object.defineProperty(b,v,_):b[v]=y[v])}return b.default=y,g&&g.set(y,b),b}(m("../core/constants")),h=c(m("libtess"));m("./p5.Shader"),m("./p5.Camera"),m("../core/p5.Renderer"),m("./p5.Matrix"),m("path");function p(){var y;return typeof WeakMap!="function"?null:(y=new WeakMap,p=function(){return y},y)}function c(y){return y&&y.__esModule?y:{default:y}}function d(y){return function(g){if(Array.isArray(g)){for(var v=0,b=new Array(g.length);v<g.length;v++)b[v]=g[v];return b}}(y)||function(g){if(Symbol.iterator in Object(g)||Object.prototype.toString.call(g)==="[object Arguments]")return Array.from(g)}(y)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var m=`precision highp float;
precision highp int;

uniform mat4 uViewMatrix;

uniform bool uUseLighting;

uniform int uAmbientLightCount;
uniform vec3 uAmbientColor[5];

uniform int uDirectionalLightCount;
uniform vec3 uLightingDirection[5];
uniform vec3 uDirectionalDiffuseColors[5];
uniform vec3 uDirectionalSpecularColors[5];

uniform int uPointLightCount;
uniform vec3 uPointLightLocation[5];
uniform vec3 uPointLightDiffuseColors[5];	
uniform vec3 uPointLightSpecularColors[5];

uniform int uSpotLightCount;
uniform float uSpotLightAngle[5];
uniform float uSpotLightConc[5];
uniform vec3 uSpotLightDiffuseColors[5];
uniform vec3 uSpotLightSpecularColors[5];
uniform vec3 uSpotLightLocation[5];
uniform vec3 uSpotLightDirection[5];

uniform bool uSpecular;
uniform float uShininess;

uniform float uConstantAttenuation;
uniform float uLinearAttenuation;
uniform float uQuadraticAttenuation;

const float specularFactor = 2.0;
const float diffuseFactor = 0.73;

struct LightResult {
  float specular;
  float diffuse;
};

float _phongSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float shininess) {

  vec3 R = reflect(lightDirection, surfaceNormal);
  return pow(max(0.0, dot(R, viewDirection)), shininess);
}

float _lambertDiffuse(vec3 lightDirection, vec3 surfaceNormal) {
  return max(0.0, dot(-lightDirection, surfaceNormal));
}

LightResult _light(vec3 viewDirection, vec3 normal, vec3 lightVector) {

  vec3 lightDir = normalize(lightVector);

  //compute our diffuse & specular terms
  LightResult lr;
  if (uSpecular)
    lr.specular = _phongSpecular(lightDir, viewDirection, normal, uShininess);
  lr.diffuse = _lambertDiffuse(lightDir, normal);
  return lr;
}

void totalLight(
  vec3 modelPosition,
  vec3 normal,
  out vec3 totalDiffuse,
  out vec3 totalSpecular
) {

  totalSpecular = vec3(0.0);

  if (!uUseLighting) {
    totalDiffuse = vec3(1.0);
    return;
  }

  totalDiffuse = vec3(0.0);

  vec3 viewDirection = normalize(-modelPosition);

  for (int j = 0; j < 5; j++) {
    if (j < uDirectionalLightCount) {
      vec3 lightVector = (uViewMatrix * vec4(uLightingDirection[j], 0.0)).xyz;
      vec3 lightColor = uDirectionalDiffuseColors[j];
      vec3 specularColor = uDirectionalSpecularColors[j];
      LightResult result = _light(viewDirection, normal, lightVector);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if (j < uPointLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uPointLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
    
      //calculate attenuation
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);
      vec3 lightColor = lightFalloff * uPointLightDiffuseColors[j];
      vec3 specularColor = lightFalloff * uPointLightSpecularColors[j];

      LightResult result = _light(viewDirection, normal, lightVector);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if(j < uSpotLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uSpotLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
    
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);

      vec3 lightDirection = (uViewMatrix * vec4(uSpotLightDirection[j], 0.0)).xyz;
      float spotDot = dot(normalize(lightVector), normalize(lightDirection));
      float spotFalloff;
      if(spotDot < uSpotLightAngle[j]) {
        spotFalloff = 0.0;
      }
      else {
        spotFalloff = pow(spotDot, uSpotLightConc[j]);
      }
      lightFalloff *= spotFalloff;

      vec3 lightColor = uSpotLightDiffuseColors[j];
      vec3 specularColor = uSpotLightSpecularColors[j];
     
      LightResult result = _light(viewDirection, normal, lightVector);
      
      totalDiffuse += result.diffuse * lightColor * lightFalloff;
      totalSpecular += result.specular * lightColor * specularColor * lightFalloff;
    }
  }

  totalDiffuse *= diffuseFactor;
  totalSpecular *= specularFactor;
}
`,f={immediateVert:`attribute vec3 aPosition;
attribute vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uResolution;
uniform float uPointSize;

varying vec4 vColor;
void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
  gl_PointSize = uPointSize;
}
`,vertexColorVert:`attribute vec3 aPosition;
attribute vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

varying vec4 vColor;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
}
`,vertexColorFrag:`precision mediump float;
varying vec4 vColor;
void main(void) {
  gl_FragColor = vColor;
}`,normalVert:`attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

varying vec3 vVertexNormal;
varying highp vec2 vVertTexCoord;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vVertexNormal = normalize(vec3( uNormalMatrix * aNormal ));
  vVertTexCoord = aTexCoord;
}
`,normalFrag:`precision mediump float;
varying vec3 vVertexNormal;
void main(void) {
  gl_FragColor = vec4(vVertexNormal, 1.0);
}`,basicFrag:`precision mediump float;
uniform vec4 uMaterialColor;
void main(void) {
  gl_FragColor = uMaterialColor;
}`,lightVert:m+`// include lighting.glgl

attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

varying highp vec2 vVertTexCoord;
varying vec3 vDiffuseColor;
varying vec3 vSpecularColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * viewModelPosition;

  vec3 vertexNormal = normalize(uNormalMatrix * aNormal);
  vVertTexCoord = aTexCoord;

  totalLight(viewModelPosition.xyz, vertexNormal, vDiffuseColor, vSpecularColor);

  for (int i = 0; i < 8; i++) {
    if (i < uAmbientLightCount) {
      vDiffuseColor += uAmbientColor[i];
    }
  }
}
`,lightTextureFrag:`precision highp float;

uniform vec4 uMaterialColor;
uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;
uniform bool uEmissive;

varying highp vec2 vVertTexCoord;
varying vec3 vDiffuseColor;
varying vec3 vSpecularColor;

void main(void) {
  if(uEmissive && !isTexture) {
    gl_FragColor = uMaterialColor;
  }
  else {
    gl_FragColor = isTexture ? texture2D(uSampler, vVertTexCoord) * (uTint / vec4(255, 255, 255, 255)) : uMaterialColor;
    gl_FragColor.rgb = gl_FragColor.rgb * vDiffuseColor + vSpecularColor;
  }
}`,phongVert:`precision highp float;
precision highp int;

attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;

uniform vec3 uAmbientColor[5];

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;
uniform int uAmbientLightCount;

varying vec3 vNormal;
varying vec2 vTexCoord;
varying vec3 vViewPosition;
varying vec3 vAmbientColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);

  // Pass varyings to fragment shader
  vViewPosition = viewModelPosition.xyz;
  gl_Position = uProjectionMatrix * viewModelPosition;  

  vNormal = uNormalMatrix * aNormal;
  vTexCoord = aTexCoord;

  // TODO: this should be a uniform
  vAmbientColor = vec3(0.0);
  for (int i = 0; i < 5; i++) {
    if (i < uAmbientLightCount) {
      vAmbientColor += uAmbientColor[i];
    }
  }
}
`,phongFrag:m+`// include lighting.glsl
precision highp float;
precision highp int;

uniform vec4 uSpecularMatColor;
uniform vec4 uAmbientMatColor;
uniform vec4 uEmissiveMatColor;

uniform vec4 uMaterialColor;
uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;

varying vec3 vNormal;
varying vec2 vTexCoord;
varying vec3 vViewPosition;
varying vec3 vAmbientColor;

void main(void) {

  vec3 diffuse;
  vec3 specular;
  totalLight(vViewPosition, normalize(vNormal), diffuse, specular);

  // Calculating final color as result of all lights (plus emissive term).

  gl_FragColor = isTexture ? texture2D(uSampler, vTexCoord) * (uTint / vec4(255, 255, 255, 255)) : uMaterialColor;
  gl_FragColor.rgb = diffuse * gl_FragColor.rgb + 
                    vAmbientColor * uAmbientMatColor.rgb + 
                    specular * uSpecularMatColor.rgb + 
                    uEmissiveMatColor.rgb;
}`,fontVert:`precision mediump float;

attribute vec3 aPosition;
attribute vec2 aTexCoord;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

uniform vec4 uGlyphRect;
uniform float uGlyphOffset;

varying vec2 vTexCoord;
varying float w;

void main() {
  vec4 positionVec4 = vec4(aPosition, 1.0);

  // scale by the size of the glyph's rectangle
  positionVec4.xy *= uGlyphRect.zw - uGlyphRect.xy;

  // move to the corner of the glyph
  positionVec4.xy += uGlyphRect.xy;

  // move to the letter's line offset
  positionVec4.x += uGlyphOffset;
  
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vTexCoord = aTexCoord;
  w = gl_Position.w;
}
`,fontFrag:`#extension GL_OES_standard_derivatives : enable
precision mediump float;

#if 0
  // simulate integer math using floats
	#define int float
	#define ivec2 vec2
	#define INT(x) float(x)

	int ifloor(float v) { return floor(v); }
	ivec2 ifloor(vec2 v) { return floor(v); }

#else
  // use native integer math
	precision highp int;
	#define INT(x) x

	int ifloor(float v) { return int(v); }
	int ifloor(int v) { return v; }
	ivec2 ifloor(vec2 v) { return ivec2(v); }

#endif

uniform sampler2D uSamplerStrokes;
uniform sampler2D uSamplerRowStrokes;
uniform sampler2D uSamplerRows;
uniform sampler2D uSamplerColStrokes;
uniform sampler2D uSamplerCols;

uniform ivec2 uStrokeImageSize;
uniform ivec2 uCellsImageSize;
uniform ivec2 uGridImageSize;

uniform ivec2 uGridOffset;
uniform ivec2 uGridSize;
uniform vec4 uMaterialColor;

varying vec2 vTexCoord;

// some helper functions
int round(float v) { return ifloor(v + 0.5); }
ivec2 round(vec2 v) { return ifloor(v + 0.5); }
float saturate(float v) { return clamp(v, 0.0, 1.0); }
vec2 saturate(vec2 v) { return clamp(v, 0.0, 1.0); }

int mul(float v1, int v2) {
  return ifloor(v1 * float(v2));
}

ivec2 mul(vec2 v1, ivec2 v2) {
  return ifloor(v1 * vec2(v2) + 0.5);
}

// unpack a 16-bit integer from a float vec2
int getInt16(vec2 v) {
  ivec2 iv = round(v * 255.0);
  return iv.x * INT(128) + iv.y;
}

vec2 pixelScale;
vec2 coverage = vec2(0.0);
vec2 weight = vec2(0.5);
const float minDistance = 1.0/8192.0;
const float hardness = 1.05; // amount of antialias

// the maximum number of curves in a glyph
const int N = INT(250);

// retrieves an indexed pixel from a sampler
vec4 getTexel(sampler2D sampler, int pos, ivec2 size) {
  int width = size.x;
  int y = ifloor(pos / width);
  int x = pos - y * width;  // pos % width

  return texture2D(sampler, (vec2(x, y) + 0.5) / vec2(size));
}

void calulateCrossings(vec2 p0, vec2 p1, vec2 p2, out vec2 C1, out vec2 C2) {

  // get the coefficients of the quadratic in t
  vec2 a = p0 - p1 * 2.0 + p2;
  vec2 b = p0 - p1;
  vec2 c = p0 - vTexCoord;

  // found out which values of 't' it crosses the axes
  vec2 surd = sqrt(max(vec2(0.0), b * b - a * c));
  vec2 t1 = ((b - surd) / a).yx;
  vec2 t2 = ((b + surd) / a).yx;

  // approximate straight lines to avoid rounding errors
  if (abs(a.y) < 0.001)
    t1.x = t2.x = c.y / (2.0 * b.y);

  if (abs(a.x) < 0.001)
    t1.y = t2.y = c.x / (2.0 * b.x);

  // plug into quadratic formula to find the corrdinates of the crossings
  C1 = ((a * t1 - b * 2.0) * t1 + c) * pixelScale;
  C2 = ((a * t2 - b * 2.0) * t2 + c) * pixelScale;
}

void coverageX(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  // determine on which side of the x-axis the points lie
  bool y0 = p0.y > vTexCoord.y;
  bool y1 = p1.y > vTexCoord.y;
  bool y2 = p2.y > vTexCoord.y;

  // could web be under the curve (after t1)?
  if (y1 ? !y2 : y0) {
    // add the coverage for t1
    coverage.x += saturate(C1.x + 0.5);
    // calculate the anti-aliasing for t1
    weight.x = min(weight.x, abs(C1.x));
  }

  // are we outside the curve (after t2)?
  if (y1 ? !y0 : y2) {
    // subtract the coverage for t2
    coverage.x -= saturate(C2.x + 0.5);
    // calculate the anti-aliasing for t2
    weight.x = min(weight.x, abs(C2.x));
  }
}

// this is essentially the same as coverageX, but with the axes swapped
void coverageY(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  bool x0 = p0.x > vTexCoord.x;
  bool x1 = p1.x > vTexCoord.x;
  bool x2 = p2.x > vTexCoord.x;

  if (x1 ? !x2 : x0) {
    coverage.y -= saturate(C1.y + 0.5);
    weight.y = min(weight.y, abs(C1.y));
  }

  if (x1 ? !x0 : x2) {
    coverage.y += saturate(C2.y + 0.5);
    weight.y = min(weight.y, abs(C2.y));
  }
}

void main() {

  // calculate the pixel scale based on screen-coordinates
  pixelScale = hardness / fwidth(vTexCoord);

  // which grid cell is this pixel in?
  ivec2 gridCoord = ifloor(vTexCoord * vec2(uGridSize));

  // intersect curves in this row
  {
    // the index into the row info bitmap
    int rowIndex = gridCoord.y + uGridOffset.y;
    // fetch the info texel
    vec4 rowInfo = getTexel(uSamplerRows, rowIndex, uGridImageSize);
    // unpack the rowInfo
    int rowStrokeIndex = getInt16(rowInfo.xy);
    int rowStrokeCount = getInt16(rowInfo.zw);

    for (int iRowStroke = INT(0); iRowStroke < N; iRowStroke++) {
      if (iRowStroke >= rowStrokeCount)
        break;

      // each stroke is made up of 3 points: the start and control point
      // and the start of the next curve.
      // fetch the indices of this pair of strokes:
      vec4 strokeIndices = getTexel(uSamplerRowStrokes, rowStrokeIndex++, uCellsImageSize);

      // unpack the stroke index
      int strokePos = getInt16(strokeIndices.xy);

      // fetch the two strokes
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);

      // calculate the coverage
      coverageX(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  // intersect curves in this column
  {
    int colIndex = gridCoord.x + uGridOffset.x;
    vec4 colInfo = getTexel(uSamplerCols, colIndex, uGridImageSize);
    int colStrokeIndex = getInt16(colInfo.xy);
    int colStrokeCount = getInt16(colInfo.zw);
    
    for (int iColStroke = INT(0); iColStroke < N; iColStroke++) {
      if (iColStroke >= colStrokeCount)
        break;

      vec4 strokeIndices = getTexel(uSamplerColStrokes, colStrokeIndex++, uCellsImageSize);

      int strokePos = getInt16(strokeIndices.xy);
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);
      coverageY(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  weight = saturate(1.0 - weight * 2.0);
  float distance = max(weight.x + weight.y, minDistance); // manhattan approx.
  float antialias = abs(dot(coverage, weight) / distance);
  float cover = min(abs(coverage.x), abs(coverage.y));
  gl_FragColor = uMaterialColor;
  gl_FragColor.a *= saturate(max(antialias, cover));
}`,lineVert:`/*
  Part of the Processing project - http://processing.org
  Copyright (c) 2012-15 The Processing Foundation
  Copyright (c) 2004-12 Ben Fry and Casey Reas
  Copyright (c) 2001-04 Massachusetts Institute of Technology
  This library is free software; you can redistribute it and/or
  modify it under the terms of the GNU Lesser General Public
  License as published by the Free Software Foundation, version 2.1.
  This library is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
  Lesser General Public License for more details.
  You should have received a copy of the GNU Lesser General
  Public License along with this library; if not, write to the
  Free Software Foundation, Inc., 59 Temple Place, Suite 330,
  Boston, MA  02111-1307  USA
*/

#define PROCESSING_LINE_SHADER

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uStrokeWeight;

uniform vec4 uViewport;
uniform int uPerspective;

attribute vec4 aPosition;
attribute vec4 aDirection;
  
void main() {
  // using a scale <1 moves the lines towards the camera
  // in order to prevent popping effects due to half of
  // the line disappearing behind the geometry faces.
  vec3 scale = vec3(0.9995);

  vec4 posp = uModelViewMatrix * aPosition;
  vec4 posq = uModelViewMatrix * (aPosition + vec4(aDirection.xyz, 0));

  // Moving vertices slightly toward the camera
  // to avoid depth-fighting with the fill triangles.
  // Discussed here:
  // http://www.opengl.org/discussion_boards/ubbthreads.php?ubb=showflat&Number=252848  
  posp.xyz = posp.xyz * scale;
  posq.xyz = posq.xyz * scale;

  vec4 p = uProjectionMatrix * posp;
  vec4 q = uProjectionMatrix * posq;

  // formula to convert from clip space (range -1..1) to screen space (range 0..[width or height])
  // screen_p = (p.xy/p.w + <1,1>) * 0.5 * uViewport.zw

  // prevent division by W by transforming the tangent formula (div by 0 causes
  // the line to disappear, see https://github.com/processing/processing/issues/5183)
  // t = screen_q - screen_p
  //
  // tangent is normalized and we don't care which aDirection it points to (+-)
  // t = +- normalize( screen_q - screen_p )
  // t = +- normalize( (q.xy/q.w+<1,1>)*0.5*uViewport.zw - (p.xy/p.w+<1,1>)*0.5*uViewport.zw )
  //
  // extract common factor, <1,1> - <1,1> cancels out
  // t = +- normalize( (q.xy/q.w - p.xy/p.w) * 0.5 * uViewport.zw )
  //
  // convert to common divisor
  // t = +- normalize( ((q.xy*p.w - p.xy*q.w) / (p.w*q.w)) * 0.5 * uViewport.zw )
  //
  // remove the common scalar divisor/factor, not needed due to normalize and +-
  // (keep uViewport - can't remove because it has different components for x and y
  //  and corrects for aspect ratio, see https://github.com/processing/processing/issues/5181)
  // t = +- normalize( (q.xy*p.w - p.xy*q.w) * uViewport.zw )

  vec2 tangent = normalize((q.xy*p.w - p.xy*q.w) * uViewport.zw);

  // flip tangent to normal (it's already normalized)
  vec2 normal = vec2(-tangent.y, tangent.x);

  float thickness = aDirection.w * uStrokeWeight;
  vec2 offset = normal * thickness / 2.0;

  vec2 curPerspScale;

  if(uPerspective == 1) {
    // Perspective ---
    // convert from world to clip by multiplying with projection scaling factor
    // to get the right thickness (see https://github.com/processing/processing/issues/5182)
    // invert Y, projections in Processing invert Y
    curPerspScale = (uProjectionMatrix * vec4(1, -1, 0, 0)).xy;
  } else {
    // No Perspective ---
    // multiply by W (to cancel out division by W later in the pipeline) and
    // convert from screen to clip (derived from clip to screen above)
    curPerspScale = p.w / (0.5 * uViewport.zw);
  }

  gl_Position.xy = p.xy + offset.xy * curPerspScale;
  gl_Position.zw = p.zw;
}
`,lineFrag:`precision mediump float;
precision mediump int;

uniform vec4 uMaterialColor;

void main() {
  gl_FragColor = uMaterialColor;
}`,pointVert:`attribute vec3 aPosition;
uniform float uPointSize;
varying float vStrokeWeight;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
void main() {
	vec4 positionVec4 =  vec4(aPosition, 1.0);
	gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
	gl_PointSize = uPointSize;
	vStrokeWeight = uPointSize;
}`,pointFrag:`precision mediump float;
precision mediump int;
uniform vec4 uMaterialColor;
varying float vStrokeWeight;

void main(){
	float mask = 0.0;

	// make a circular mask using the gl_PointCoord (goes from 0 - 1 on a point)
    // might be able to get a nicer edge on big strokeweights with smoothstep but slightly less performant

	mask = step(0.98, length(gl_PointCoord * 2.0 - 1.0));

	// if strokeWeight is 1 or less lets just draw a square
	// this prevents weird artifacting from carving circles when our points are really small
	// if strokeWeight is larger than 1, we just use it as is

	mask = mix(0.0, mask, clamp(floor(vStrokeWeight - 0.5),0.0,1.0));

	// throw away the borders of the mask
    // otherwise we get weird alpha blending issues

	if(mask > 0.98){
      discard;
  	}

  	gl_FragColor = vec4(uMaterialColor.rgb * (1.0 - mask), uMaterialColor.a) ;
}`},m=(s.default.RendererGL=function(y,g,v,b){return s.default.Renderer.call(this,y,g,v),this._setAttributeDefaults(g),this._initContext(),this.isP3D=!0,this.GL=this.drawingContext,this._pInst._setProperty("drawingContext",this.drawingContext),this._isErasing=!1,this._enableLighting=!1,this.ambientLightColors=[],this.specularColors=[1,1,1],this.directionalLightDirections=[],this.directionalLightDiffuseColors=[],this.directionalLightSpecularColors=[],this.pointLightPositions=[],this.pointLightDiffuseColors=[],this.pointLightSpecularColors=[],this.spotLightPositions=[],this.spotLightDirections=[],this.spotLightDiffuseColors=[],this.spotLightSpecularColors=[],this.spotLightAngle=[],this.spotLightConc=[],this.drawMode=l.FILL,this.curFillColor=this._cachedFillStyle=[1,1,1,1],this.curAmbientColor=this._cachedFillStyle=[0,0,0,0],this.curSpecularColor=this._cachedFillStyle=[0,0,0,0],this.curEmissiveColor=this._cachedFillStyle=[0,0,0,0],this.curStrokeColor=this._cachedStrokeStyle=[0,0,0,1],this.curBlendMode=l.BLEND,this._cachedBlendMode=void 0,this.blendExt=this.GL.getExtension("EXT_blend_minmax"),this._isBlending=!1,this._useSpecularMaterial=!1,this._useEmissiveMaterial=!1,this._useNormalMaterial=!1,this._useShininess=1,this._tint=[255,255,255,255],this.constantAttenuation=1,this.linearAttenuation=0,this.quadraticAttenuation=0,this.uMVMatrix=new s.default.Matrix,this.uPMatrix=new s.default.Matrix,this.uNMatrix=new s.default.Matrix("mat3"),this._currentNormal=new s.default.Vector(0,0,1),this._curCamera=new s.default.Camera(this),this._curCamera._computeCameraDefaultSettings(),this._curCamera._setDefaultCamera(),this._defaultLightShader=void 0,this._defaultImmediateModeShader=void 0,this._defaultNormalShader=void 0,this._defaultColorShader=void 0,this._defaultPointShader=void 0,this.userFillShader=void 0,this.userStrokeShader=void 0,this.userPointShader=void 0,this.retainedMode={geometry:{},buffers:{stroke:[new s.default.RenderBuffer(3,"lineVertices","lineVertexBuffer","aPosition",this,this._flatten),new s.default.RenderBuffer(4,"lineNormals","lineNormalBuffer","aDirection",this,this._flatten)],fill:[new s.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",this,this._vToNArray),new s.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",this,this._vToNArray),new s.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",this),new s.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",this),new s.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",this,this._flatten)],text:[new s.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",this,this._vToNArray),new s.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",this,this._flatten)]}},this.immediateMode={geometry:new s.default.Geometry,shapeMode:l.TRIANGLE_FAN,_bezierVertex:[],_quadraticVertex:[],_curveVertex:[],buffers:{fill:[new s.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",this,this._vToNArray),new s.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",this,this._vToNArray),new s.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",this),new s.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",this),new s.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",this,this._flatten)],stroke:[new s.default.RenderBuffer(3,"lineVertices","lineVertexBuffer","aPosition",this,this._flatten),new s.default.RenderBuffer(4,"lineNormals","lineNormalBuffer","aDirection",this,this._flatten)],point:this.GL.createBuffer()}},this.pointSize=5,this.curStrokeWeight=1,this.textures=[],this.textureMode=l.IMAGE,this.textureWrapX=l.CLAMP,this.textureWrapY=l.CLAMP,this._tex=null,this._curveTightness=6,this._lookUpTableBezier=[],this._lookUpTableQuadratic=[],this._lutBezierDetail=0,this._lutQuadraticDetail=0,this._tessy=this._initTessy(),this.fontInfos={},this._curShader=void 0,this},s.default.RendererGL.prototype=Object.create(s.default.Renderer.prototype),s.default.RendererGL.prototype._setAttributeDefaults=function(y){var g={alpha:!1,depth:!0,stencil:!0,antialias:navigator.userAgent.toLowerCase().includes("safari"),premultipliedAlpha:!1,preserveDrawingBuffer:!0,perPixelLighting:!0};y._glAttributes===null?y._glAttributes=g:y._glAttributes=Object.assign(g,y._glAttributes)},s.default.RendererGL.prototype._initContext=function(){if(this.drawingContext=this.canvas.getContext("webgl",this._pInst._glAttributes)||this.canvas.getContext("experimental-webgl",this._pInst._glAttributes),this.drawingContext===null)throw new Error("Error creating webgl context");var y=this.drawingContext;y.enable(y.DEPTH_TEST),y.depthFunc(y.LEQUAL),y.viewport(0,0,y.drawingBufferWidth,y.drawingBufferHeight),this._viewport=this.drawingContext.getParameter(this.drawingContext.VIEWPORT)},s.default.RendererGL.prototype._resetContext=function(y,g){var v,b=this.width,w=this.height,j=this.canvas.id,_=this._pInst instanceof s.default.Graphics,j=(_?((v=this._pInst).canvas.parentNode.removeChild(v.canvas),v.canvas=document.createElement("canvas"),(v._pInst._userNode||document.body).appendChild(v.canvas),s.default.Element.call(v,v.canvas,v._pInst),v.width=b,v.height=w):((v=this.canvas)&&v.parentNode.removeChild(v),(v=document.createElement("canvas")).id=j,(this._pInst._userNode||document.body).appendChild(v),this._pInst.canvas=v,this.canvas=v),new s.default.RendererGL(this._pInst.canvas,this._pInst,!_));this._pInst._setProperty("_renderer",j),j.resize(b,w),j._applyDefaults(),_||this._pInst._elements.push(j),typeof g=="function"&&setTimeout(function(){g.apply(window._renderer,y)},0)},s.default.prototype.setAttributes=function(y,g){if(this._glAttributes===void 0)console.log("You are trying to use setAttributes on a p5.Graphics object that does not use a WEBGL renderer.");else{var v=!0;if(g!==void 0?(this._glAttributes===null&&(this._glAttributes={}),this._glAttributes[y]!==g&&(this._glAttributes[y]=g,v=!1)):y instanceof Object&&this._glAttributes!==y&&(this._glAttributes=y,v=!1),this._renderer.isP3D&&!v){if(!this._setupDone){for(var b in this._renderer.retainedMode.geometry)if(this._renderer.retainedMode.geometry.hasOwnProperty(b))return void console.error("Sorry, Could not set the attributes, you need to call setAttributes() before calling the other drawing methods in setup()")}this.push(),this._renderer._resetContext(),this.pop(),this._renderer._curCamera&&(this._renderer._curCamera._renderer=this._renderer)}}},s.default.RendererGL.prototype._update=function(){this.uMVMatrix.set(this._curCamera.cameraMatrix.mat4[0],this._curCamera.cameraMatrix.mat4[1],this._curCamera.cameraMatrix.mat4[2],this._curCamera.cameraMatrix.mat4[3],this._curCamera.cameraMatrix.mat4[4],this._curCamera.cameraMatrix.mat4[5],this._curCamera.cameraMatrix.mat4[6],this._curCamera.cameraMatrix.mat4[7],this._curCamera.cameraMatrix.mat4[8],this._curCamera.cameraMatrix.mat4[9],this._curCamera.cameraMatrix.mat4[10],this._curCamera.cameraMatrix.mat4[11],this._curCamera.cameraMatrix.mat4[12],this._curCamera.cameraMatrix.mat4[13],this._curCamera.cameraMatrix.mat4[14],this._curCamera.cameraMatrix.mat4[15]),this.ambientLightColors.length=0,this.specularColors=[1,1,1],this.directionalLightDirections.length=0,this.directionalLightDiffuseColors.length=0,this.directionalLightSpecularColors.length=0,this.pointLightPositions.length=0,this.pointLightDiffuseColors.length=0,this.pointLightSpecularColors.length=0,this.spotLightPositions.length=0,this.spotLightDirections.length=0,this.spotLightDiffuseColors.length=0,this.spotLightSpecularColors.length=0,this.spotLightAngle.length=0,this.spotLightConc.length=0,this._enableLighting=!1,this._tint=[255,255,255,255],this.GL.clear(this.GL.DEPTH_BUFFER_BIT)},s.default.RendererGL.prototype.background=function(){var b=(b=this._pInst).color.apply(b,arguments),y=b.levels[0]/255,g=b.levels[1]/255,v=b.levels[2]/255,b=b.levels[3]/255;this.GL.clearColor(y,g,v,b),this.GL.clear(this.GL.COLOR_BUFFER_BIT)},s.default.RendererGL.prototype.fill=function(y,g,v,b){var w=s.default.prototype.color.apply(this._pInst,arguments);this.curFillColor=w._array,this.drawMode=l.FILL,this._useNormalMaterial=!1,this._tex=null},s.default.RendererGL.prototype.stroke=function(y,g,v,b){arguments[3]=255;var w=s.default.prototype.color.apply(this._pInst,arguments);this.curStrokeColor=w._array},s.default.RendererGL.prototype.strokeCap=function(y){console.error("Sorry, strokeCap() is not yet implemented in WEBGL mode")},s.default.RendererGL.prototype.strokeJoin=function(y){console.error("Sorry, strokeJoin() is not yet implemented in WEBGL mode")},s.default.RendererGL.prototype.filter=function(y){console.error("filter() does not work in WEBGL mode")},s.default.RendererGL.prototype.blendMode=function(y){y===l.DARKEST||y===l.LIGHTEST||y===l.ADD||y===l.BLEND||y===l.SUBTRACT||y===l.SCREEN||y===l.EXCLUSION||y===l.REPLACE||y===l.MULTIPLY||y===l.REMOVE?this.curBlendMode=y:y!==l.BURN&&y!==l.OVERLAY&&y!==l.HARD_LIGHT&&y!==l.SOFT_LIGHT&&y!==l.DODGE||console.warn("BURN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, and DODGE only work for blendMode in 2D mode.")},s.default.RendererGL.prototype.erase=function(y,g){this._isErasing||(this._applyBlendMode(l.REMOVE),this._isErasing=!0,this._cachedFillStyle=this.curFillColor.slice(),this.curFillColor=[1,1,1,y/255],this._cachedStrokeStyle=this.curStrokeColor.slice(),this.curStrokeColor=[1,1,1,g/255])},s.default.RendererGL.prototype.noErase=function(){this._isErasing&&(this._isErasing=!1,this.curFillColor=this._cachedFillStyle.slice(),this.curStrokeColor=this._cachedStrokeStyle.slice(),this.blendMode(this._cachedBlendMode))},s.default.RendererGL.prototype.strokeWeight=function(y){this.curStrokeWeight!==y&&(this.pointSize=y,this.curStrokeWeight=y)},s.default.RendererGL.prototype._getPixel=function(y,g){var v=new Uint8Array(4);return this.drawingContext.readPixels(y,g,1,1,this.drawingContext.RGBA,this.drawingContext.UNSIGNED_BYTE,v),[v[0],v[1],v[2],v[3]]},s.default.RendererGL.prototype.loadPixels=function(){var y,g=this._pixelsState;this._pInst._glAttributes.preserveDrawingBuffer!==!0?console.log("loadPixels only works in WebGL when preserveDrawingBuffer is true."):(g=g.pixels,y=this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4,g instanceof Uint8Array&&g.length===y||(g=new Uint8Array(y),this._pixelsState._setProperty("pixels",g)),y=this._pInst._pixelDensity,this.GL.readPixels(0,0,this.width*y,this.height*y,this.GL.RGBA,this.GL.UNSIGNED_BYTE,g))},s.default.RendererGL.prototype.geometryInHash=function(y){return this.retainedMode.geometry[y]!==void 0},s.default.RendererGL.prototype.resize=function(y,g){s.default.Renderer.prototype.resize.call(this,y,g),this.GL.viewport(0,0,this.GL.drawingBufferWidth,this.GL.drawingBufferHeight),this._viewport=this.GL.getParameter(this.GL.VIEWPORT),this._curCamera._resize(),y=this._pixelsState,y.pixels!==void 0&&y._setProperty("pixels",new Uint8Array(this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4))},s.default.RendererGL.prototype.clear=function(){this.GL.clearColor((arguments.length<=0?void 0:arguments[0])||0,(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0,(arguments.length<=3?void 0:arguments[3])||0),this.GL.clearDepth(1),this.GL.clear(this.GL.COLOR_BUFFER_BIT|this.GL.DEPTH_BUFFER_BIT)},s.default.RendererGL.prototype.applyMatrix=function(y,g,v,b,w,_){arguments.length===16?s.default.Matrix.prototype.apply.apply(this.uMVMatrix,arguments):this.uMVMatrix.apply([y,g,0,0,v,b,0,0,0,0,1,0,w,_,0,1])},s.default.RendererGL.prototype.translate=function(y,g,v){return y instanceof s.default.Vector&&(v=y.z,g=y.y,y=y.x),this.uMVMatrix.translate([y,g,v]),this},s.default.RendererGL.prototype.scale=function(y,g,v){return this.uMVMatrix.scale(y,g,v),this},s.default.RendererGL.prototype.rotate=function(y,g){return g===void 0?this.rotateZ(y):(s.default.Matrix.prototype.rotate.apply(this.uMVMatrix,arguments),this)},s.default.RendererGL.prototype.rotateX=function(y){return this.rotate(y,1,0,0),this},s.default.RendererGL.prototype.rotateY=function(y){return this.rotate(y,0,1,0),this},s.default.RendererGL.prototype.rotateZ=function(y){return this.rotate(y,0,0,1),this},s.default.RendererGL.prototype.push=function(){var y=s.default.Renderer.prototype.push.apply(this),g=y.properties;return g.uMVMatrix=this.uMVMatrix.copy(),g.uPMatrix=this.uPMatrix.copy(),g._curCamera=this._curCamera,this._curCamera=this._curCamera.copy(),g.ambientLightColors=this.ambientLightColors.slice(),g.specularColors=this.specularColors.slice(),g.directionalLightDirections=this.directionalLightDirections.slice(),g.directionalLightDiffuseColors=this.directionalLightDiffuseColors.slice(),g.directionalLightSpecularColors=this.directionalLightSpecularColors.slice(),g.pointLightPositions=this.pointLightPositions.slice(),g.pointLightDiffuseColors=this.pointLightDiffuseColors.slice(),g.pointLightSpecularColors=this.pointLightSpecularColors.slice(),g.spotLightPositions=this.spotLightPositions.slice(),g.spotLightDirections=this.spotLightDirections.slice(),g.spotLightDiffuseColors=this.spotLightDiffuseColors.slice(),g.spotLightSpecularColors=this.spotLightSpecularColors.slice(),g.spotLightAngle=this.spotLightAngle.slice(),g.spotLightConc=this.spotLightConc.slice(),g.userFillShader=this.userFillShader,g.userStrokeShader=this.userStrokeShader,g.userPointShader=this.userPointShader,g.pointSize=this.pointSize,g.curStrokeWeight=this.curStrokeWeight,g.curStrokeColor=this.curStrokeColor,g.curFillColor=this.curFillColor,g.curAmbientColor=this.curAmbientColor,g.curSpecularColor=this.curSpecularColor,g.curEmissiveColor=this.curEmissiveColor,g._useSpecularMaterial=this._useSpecularMaterial,g._useEmissiveMaterial=this._useEmissiveMaterial,g._useShininess=this._useShininess,g.constantAttenuation=this.constantAttenuation,g.linearAttenuation=this.linearAttenuation,g.quadraticAttenuation=this.quadraticAttenuation,g._enableLighting=this._enableLighting,g._useNormalMaterial=this._useNormalMaterial,g._tex=this._tex,g.drawMode=this.drawMode,g._currentNormal=this._currentNormal,g.curBlendMode=this.curBlendMode,y},s.default.RendererGL.prototype.resetMatrix=function(){return this.uMVMatrix=s.default.Matrix.identity(this._pInst),this},s.default.RendererGL.prototype._getImmediateStrokeShader=function(){var y=this.userStrokeShader;return y&&y.isStrokeShader()?y:this._getLineShader()},s.default.RendererGL.prototype._getRetainedStrokeShader=s.default.RendererGL.prototype._getImmediateStrokeShader,s.default.RendererGL.prototype._getImmediateFillShader=function(){var y=this.userFillShader;if(this._useNormalMaterial&&(!y||!y.isNormalShader()))return this._getNormalShader();if(this._enableLighting){if(!y||!y.isLightShader())return this._getLightShader()}else if(this._tex){if(!y||!y.isTextureShader())return this._getLightShader()}else if(!y)return this._getImmediateModeShader();return y},s.default.RendererGL.prototype._getRetainedFillShader=function(){if(this._useNormalMaterial)return this._getNormalShader();var y=this.userFillShader;if(this._enableLighting){if(!y||!y.isLightShader())return this._getLightShader()}else if(this._tex){if(!y||!y.isTextureShader())return this._getLightShader()}else if(!y)return this._getColorShader();return y},s.default.RendererGL.prototype._getImmediatePointShader=function(){var y=this.userPointShader;return y&&y.isPointShader()?y:this._getPointShader()},s.default.RendererGL.prototype._getRetainedLineShader=s.default.RendererGL.prototype._getImmediateLineShader,s.default.RendererGL.prototype._getLightShader=function(){return this._defaultLightShader||(this._pInst._glAttributes.perPixelLighting?this._defaultLightShader=new s.default.Shader(this,f.phongVert,f.phongFrag):this._defaultLightShader=new s.default.Shader(this,f.lightVert,f.lightTextureFrag)),this._defaultLightShader},s.default.RendererGL.prototype._getImmediateModeShader=function(){return this._defaultImmediateModeShader||(this._defaultImmediateModeShader=new s.default.Shader(this,f.immediateVert,f.vertexColorFrag)),this._defaultImmediateModeShader},s.default.RendererGL.prototype._getNormalShader=function(){return this._defaultNormalShader||(this._defaultNormalShader=new s.default.Shader(this,f.normalVert,f.normalFrag)),this._defaultNormalShader},s.default.RendererGL.prototype._getColorShader=function(){return this._defaultColorShader||(this._defaultColorShader=new s.default.Shader(this,f.normalVert,f.basicFrag)),this._defaultColorShader},s.default.RendererGL.prototype._getPointShader=function(){return this._defaultPointShader||(this._defaultPointShader=new s.default.Shader(this,f.pointVert,f.pointFrag)),this._defaultPointShader},s.default.RendererGL.prototype._getLineShader=function(){return this._defaultLineShader||(this._defaultLineShader=new s.default.Shader(this,f.lineVert,f.lineFrag)),this._defaultLineShader},s.default.RendererGL.prototype._getFontShader=function(){return this._defaultFontShader||(this.GL.getExtension("OES_standard_derivatives"),this._defaultFontShader=new s.default.Shader(this,f.fontVert,f.fontFrag)),this._defaultFontShader},s.default.RendererGL.prototype._getEmptyTexture=function(){var y;return this._emptyTexture||((y=new s.default.Image(1,1)).set(0,0,255),this._emptyTexture=new s.default.Texture(this,y)),this._emptyTexture},s.default.RendererGL.prototype.getTexture=function(y){var g=this.textures,v=!0,b=!1,w=void 0;try{for(var _,j=g[Symbol.iterator]();!(v=(_=j.next()).done);v=!0){var E=_.value;if(E.src===y)return E}}catch(T){b=!0,w=T}finally{try{v||j.return==null||j.return()}finally{if(b)throw w}}return b=new s.default.Texture(this,y),g.push(b),b},s.default.RendererGL.prototype._setStrokeUniforms=function(y){y.bindShader(),y.setUniform("uMaterialColor",this.curStrokeColor),y.setUniform("uStrokeWeight",this.curStrokeWeight)},s.default.RendererGL.prototype._setFillUniforms=function(y){y.bindShader(),y.setUniform("uMaterialColor",this.curFillColor),y.setUniform("isTexture",!!this._tex),this._tex&&y.setUniform("uSampler",this._tex),y.setUniform("uTint",this._tint),y.setUniform("uAmbientMatColor",this.curAmbientColor),y.setUniform("uSpecularMatColor",this.curSpecularColor),y.setUniform("uEmissiveMatColor",this.curEmissiveColor),y.setUniform("uSpecular",this._useSpecularMaterial),y.setUniform("uEmissive",this._useEmissiveMaterial),y.setUniform("uShininess",this._useShininess),y.setUniform("uUseLighting",this._enableLighting);var g=this.pointLightDiffuseColors.length/3,g=(y.setUniform("uPointLightCount",g),y.setUniform("uPointLightLocation",this.pointLightPositions),y.setUniform("uPointLightDiffuseColors",this.pointLightDiffuseColors),y.setUniform("uPointLightSpecularColors",this.pointLightSpecularColors),this.directionalLightDiffuseColors.length/3),g=(y.setUniform("uDirectionalLightCount",g),y.setUniform("uLightingDirection",this.directionalLightDirections),y.setUniform("uDirectionalDiffuseColors",this.directionalLightDiffuseColors),y.setUniform("uDirectionalSpecularColors",this.directionalLightSpecularColors),this.ambientLightColors.length/3),g=(y.setUniform("uAmbientLightCount",g),y.setUniform("uAmbientColor",this.ambientLightColors),this.spotLightDiffuseColors.length/3);y.setUniform("uSpotLightCount",g),y.setUniform("uSpotLightAngle",this.spotLightAngle),y.setUniform("uSpotLightConc",this.spotLightConc),y.setUniform("uSpotLightDiffuseColors",this.spotLightDiffuseColors),y.setUniform("uSpotLightSpecularColors",this.spotLightSpecularColors),y.setUniform("uSpotLightLocation",this.spotLightPositions),y.setUniform("uSpotLightDirection",this.spotLightDirections),y.setUniform("uConstantAttenuation",this.constantAttenuation),y.setUniform("uLinearAttenuation",this.linearAttenuation),y.setUniform("uQuadraticAttenuation",this.quadraticAttenuation),y.bindTextures()},s.default.RendererGL.prototype._setPointUniforms=function(y){y.bindShader(),y.setUniform("uMaterialColor",this.curStrokeColor),y.setUniform("uPointSize",this.pointSize*this._pInst._pixelDensity)},s.default.RendererGL.prototype._bindBuffer=function(y,g,v,b,w){g=g||this.GL.ARRAY_BUFFER,this.GL.bindBuffer(g,y),v!==void 0&&(y=new(b||Float32Array)(v),this.GL.bufferData(g,y,w||this.GL.STATIC_DRAW))},s.default.RendererGL.prototype._arraysEqual=function(y,g){var v=y.length;if(v!==g.length)return!1;for(var b=0;b<v;b++)if(y[b]!==g[b])return!1;return!0},s.default.RendererGL.prototype._isTypedArray=function(y){return y instanceof Uint32Array},s.default.RendererGL.prototype._flatten=function(y){if(y.length===0)return[];var g;if(2e4<y.length){for(var v=Object.prototype.toString,b=[],w=y.slice(),_=w.pop();v.call(_)==="[object Array]"?w.push.apply(w,d(_)):b.push(_),w.length&&(_=w.pop())!==void 0;);return b.reverse(),b}return(g=[]).concat.apply(g,d(y))},s.default.RendererGL.prototype._vToNArray=function(y){var g=[],v=!0,b=!1,w=void 0;try{for(var _,j=y[Symbol.iterator]();!(v=(_=j.next()).done);v=!0){var E=_.value;g.push(E.x,E.y,E.z)}}catch(T){b=!0,w=T}finally{try{v||j.return==null||j.return()}finally{if(b)throw w}}return g},s.default.prototype._assert3d=function(y){if(!this._renderer.isP3D)throw new Error("".concat(y,"() is only supported in WEBGL mode. If you'd like to use 3D graphics and WebGL, see  https://p5js.org/examples/form-3d-primitives.html for more information."))},s.default.RendererGL.prototype._initTessy=function(){var y=new h.default.GluTesselator;return y.gluTessCallback(h.default.gluEnum.GLU_TESS_VERTEX_DATA,function(g,v){for(var b=0;b<g.length;b++)v[v.length]=g[b]}),y.gluTessCallback(h.default.gluEnum.GLU_TESS_BEGIN,function(g){g!==h.default.primitiveType.GL_TRIANGLES&&console.log("expected TRIANGLES but got type: ".concat(g))}),y.gluTessCallback(h.default.gluEnum.GLU_TESS_ERROR,function(g){console.log("error callback"),console.log("error number: ".concat(g))}),y.gluTessCallback(h.default.gluEnum.GLU_TESS_COMBINE,function(g,v,b){for(var w=[0,0,0,0,0,0,0,0,0,0,0,0],_=0;_<b.length;_++)for(var j=0;j<w.length;j++)b[_]!==0&&v[_]&&(w[j]+=v[_][j]*b[_]);return w}),y.gluTessCallback(h.default.gluEnum.GLU_TESS_EDGE_FLAG,function(g){}),y},s.default.RendererGL.prototype._triangulate=function(y){this._tessy.gluTessNormal(0,0,1);var g=[];this._tessy.gluTessBeginPolygon(g);for(var v=0;v<y.length;v++){this._tessy.gluTessBeginContour();for(var b=y[v],w=0;w<b.length;w+=12){var _=b.slice(w,w+12);this._tessy.gluTessVertex(_,_)}this._tessy.gluTessEndContour()}return this._tessy.gluTessEndPolygon(),g},s.default.RendererGL.prototype._bezierCoefficients=function(y){var g=y*y,v=1-y,b=v*v;return[b*v,3*b*y,3*v*g,g*y]},s.default.RendererGL.prototype._quadraticCoefficients=function(y){var g=1-y;return[g*g,2*g*y,y*y]},s.default.RendererGL.prototype._bezierToCatmull=function(y){return[y[1],y[1]+(y[2]-y[0])/this._curveTightness,y[2]-(y[3]-y[1])/this._curveTightness,y[2]]},s.default.RendererGL);i.default=m},{"../core/constants":256,"../core/main":267,"../core/p5.Renderer":270,"./p5.Camera":315,"./p5.Matrix":317,"./p5.Shader":322,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.fill":152,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.from":155,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.assign":172,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.float32-array":203,"core-js/modules/es.typed-array.float64-array":204,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.int16-array":208,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint16-array":224,"core-js/modules/es.typed-array.uint32-array":225,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230,libtess:239,path:242}],322:[function(e,o,i){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=(e=e("../core/main"))&&e.__esModule?e:{default:e};u.default.Shader=function(a,s,l){this._renderer=a,this._vertSrc=s,this._fragSrc=l,this._vertShader=-1,this._fragShader=-1,this._glProgram=0,this._loadedAttributes=!1,this.attributes={},this._loadedUniforms=!1,this.uniforms={},this._bound=!1,this.samplers=[]},u.default.Shader.prototype.init=function(){if(this._glProgram===0){var a=this._renderer.GL;if(this._vertShader=a.createShader(a.VERTEX_SHADER),a.shaderSource(this._vertShader,this._vertSrc),a.compileShader(this._vertShader),!a.getShaderParameter(this._vertShader,a.COMPILE_STATUS))return console.error("Yikes! An error occurred compiling the vertex shader:".concat(a.getShaderInfoLog(this._vertShader))),null;if(this._fragShader=a.createShader(a.FRAGMENT_SHADER),a.shaderSource(this._fragShader,this._fragSrc),a.compileShader(this._fragShader),!a.getShaderParameter(this._fragShader,a.COMPILE_STATUS))return console.error("Darn! An error occurred compiling the fragment shader:".concat(a.getShaderInfoLog(this._fragShader))),null;this._glProgram=a.createProgram(),a.attachShader(this._glProgram,this._vertShader),a.attachShader(this._glProgram,this._fragShader),a.linkProgram(this._glProgram),a.getProgramParameter(this._glProgram,a.LINK_STATUS)||console.error("Snap! Error linking shader program: ".concat(a.getProgramInfoLog(this._glProgram))),this._loadAttributes(),this._loadUniforms()}return this},u.default.Shader.prototype._loadAttributes=function(){if(!this._loadedAttributes){this.attributes={};for(var a=this._renderer.GL,s=a.getProgramParameter(this._glProgram,a.ACTIVE_ATTRIBUTES),l=0;l<s;++l){var h=a.getActiveAttrib(this._glProgram,l),p=h.name,c=a.getAttribLocation(this._glProgram,p),d={};d.name=p,d.location=c,d.index=l,d.type=h.type,d.size=h.size,this.attributes[p]=d}this._loadedAttributes=!0}},u.default.Shader.prototype._loadUniforms=function(){if(!this._loadedUniforms){for(var a=this._renderer.GL,s=a.getProgramParameter(this._glProgram,a.ACTIVE_UNIFORMS),l=0,h=0;h<s;++h){var p=a.getActiveUniform(this._glProgram,h),c={},d=(c.location=a.getUniformLocation(this._glProgram,p.name),c.size=p.size,p.name);1<p.size&&(d=d.substring(0,d.indexOf("[0]"))),c.name=d,c.type=p.type,c._cachedData=void 0,c.type===a.SAMPLER_2D&&(c.samplerIndex=l,l++,this.samplers.push(c)),c.isArray=1<p.size||c.type===a.FLOAT_MAT3||c.type===a.FLOAT_MAT4||c.type===a.FLOAT_VEC2||c.type===a.FLOAT_VEC3||c.type===a.FLOAT_VEC4||c.type===a.INT_VEC2||c.type===a.INT_VEC4||c.type===a.INT_VEC3,this.uniforms[d]=c}this._loadedUniforms=!0}},u.default.Shader.prototype.compile=function(){},u.default.Shader.prototype.bindShader=function(){this.init(),this._bound||(this.useProgram(),this._bound=!0,this._setMatrixUniforms(),this.setUniform("uViewport",this._renderer._viewport))},u.default.Shader.prototype.unbindShader=function(){return this._bound&&(this.unbindTextures(),this._bound=!1),this},u.default.Shader.prototype.bindTextures=function(){var a=this._renderer.GL,s=!0,l=!1,h=void 0;try{for(var p,c=this.samplers[Symbol.iterator]();!(s=(p=c.next()).done);s=!0){var d=p.value,f=d.texture;f===void 0&&(f=this._renderer._getEmptyTexture()),a.activeTexture(a.TEXTURE0+d.samplerIndex),f.bindTexture(),f.update(),a.uniform1i(d.location,d.samplerIndex)}}catch(m){l=!0,h=m}finally{try{s||c.return==null||c.return()}finally{if(l)throw h}}},u.default.Shader.prototype.updateTextures=function(){var a=!0,s=!1,l=void 0;try{for(var h,p=this.samplers[Symbol.iterator]();!(a=(h=p.next()).done);a=!0){var c=h.value.texture;c&&c.update()}}catch(d){s=!0,l=d}finally{try{a||p.return==null||p.return()}finally{if(s)throw l}}},u.default.Shader.prototype.unbindTextures=function(){},u.default.Shader.prototype._setMatrixUniforms=function(){var a=this._renderer._curCamera.cameraMatrix,s=this._renderer.uPMatrix,l=this._renderer.uMVMatrix,h=l.copy();h.mult(s),this.isStrokeShader()&&(this._renderer._curCamera.cameraType==="default"?this.setUniform("uPerspective",1):this.setUniform("uPerspective",0)),this.setUniform("uViewMatrix",a.mat4),this.setUniform("uProjectionMatrix",s.mat4),this.setUniform("uModelViewMatrix",l.mat4),this.setUniform("uModelViewProjectionMatrix",h.mat4),this.uniforms.uNormalMatrix&&(this._renderer.uNMatrix.inverseTranspose(this._renderer.uMVMatrix),this.setUniform("uNormalMatrix",this._renderer.uNMatrix.mat3))},u.default.Shader.prototype.useProgram=function(){var a=this._renderer.GL;return this._renderer._curShader!==this&&(a.useProgram(this._glProgram),this._renderer._curShader=this),this},u.default.Shader.prototype.setUniform=function(a,s){var l=this.uniforms[a];if(l){var h=this._renderer.GL;if(l.isArray){if(l._cachedData&&this._renderer._arraysEqual(l._cachedData,s))return;l._cachedData=s.slice(0)}else{if(l._cachedData&&l._cachedData===s)return;Array.isArray(s)?l._cachedData=s.slice(0):l._cachedData=s}var p=l.location;switch(this.useProgram(),l.type){case h.BOOL:s===!0?h.uniform1i(p,1):h.uniform1i(p,0);break;case h.INT:1<l.size?s.length&&h.uniform1iv(p,s):h.uniform1i(p,s);break;case h.FLOAT:1<l.size?s.length&&h.uniform1fv(p,s):h.uniform1f(p,s);break;case h.FLOAT_MAT3:h.uniformMatrix3fv(p,!1,s);break;case h.FLOAT_MAT4:h.uniformMatrix4fv(p,!1,s);break;case h.FLOAT_VEC2:1<l.size?s.length&&h.uniform2fv(p,s):h.uniform2f(p,s[0],s[1]);break;case h.FLOAT_VEC3:1<l.size?s.length&&h.uniform3fv(p,s):h.uniform3f(p,s[0],s[1],s[2]);break;case h.FLOAT_VEC4:1<l.size?s.length&&h.uniform4fv(p,s):h.uniform4f(p,s[0],s[1],s[2],s[3]);break;case h.INT_VEC2:1<l.size?s.length&&h.uniform2iv(p,s):h.uniform2i(p,s[0],s[1]);break;case h.INT_VEC3:1<l.size?s.length&&h.uniform3iv(p,s):h.uniform3i(p,s[0],s[1],s[2]);break;case h.INT_VEC4:1<l.size?s.length&&h.uniform4iv(p,s):h.uniform4i(p,s[0],s[1],s[2],s[3]);break;case h.SAMPLER_2D:h.activeTexture(h.TEXTURE0+l.samplerIndex),l.texture=s instanceof u.default.Texture?s:this._renderer.getTexture(s),h.uniform1i(p,l.samplerIndex)}return this}},u.default.Shader.prototype.isLightShader=function(){return this.attributes.aNormal!==void 0||this.uniforms.uUseLighting!==void 0||this.uniforms.uAmbientLightCount!==void 0||this.uniforms.uDirectionalLightCount!==void 0||this.uniforms.uPointLightCount!==void 0||this.uniforms.uAmbientColor!==void 0||this.uniforms.uDirectionalDiffuseColors!==void 0||this.uniforms.uDirectionalSpecularColors!==void 0||this.uniforms.uPointLightLocation!==void 0||this.uniforms.uPointLightDiffuseColors!==void 0||this.uniforms.uPointLightSpecularColors!==void 0||this.uniforms.uLightingDirection!==void 0||this.uniforms.uSpecular!==void 0},u.default.Shader.prototype.isNormalShader=function(){return this.attributes.aNormal!==void 0},u.default.Shader.prototype.isTextureShader=function(){return 0<this.samplers.length},u.default.Shader.prototype.isColorShader=function(){return this.attributes.aVertexColor!==void 0||this.uniforms.uMaterialColor!==void 0},u.default.Shader.prototype.isTexLightShader=function(){return this.isLightShader()&&this.isTextureShader()},u.default.Shader.prototype.isStrokeShader=function(){return this.uniforms.uStrokeWeight!==void 0},u.default.Shader.prototype.enableAttrib=function(a,s,l,h,p,c){var d,f;return a&&(d=a.location)!==-1&&(f=this._renderer.GL,a.enabled||(f.enableVertexAttribArray(d),a.enabled=!0),this._renderer.GL.vertexAttribPointer(d,s,l||f.FLOAT,h||!1,p||0,c||0)),this},e=u.default.Shader,i.default=e},{"../core/main":267,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.function.name":165,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":230}],323:[function(e,o,i){function u(c){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(c)}function a(c){return(a=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(d){return u(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":u(d)})(c)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=(p=e("../core/main"))&&p.__esModule?p:{default:p},l=function(c){if(c&&c.__esModule)return c;if(c===null||a(c)!=="object"&&typeof c!="function")return{default:c};var d=h();if(d&&d.has(c))return d.get(c);var f,m={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(f in c){var g;Object.prototype.hasOwnProperty.call(c,f)&&((g=y?Object.getOwnPropertyDescriptor(c,f):null)&&(g.get||g.set)?Object.defineProperty(m,f,g):m[f]=c[f])}return m.default=c,d&&d.set(c,m),m}(e("../core/constants"));function h(){var c;return typeof WeakMap!="function"?null:(c=new WeakMap,h=function(){return c},c)}s.default.Texture=function(c,d,f){return this._renderer=c,c=this._renderer.GL,(f=f||{}).dataType===c.FLOAT&&(c.getExtension("OES_texture_float")||console.log("Oh no, your device doesn't support floating point textures!"),c.getExtension("OES_texture_float_linear")||console.log("Ack! Your device doesn't support linear filtering for floating point textures")),this.src=d,this.glTex=void 0,this.glTarget=c.TEXTURE_2D,this.glFormat=f.format||c.RGBA,this.mipmaps=!1,this.glMinFilter=f.minFilter||c.LINEAR,this.glMagFilter=f.magFilter||c.LINEAR,this.glWrapS=f.wrapS||c.CLAMP_TO_EDGE,this.glWrapT=f.wrapT||c.CLAMP_TO_EDGE,this.glDataType=f.dataType||c.UNSIGNED_BYTE,this.isSrcMediaElement=s.default.MediaElement!==void 0&&d instanceof s.default.MediaElement,this._videoPrevUpdateTime=0,this.isSrcHTMLElement=s.default.Element!==void 0&&d instanceof s.default.Element&&!(d instanceof s.default.Graphics)&&!(d instanceof s.default.Renderer),this.isSrcP5Image=d instanceof s.default.Image,this.isSrcP5Graphics=d instanceof s.default.Graphics,this.isSrcP5Renderer=d instanceof s.default.Renderer,this.isImageData=typeof ImageData<"u"&&d instanceof ImageData,f=this._getTextureDataFromSource(),this.width=f.width,this.height=f.height,this.init(f),this},s.default.Texture.prototype._getTextureDataFromSource=function(){var c;return this.isSrcP5Image?c=this.src.canvas:this.isSrcMediaElement||this.isSrcP5Graphics||this.isSrcP5Renderer||this.isSrcHTMLElement?c=this.src.elt:this.isImageData&&(c=this.src),c},s.default.Texture.prototype.init=function(c){var d,f=this._renderer.GL;this.glTex=f.createTexture(),this.glWrapS=this._renderer.textureWrapX,this.glWrapT=this._renderer.textureWrapY,this.setWrapMode(this.glWrapS,this.glWrapT),this.bindTexture(),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,this.glMagFilter),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,this.glMinFilter),this.width===0||this.height===0||this.isSrcMediaElement&&!this.src.loadedmetadata?(d=new Uint8Array([1,1,1,1]),f.texImage2D(this.glTarget,0,f.RGBA,1,1,0,this.glFormat,this.glDataType,d)):f.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,c)},s.default.Texture.prototype.update=function(){var c,d,f,m=this.src;return m.width!==0&&m.height!==0&&(c=this._getTextureDataFromSource(),d=!1,f=this._renderer.GL,c.width!==this.width||c.height!==this.height?(d=!0,this.width=c.width,this.height=c.height,this.isSrcP5Image?m.setModified(!1):(this.isSrcMediaElement||this.isSrcHTMLElement)&&m.setModified(!0)):this.isSrcP5Image?m.isModified()&&m.setModified(!(d=!0)):this.isSrcMediaElement?m.isModified()?m.setModified(!(d=!0)):m.loadedmetadata&&this._videoPrevUpdateTime!==m.time()&&(this._videoPrevUpdateTime=m.time(),d=!0):this.isImageData?m._dirty&&(d=!(m._dirty=!1)):d=!0,d&&(this.bindTexture(),f.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,c)),d)},s.default.Texture.prototype.bindTexture=function(){return this._renderer.GL.bindTexture(this.glTarget,this.glTex),this},s.default.Texture.prototype.unbindTexture=function(){this._renderer.GL.bindTexture(this.glTarget,null)},s.default.Texture.prototype.setInterpolation=function(c,d){var f=this._renderer.GL;c===l.NEAREST?this.glMinFilter=f.NEAREST:this.glMinFilter=f.LINEAR,d===l.NEAREST?this.glMagFilter=f.NEAREST:this.glMagFilter=f.LINEAR,this.bindTexture(),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,this.glMinFilter),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,this.glMagFilter),this.unbindTexture()},s.default.Texture.prototype.setWrapMode=function(c,d){function f(v){return(v&v-1)==0}var m=this._renderer.GL,y=f(this.width),g=f(this.height);c===l.REPEAT?y&&g?this.glWrapS=m.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=m.CLAMP_TO_EDGE):c===l.MIRROR?y&&g?this.glWrapS=m.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=m.CLAMP_TO_EDGE):this.glWrapS=m.CLAMP_TO_EDGE,d===l.REPEAT?y&&g?this.glWrapT=m.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=m.CLAMP_TO_EDGE):d===l.MIRROR?y&&g?this.glWrapT=m.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=m.CLAMP_TO_EDGE):this.glWrapT=m.CLAMP_TO_EDGE,this.bindTexture(),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,this.glWrapS),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,this.glWrapT),this.unbindTexture()};var p=s.default.Texture;i.default=p},{"../core/constants":256,"../core/main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],324:[function(e,o,i){function u(y){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(y)}function a(y){return(a=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(g){return u(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":u(g)})(y)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.sub"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.sub"),e("core-js/modules/web.dom-collections.iterator");var s,l=(s=e("../core/main"))&&s.__esModule?s:{default:s},h=function(y){if(y&&y.__esModule)return y;if(y===null||a(y)!=="object"&&typeof y!="function")return{default:y};var g=p();if(g&&g.has(y))return g.get(y);var v,b={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(v in y){var _;Object.prototype.hasOwnProperty.call(y,v)&&((_=w?Object.getOwnPropertyDescriptor(y,v):null)&&(_.get||_.set)?Object.defineProperty(b,v,_):b[v]=y[v])}return b.default=y,g&&g.set(y,b),b}(e("../core/constants"));function p(){var y;return typeof WeakMap!="function"?null:(y=new WeakMap,p=function(){return y},y)}e("./p5.Shader"),e("./p5.RendererGL.Retained"),l.default.RendererGL.prototype._applyTextProperties=function(){},l.default.RendererGL.prototype.textWidth=function(y){return this._isOpenType()?this._textFont._textWidth(y,this._textSize):0};function c(y,g){this.width=y,this.height=g,this.infos=[],this.findImage=function(v){var b,w,_=this.width*this.height;if(_<v)throw new Error("font is too complex to render in 3D");for(var j=this.infos.length-1;0<=j;--j){var E=this.infos[j];if(E.index+v<_){w=(b=E).imageData;break}}if(!b){try{w=new ImageData(this.width,this.height)}catch{var T=document.getElementsByTagName("canvas")[0],R=!T,M=(T||((T=document.createElement("canvas")).style.display="none",document.body.appendChild(T)),T.getContext("2d"));M&&(w=M.createImageData(this.width,this.height)),R&&document.body.removeChild(T)}this.infos.push(b={index:0,imageData:w})}return M=b.index,b.index+=v,w._dirty=!0,{imageData:w,index:M}}}function d(j,g,v,b,w){var _=j.imageData.data,j=4*j.index++;_[j++]=g,_[j++]=v,_[j++]=b,_[+j]=w}function f(y){this.font=y,this.strokeImageInfos=new c(64,64),this.colDimImageInfos=new c(64,64),this.rowDimImageInfos=new c(64,64),this.colCellImageInfos=new c(64,64),this.rowCellImageInfos=new c(64,64),this.glyphInfos={},this.getGlyphInfo=function(g){var v=this.glyphInfos[g.index];if(!v){var b=g.getBoundingBox(),w=b.x1,_=b.y1,j=b.x2-w,E=b.y2-_,T=g.path.commands;if(j==0||E==0||!T.length)return this.glyphInfos[g.index]={};for(var R,M,I,D,L=[],N=[],W=[],q=8;0<=q;--q)W.push([]);for(q=8;0<=q;--q)N.push([]);var H=!0,B=!1,G=void 0;try{for(var V,X=T[Symbol.iterator]();!(H=(V=X.next()).done);H=!0){var te=V.value,A=(te.x-w)/j,O=(te.y-_)/E;if(!Pe(R,M,A,O)){switch(te.type){case"M":I=A,D=O;break;case"L":ge(R,M,A,O);break;case"Q":var U=(te.x1-w)/j,Y=(te.y1-_)/E;pe([R,A,U],[M,O,Y],{x:R,y:M,cx:U,cy:Y});break;case"Z":Pe(R,M,I,D)?L.push({x:R,y:M}):(ge(R,M,I,D),L.push({x:I,y:D}));break;case"C":for(var J=function(Be,$,re,Je,Ke,at,Ze,_e){var Be=new we(new l.default.Vector(Be,$),new l.default.Vector(re,Je),new l.default.Vector(Ke,at),new l.default.Vector(Ze,_e)).splitInflections(),je=[],K=30/m,ee=!0,$=!1,re=void 0;try{for(var ve,Ce=Be[Symbol.iterator]();!(ee=(ve=Ce.next()).done);ee=!0){for(var Oe=ve.value,He=[],Ye=void 0;!(.125<=(Ye=K/Oe.quadError()));){var Qe=Math.pow(Ye,.3333333333333333),rt=Oe.split(Qe),Et=Oe.split(1-Qe/(1-Qe));je.push(rt),He.push(Oe),Oe=Et}Ye<1&&je.push(Oe.split(.5)),je.push(Oe),Array.prototype.push.apply(je,He.reverse())}}catch(xt){$=!0,re=xt}finally{try{ee||Ce.return==null||Ce.return()}finally{if($)throw re}}return je}(R,M,(te.x1-w)/j,(te.y1-_)/E,(te.x2-w)/j,(te.y2-_)/E,A,O),ae=0;ae<J.length;ae++){var ue=J[ae].toQuadratic();pe([ue.x,ue.x1,ue.cx],[ue.y,ue.y1,ue.cy],ue)}break;default:throw new Error("unknown command type: ".concat(te.type))}R=A,M=O}}}catch(Fe){B=!0,G=Fe}finally{try{H||X.return==null||X.return()}finally{if(B)throw G}}for(var de=L.length,ne=this.strokeImageInfos.findImage(de),le=ne.index,me=0;me<de;++me){var Q=L[me];d(ne,ye(Q.x),ye(Q.y),ye(Q.cx),ye(Q.cy))}(v=this.glyphInfos[g.index]={glyph:g,uGlyphRect:[b.x1,-b.y1,b.x2,-b.y2],strokeImageInfo:ne,strokes:L,colInfo:Ie(W,this.colDimImageInfos,this.colCellImageInfos),rowInfo:Ie(N,this.rowDimImageInfos,this.rowCellImageInfos)}).uGridOffset=[v.colInfo.dimOffset,v.rowInfo.dimOffset]}return v;function pe(Fe,Te,$e){var Je=L.length;function Ke(je,K,ee){for(var $=je.length;0<$--;){var re=je[$];re<K&&(K=re),ee<re&&(ee=re)}return{min:K,max:ee}}L.push($e);for(var $e=Ke(Fe,1,0),Fe=Math.max(Math.floor(9*$e.min),0),at=Math.min(Math.ceil(9*$e.max),9),Ze=Fe;Ze<at;++Ze)W[Ze].push(Je);for(var $e=Ke(Te,1,0),Fe=Math.max(Math.floor(9*$e.min),0),_e=Math.min(Math.ceil(9*$e.max),9),Be=Fe;Be<_e;++Be)N[Be].push(Je)}function ye(Fe){return(Fe=($e=255)*Fe)<(Te=0)?Te:$e<Fe?$e:Fe;var Te,$e}function we(Fe,Te,$e,Je){this.p0=Fe,this.c0=Te,this.c1=$e,this.p1=Je,this.toQuadratic=function(){return{x:this.p0.x,y:this.p0.y,x1:this.p1.x,y1:this.p1.y,cx:(3*(this.c0.x+this.c1.x)-(this.p0.x+this.p1.x))/4,cy:(3*(this.c0.y+this.c1.y)-(this.p0.y+this.p1.y))/4}},this.quadError=function(){return l.default.Vector.sub(l.default.Vector.sub(this.p1,this.p0),l.default.Vector.mult(l.default.Vector.sub(this.c1,this.c0),3)).mag()/2},this.split=function(Be){var at=l.default.Vector.lerp(this.p0,this.c0,Be),_e=l.default.Vector.lerp(this.c0,this.c1,Be),Ze=l.default.Vector.lerp(at,_e,Be),_e=(this.c1=l.default.Vector.lerp(this.c1,this.p1,Be),this.c0=l.default.Vector.lerp(_e,this.c1,Be),l.default.Vector.lerp(Ze,this.c0,Be)),Be=new we(this.p0,at,Ze,_e);return this.p0=_e,Be},this.splitInflections=function(){var Ke=l.default.Vector.sub(this.c0,this.p0),at=l.default.Vector.sub(l.default.Vector.sub(this.c1,this.c0),Ke),Ze=l.default.Vector.sub(l.default.Vector.sub(l.default.Vector.sub(this.p1,this.c1),Ke),l.default.Vector.mult(at,2)),_e=[],Be=at.x*Ze.y-at.y*Ze.x;return Be!==0&&0<=(Ke=(Ze=Ke.x*Ze.y-Ke.y*Ze.x)*Ze-4*Be*(Ke.x*at.y-Ke.y*at.x))&&(Be<0&&(Be=-Be,Ze=-Ze),Ke=(-Ze+(at=Math.sqrt(Ke)))/(2*Be),0<(Ze=(-Ze-at)/(2*Be))&&Ze<1&&(_e.push(this.split(Ze)),Ke=1-(1-Ke)/(1-Ze)),0<Ke&&Ke<1&&_e.push(this.split(Ke))),_e.push(this),_e}}function ge(Fe,Te,$e,Je){pe([Fe,$e],[Te,Je],{x:Fe,y:Te,cx:(Fe+$e)/2,cy:(Te+Je)/2})}function Pe(Fe,Te,$e,Je){return Math.abs($e-Fe)<1e-5&&Math.abs(Je-Te)<1e-5}function Ie(Fe,Te,$e){for(var Je=Fe.length,Ke=Te.findImage(Je),Te=Ke.index,at=0,Ze=0;Ze<Je;++Ze)at+=Fe[Ze].length;for(var _e=$e.findImage(at),Be=0;Be<Je;++Be){var je=Fe[Be],K=je.length,ee=_e.index;d(Ke,ee>>7,127&ee,K>>7,127&K);for(var $=0;$<K;++$){var re=je[$]+le;d(_e,re>>7,127&re,0,0)}}return{cellImageInfo:_e,dimOffset:Te,dimImageInfo:Ke}}}}var m=Math.sqrt(3);l.default.RendererGL.prototype._renderText=function(y,g,v,b,w){if(this._textFont&&typeof this._textFont!="string"){if(!(w<=b)&&this._doFill){if(this._isOpenType()){y.push();var w=this._doStroke,_=this.drawMode,j=(this._doStroke=!1,this.drawMode=h.TEXTURE,this._textFont.font),E=(E=this._textFont._fontInfo)||(this._textFont._fontInfo=new f(j)),v=this._textFont._handleAlignment(this,g,v,b),b=this._textSize/j.unitsPerEm,T=(this.translate(v.x,v.y,0),this.scale(b,b,1),this.GL),v=!this._defaultFontShader,R=this._getFontShader(),M=(R.init(),R.bindShader(),v&&(R.setUniform("uGridImageSize",[64,64]),R.setUniform("uCellsImageSize",[64,64]),R.setUniform("uStrokeImageSize",[64,64]),R.setUniform("uGridSize",[9,9])),this._applyColorBlend(this.curFillColor),this.retainedMode.geometry.glyph),I=(M||((b=this._textGeom=new l.default.Geometry(1,1,function(){for(var ue=0;ue<=1;ue++)for(var de=0;de<=1;de++)this.vertices.push(new l.default.Vector(de,ue,0)),this.uvs.push(de,ue)})).computeFaces().computeNormals(),M=this.createBuffers("glyph",b)),!0),v=!1,b=void 0;try{for(var D,L=this.retainedMode.buffers.text[Symbol.iterator]();!(I=(D=L.next()).done);I=!0)D.value._prepareBuffer(M,R)}catch(ue){v=!0,b=ue}finally{try{I||L.return==null||L.return()}finally{if(v)throw b}}this._bindBuffer(M.indexBuffer,T.ELEMENT_ARRAY_BUFFER),R.setUniform("uMaterialColor",this.curFillColor);try{var N=0,W=null,q=j.stringToGlyphs(g),H=!0,B=!1,G=void 0;try{for(var V,X=q[Symbol.iterator]();!(H=(V=X.next()).done);H=!0){var te,A,O=V.value,U=(W&&(N+=j.getKerningValue(W,O)),E.getGlyphInfo(O));U.uGlyphRect&&(te=U.rowInfo,A=U.colInfo,R.setUniform("uSamplerStrokes",U.strokeImageInfo.imageData),R.setUniform("uSamplerRowStrokes",te.cellImageInfo.imageData),R.setUniform("uSamplerRows",te.dimImageInfo.imageData),R.setUniform("uSamplerColStrokes",A.cellImageInfo.imageData),R.setUniform("uSamplerCols",A.dimImageInfo.imageData),R.setUniform("uGridOffset",U.uGridOffset),R.setUniform("uGlyphRect",U.uGlyphRect),R.setUniform("uGlyphOffset",N),R.bindTextures(),T.drawElements(T.TRIANGLES,6,this.GL.UNSIGNED_SHORT,0)),N+=O.advanceWidth,W=O}}catch(ue){B=!0,G=ue}finally{try{H||X.return==null||X.return()}finally{if(B)throw G}}}finally{R.unbindShader(),this._doStroke=w,this.drawMode=_,y.pop()}}else console.log("WEBGL: only Opentype (.otf) and Truetype (.ttf) fonts are supported");return y}}else console.log("WEBGL: you must load and set a font before drawing text. See `loadFont` and `textFont` for more details.")}},{"../core/constants":256,"../core/main":267,"./p5.RendererGL.Retained":320,"./p5.Shader":322,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.split":191,"core-js/modules/es.string.sub":192,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}]},{},[251])(251)})})(Z_);const J_=Mv(dh);var fh=function(){return fh=Object.assign||function(t){for(var r,n=1,e=arguments.length;n<e;n++)for(var o in r=arguments[n])Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o]);return t},fh.apply(this,arguments)};function jg(t){var r;(r=t.current)===null||r===void 0||r.remove(),t.current=null}function eS(t){var r=t.sketch,n=t.children,e=function(u,a){var s={};for(var l in u)Object.prototype.hasOwnProperty.call(u,l)&&a.indexOf(l)<0&&(s[l]=u[l]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function"){var h=0;for(l=Object.getOwnPropertySymbols(u);h<l.length;h++)a.indexOf(l[h])<0&&Object.prototype.propertyIsEnumerable.call(u,l[h])&&(s[l[h]]=u[l[h]])}return s}(t,["sketch","children"]),o=gn.createRef(),i=gn.useRef(null);return gn.useEffect(function(){o.current!==null&&(jg(i),i.current=function(u,a){return new J_(u,a)}(r,o.current))},[r]),gn.useEffect(function(){var u,a;(a=(u=i.current)===null||u===void 0?void 0:u.updateWithProps)===null||a===void 0||a.call(u,e)},[e,o]),gn.useEffect(function(){return function(){return jg(i)}},[]),Nv.createElement("div",{ref:o,className:"react-p5-wrapper"},n)}var tS=gn.memo(function(t){return t.sketch===void 0?(console.error("[ReactP5Wrapper] The `sketch` prop is required."),null):Nv.createElement(eS,fh({},t))},function(t,r){return B1(t,r).length===0});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var U1=function(t,r){return(U1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(var o in e)e.hasOwnProperty(o)&&(n[o]=e[o])})(t,r)};function uo(t,r){function n(){this.constructor=t}U1(t,r),t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}function lt(t,r,n,e){return new(n||(n=Promise))(function(o,i){function u(l){try{s(e.next(l))}catch(h){i(h)}}function a(l){try{s(e.throw(l))}catch(h){i(h)}}function s(l){l.done?o(l.value):new n(function(h){h(l.value)}).then(u,a)}s((e=e.apply(t,r||[])).next())})}function ct(t,r){var n,e,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(s){return function(l){return function(h){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,e&&(o=2&h[0]?e.return:h[0]?e.throw||((o=e.return)&&o.call(e),0):e.next)&&!(o=o.call(e,h[1])).done)return o;switch(e=0,o&&(h=[2&h[0],o.value]),h[0]){case 0:case 1:o=h;break;case 4:return u.label++,{value:h[1],done:!1};case 5:u.label++,e=h[1],h=[0];continue;case 7:h=u.ops.pop(),u.trys.pop();continue;default:if(!(o=(o=u.trys).length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){u=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){u.label=h[1];break}if(h[0]===6&&u.label<o[1]){u.label=o[1],o=h;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(h);break}o[2]&&u.ops.pop(),u.trys.pop();continue}h=r.call(t,u)}catch(p){h=[6,p],e=0}finally{n=o=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([s,l])}}}var rS=function(){function t(r){this.global=r,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return t.prototype.setPlatform=function(r,n){this.platform!=null&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+n+"."),this.platformName=r,this.platform=n},t.prototype.registerFlag=function(r,n,e){if(this.flagRegistry[r]={evaluationFn:n,setHook:e},this.urlFlags[r]!=null){var o=this.urlFlags[r];console.warn("Setting feature override from URL "+r+": "+o+"."),this.set(r,o)}},t.prototype.get=function(r){return r in this.flags?this.flags[r]:(this.flags[r]=this.evaluateFlag(r),this.flags[r])},t.prototype.getNumber=function(r){return this.get(r)},t.prototype.getBool=function(r){return this.get(r)},t.prototype.getFlags=function(){return this.flags},Object.defineProperty(t.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),t.prototype.set=function(r,n){if(this.flagRegistry[r]==null)throw new Error("Cannot set flag "+r+" as it has not been registered.");this.flags[r]=n,this.flagRegistry[r].setHook!=null&&this.flagRegistry[r].setHook(n)},t.prototype.evaluateFlag=function(r){if(this.flagRegistry[r]==null)throw new Error("Cannot evaluate flag '"+r+"': no evaluation function found.");return this.flagRegistry[r].evaluationFn()},t.prototype.setFlags=function(r){this.flags=Object.assign({},r)},t.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},t.prototype.populateURLFlags=function(){var r=this;if(this.global!==void 0&&this.global.location!==void 0&&this.global.location.search!==void 0){var n,e,o=(n=this.global.location.search,e={},n.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(i){for(var u=[],a=1;a<arguments.length;a++)u[a-1]=arguments[a];return nS(e,u[0],u[1]),u.join("=")}),e);"tfjsflags"in o&&o.tfjsflags.split(",").forEach(function(i){var u=i.split(":"),a=u[0],s=u[1];r.urlFlags[a]=function(l,h){if((h=h.toLowerCase())==="true"||h==="false")return h==="true";if(""+ +h===h)return+h;throw new Error("Could not parse value flag value "+h+" for flag "+l+".")}(a,s)})}},t}();function nS(t,r,n){t[decodeURIComponent(r)]=decodeURIComponent(n||"")}function Ue(){return G1}var G1=null,uc=new Map,hh=new Map;function z1(t,r){var n=W1(t,r);return uc.get(n)}function oS(t){return hh.get(t)}function Cg(t){for(var r=uc.entries(),n=[];;){var e=r.next(),o=e.done,i=e.value;if(o)break;var u=i[0],a=i[1];u.split("_")[0]===t&&n.push(a)}return n}function V1(t){var r=t.kernelName,n=t.backendName,e=W1(r,n);if(uc.has(e))throw new Error("The kernel '"+r+"' for backend '"+n+"' is already registered");uc.set(e,t)}function iS(t){var r=t.kernelName;hh.has(r)&&console.warn("Overriding the gradient for '"+r+"'"),hh.set(r,t)}function W1(t,r){return r+"_"+t}function ph(t,r,n){return Math.max(t,Math.min(r,n))}function H1(t){return t%2==0?t:t+1}function aS(t){for(var r=0,n=0;n<t.length;n++)r+=t[n];return r}function ce(t,r){if(!t)throw new Error(typeof r=="string"?r:r())}function Ut(t,r,n){n===void 0&&(n=""),ce(Br(t,r),function(){return n+" Shapes "+t+" and "+r+" must match"})}function ps(t){ce(t!=null,function(){return"The input to the tensor constructor must be a non-null value."})}function ss(t,r,n){if(r===void 0&&(r=[]),n===void 0&&(n=!1),r==null&&(r=[]),Array.isArray(t)||ko(t)&&!n)for(var e=0;e<t.length;++e)ss(t[e],r,n);else r.push(t);return r}function ht(t){if(t.length===0)return 1;for(var r=t[0],n=1;n<t.length;n++)r*=t[n];return r}function Br(t,r){if(t===r)return!0;if(t==null||r==null||t.length!==r.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==r[n])return!1;return!0}function pr(t){return t%1==0}function sS(t){if(Math.tanh!=null)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;var r=Math.exp(2*t);return(r-1)/(r+1)}function mh(t){var r=Math.ceil(Math.sqrt(t));return[r,Math.ceil(t/r)]}function qa(t,r){return r<=t.length?t:t+" ".repeat(r-t.length)}function kg(t,r,n){return r===void 0&&(r=function(e){return 0}),new Promise(function(e,o){var i=0,u=function(){if(t())e();else{i++;var a=r(i);n!=null&&i>=n?o():setTimeout(u,a)}};u()})}function uS(t,r){for(var n=1,e=-1,o=0;o<t.length;++o)if(t[o]>=0)n*=t[o];else if(t[o]===-1){if(e!==-1)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+e+" and dim "+o);e=o}else if(t[o]<0)throw Error("Shapes can not be < 0. Found "+t[o]+" at dim "+o);if(e===-1){if(r>0&&r!==n)throw Error("Size("+r+") must match the product of shape "+t);return t}if(n===0)throw Error("Cannot infer the missing size in ["+t+"] when there are 0 elements");if(r%n!=0)throw Error("The implicit shape can't be a fractional number. Got "+r+" / "+n);var i=t.slice();return i[e]=r/n,i}function Rr(t,r){var n=r.length;return ce((t=t==null?r.map(function(e,o){return o}):[].concat(t)).every(function(e){return e>=-n&&e<n}),function(){return"All values in axis param must be in range [-"+n+", "+n+") but got axis "+t}),ce(t.every(function(e){return pr(e)}),function(){return"All values in axis param must be integers but got axis "+t}),t.map(function(e){return e<0?n+e:e})}function Hi(t,r){for(var n=[],e=[],o=r!=null&&Array.isArray(r)&&r.length===0,i=r==null||o?null:Rr(r,t).sort(),u=0,a=0;a<t.length;++a){if(i!=null){if(i[u]===a&&t[a]!==1)throw new Error("Can't squeeze axis "+a+" since its dim '"+t[a]+"' is not 1");(i[u]==null||i[u]>a)&&t[a]===1&&(n.push(t[a]),e.push(a)),i[u]<=a&&u++}t[a]!==1&&(n.push(t[a]),e.push(a))}return{newShape:n,keptDims:e}}function yu(t,r){var n=null;if(t==null||t==="float32")n=new Float32Array(r);else if(t==="int32")n=new Int32Array(r);else{if(t!=="bool")throw new Error("Unknown data type "+t);n=new Uint8Array(r)}return n}function lc(t,r){var n=null;if(t==null||t==="float32")n=new Float32Array(r);else if(t==="int32")n=new Int32Array(r);else if(t==="bool")n=new Uint8Array(r);else{if(t!=="string")throw new Error("Unknown data type "+t);n=new Array(r)}return n}function lS(t,r){for(var n=0;n<t.length;n++){var e=t[n];if(isNaN(e)||!isFinite(e))throw Error("A tensor of type "+r+" being uploaded contains "+e+".")}}function cS(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function dS(t,r){return r!=="complex64"&&(r!=="float32"||t==="complex64")&&(r!=="int32"||t==="float32"||t==="complex64")&&(r!=="bool"||t!=="bool")}function ko(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array}function q1(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error("Unknown dtype "+t)}function fS(t){if(t==null)return 0;var r=0;return t.forEach(function(n){return r+=n.length}),r}function Rp(t){return typeof t=="string"||t instanceof String}function hS(t){return typeof t=="boolean"}function pS(t){return typeof t=="number"}function Tu(t){return Array.isArray(t)?Tu(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array?"int32":pS(t)?"float32":Rp(t)?"string":hS(t)?"bool":"float32"}function yh(t){return!!(t&&t.constructor&&t.call&&t.apply)}function gh(t,r){for(var n=r;n<t;++n)if(t%n==0)return n;return t}function To(t){var r=t.length;if(r<2)return[];var n=new Array(r-1);n[r-2]=t[r-1];for(var e=r-3;e>=0;--e)n[e]=n[e+1]*t[e+1];return n}function $1(t,r,n){if(r==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=ss(t)),n&&lS(t,r),function(i,u){return i instanceof Float32Array&&u==="float32"||i instanceof Int32Array&&u==="int32"||i instanceof Uint8Array&&u==="bool"}(t,r))return t;if(r==null||r==="float32"||r==="complex64")return new Float32Array(t);if(r==="int32")return new Int32Array(t);if(r==="bool"){for(var e=new Uint8Array(t.length),o=0;o<e.length;++o)Math.round(t[o])!==0&&(e[o]=1);return e}throw new Error("Unknown data type "+r)}function Tg(t,r){if(t.length===0)return r[0];var n=t.reduce(function(e,o){return e*o});if(n===0)return[];if(n!==r.length)throw new Error("["+t+"] does not match the input size.");return function e(o,i,u){var a=new Array;if(i.length===1)for(var s=i[0],l=0;l<s;l++)a[l]=u[o+l];else{s=i[0];var h=i.slice(1),p=h.reduce(function(c,d){return c*d});for(l=0;l<s;l++)a[l]=e(o+l*p,h,u)}return a}(0,t,r)}function X1(t,r){for(var n=Mu(t,r),e=0;e<n.length;e++)n[e]=1;return n}function Mu(t,r){if(r==null||r==="float32"||r==="complex64")return new Float32Array(t);if(r==="int32")return new Int32Array(t);if(r==="bool")return new Uint8Array(t);throw new Error("Unknown data type "+r)}function xo(){return Ue().platform.now()}function Y1(t){t.forEach(function(r){ce(Number.isInteger(r)&&r>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+t+"]."})})}function mS(t,r){return r===void 0&&(r="utf-8"),r=r||"utf-8",Ue().platform.encode(t,r)}function cc(t,r){return r===void 0&&(r="utf-8"),r=r||"utf-8",Ue().platform.decode(t,r)}function Mg(t,r,n){if(r===0)return 0;if(r===1)return t[0];for(var e=t[t.length-1],o=0;o<t.length-1;++o)e+=n[o]*t[o];return e}function yS(t,r,n){if(r===0)return[];if(r===1)return[t];for(var e=new Array(r),o=0;o<e.length-1;++o)e[o]=Math.floor(t/n[o]),t-=e[o]*n[o];return e[e.length-1]=t,e}var gS=function(){function t(r,n){this.backendTimer=r,this.logger=n,n==null&&(this.logger=new vS)}return t.prototype.profileKernel=function(r,n,e){var o,i=this,u=this.backendTimer.time(function(){o=e()});return o.forEach(function(a){a.data().then(function(s){(function(l,h,p){if(h!=="float32")return!1;for(var c=0;c<l.length;c++){var d=l[c];if(isNaN(d)||!isFinite(d))return console.warn("Found "+d+" in the result of '"+p+"'"),!0}})(s,a.dtype,r),u.then(function(l){var h="";l.getExtraProfileInfo!=null&&(h=l.getExtraProfileInfo()),i.logger.logKernelProfile(r,a,s,l.kernelMs,n,h)})})}),o},t}(),vS=function(){function t(){}return t.prototype.logKernelProfile=function(r,n,e,o,i,u){var a=typeof o=="number"?qa(o+"ms",9):o.error,s=qa(r,25),l=n.rank,h=n.size,p=qa(n.shape.toString(),14),c="";for(var d in i){var f=i[d].shape||n.shape,m=f.length;c+=d+": "+m+"D "+(m>0?f:"")+" "}console.log("%c"+s+"	%c"+a+"	%c"+l+"D "+p+"	%c"+h+"	%c"+c+"	%c"+u,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},t}(),Rg=20,Ps=3,zd=7;function bS(t,r,n,e){var o=To(r),i=function(l,h,p,c){var d=ht(h),f=c[c.length-1],m=new Array(f).fill(0),y=h.length,g=p==="complex64"?Os(l):l;if(y>1)for(var v=0;v<d/f;v++)for(var b=v*f,w=0;w<f;w++)m[w]=Math.max(m[w],Ds(g[b+w],0,p).length);return m}(t,r,n,o),u=r.length,a=function l(h,p,c,d,f,m){m===void 0&&(m=!0);var y=c==="complex64"?2:1,g=p[0],v=p.length;if(v===0)return c==="complex64"?[Ds(Os(h)[0],0,c)]:c==="bool"?[K1(h[0])]:[h[0].toString()];if(v===1){if(g>Rg){var b=Ps*y,w=Array.from(h.slice(0,b)),_=Array.from(h.slice((g-Ps)*y,g*y));return c==="complex64"&&(w=Os(w),_=Os(_)),["["+w.map(function(W,q){return Ds(W,f[q],c)}).join(", ")+", ..., "+_.map(function(W,q){return Ds(W,f[g-Ps+q],c)}).join(", ")+"]"]}return["["+(c==="complex64"?Os(h):Array.from(h)).map(function(W,q){return Ds(W,f[q],c)}).join(", ")+"]"]}var j=p.slice(1),E=d.slice(1),T=d[0]*y,R=[];if(g>Rg){for(var M=0;M<Ps;M++){var I=(D=M*T)+T;R.push.apply(R,l(h.slice(D,I),j,c,E,f,!1))}for(R.push("..."),M=g-Ps;M<g;M++)I=(D=M*T)+T,R.push.apply(R,l(h.slice(D,I),j,c,E,f,M===g-1))}else for(M=0;M<g;M++){var D;I=(D=M*T)+T,R.push.apply(R,l(h.slice(D,I),j,c,E,f,M===g-1))}var L=v===2?",":"";for(R[0]="["+R[0]+L,M=1;M<R.length-1;M++)R[M]=" "+R[M]+L;var N=`,
`;for(M=2;M<v;M++)N+=`
`;return R[R.length-1]=" "+R[R.length-1]+"]"+(m?"":N),R}(t,r,n,o,i),s=["Tensor"];return e&&(s.push("  dtype: "+n),s.push("  rank: "+u),s.push("  shape: ["+r+"]"),s.push("  values:")),s.push(a.map(function(l){return"    "+l}).join(`
`)),s.join(`
`)}function Ds(t,r,n){return qa(Array.isArray(t)?parseFloat(t[0].toFixed(zd))+" + "+parseFloat(t[1].toFixed(zd))+"j":Rp(t)?"'"+t+"'":n==="bool"?K1(t):parseFloat(t.toFixed(zd)).toString(),r)}function K1(t){return t===0?"false":"true"}function Os(t){for(var r=[],n=0;n<t.length;n+=2)r.push([t[n],t[n+1]]);return r}var gu=function(){function t(r,n,e){var o=this;if(this.dtype=n,this.shape=r.slice(),this.size=ht(r),e!=null){var i=e.length;ce(i===this.size,function(){return"Length of values '"+i+"' does not match the size inferred by the shape '"+o.size+"'."})}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=e||lc(n,this.size),this.strides=To(r)}return t.prototype.set=function(r){for(var n=this,e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];e.length===0&&(e=[0]),ce(e.length===this.rank,function(){return"The number of provided coordinates ("+e.length+") must match the rank ("+n.rank+")"});var i=this.locToIndex(e);this.values[i]=r},t.prototype.get=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];r.length===0&&(r=[0]);for(var e=0,o=0,i=r;o<i.length;o++){var u=i[o];if(u<0||u>=this.shape[e]){var a="Requested out of range element at "+r+".   Buffer shape="+this.shape;throw new Error(a)}e++}for(var s=r[r.length-1],l=0;l<r.length-1;++l)s+=this.strides[l]*r[l];return this.values[s]},t.prototype.locToIndex=function(r){if(this.rank===0)return 0;if(this.rank===1)return r[0];for(var n=r[r.length-1],e=0;e<r.length-1;++e)n+=this.strides[e]*r[e];return n},t.prototype.indexToLoc=function(r){if(this.rank===0)return[];if(this.rank===1)return[r];for(var n=new Array(this.shape.length),e=0;e<n.length-1;++e)n[e]=Math.floor(r/this.strides[e]),r-=n[e]*this.strides[e];return n[n.length-1]=r,n},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.toTensor=function(){return _o().makeTensor(this.values,this.shape,this.dtype)},t}(),_o=null,Le=null,Q1=null,ir=function(){function t(r,n,e,o){this.kept=!1,this.isDisposedInternal=!1,this.shape=r.slice(),this.dtype=n||"float32",this.size=ht(r),this.strides=To(r),this.dataId=e,this.id=o,this.rankType=this.rank<5?this.rank.toString():"higher"}return t.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},t.prototype.asScalar=function(){return this.throwIfDisposed(),ce(this.size===1,function(){return"The array must have only 1 element."}),this.reshape([])},t.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},t.prototype.as2D=function(r,n){return this.throwIfDisposed(),this.reshape([r,n])},t.prototype.as3D=function(r,n,e){return this.throwIfDisposed(),this.reshape([r,n,e])},t.prototype.as4D=function(r,n,e,o){return this.throwIfDisposed(),this.reshape([r,n,e,o])},t.prototype.as5D=function(r,n,e,o,i){return this.throwIfDisposed(),this.reshape([r,n,e,o,i])},t.prototype.asType=function(r){return this.throwIfDisposed(),Le.cast(this,r)},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.buffer=function(){return lt(this,void 0,void 0,function(){var r;return ct(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return r=n.sent(),[2,Le.buffer(this.shape,this.dtype,r)]}})})},t.prototype.bufferSync=function(){return Le.buffer(this.shape,this.dtype,this.dataSync())},t.prototype.array=function(){return lt(this,void 0,void 0,function(){var r;return ct(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return r=n.sent(),[2,Tg(this.shape,r)]}})})},t.prototype.arraySync=function(){return Tg(this.shape,this.dataSync())},t.prototype.data=function(){return lt(this,void 0,void 0,function(){var r,n;return ct(this,function(e){switch(e.label){case 0:return this.throwIfDisposed(),r=_o().read(this.dataId),this.dtype!=="string"?[3,2]:[4,r];case 1:n=e.sent();try{return[2,n.map(function(o){return cc(o)})]}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}e.label=2;case 2:return[2,r]}})})},t.prototype.dataSync=function(){this.throwIfDisposed();var r=_o().readSync(this.dataId);if(this.dtype==="string")try{return r.map(function(n){return cc(n)})}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return r},t.prototype.bytes=function(){return lt(this,void 0,void 0,function(){var r;return ct(this,function(n){switch(n.label){case 0:return this.throwIfDisposed(),[4,_o().read(this.dataId)];case 1:return r=n.sent(),this.dtype==="string"?[2,r]:[2,new Uint8Array(r.buffer)]}})})},t.prototype.dispose=function(){this.isDisposed||(_o().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(t.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),t.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},t.prototype.toFloat=function(){return this.asType("float32")},t.prototype.toInt=function(){return this.asType("int32")},t.prototype.toBool=function(){return this.asType("bool")},t.prototype.print=function(r){return r===void 0&&(r=!1),Le.print(this,r)},t.prototype.reshape=function(r){return this.throwIfDisposed(),Le.reshape(this,r)},t.prototype.reshapeAs=function(r){return this.throwIfDisposed(),this.reshape(r.shape)},t.prototype.expandDims=function(r){return r===void 0&&(r=0),Le.expandDims(this,r)},t.prototype.cumsum=function(r,n,e){return r===void 0&&(r=0),n===void 0&&(n=!1),e===void 0&&(e=!1),Le.cumsum(this,r,n,e)},t.prototype.squeeze=function(r){return this.throwIfDisposed(),Le.squeeze(this,r)},t.prototype.clone=function(){return this.throwIfDisposed(),Le.clone(this)},t.prototype.oneHot=function(r,n,e){return this.throwIfDisposed(),Le.oneHot(this,r,n,e)},t.prototype.toString=function(r){return r===void 0&&(r=!1),bS(this.dataSync(),this.shape,this.dtype,r)},t.prototype.tile=function(r){return this.throwIfDisposed(),Le.tile(this,r)},t.prototype.gather=function(r,n){return n===void 0&&(n=0),this.throwIfDisposed(),Le.gather(this,r,n)},t.prototype.matMul=function(r,n,e){return n===void 0&&(n=!1),e===void 0&&(e=!1),this.throwIfDisposed(),Le.matMul(this,r,n,e)},t.prototype.dot=function(r){return this.throwIfDisposed(),Le.dot(this,r)},t.prototype.norm=function(r,n,e){return r===void 0&&(r="euclidean"),n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),Le.norm(this,r,n,e)},t.prototype.slice=function(r,n){return this.throwIfDisposed(),Le.slice(this,r,n)},t.prototype.reverse=function(r){return this.throwIfDisposed(),Le.reverse(this,r)},t.prototype.concat=function(r,n){return n===void 0&&(n=0),this.throwIfDisposed(),r instanceof t&&(r=[r]),Le.concat([this].concat(r),n)},t.prototype.split=function(r,n){return n===void 0&&(n=0),this.throwIfDisposed(),Le.split(this,r,n)},t.prototype.stack=function(r,n){return n===void 0&&(n=0),Le.stack([this,r],n)},t.prototype.unstack=function(r){return r===void 0&&(r=0),Le.unstack(this,r)},t.prototype.pad=function(r,n){return n===void 0&&(n=0),Le.pad(this,r,n)},t.prototype.batchNormalization=function(r,n,e,o,i){return e===void 0&&(e=.001),Q1("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(r,n,i,o,e)},t.prototype.batchNorm=function(r,n,e,o,i){return i===void 0&&(i=.001),this.throwIfDisposed(),Le.batchNorm(this,r,n,e,o,i)},t.prototype.all=function(r,n){return r===void 0&&(r=null),n===void 0&&(n=!1),this.throwIfDisposed(),Le.all(this,r,n)},t.prototype.any=function(r,n){return r===void 0&&(r=null),n===void 0&&(n=!1),this.throwIfDisposed(),Le.any(this,r,n)},t.prototype.logSumExp=function(r,n){return r===void 0&&(r=null),n===void 0&&(n=!1),this.throwIfDisposed(),Le.logSumExp(this,r,n)},t.prototype.sum=function(r,n){return r===void 0&&(r=null),n===void 0&&(n=!1),this.throwIfDisposed(),Le.sum(this,r,n)},t.prototype.prod=function(r,n){return r===void 0&&(r=null),n===void 0&&(n=!1),this.throwIfDisposed(),Le.prod(this,r,n)},t.prototype.mean=function(r,n){return r===void 0&&(r=null),n===void 0&&(n=!1),this.throwIfDisposed(),Le.mean(this,r,n)},t.prototype.min=function(r,n){return r===void 0&&(r=null),n===void 0&&(n=!1),this.throwIfDisposed(),Le.min(this,r,n)},t.prototype.max=function(r,n){return r===void 0&&(r=null),n===void 0&&(n=!1),this.throwIfDisposed(),Le.max(this,r,n)},t.prototype.argMin=function(r){return r===void 0&&(r=null),this.throwIfDisposed(),Le.argMin(this,r)},t.prototype.argMax=function(r){return r===void 0&&(r=null),this.throwIfDisposed(),Le.argMax(this,r)},t.prototype.cast=function(r){return this.throwIfDisposed(),Le.cast(this,r)},t.prototype.add=function(r){return this.throwIfDisposed(),Le.add(this,r)},t.prototype.addStrict=function(r){return this.throwIfDisposed(),Le.addStrict(this,r)},t.prototype.atan2=function(r){return this.throwIfDisposed(),Le.atan2(this,r)},t.prototype.sub=function(r){return this.throwIfDisposed(),Le.sub(this,r)},t.prototype.subStrict=function(r){return this.throwIfDisposed(),Le.subStrict(this,r)},t.prototype.pow=function(r){return this.throwIfDisposed(),Le.pow(this,r)},t.prototype.powStrict=function(r){return this.throwIfDisposed(),Le.powStrict(this,r)},t.prototype.mul=function(r){return this.throwIfDisposed(),Le.mul(this,r)},t.prototype.mulStrict=function(r){return this.throwIfDisposed(),Le.mulStrict(this,r)},t.prototype.div=function(r){return this.throwIfDisposed(),Le.div(this,r)},t.prototype.divNoNan=function(r){return this.throwIfDisposed(),Le.divNoNan(this,r)},t.prototype.floorDiv=function(r){return this.throwIfDisposed(),Le.floorDiv(this,r)},t.prototype.divStrict=function(r){return this.throwIfDisposed(),Le.divStrict(this,r)},t.prototype.minimum=function(r){return this.throwIfDisposed(),Le.minimum(this,r)},t.prototype.minimumStrict=function(r){return this.throwIfDisposed(),Le.minimumStrict(this,r)},t.prototype.maximum=function(r){return this.throwIfDisposed(),Le.maximum(this,r)},t.prototype.maximumStrict=function(r){return this.throwIfDisposed(),Le.maximumStrict(this,r)},t.prototype.mod=function(r){return this.throwIfDisposed(),Le.mod(this,r)},t.prototype.modStrict=function(r){return this.throwIfDisposed(),Le.modStrict(this,r)},t.prototype.squaredDifferenceStrict=function(r){return this.throwIfDisposed(),Le.squaredDifferenceStrict(this,r)},t.prototype.transpose=function(r){return this.throwIfDisposed(),Le.transpose(this,r)},t.prototype.notEqual=function(r){return this.throwIfDisposed(),Le.notEqual(this,r)},t.prototype.notEqualStrict=function(r){return this.throwIfDisposed(),Le.notEqualStrict(this,r)},t.prototype.less=function(r){return this.throwIfDisposed(),Le.less(this,r)},t.prototype.lessStrict=function(r){return this.throwIfDisposed(),Le.lessStrict(this,r)},t.prototype.equal=function(r){return this.throwIfDisposed(),Le.equal(this,r)},t.prototype.equalStrict=function(r){return this.throwIfDisposed(),Le.equalStrict(this,r)},t.prototype.lessEqual=function(r){return this.throwIfDisposed(),Le.lessEqual(this,r)},t.prototype.lessEqualStrict=function(r){return this.throwIfDisposed(),Le.lessEqualStrict(this,r)},t.prototype.greater=function(r){return this.throwIfDisposed(),Le.greater(this,r)},t.prototype.greaterStrict=function(r){return this.throwIfDisposed(),Le.greaterStrict(this,r)},t.prototype.greaterEqual=function(r){return this.throwIfDisposed(),Le.greaterEqual(this,r)},t.prototype.greaterEqualStrict=function(r){return this.throwIfDisposed(),Le.greaterEqualStrict(this,r)},t.prototype.logicalAnd=function(r){return this.throwIfDisposed(),Le.logicalAnd(this,r)},t.prototype.logicalOr=function(r){return this.throwIfDisposed(),Le.logicalOr(this,r)},t.prototype.logicalNot=function(){return this.throwIfDisposed(),Le.logicalNot(this)},t.prototype.logicalXor=function(r){return this.throwIfDisposed(),Le.logicalXor(this,r)},t.prototype.where=function(r,n){return this.throwIfDisposed(),Le.where(r,this,n)},t.prototype.neg=function(){return this.throwIfDisposed(),Le.neg(this)},t.prototype.ceil=function(){return this.throwIfDisposed(),Le.ceil(this)},t.prototype.floor=function(){return this.throwIfDisposed(),Le.floor(this)},t.prototype.sign=function(){return this.throwIfDisposed(),Le.sign(this)},t.prototype.isNaN=function(){return this.throwIfDisposed(),Le.isNaN(this)},t.prototype.isInf=function(){return this.throwIfDisposed(),Le.isInf(this)},t.prototype.isFinite=function(){return this.throwIfDisposed(),Le.isFinite(this)},t.prototype.exp=function(){return this.throwIfDisposed(),Le.exp(this)},t.prototype.expm1=function(){return this.throwIfDisposed(),Le.expm1(this)},t.prototype.log=function(){return this.throwIfDisposed(),Le.log(this)},t.prototype.log1p=function(){return this.throwIfDisposed(),Le.log1p(this)},t.prototype.sqrt=function(){return this.throwIfDisposed(),Le.sqrt(this)},t.prototype.rsqrt=function(){return this.throwIfDisposed(),Le.rsqrt(this)},t.prototype.square=function(){return this.throwIfDisposed(),Le.square(this)},t.prototype.reciprocal=function(){return this.throwIfDisposed(),Le.reciprocal(this)},t.prototype.abs=function(){return this.throwIfDisposed(),Le.abs(this)},t.prototype.clipByValue=function(r,n){return this.throwIfDisposed(),Le.clipByValue(this,r,n)},t.prototype.relu=function(){return this.throwIfDisposed(),Le.relu(this)},t.prototype.relu6=function(){return this.throwIfDisposed(),Le.relu6(this)},t.prototype.elu=function(){return this.throwIfDisposed(),Le.elu(this)},t.prototype.selu=function(){return this.throwIfDisposed(),Le.selu(this)},t.prototype.leakyRelu=function(r){return r===void 0&&(r=.2),this.throwIfDisposed(),Le.leakyRelu(this,r)},t.prototype.prelu=function(r){return this.throwIfDisposed(),Le.prelu(this,r)},t.prototype.sigmoid=function(){return this.throwIfDisposed(),Le.sigmoid(this)},t.prototype.logSigmoid=function(){return this.throwIfDisposed(),Le.logSigmoid(this)},t.prototype.softplus=function(){return this.throwIfDisposed(),Le.softplus(this)},t.prototype.zerosLike=function(){return this.throwIfDisposed(),Le.zerosLike(this)},t.prototype.onesLike=function(){return this.throwIfDisposed(),Le.onesLike(this)},t.prototype.sin=function(){return this.throwIfDisposed(),Le.sin(this)},t.prototype.cos=function(){return this.throwIfDisposed(),Le.cos(this)},t.prototype.tan=function(){return this.throwIfDisposed(),Le.tan(this)},t.prototype.asin=function(){return this.throwIfDisposed(),Le.asin(this)},t.prototype.acos=function(){return this.throwIfDisposed(),Le.acos(this)},t.prototype.atan=function(){return this.throwIfDisposed(),Le.atan(this)},t.prototype.sinh=function(){return this.throwIfDisposed(),Le.sinh(this)},t.prototype.cosh=function(){return this.throwIfDisposed(),Le.cosh(this)},t.prototype.tanh=function(){return this.throwIfDisposed(),Le.tanh(this)},t.prototype.asinh=function(){return this.throwIfDisposed(),Le.asinh(this)},t.prototype.acosh=function(){return this.throwIfDisposed(),Le.acosh(this)},t.prototype.atanh=function(){return this.throwIfDisposed(),Le.atanh(this)},t.prototype.erf=function(){return this.throwIfDisposed(),Le.erf(this)},t.prototype.round=function(){return this.throwIfDisposed(),Le.round(this)},t.prototype.step=function(r){return r===void 0&&(r=0),this.throwIfDisposed(),Le.step(this,r)},t.prototype.softmax=function(r){return r===void 0&&(r=-1),this.throwIfDisposed(),Le.softmax(this,r)},t.prototype.logSoftmax=function(r){return r===void 0&&(r=-1),this.throwIfDisposed(),Le.logSoftmax(this,r)},t.prototype.resizeBilinear=function(r,n){return n===void 0&&(n=!1),this.throwIfDisposed(),Le.image.resizeBilinear(this,r,n)},t.prototype.resizeNearestNeighbor=function(r,n){return n===void 0&&(n=!1),this.throwIfDisposed(),Le.image.resizeNearestNeighbor(this,r,n)},t.prototype.conv1d=function(r,n,e,o,i,u){return o===void 0&&(o="NWC"),i===void 0&&(i=1),this.throwIfDisposed(),Le.conv1d(this,r,n,e,o,i,u)},t.prototype.conv2d=function(r,n,e,o,i,u){return o===void 0&&(o="NHWC"),i===void 0&&(i=[1,1]),this.throwIfDisposed(),Le.conv2d(this,r,n,e,o,i,u)},t.prototype.conv2dTranspose=function(r,n,e,o,i){return this.throwIfDisposed(),Le.conv2dTranspose(this,r,n,e,o,i)},t.prototype.depthwiseConv2D=function(r,n,e,o,i,u){return o===void 0&&(o="NHWC"),i===void 0&&(i=[1,1]),this.throwIfDisposed(),Le.depthwiseConv2d(this,r,n,e,o,i,u)},t.prototype.separableConv2d=function(r,n,e,o,i,u){return i===void 0&&(i=[1,1]),u===void 0&&(u="NHWC"),this.throwIfDisposed(),Le.separableConv2d(this,r,n,e,o,i,u)},t.prototype.avgPool=function(r,n,e,o){return this.throwIfDisposed(),Le.avgPool(this,r,n,e,o)},t.prototype.maxPool=function(r,n,e,o){return this.throwIfDisposed(),Le.maxPool(this,r,n,e,o)},t.prototype.localResponseNormalization=function(r,n,e,o){return r===void 0&&(r=5),n===void 0&&(n=1),e===void 0&&(e=1),o===void 0&&(o=.5),Le.localResponseNormalization(this,r,n,e,o)},t.prototype.pool=function(r,n,e,o,i){return this.throwIfDisposed(),Le.pool(this,r,n,e,o,i)},t.prototype.variable=function(r,n,e){return r===void 0&&(r=!0),this.throwIfDisposed(),_o().makeVariable(this,r,n,e)},t.prototype.unsortedSegmentSum=function(r,n){return this.throwIfDisposed(),Le.unsortedSegmentSum(this,r,n)},t.prototype.batchToSpaceND=function(r,n){return this.throwIfDisposed(),Le.batchToSpaceND(this,r,n)},t.prototype.spaceToBatchND=function(r,n){return this.throwIfDisposed(),Le.spaceToBatchND(this,r,n)},t.prototype.topk=function(r,n){return r===void 0&&(r=1),n===void 0&&(n=!0),this.throwIfDisposed(),Le.topk(this,r,n)},t.prototype.stridedSlice=function(r,n,e,o,i,u,a,s){return o===void 0&&(o=0),i===void 0&&(i=0),u===void 0&&(u=0),a===void 0&&(a=0),s===void 0&&(s=0),this.throwIfDisposed(),Le.stridedSlice(this,r,n,e,o,i,u,a,s)},t.prototype.depthToSpace=function(r,n){return this.throwIfDisposed(),Le.depthToSpace(this,r,n)},t.prototype.fft=function(){return this.throwIfDisposed(),Le.spectral.fft(this)},t.prototype.ifft=function(){return this.throwIfDisposed(),Le.spectral.ifft(this)},t.prototype.rfft=function(){return this.throwIfDisposed(),Le.spectral.rfft(this)},t.prototype.irfft=function(){return this.throwIfDisposed(),Le.spectral.irfft(this)},t}();Object.defineProperty(ir,Symbol.hasInstance,{value:function(t){return!!t&&t.dataId!=null&&t.shape!=null&&t.dtype!=null}});var Ig,vh,bh,xh,wh,us=function(t){function r(n,e,o,i){var u=t.call(this,n.shape,n.dtype,n.dataId,i)||this;return u.trainable=e,u.name=o,u}return uo(r,t),r.prototype.assign=function(n){if(n.dtype!==this.dtype)throw new Error("dtype of the new value ("+n.dtype+") and previous value ("+this.dtype+") must match");if(!Br(n.shape,this.shape))throw new Error("shape of the new value ("+n.shape+") and previous value ("+this.shape+") must match");_o().disposeTensor(this),this.dataId=n.dataId,_o().incRef(this,null)},r.prototype.dispose=function(){_o().disposeVariable(this),this.isDisposedInternal=!0},r}(ir);Object.defineProperty(us,Symbol.hasInstance,{value:function(t){return t instanceof ir&&t.assign!=null&&t.assign instanceof Function}}),function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"}(Ig||(Ig={})),function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"}(vh||(vh={})),function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"}(bh||(bh={})),function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"}(xh||(xh={})),function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"}(wh||(wh={}));var xS={float32:xh,int32:vh,bool:bh,complex64:wh};function qr(t,r){if(t==="string"||r==="string"){if(t==="string"&&r==="string")return"string";throw new Error("Can not upcast "+t+" with "+r)}return xS[t][r]}function Vd(t){return qr(t,"int32")}function lr(t,r){if(t.dtype===r.dtype)return[t,r];var n=qr(t.dtype,r.dtype);return[t.cast(n),r.cast(n)]}function wS(t,r){ce(t.dtype===r.dtype,function(){return"The dtypes of the first("+t.dtype+") and second("+r.dtype+") input must match"})}function Z1(t){var r=[];return function n(e,o,i){if(e!=null){if(e instanceof ir)return void o.push(e);if(u=e,!(!Array.isArray(u)&&typeof u!="object")){var u,a=e;for(var s in a){var l=a[s];i.has(l)||(i.add(l),n(l,o,i))}}}}(t,r,new Set),r}var Wd,Ag=function(){function t(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return t.prototype.dispose=function(){for(var r in this.registeredVariables)this.registeredVariables[r].dispose()},t}(),_S=function(){function t(r){this.ENV=r,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new Ag}return t.prototype.ready=function(){return lt(this,void 0,void 0,function(){var r,n,e;return ct(this,function(o){switch(o.label){case 0:if(this.pendingBackendInit!=null)return[2,this.pendingBackendInit.then(function(){})];if(this.backendInstance!=null)return[2];r=this.getSortedBackends(),n=0,o.label=1;case 1:return n<r.length?(e=r[n],[4,this.initializeBackend(e).success]):[3,5];case 2:return o.sent()?[4,this.setBackend(e)]:[3,4];case 3:return o.sent(),[2];case 4:return n++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(t.prototype,"backend",{get:function(){if(this.pendingBackendInit!=null)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(this.backendInstance==null){var r=this.initializeBackendsAndReturnBest(),n=r.name;if(r.asyncInit)throw new Error("The highest priority backend '"+n+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(n)}return this.backendInstance},enumerable:!0,configurable:!0}),t.prototype.backendNames=function(){return Object.keys(this.registryFactory)},t.prototype.findBackend=function(r){return!(r in this.registry)&&(!(r in this.registryFactory)||this.initializeBackend(r).asyncInit)?null:this.registry[r]},t.prototype.findBackendFactory=function(r){return r in this.registryFactory?this.registryFactory[r].factory:null},t.prototype.registerBackend=function(r,n,e){return e===void 0&&(e=1),r in this.registryFactory?(console.warn(r+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[r]={factory:n,priority:e},!0)},t.prototype.setBackend=function(r){return lt(this,void 0,void 0,function(){var n,e,o;return ct(this,function(i){switch(i.label){case 0:if(this.registryFactory[r]==null)throw new Error("Backend name '"+r+"' not found in registry");return this.backendName=r,this.registry[r]!=null?[3,4]:(this.backendInstance=null,n=this.initializeBackend(r),e=n.success,n.asyncInit?[4,e]:[3,2]);case 1:return o=i.sent(),[3,3];case 2:o=e,i.label=3;case 3:if(!o)return[2,!1];i.label=4;case 4:return this.backendInstance=this.registry[r],this.setupRegisteredKernels(),this.profiler=new gS(this.backendInstance),[2,!0]}})})},t.prototype.setupRegisteredKernels=function(){var r=this;Cg(this.backendName).forEach(function(n){n.setupFunc!=null&&n.setupFunc(r.backendInstance)})},t.prototype.disposeRegisteredKernels=function(r){var n=this;Cg(r).forEach(function(e){e.disposeFunc!=null&&e.disposeFunc(n.registry[r])})},t.prototype.initializeBackend=function(r){var n=this,e=this.registryFactory[r];if(e==null)throw new Error("Cannot initialize backend "+r+", no registration found.");try{var o=e.factory();if(Promise.resolve(o)===o){var i=++this.pendingBackendInitId,u=o.then(function(a){return!(i<n.pendingBackendInitId)&&(n.registry[r]=a,n.pendingBackendInit=null,!0)}).catch(function(a){return!(i<n.pendingBackendInitId)&&(n.pendingBackendInit=null,console.warn("Initialization of backend "+r+" failed"),console.warn(a.stack||a.message),!1)});return this.pendingBackendInit=u,{success:u,asyncInit:!0}}return this.registry[r]=o,{success:!0,asyncInit:!1}}catch(a){return console.warn("Initialization of backend "+r+" failed"),console.warn(a.stack||a.message),{success:!1,asyncInit:!1}}},t.prototype.removeBackend=function(r){if(!(r in this.registryFactory))throw new Error(r+" backend not found in registry");this.backendName===r&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,r in this.registry&&(this.disposeRegisteredKernels(r),this.registry[r].dispose(),delete this.registry[r]),delete this.registryFactory[r],this.backendName===r&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},t.prototype.getSortedBackends=function(){var r=this;if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(n,e){return r.registryFactory[e].priority-r.registryFactory[n].priority})},t.prototype.initializeBackendsAndReturnBest=function(){for(var r=this.getSortedBackends(),n=0;n<r.length;n++){var e=r[n],o=this.initializeBackend(e),i=o.success,u=o.asyncInit;if(u||i)return{name:e,asyncInit:u}}throw new Error("Could not initialize any backends, all backend initializations failed.")},t.prototype.moveData=function(r,n){var e=this.state.tensorInfo.get(n),o=e.backend,i=this.readSync(n);o.disposeData(n),e.backend=r,r.move(n,i,e.shape,e.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},t.prototype.tidy=function(r,n){var e,o=this,i=null;if(n==null){if(typeof r!="function")throw new Error("Please provide a function to tidy()");n=r}else{if(typeof r!="string"&&!(r instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");i=r}return this.scopedRun(function(){return o.startScope(i)},function(){return o.endScope(e)},function(){return(e=n())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),e})},t.prototype.scopedRun=function(r,n,e){r();try{var o=e();return n(),o}catch(i){throw n(),i}},t.prototype.nextTensorId=function(){return t.nextTensorId++},t.prototype.nextVariableId=function(){return t.nextVariableId++},t.prototype.clone=function(r){var n=this.makeTensorFromDataId(r.dataId,r.shape,r.dtype),e={x:r};return this.addTapeNode(this.state.activeScope.name,e,[n],function(o){return{x:function(){return o.toFloat()}}},[]),n},t.prototype.runKernel=function(r,n,e,o,i){return this.runKernelFunc(null,n,null,r,e,o,i)},t.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},t.prototype.checkKernelForMemLeak=function(r,n,e){var o=this.backend.numDataIds(),i=0;e.forEach(function(s){i+=s.dtype==="complex64"?3:1});var u=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=o-n-i-u;if(a>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+a+" data ids) after running '"+r+"'")},t.prototype.runKernelFunc=function(r,n,e,o,i,u,a){var s,l=this;u===void 0&&(u=[]),a===void 0&&(a=[]);var h=[],p=this.isTapeOn();o==null&&(o=this.state.activeScope!=null?this.state.activeScope.name:"");var c,d=function(v){p&&(h=v.map(function(b){return l.keep(l.clone(b))}))},f=this.state.numBytes,m=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var y,g=z1(o,this.backendName);return c=g!=null?function(){var v=l.backend.numDataIds();y=g.kernelFunc({inputs:n,attrs:i,backend:l.backend});var b=Array.isArray(y)?y:[y];l.shouldCheckForMemLeaks()&&l.checkKernelForMemLeak(o,v,b);var w=b.map(function(j){var E=j.dataId,T=j.shape,R=j.dtype;return l.makeTensorFromDataId(E,T,R)}),_=w.filter(function(j,E){return a[E]});return d((u||[]).slice().concat(_)),w}:function(){var v=l.backend.numDataIds();y=l.tidy(function(){return r(l.backend,d)});var b=Array.isArray(y)?y:[y];return l.shouldCheckForMemLeaks()&&l.checkKernelForMemLeak(o,v,b),b},this.scopedRun(function(){return l.state.kernelDepth++},function(){return l.state.kernelDepth--},function(){s=l.ENV.getBool("DEBUG")?l.profiler.profileKernel(o,n,function(){return c()}):c()}),p&&this.addTapeNode(o,n,s,e,h),this.state.profiling&&this.state.activeProfile.kernels.push({name:o,bytesAdded:this.state.numBytes-f,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-m,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(n).map(function(v){return n[v].shape}),outputShapes:s.map(function(v){return v.shape})}),Array.isArray(y)?s:s[0]},t.prototype.makeTensor=function(r,n,e,o){if(r==null)throw new Error("Values passed to engine.makeTensor() are null");e=e||"float32",o=o||this.backend;var i=r;e==="string"&&Rp(r[0])&&(i=r.map(function(h){return mS(h)}));var u=o.write(i,n,e),a=new ir(n,e,u,this.nextTensorId());if(this.incRef(a,o),e==="string"){var s=this.state.tensorInfo.get(u),l=fS(i);this.state.numBytes+=l-s.bytes,s.bytes=l}return a},t.prototype.makeTensorFromDataId=function(r,n,e,o){var i=new ir(n,e=e||"float32",r,this.nextTensorId());return this.incRef(i,o),i},t.prototype.makeVariable=function(r,n,e,o){n===void 0&&(n=!0),e=e||this.nextVariableId().toString(),o!=null&&o!==r.dtype&&(r=r.asType(o));var i=new us(r,n,e,this.nextTensorId());if(this.state.registeredVariables[i.name]!=null)throw new Error("Variable with name "+i.name+" was already registered");return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i},t.prototype.incRef=function(r,n){var e=this.state.tensorInfo.has(r.dataId)?this.state.tensorInfo.get(r.dataId).refCount:0;if(this.state.numTensors++,r.dtype==="string"&&this.state.numStringTensors++,e===0){this.state.numDataBuffers++;var o=0;r.dtype!=="complex64"&&r.dtype!=="string"&&(o=r.size*q1(r.dtype)),this.state.tensorInfo.set(r.dataId,{backend:n||this.backend,dtype:r.dtype,shape:r.shape,bytes:o,refCount:0}),this.state.numBytes+=o}this.state.tensorInfo.get(r.dataId).refCount++,r instanceof us||this.track(r)},t.prototype.disposeTensor=function(r){if(this.state.tensorInfo.has(r.dataId)){this.state.numTensors--,r.dtype==="string"&&this.state.numStringTensors--;var n=this.state.tensorInfo.get(r.dataId);n.refCount<=1?(r.dtype!=="complex64"&&(this.state.numBytes-=n.bytes),this.state.numDataBuffers--,n.backend.disposeData(r.dataId),this.state.tensorInfo.delete(r.dataId)):this.state.tensorInfo.get(r.dataId).refCount--}},t.prototype.disposeVariables=function(){for(var r in this.state.registeredVariables){var n=this.state.registeredVariables[r];this.disposeVariable(n)}},t.prototype.disposeVariable=function(r){this.disposeTensor(r),this.state.registeredVariables[r.name]!=null&&delete this.state.registeredVariables[r.name]},t.prototype.memory=function(){var r=this.backend.memory();return r.numTensors=this.state.numTensors,r.numDataBuffers=this.state.numDataBuffers,r.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(r.unreliable=!0,r.reasons==null&&(r.reasons=[]),r.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),r},t.prototype.profile=function(r){return lt(this,void 0,void 0,function(){var n,e;return ct(this,function(o){return this.state.profiling=!0,n=this.state.numBytes,e=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=r(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map(function(i){return i.totalBytesSnapshot})),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-e,[2,this.state.activeProfile]})})},t.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&this.state.kernelDepth===0},t.prototype.addTapeNode=function(r,n,e,o,i){var u=this,a={id:this.state.nextTapeNodeId++,kernelName:r,inputs:n,outputs:e,saved:i},s=oS(r);s!=null&&(o=s.gradFunc),o!=null&&(a.gradient=function(l){return l=l.map(function(h,p){if(h==null){var c=e[p],d=Mu(c.size,c.dtype);return u.makeTensor(d,c.shape,c.dtype)}return h}),o(l.length>1?l:l[0],i)}),this.state.activeTape.push(a)},t.prototype.keep=function(r){return r.kept=!0,r},t.prototype.startTape=function(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++},t.prototype.endTape=function(){this.state.gradientDepth--},t.prototype.startScope=function(r){var n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};r&&(n.name=r),this.state.scopeStack.push(n),this.state.activeScope=n},t.prototype.endScope=function(r){for(var n=this,e=Z1(r),o=new Set(e.map(function(s){return s.id})),i=0;i<this.state.activeScope.track.length;i++){var u=this.state.activeScope.track[i];u.kept||o.has(u.id)||u.dispose()}var a=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],e.forEach(function(s){s.kept||s.scopeId!==a.id||n.track(s)})},t.prototype.gradients=function(r,n,e,o){var i=this;if(o===void 0&&(o=!1),ce(n.length>0,function(){return"gradients() received an empty list of xs."}),e!=null&&e.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '"+e.dtype+"'");var u=this.scopedRun(function(){return i.startTape()},function(){return i.endTape()},function(){return i.tidy("forward",r)});ce(u instanceof ir,function(){return"The result y returned by f() must be a tensor."});var a=function(s,l,h){for(var p={},c={},d=0;d<l.length;d++)p[l[d].id]=!0;for(d=0;d<s.length;d++){var f=(j=s[d]).inputs;for(var m in f){for(var y=f[m],g=!1,v=0;v<l.length;v++)if(p[y.id]){j.outputs.forEach(function(M){return p[M.id]=!0}),g=!0,c[j.id]=!0;break}if(g)break}}var b={};b[h.id]=!0;var w={};for(d=s.length-1;d>=0;d--)for(f=(j=s[d]).inputs,v=0;v<j.outputs.length;v++)if(b[j.outputs[v].id]){for(var m in f)b[f[m].id]=!0,w[j.id]=!0;break}var _=[];for(d=0;d<s.length;d++){var j;if(c[(j=s[d]).id]&&w[j.id]){var E={};for(var m in j.inputs){var T=j.inputs[m];p[T.id]&&(E[m]=T)}var R=Object.assign({},j);R.inputs=E,R.outputs=j.outputs,_.push(R)}}return _}(this.state.activeTape,n,u);if(!o&&a.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var s,l,h={};h[u.id]=e??(s=u.shape,l=X1(ht(s),"float32"),Se.makeTensor(l,s,"float32")),function(c,d,f){for(var m=function(g){var v=d[g],b=[];if(v.outputs.forEach(function(E){var T=c[E.id];T!=null?b.push(T):b.push(null)}),v.gradient==null)throw new Error("Cannot compute gradient: gradient function not found for "+v.kernelName+".");var w=v.gradient(b),_=function(E){if(!(E in w))throw new Error("Cannot backprop through input "+E+". Available gradients found: "+Object.keys(w)+".");var T=f(function(){return w[E]()});if(T.dtype!=="float32")throw new Error("Error in gradient for op "+v.kernelName+". The gradient of input "+E+" must have 'float32' dtype, but has '"+T.dtype+"'");var R=v.inputs[E];if(!Br(T.shape,R.shape))throw new Error("Error in gradient for op "+v.kernelName+". The gradient of input '"+E+"' has shape '"+T.shape+"', which does not match the shape of the input '"+R.shape+"'");if(c[R.id]==null)c[R.id]=T;else{var M=c[R.id];c[R.id]=M.add(T),M.dispose()}};for(var j in v.inputs)_(j)},y=d.length-1;y>=0;y--)m(y)}(h,a,function(c){return i.tidy(c)});var p=n.map(function(c){return h[c.id]});return i.state.gradientDepth===0&&(i.state.activeTape.forEach(function(c){for(var d=0,f=c.saved;d<f.length;d++)f[d].dispose()}),i.state.activeTape=null),{value:u,grads:p}})},t.prototype.customGrad=function(r){var n=this;return ce(yh(r),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var e,o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];ce(o.every(function(a){return a instanceof ir}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var u={};return o.forEach(function(a,s){u[s]=a}),n.runKernelFunc(function(a,s){return ce((e=r.apply(void 0,o.concat([s]))).value instanceof ir,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),ce(yh(e.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),e.value},u,function(a,s){var l=e.gradFunc(a,s),h=Array.isArray(l)?l:[l];ce(h.length===o.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),ce(h.every(function(c){return c instanceof ir}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var p={};return h.forEach(function(c,d){p[d]=function(){return c}}),p})}},t.prototype.readSync=function(r){return this.state.tensorInfo.get(r).backend.readSync(r)},t.prototype.read=function(r){return this.state.tensorInfo.get(r).backend.read(r)},t.prototype.time=function(r){return lt(this,void 0,void 0,function(){var n,e;return ct(this,function(o){switch(o.label){case 0:return n=xo(),[4,this.backend.time(r)];case 1:return(e=o.sent()).wallMs=xo()-n,[2,e]}})})},t.prototype.track=function(r){return this.state.activeScope!=null&&(r.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(r)),r},Object.defineProperty(t.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),t.prototype.reset=function(){for(var r in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new Ag,this.registry)this.disposeRegisteredKernels(r),this.registry[r].dispose(),delete this.registry[r];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},t.nextTensorId=0,t.nextVariableId=0,t}(),Se=function(){var t=function(){if(Wd==null){var n=void 0;if(typeof window<"u")n=window;else if(typeof global<"u")n=global;else if(typeof process<"u")n=process;else{if(typeof self>"u")throw new Error("Could not find a global object");n=self}Wd=n}return Wd}();if(t._tfengine==null){var r=new rS(t);t._tfengine=new _S(r)}return function(n){G1=n}(t._tfengine.ENV),_o=function(){return t._tfengine},t._tfengine}();function J1(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var No=Ue();No.registerFlag("DEBUG",function(){return!1},function(t){t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),No.registerFlag("IS_BROWSER",function(){return J1()}),No.registerFlag("IS_NODE",function(){return typeof process<"u"&&process.versions!==void 0&&process.versions.node!==void 0}),No.registerFlag("IS_CHROME",function(){return typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}),No.registerFlag("PROD",function(){return!1}),No.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return No.getBool("DEBUG")}),No.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0}),No.registerFlag("IS_TEST",function(){return!1});var vu,In,Mn,Vi={},Hd={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function SS(t,r){Vi[t]=r}function Io(t){t in Vi||(Vi[t]=function(n){if(n!==1&&n!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var e=function(o){if(typeof OffscreenCanvas<"u"&&o===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(n);return e.addEventListener("webglcontextlost",function(o){o.preventDefault(),delete Vi[n]},!1),n===1?e.getContext("webgl",Hd)||e.getContext("experimental-webgl",Hd):e.getContext("webgl2",Hd)}(t));var r=Vi[t];return r.isContextLost()?(delete Vi[t],Io(t)):(r.disable(r.DEPTH_TEST),r.disable(r.STENCIL_TEST),r.disable(r.BLEND),r.disable(r.DITHER),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SAMPLE_COVERAGE),r.enable(r.SCISSOR_TEST),r.enable(r.CULL_FACE),r.cullFace(r.BACK),Vi[t])}function $c(t,r){return[r,t]}function Ks(t){var r=ht(t);return mh(Math.ceil(r/4))}function Ru(t,r){return[Math.max(1,Math.ceil(r/2)),Math.max(1,Math.ceil(t/2))]}function Ip(t,r){var n,e,o,i,u,a,s,l,h,p=t;return Ue().getNumber("WEBGL_VERSION")===2?(n=p.R32F,e=p.R16F,o=p.RGBA16F,i=p.RGBA32F,u=p.RED,a=4,s=1,l=p.HALF_FLOAT,h=p.FLOAT):(n=t.RGBA,e=t.RGBA,o=t.RGBA,i=p.RGBA,u=t.RGBA,a=4,s=4,l=r!=null?r.HALF_FLOAT_OES:null,h=t.FLOAT),{internalFormatFloat:n,internalFormatHalfFloat:e,internalFormatPackedHalfFloat:o,internalFormatPackedFloat:i,textureFormatFloat:u,downloadTextureFormat:t.RGBA,downloadUnpackNumChannels:a,defaultNumChannels:s,textureTypeHalfFloat:l,textureTypeFloat:h}}function mt(t,r,n){var e=n();return r&&function(o){var i=o.getError();if(i!==o.NO_ERROR)throw new Error("WebGL Error: "+kS(o,i))}(t),e}(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(vu||(vu={})),function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"}(In||(In={})),function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(Mn||(Mn={}));var ES=596e-10,jS=65504;function CS(t){return!!(Ue().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||ES<Math.abs(t)&&Math.abs(t)<jS)}function kS(t,r){switch(r){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+r}}function ll(t,r,n){return Ko(t,r,function(){return t.getExtension(n)},'Extension "'+n+'" not supported on this browser.')}function TS(t,r,n){var e=Ko(t,r,function(){return t.createShader(t.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(mt(t,r,function(){return t.shaderSource(e,n)}),mt(t,r,function(){return t.compileShader(e)}),t.getShaderParameter(e,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(e)),new Error("Failed to compile vertex shader.");return e}function MS(t,r,n){var e=Ko(t,r,function(){return t.createShader(t.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(mt(t,r,function(){return t.shaderSource(e,n)}),mt(t,r,function(){return t.compileShader(e)}),t.getShaderParameter(e,t.COMPILE_STATUS)===!1)throw function(o,i){var u=RS.exec(i);if(u==null)return console.log("Couldn't parse line number in error: "+i),void console.log(o);for(var a=+u[1],s=o.split(`
`),l=s.length.toString().length+2,h=s.map(function(y,g){return qa((g+1).toString(),l)+y}),p=0,c=0;c<h.length;c++)p=Math.max(h[c].length,p);var d=h.slice(0,a-1),f=h.slice(a-1,a),m=h.slice(a);console.log(d.join(`
`)),console.log(i.split(`
`)[0]),console.log("%c "+qa(f[0],p),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(m.join(`
`))}(n,t.getShaderInfoLog(e)),new Error("Failed to compile fragment shader.");return e}var qd,$d,RS=/ERROR: [0-9]+:([0-9]+):/g;function IS(t,r){return Ko(t,r,function(){return t.createProgram()},"Unable to create WebGLProgram.")}function AS(t,r,n){if(mt(t,r,function(){return t.linkProgram(n)}),t.getProgramParameter(n,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}function Xd(t,r,n){if(mt(t,r,function(){return t.validateProgram(n)}),t.getProgramParameter(n,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function PS(t,r,n){var e=Ko(t,r,function(){return t.createBuffer()},"Unable to create WebGLBuffer");return mt(t,r,function(){return t.bindBuffer(t.ARRAY_BUFFER,e)}),mt(t,r,function(){return t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW)}),e}function DS(t,r,n){var e=Ko(t,r,function(){return t.createBuffer()},"Unable to create WebGLBuffer");return mt(t,r,function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e)}),mt(t,r,function(){return t.bufferData(t.ELEMENT_ARRAY_BUFFER,n,t.STATIC_DRAW)}),e}function OS(t,r){return Ko(t,r,function(){return t.createTexture()},"Unable to create WebGLTexture.")}function LS(t,r){var n=Ue().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||r<=0){var e="["+t+"x"+r+"]";throw new Error("Requested texture size "+e+" is invalid.")}if(t>n||r>n)throw e="["+t+"x"+r+"]",new Error("Requested texture size "+e+" greater than WebGL maximum on this browser / GPU "+("["+n+"x"+n+"]")+".")}function NS(t,r){return Ko(t,r,function(){return t.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function Pg(t,r,n,e,o,i,u,a){var s=t.getAttribLocation(n,e);return s!==-1&&(mt(t,r,function(){return t.bindBuffer(t.ARRAY_BUFFER,o)}),mt(t,r,function(){return t.vertexAttribPointer(s,i,t.FLOAT,!1,u,a)}),mt(t,r,function(){return t.enableVertexAttribArray(s)}),!0)}function FS(t,r,n,e){VS(t,e),mt(t,r,function(){return t.activeTexture(t.TEXTURE0+e)}),mt(t,r,function(){return t.bindTexture(t.TEXTURE_2D,n)})}function BS(t,r,n,e){return Ko(t,r,function(){return t.getUniformLocation(n,e)},'uniform "'+e+'" not present in program.')}function US(t,r,n){return t.getUniformLocation(r,n)}function GS(t,r,n,e,o,i){mt(t,r,function(){return FS(t,r,e,i)}),mt(t,r,function(){return t.uniform1i(o,i)})}function Yd(t,r,n,e){mt(t,r,function(){return t.bindFramebuffer(t.FRAMEBUFFER,e)}),mt(t,r,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0)})}function Dg(t,r,n){mt(t,r,function(){return t.bindFramebuffer(t.FRAMEBUFFER,n)}),mt(t,r,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)})}function cl(t){var r=t.checkFramebufferStatus(t.FRAMEBUFFER);if(r!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+zS(t,r))}function zS(t,r){switch(r){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+r}}function Ko(t,r,n,e){var o=mt(t,r,function(){return n()});if(o==null)throw new Error(e);return o}function VS(t,r){var n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,e=r+t.TEXTURE0;if(e<t.TEXTURE0||e>n)throw new Error("textureUnit must be in "+("[gl.TEXTURE0, gl.TEXTURE"+n+"]")+".")}function dc(t,r){return r===void 0&&(r=2),ht(t.slice(0,t.length-r))}function fc(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function Kd(t){var r=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(r=[dc(t)].concat(fc(t))),r}function WS(t,r){var n;r===void 0&&(r=!1);var e=Ue().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(r&&(e*=2,(t=t.map(function(l,h){return h>=t.length-2?H1(t[h]):t[h]})).length===1&&(t=[2,t[0]])),t.length!==2){var o=Hi(t);t=o.newShape}var i=ht(t);if(t.length<=1&&i<=e)return[1,i];if(t.length===2&&t[0]<=e&&t[1]<=e)return t;if(t.length===3&&t[0]*t[1]<=e&&t[2]<=e)return[t[0]*t[1],t[2]];if(t.length===3&&t[0]<=e&&t[1]*t[2]<=e)return[t[0],t[1]*t[2]];if(t.length===4&&t[0]*t[1]*t[2]<=e&&t[3]<=e)return[t[0]*t[1]*t[2],t[3]];if(t.length===4&&t[0]<=e&&t[1]*t[2]*t[3]<=e)return[t[0],t[1]*t[2]*t[3]];if(r){var u=dc(t),a=2,s=2;return t.length&&(a=(n=fc(t))[0],s=n[1]),mh(i=u*(a/2)*(s/2)).map(function(l){return 2*l})}return mh(i)}function dl(t){return t%2==0}function fl(t,r){if(Br(t=t.slice(-2),r=r.slice(-2))||!t.length||!r.length||t[0]===0||t[1]===0||r[0]===0||r[1]===0)return!0;if(t.length!==r.length){var n=t.slice(-1)[0],e=r.slice(-1)[0];if(n===e||dl(n)&&dl(e)&&(t[0]===1||r[0]===1))return!0}return t[1]===r[1]&&dl(t[0])&&dl(r[0])}function HS(t){if(qd==null){var r=Io(t);qd=r.getParameter(r.MAX_TEXTURE_SIZE)}return qd}function qS(t){if($d==null){var r=Io(t);$d=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,$d)}function $S(t){if(t===0)return 0;var r=Io(t);return Wn(r,"EXT_disjoint_timer_query_webgl2")&&t===2?2:Wn(r,"EXT_disjoint_timer_query")?1:0}function Wn(t,r){return t.getExtension(r)!=null}function Og(t){try{if(Io(t)!=null)return!0}catch{return!1}return!1}function XS(t){if(t===0)return!1;var r=Io(t);if(t===1){if(!Wn(r,"OES_texture_float"))return!1}else if(!Wn(r,"EXT_color_buffer_float"))return!1;return _h(r)}function YS(t){if(t===0)return!1;var r=Io(t);if(t!==1){if(Wn(r,"EXT_color_buffer_float"))return _h(r);if(Wn(r,"EXT_color_buffer_half_float")){var n=r.getExtension("EXT_color_buffer_half_float");return function(e,o){var i=Ip(e,o),u=e.createTexture();e.bindTexture(e.TEXTURE_2D,u),e.texImage2D(e.TEXTURE_2D,0,i.internalFormatHalfFloat,1,1,0,i.textureFormatFloat,i.textureTypeHalfFloat,null);var a=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,a),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,u,0);var s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(u),e.deleteFramebuffer(a),s}(r,n)}return!1}return!!Wn(r,"OES_texture_float")&&!!Wn(r,"WEBGL_color_buffer_float")&&_h(r)}function _h(t){var r=Ip(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,r.internalFormatFloat,1,1,0,r.textureFormatFloat,r.textureTypeFloat,null);var e=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,e),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);var o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(e),o}function KS(t){return t===2&&Io(t).fenceSync!=null}var _t=Ue();function eb(t){Ue().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function it(t,r){return Se.tidy(t,r)}function Sn(t){Z1(t).forEach(function(r){return r.dispose()})}function QS(t){return Se.keep(t)}function hc(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];Ue().getBool("IS_TEST")||console.warn.apply(console,t)}function Oi(t,r){var n=t;if(ko(t))return r==="string"?[]:[t.length];if(!Array.isArray(t))return[];for(var e=[];Array.isArray(n)||ko(n)&&r!=="string";)e.push(n.length),n=n[0];return Array.isArray(t)&&Ue().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function o(i,u,a){if(a=a||[],!Array.isArray(i)&&!ko(i))return void ce(u.length===0,function(){return"Element arr["+a.join("][")+"] is a primitive, but should be an array/TypedArray of "+u[0]+" elements"});ce(u.length>0,function(){return"Element arr["+a.join("][")+"] should be a primitive, but is an array of "+i.length+" elements"}),ce(i.length===u[0],function(){return"Element arr["+a.join("][")+"] should have "+u[0]+" elements, but has "+i.length+" elements"});for(var s=u.slice(1),l=0;l<i.length;++l)o(i[l],s,a.concat(l))}(t,e,[]),e}function Lg(t,r,n,e){if(t!=null&&(t!=="numeric"&&t!==r||t==="numeric"&&r==="string"))throw new Error("Argument '"+n+"' passed to '"+e+"' must be "+t+" tensor, but got "+r+" tensor")}function oe(t,r,n,e){if(e===void 0&&(e="numeric"),t instanceof ir)return Lg(e,t.dtype,r,n),t;var o=Tu(t);if(o!=="string"&&["bool","int32","float32"].indexOf(e)>=0&&(o=e),Lg(e,o,r,n),t==null||!ko(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){var i=t==null?"null":t.constructor.name;throw new Error("Argument '"+r+"' passed to '"+n+"' must be a Tensor or TensorLike, but got '"+i+"'")}var u=Oi(t,o);ko(t)||Array.isArray(t)||(t=[t]);var a=o!=="string"?$1(t,o,Ue().getBool("DEBUG")):ss(t,[],!0);return Se.makeTensor(a,u,o)}function pc(t,r,n,e){if(e===void 0&&(e="numeric"),!Array.isArray(t))throw new Error("Argument "+r+" passed to "+n+" must be a `Tensor[]` or `TensorLike[]`");return t.map(function(o,i){return oe(o,r+"["+i+"]",n)},e)}function tb(t,r){for(var n=0;n<t.length;++n)if(t[t.length-n-1]!==r-1-n)return!1;return!0}function ZS(t,r,n){for(var e=t.length+r.length,o=[],i=0,u=0,a=0;a<e;a++)n.indexOf(a)===-1?o.push(t[i++]):o.push(r[u++]);return o}function rn(t,r){for(var n=[],e=t.length,o=0;o<e;o++)r.indexOf(o)===-1&&n.push(t[o]);return[n,r.map(function(i){return t[i]})]}function En(t,r){return ZS(t,r.map(function(n){return 1}),r)}function Tn(t,r,n){ce(tb(r,n),function(){return t+" supports only inner-most axes for now. Got axes "+r+" and rank-"+n+" input."})}function Ao(t,r){if(tb(t,r))return null;for(var n=[],e=0;e<r;++e)t.indexOf(e)===-1&&n.push(e);return t.forEach(function(o){return n.push(o)}),n}function Ap(t){return t.map(function(r,n){return[n,r]}).sort(function(r,n){return r[1]-n[1]}).map(function(r){return r[0]})}function Po(t,r){for(var n=[],e=r-t;e<r;++e)n.push(e);return n}function JS(t,r){var n=t[0].length;t.forEach(function(o,i){ce(o.length===n,function(){return"Error in concat"+n+"D: rank of tensors["+i+"] must be the same as the rank of the rest ("+n+")"})}),ce(r>=0&&r<n,function(){return"Error in concat"+n+"D: axis must be between 0 and "+(n-1)+"."});var e=t[0];t.forEach(function(o,i){for(var u=0;u<n;u++)ce(u===r||o[u]===e[u],function(){return"Error in concat"+n+"D: Shape of tensors["+i+"] ("+o+") does not match the shape of the rest ("+e+") along the non-concatenated axis "+i+"."})})}function ls(t,r){for(var n=t[0].slice(),e=1;e<t.length;e++)n[r]+=t[e][r];return n}function xe(t){var r=Object.keys(t);if(r.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+r.length+" keys.");var n=r[0],e=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1));var o=function(){for(var i=[],u=0;u<arguments.length;u++)i[u]=arguments[u];Se.startScope(n);try{var a=e.apply(void 0,i);return a instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),Se.endScope(a),a}catch(s){throw Se.endScope(null),s}};return Object.defineProperty(o,"name",{value:n,configurable:!0}),o}_t.registerFlag("HAS_WEBGL",function(){return _t.getNumber("WEBGL_VERSION")>0}),_t.registerFlag("WEBGL_VERSION",function(){return Og(2)?2:Og(1)?1:0}),_t.registerFlag("WEBGL_BUFFER_SUPPORTED",function(){return _t.get("WEBGL_VERSION")===2}),_t.registerFlag("WEBGL_CPU_FORWARD",function(){return!0}),_t.registerFlag("WEBGL_FORCE_F16_TEXTURES",function(){return!1}),_t.registerFlag("WEBGL_PACK",function(){return _t.getBool("HAS_WEBGL")}),_t.registerFlag("WEBGL_PACK_NORMALIZATION",function(){return _t.getBool("WEBGL_PACK")}),_t.registerFlag("WEBGL_PACK_CLIP",function(){return _t.getBool("WEBGL_PACK")}),_t.registerFlag("WEBGL_PACK_DEPTHWISECONV",function(){return!1}),_t.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",function(){return _t.getBool("WEBGL_PACK")}),_t.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",function(){return _t.getBool("WEBGL_PACK")}),_t.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",function(){return _t.getBool("WEBGL_PACK")}),_t.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",function(){return _t.getBool("WEBGL_PACK")}),_t.registerFlag("WEBGL_PACK_REDUCE",function(){return _t.getBool("WEBGL_PACK")}),_t.registerFlag("WEBGL_LAZILY_UNPACK",function(){return _t.getBool("WEBGL_PACK")}),_t.registerFlag("WEBGL_CONV_IM2COL",function(){return _t.getBool("WEBGL_PACK")}),_t.registerFlag("WEBGL_MAX_TEXTURE_SIZE",function(){return HS(_t.getNumber("WEBGL_VERSION"))}),_t.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",function(){return qS(_t.getNumber("WEBGL_VERSION"))}),_t.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",function(){var t=_t.getNumber("WEBGL_VERSION");return t===0?0:$S(t)}),_t.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",function(){return _t.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(t=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))));var t}),_t.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",function(){return XS(_t.getNumber("WEBGL_VERSION"))}),_t.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",function(){return!_t.getBool("WEBGL_FORCE_F16_TEXTURES")&&_t.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")}),_t.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",function(){return YS(_t.getNumber("WEBGL_VERSION"))}),_t.registerFlag("WEBGL_FENCE_API_ENABLED",function(){return KS(_t.getNumber("WEBGL_VERSION"))}),_t.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",function(){return _t.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),Q1=eb;var Hr=xe({complex_:function(t,r){var n=oe(t,"real","complex"),e=oe(r,"imag","complex");return Ut(n.shape,e.shape,"real and imag shapes, "+n.shape+" and "+e.shape+", must match in call to tf.complex()."),Se.runKernelFunc(function(o){return o.complex(n,e)},{$real:n,$imag:e})}}),zn=xe({real_:function(t){var r=oe(t,"input","real");return Se.runKernelFunc(function(n){return n.real(r)},{$input:r})}}),So=xe({imag_:function(t){var r=oe(t,"input","imag");return Se.runKernelFunc(function(n){return n.imag(r)},{$input:r})}});function $r(t,r,n){return Li(t,r,Oi(t,n),n)}function Li(t,r,n,e){if(e==null&&(e=Tu(t)),e==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!ko(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(r!=null){Y1(r);var o=ht(r),i=ht(n);ce(o===i,function(){return"Based on the provided shape, ["+r+"], the tensor should have "+o+" values but has "+i});for(var u=0;u<n.length;++u){var a=n[u],s=u!==n.length-1||a!==ht(r.slice(u));ce(n[u]===r[u]||!s,function(){return"Error creating a new Tensor. Inferred shape ("+n+") does not match the provided shape ("+r+"). "})}}return ko(t)||Array.isArray(t)||(t=[t]),r=r||n,t=e!=="string"?$1(t,e,Ue().getBool("DEBUG")):ss(t,[],!0),Se.makeTensor(t,r,e)}function ot(t,r){if((ko(t)&&r!=="string"||Array.isArray(t))&&r!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(r==="string"&&ko(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Li(t,[],[],r)}function wr(t,r){ps(t);var n=Oi(t,r);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Li(t,null,n,r)}function ji(t,r,n){if(ps(t),r!=null&&r.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var e=Oi(t,n);if(e.length!==2&&e.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(e.length===1&&r==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Li(t,r,e,n)}function Pp(t,r,n){if(ps(t),r!=null&&r.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var e=Oi(t,n);if(e.length!==3&&e.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(e.length===1&&r==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Li(t,r,e,n)}function yn(t,r,n){if(ps(t),r!=null&&r.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var e=Oi(t,n);if(e.length!==4&&e.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(e.length===1&&r==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Li(t,r,e,n)}function eE(t,r,n){if(ps(t),r!=null&&r.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var e=Oi(t,n);if(e.length!==5&&e.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(e.length===1&&r==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Li(t,r,e,n)}function tE(t,r,n){if(ps(t),r!=null&&r.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var e=Oi(t,n);if(e.length!==6&&e.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(e.length===1&&r==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return Li(t,r=r||e,e,n)}function rE(t,r,n,e){return r===void 0&&(r=!0),Se.makeVariable(t,r,n,e)}function ms(t,r){if(r===void 0&&(r="float32"),r==="complex64"){var n=ms(t,"float32"),e=er(t,"float32");return Hr(n,e)}var o=X1(ht(t),r);return Se.makeTensor(o,t,r)}function er(t,r){if(r===void 0&&(r="float32"),r==="complex64"){var n=er(t,"float32"),e=er(t,"float32");return Hr(n,e)}var o=Mu(ht(t),r);return Se.makeTensor(o,t,r)}function Mo(t,r,n){return Se.runKernelFunc(function(e){return e.fill(t,r,n)},{})}function nE(t,r,n){if(n<=0)throw new Error("The number of values should be positive.");return Se.runKernelFunc(function(e){return e.linspace(t,r,n)},{})}function mc(t,r,n,e){if(n===void 0&&(n=1),e===void 0&&(e="float32"),n===0)throw new Error("Cannot have a step of zero");if(t===r||t<r&&n<0||r<t&&n>1)return er([0],e);var o=Mu(Math.abs(Math.ceil((r-t)/n)),e);r<t&&n===1&&(n=-1),o[0]=t;for(var i=1;i<o.length;i++)o[i]=o[i-1]+n;return wr(o,e)}var rb=xe({onesLike_:function(t){var r=oe(t,"x","onesLike");if(r.dtype==="complex64"){var n=rb(zn(r)),e=Dt(So(r));return Hr(n,e)}return Se.runKernelFunc(function(o){return o.onesLike(r)},{$x:r},function(o,i){return{$x:function(){return Dt(o)}}})}}),Dt=xe({zerosLike_:function(t){var r=oe(t,"x","zerosLike");return Se.runKernelFunc(function(n){return n.zerosLike(r)},{$x:r},function(n,e){return{$x:function(){return Dt(n)}}})}}),Cr=xe({concat_:function(t,r){r===void 0&&(r=0),ce(t.length>=1,function(){return"Pass at least one tensor to concat"});var n=pc(t,"tensors","concat");n[0].dtype==="complex64"&&n.forEach(function(a){if(a.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype `+a.dtype+". ")}),r=Rr(r,n[0].shape)[0];var e=ls(n.map(function(a){return a.shape}),r);if(ht(e)===0)return $r([],e);if((n=n.filter(function(a){return a.size>0})).length===1)return n[0];var o=n.map(function(a){return a.shape});JS(o,r);var i=n,u={axis:r};return Se.runKernelFunc(function(a){return a.concat(n,r)},i,function(a){var s=o.map(function(l){return l[r]});return Dp(a,s,r).map(function(l){return function(){return l}})},"Concat",u)}}),oE=xe({concat1d_:function(t){return Cr(t,0)}}),iE=xe({concat2d_:function(t,r){return Cr(t,r)}}),aE=xe({concat3d_:function(t,r){return Cr(t,r)}}),sE=xe({concat4d_:function(t,r){return Cr(t,r)}}),Dp=xe({split_:function(t,r,n){n===void 0&&(n=0);var e,o=oe(t,"x","split");return n=Rr(n,o.shape)[0],typeof r=="number"?(ce(o.shape[n]%r==0,function(){return"Number of splits must evenly divide the axis."}),e=new Array(r).fill(o.shape[n]/r)):(ce(o.shape[n]===r.reduce(function(i,u){return i+u}),function(){return"The sum of sizes must match the size of the axis dimension."}),e=r),Se.runKernelFunc(function(i){return i.split(o,e,n)},{$x:o},function(i){return{$x:function(){return Cr(i,n)}}})}});function la(t,r){return t(r={exports:{}},r.exports),r.exports}var uE=la(function(t){(function(r,n,e){function o(a){var s,l=this,h=(s=4022871197,function(p){p=p.toString();for(var c=0;c<p.length;c++){var d=.02519603282416938*(s+=p.charCodeAt(c));d-=s=d>>>0,s=(d*=s)>>>0,s+=4294967296*(d-=s)}return 23283064365386963e-26*(s>>>0)});l.next=function(){var p=2091639*l.s0+23283064365386963e-26*l.c;return l.s0=l.s1,l.s1=l.s2,l.s2=p-(l.c=0|p)},l.c=1,l.s0=h(" "),l.s1=h(" "),l.s2=h(" "),l.s0-=h(a),l.s0<0&&(l.s0+=1),l.s1-=h(a),l.s1<0&&(l.s1+=1),l.s2-=h(a),l.s2<0&&(l.s2+=1),h=null}function i(a,s){return s.c=a.c,s.s0=a.s0,s.s1=a.s1,s.s2=a.s2,s}function u(a,s){var l=new o(a),h=s&&s.state,p=l.next;return p.int32=function(){return 4294967296*l.next()|0},p.double=function(){return p()+11102230246251565e-32*(2097152*p()|0)},p.quick=p,h&&(typeof h=="object"&&i(h,l),p.state=function(){return i(l,{})}),p}n&&n.exports?n.exports=u:e&&e.amd?e(function(){return u}):this.alea=u})(0,t,!1)}),lE=la(function(t){(function(r,n,e){function o(a){var s=this,l="";s.x=0,s.y=0,s.z=0,s.w=0,s.next=function(){var p=s.x^s.x<<11;return s.x=s.y,s.y=s.z,s.z=s.w,s.w^=s.w>>>19^p^p>>>8},a===(0|a)?s.x=a:l+=a;for(var h=0;h<l.length+64;h++)s.x^=0|l.charCodeAt(h),s.next()}function i(a,s){return s.x=a.x,s.y=a.y,s.z=a.z,s.w=a.w,s}function u(a,s){var l=new o(a),h=s&&s.state,p=function(){return(l.next()>>>0)/4294967296};return p.double=function(){do var c=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(c===0);return c},p.int32=l.next,p.quick=p,h&&(typeof h=="object"&&i(h,l),p.state=function(){return i(l,{})}),p}n&&n.exports?n.exports=u:e&&e.amd?e(function(){return u}):this.xor128=u})(0,t,!1)}),cE=la(function(t){(function(r,n,e){function o(a){var s=this,l="";s.next=function(){var p=s.x^s.x>>>2;return s.x=s.y,s.y=s.z,s.z=s.w,s.w=s.v,(s.d=s.d+362437|0)+(s.v=s.v^s.v<<4^p^p<<1)|0},s.x=0,s.y=0,s.z=0,s.w=0,s.v=0,a===(0|a)?s.x=a:l+=a;for(var h=0;h<l.length+64;h++)s.x^=0|l.charCodeAt(h),h==l.length&&(s.d=s.x<<10^s.x>>>4),s.next()}function i(a,s){return s.x=a.x,s.y=a.y,s.z=a.z,s.w=a.w,s.v=a.v,s.d=a.d,s}function u(a,s){var l=new o(a),h=s&&s.state,p=function(){return(l.next()>>>0)/4294967296};return p.double=function(){do var c=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(c===0);return c},p.int32=l.next,p.quick=p,h&&(typeof h=="object"&&i(h,l),p.state=function(){return i(l,{})}),p}n&&n.exports?n.exports=u:e&&e.amd?e(function(){return u}):this.xorwow=u})(0,t,!1)}),dE=la(function(t){(function(r,n,e){function o(a){var s=this;s.next=function(){var l,h,p=s.x,c=s.i;return l=p[c],h=(l^=l>>>7)^l<<24,h^=(l=p[c+1&7])^l>>>10,h^=(l=p[c+3&7])^l>>>3,h^=(l=p[c+4&7])^l<<7,l=p[c+7&7],h^=(l^=l<<13)^l<<9,p[c]=h,s.i=c+1&7,h},function(l,h){var p,c=[];if(h===(0|h))c[0]=h;else for(h=""+h,p=0;p<h.length;++p)c[7&p]=c[7&p]<<15^h.charCodeAt(p)+c[p+1&7]<<13;for(;c.length<8;)c.push(0);for(p=0;p<8&&c[p]===0;++p);for(p==8?c[7]=-1:c[p],l.x=c,l.i=0,p=256;p>0;--p)l.next()}(s,a)}function i(a,s){return s.x=a.x.slice(),s.i=a.i,s}function u(a,s){a==null&&(a=+new Date);var l=new o(a),h=s&&s.state,p=function(){return(l.next()>>>0)/4294967296};return p.double=function(){do var c=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(c===0);return c},p.int32=l.next,p.quick=p,h&&(h.x&&i(h,l),p.state=function(){return i(l,{})}),p}n&&n.exports?n.exports=u:e&&e.amd?e(function(){return u}):this.xorshift7=u})(0,t,!1)}),fE=la(function(t){(function(r,n,e){function o(a){var s=this;s.next=function(){var l,h,p=s.w,c=s.X,d=s.i;return s.w=p=p+1640531527|0,h=c[d+34&127],l=c[d=d+1&127],h^=h<<13,l^=l<<17,h^=h>>>15,l^=l>>>12,h=c[d]=h^l,s.i=d,h+(p^p>>>16)|0},function(l,h){var p,c,d,f,m,y=[],g=128;for(h===(0|h)?(c=h,h=null):(h+="\0",c=0,g=Math.max(g,h.length)),d=0,f=-32;f<g;++f)h&&(c^=h.charCodeAt((f+32)%h.length)),f===0&&(m=c),c^=c<<10,c^=c>>>15,c^=c<<4,c^=c>>>13,f>=0&&(m=m+1640531527|0,d=(p=y[127&f]^=c+m)==0?d+1:0);for(d>=128&&(y[127&(h&&h.length||0)]=-1),d=127,f=512;f>0;--f)c=y[d+34&127],p=y[d=d+1&127],c^=c<<13,p^=p<<17,c^=c>>>15,p^=p>>>12,y[d]=c^p;l.w=m,l.X=y,l.i=d}(s,a)}function i(a,s){return s.i=a.i,s.w=a.w,s.X=a.X.slice(),s}function u(a,s){a==null&&(a=+new Date);var l=new o(a),h=s&&s.state,p=function(){return(l.next()>>>0)/4294967296};return p.double=function(){do var c=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(c===0);return c},p.int32=l.next,p.quick=p,h&&(h.X&&i(h,l),p.state=function(){return i(l,{})}),p}n&&n.exports?n.exports=u:e&&e.amd?e(function(){return u}):this.xor4096=u})(0,t,!1)}),hE=la(function(t){(function(r,n,e){function o(a){var s=this,l="";s.next=function(){var p=s.b,c=s.c,d=s.d,f=s.a;return p=p<<25^p>>>7^c,c=c-d|0,d=d<<24^d>>>8^f,f=f-p|0,s.b=p=p<<20^p>>>12^c,s.c=c=c-d|0,s.d=d<<16^c>>>16^f,s.a=f-p|0},s.a=0,s.b=0,s.c=-1640531527,s.d=1367130551,a===Math.floor(a)?(s.a=a/4294967296|0,s.b=0|a):l+=a;for(var h=0;h<l.length+20;h++)s.b^=0|l.charCodeAt(h),s.next()}function i(a,s){return s.a=a.a,s.b=a.b,s.c=a.c,s.d=a.d,s}function u(a,s){var l=new o(a),h=s&&s.state,p=function(){return(l.next()>>>0)/4294967296};return p.double=function(){do var c=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(c===0);return c},p.int32=l.next,p.quick=p,h&&(typeof h=="object"&&i(h,l),p.state=function(){return i(l,{})}),p}n&&n.exports?n.exports=u:e&&e.amd?e(function(){return u}):this.tychei=u})(0,t,!1)}),Wi=la(function(t){(function(r,n){var e,o=this,i=256,u=6,a="random",s=n.pow(i,u),l=n.pow(2,52),h=2*l,p=i-1;function c(g,v,b){var w=[],_=m(function T(R,M){var I,D=[],L=typeof R;if(M&&L=="object")for(I in R)try{D.push(T(R[I],M-1))}catch{}return D.length?D:L=="string"?R:R+"\0"}((v=v==1?{entropy:!0}:v||{}).entropy?[g,y(r)]:g??function(){try{var T;return e&&(T=e.randomBytes)?T=T(i):(T=new Uint8Array(i),(o.crypto||o.msCrypto).getRandomValues(T)),y(T)}catch{var R=o.navigator,M=R&&R.plugins;return[+new Date,o,M,o.screen,y(r)]}}(),3),w),j=new d(w),E=function(){for(var T=j.g(u),R=s,M=0;T<l;)T=(T+M)*i,R*=i,M=j.g(1);for(;T>=h;)T/=2,R/=2,M>>>=1;return(T+M)/R};return E.int32=function(){return 0|j.g(4)},E.quick=function(){return j.g(4)/4294967296},E.double=E,m(y(j.S),r),(v.pass||b||function(T,R,M,I){return I&&(I.S&&f(I,j),T.state=function(){return f(j,{})}),M?(n[a]=T,R):T})(E,_,"global"in v?v.global:this==n,v.state)}function d(g){var v,b=g.length,w=this,_=0,j=w.i=w.j=0,E=w.S=[];for(b||(g=[b++]);_<i;)E[_]=_++;for(_=0;_<i;_++)E[_]=E[j=p&j+g[_%b]+(v=E[_])],E[j]=v;(w.g=function(T){for(var R,M=0,I=w.i,D=w.j,L=w.S;T--;)R=L[I=p&I+1],M=M*i+L[p&(L[I]=L[D=p&D+R])+(L[D]=R)];return w.i=I,w.j=D,M})(i)}function f(g,v){return v.i=g.i,v.j=g.j,v.S=g.S.slice(),v}function m(g,v){for(var b,w=g+"",_=0;_<w.length;)v[p&_]=p&(b^=19*v[p&_])+w.charCodeAt(_++);return y(v)}function y(g){return String.fromCharCode.apply(0,g)}if(n["seed"+a]=c,m(n.random(),r),t.exports){t.exports=c;try{e=require("crypto")}catch{}}})([],Math)});Wi.alea=uE,Wi.xor128=lE,Wi.xorwow=cE,Wi.xorshift7=dE,Wi.xor4096=fE,Wi.tychei=hE;var Xc=Wi.alea,Op=function(){function t(r,n,e,o,i){this.mean=r,this.stdDev=n,this.dtype=e,this.nextVal=NaN,this.truncated=o,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var u=i||Math.random();this.random=Xc(u.toString())}return t.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var r=this.nextVal;return this.nextVal=NaN,r}for(var n,e,o=!1;!o;){var i=void 0,u=void 0,a=void 0;do a=(i=2*this.random()-1)*i+(u=2*this.random()-1)*u;while(a>=1||a===0);var s=Math.sqrt(-2*Math.log(a)/a);n=this.mean+this.stdDev*i*s,e=this.mean+this.stdDev*u*s,this.truncated&&!this.isValidTruncated(n)||(o=!0)}return this.truncated&&!this.isValidTruncated(e)||(this.nextVal=this.convertValue(e)),this.convertValue(n)},t.prototype.convertValue=function(r){return this.dtype==null||this.dtype==="float32"?r:Math.round(r)},t.prototype.isValidTruncated=function(r){return r<=this.upper&&r>=this.lower},t}(),pE=function(){function t(r,n,e,o){this.alpha=r,this.beta=1/n,this.dtype=e;var i=o||Math.random();this.randu=Xc(i.toString()),this.randn=new Op(0,1,e,!1,this.randu()),this.d=r<1?r+2/3:r-1/3,this.c=1/Math.sqrt(9*this.d)}return t.prototype.nextValue=function(){for(var r,n,e,o,i,u;;){do o=this.randn.nextValue(),u=1+this.c*o;while(u<=0);if(u*=u*u,n=1-.331*(r=o*o)*r,e=.5*r+this.d*(1-u+Math.log(u)),(i=this.randu())<n||Math.log(i)<e)break}return u=1/this.beta*this.d*u,this.alpha<1&&(u*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(u)},t.prototype.convertValue=function(r){return this.dtype==="float32"?r:Math.round(r)},t}(),mE=function(){function t(r,n,e,o){var i=this;if(r===void 0&&(r=0),n===void 0&&(n=1),this.canReturnFloat=function(){return i.dtype==null||i.dtype==="float32"},this.min=r,this.range=n-r,this.dtype=e,o==null&&(o=Math.random()),typeof o=="number"&&(o=o.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+r+" - "+n+" <= 1 and dtype is not float");this.random=Xc(o)}return t.prototype.convertValue=function(r){return this.canReturnFloat()?r:Math.round(r)},t.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},t}();function Ct(t,r,n){return r===void 0&&(r="float32"),r=r||"float32",Y1(t),new gu(t,r,n)}function yE(t,r){r===void 0&&(r=!1),console.log(t.toString(r))}var nb=xe({batchToSpaceND_:function(t,r,n){var e=oe(t,"x","batchToSpaceND"),o=r.reduce(function(i,u){return i*u});return ce(e.rank>=1+r.length,function(){return"input rank is "+e.rank+" but should be > than blockShape.length "+r.length}),ce(n.length===r.length,function(){return"crops.length is "+n.length+" but should be equal to blockShape.length  "+r.length}),ce(e.shape[0]%o==0,function(){return"input tensor batch is "+e.shape[0]+" but is not divisible by the product of the elements of blockShape "+r.join(" * ")+" === "+o}),Se.runKernelFunc(function(i){return i.batchToSpaceND(e,r,n)},{$x:e},function(i){return{$x:function(){return i.spaceToBatchND(r,n)}}})}}),gE=xe({broadcastTo_:function(t,r){var n=oe(t,"broadcastTo","x"),e=n.shape;if(r.some(function(s){return!(s>0)||s%1!=0}))throw new Error("broadcastTo(): Invalid broadcast shape ["+r+"].");if(r.length<n.rank)throw new Error("broadcastTo(): shape.length="+r.length+" < input.rank="+n.rank+".");if(r.length>n.rank){for(var o=n.shape.slice();o.length<r.length;)o.unshift(1);n=n.reshape(o)}for(var i=Array.from(r),u=r.length-1;u>=0;u--)if(n.shape[u]===r[u])i[u]=1;else if(n.shape[u]!==1)throw new Error("broadcastTo(): ["+e+"] cannot be broadcast to ["+r+"].");var a=i.map(function(s,l){return s>1?l:-1}).filter(function(s){return s>=0});return a.length===0?n.clone():Se.runKernelFunc(function(s){return s.tile(n,i)},{input:n},function(s){return{input:function(){return s.sum(a,!0)}}})}}),vE=xe({cast_:function(t,r){var n=oe(t,"x","cast");if(!cS(r))throw new Error("Failed to cast to unknown dtype "+r);if(r==="string"&&n.dtype!=="string"||r!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");var e={dtype:r};return Se.runKernelFunc(function(o){return o.cast(n,r)},{x:n},function(o){return{x:function(){return o.clone()}}},"Cast",e)}}),bE=xe({clone_:function(t){var r=oe(t,"x","clone",null);return Se.runKernelFunc(function(){return Se.makeTensorFromDataId(r.dataId,r.shape,r.dtype)},{$x:r},function(n){return{$x:function(){return n.toFloat()}}})}}),xE=xe({cumsum_:function(t,r,n,e){r===void 0&&(r=0),n===void 0&&(n=!1),e===void 0&&(e=!1);var o=oe(t,"x","cumsum"),i=Ao([r|=0],o.rank),u=o;i!=null&&(u=o.transpose(i));var a=Po(1,o.rank)[0],s=Se.runKernelFunc(function(l){return l.cumsum(u,a,n,e)},{permutedX:u},function(l){return{permutedX:function(){return l.cumsum(r,n,!e)}}});return i!=null&&(s=s.transpose(i)),s}}),wE=xe({depthToSpace_:function(t,r,n){n===void 0&&(n="NHWC");var e=oe(t,"x","depthToSpace"),o=n==="NHWC"?e.shape[1]:e.shape[2],i=n==="NHWC"?e.shape[2]:e.shape[3],u=n==="NHWC"?e.shape[3]:e.shape[1];return ce(o*r>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+o+" and "+r+`  for depthToSpace with input shape
      `+e.shape}),ce(i*r>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+i+" and "+r+` for depthToSpace with input shape
          `+e.shape}),ce(u%(r*r)==0,function(){return"Dimension size must be evenly divisible by "+r*r+" but is "+u+" for depthToSpace with input shape "+e.shape}),Se.runKernelFunc(function(a){return a.depthToSpace(e,r,n)},{$x:e})}}),Gn=xe({expandDims_:function(t,r){r===void 0&&(r=0);var n=oe(t,"x","expandDims",null);ce(r<=n.rank,function(){return"Axis must be <= rank of the tensor"});var e=n.shape.slice();return r<0&&(ce(-(n.rank+1)<=r,function(){return"Axis must be in the interval ["+-(n.rank+1)+", "+n.rank+"]"}),r=n.rank+r+1),e.splice(r,0,1),no(n,e)}}),ob=xe({eye_:function(t,r,n,e){e===void 0&&(e="float32"),r==null&&(r=t);for(var o=Ct([t,r],e),i=t<=r?t:r,u=0;u<i;++u)o.set(1,u,u);var a=o.toTensor().as2D(t,r);if(n==null)return a;if(n.length===1)return $a(Gn(a,0),[n[0],1,1]);if(n.length===2)return $a(Gn(Gn(a,0),0),[n[0],n[1],1,1]);if(n.length===3)return $a(Gn(Gn(Gn(a,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+n.length+"D.")}}),_E=xe({multinomial_:function(t,r,n,e){e===void 0&&(e=!1);var o=oe(t,"logits","multinomial"),i=o.size,u=o.rank;if(i<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+i+".");if(u>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+u);n=n||Math.random();var a=u===1?o.as2D(1,-1):o,s=Se.runKernelFunc(function(l){return l.multinomial(a,e,r,n)},{logits2D:a});return u===1?s.as1D():s}}),Sh=xe({oneHot_:function(t,r,n,e){if(n===void 0&&(n=1),e===void 0&&(e=0),r<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+r);var o=oe(t,"indices","oneHot","int32"),i=o.shape.concat([r]);return o=o.flatten(),Se.runKernelFunc(function(u){return u.oneHot(o,r,n,e)},{$indices:o},function(u){return{$indices:function(){return er(o.shape,"float32")}}}).reshape(i)}}),ca=xe({pad_:function(t,r,n){n===void 0&&(n=0);var e=oe(t,"x","pad");if(e.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var o={paddings:r,constantValue:n};return Se.runKernelFunc(function(i){return i.pad(e,r,n)},{x:e},function(i){var u=r.map(function(a){return a[0]});return{x:function(){return i.slice(u,e.shape)}}},"PadV2",o)}}),SE=xe({pad1d_:function(t,r,n){return n===void 0&&(n=0),ce(r.length===2,function(){return"Invalid number of paddings. Must be length of 2."}),ca(t,[r],n)}}),EE=xe({pad2d_:function(t,r,n){return n===void 0&&(n=0),ce(r.length===2&&r[0].length===2&&r[1].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),ca(t,r,n)}}),jE=xe({pad3d_:function(t,r,n){return n===void 0&&(n=0),ce(r.length===3&&r[0].length===2&&r[1].length===2&&r[2].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),ca(t,r,n)}}),CE=xe({pad4d_:function(t,r,n){return n===void 0&&(n=0),ce(r.length===4&&r[0].length===2&&r[1].length===2&&r[2].length===2&&r[3].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),ca(t,r,n)}}),kE=xe({rand_:function(t,r,n){var e=ht(t),o=null;if(n==null||n==="float32")o=new Float32Array(e);else if(n==="int32")o=new Int32Array(e);else{if(n!=="bool")throw new Error("Unknown data type "+n);o=new Uint8Array(e)}for(var i=0;i<e;i++)o[i]=r();return Se.makeTensor(o,t,n)}}),TE=xe({randomNormal_:function(t,r,n,e,o){if(r===void 0&&(r=0),n===void 0&&(n=1),e!=null&&e==="bool")throw new Error("Unsupported data type "+e);for(var i=new Op(r,n,e,!1,o),u=Ct(t,e),a=0;a<u.values.length;a++)u.values[a]=i.nextValue();return u.toTensor()}}),ME=xe({randomGamma_:function(t,r,n,e,o){if(n===void 0&&(n=1),e===void 0&&(e="float32"),n==null&&(n=1),e==null&&(e="float32"),e!=="float32"&&e!=="int32")throw new Error("Unsupported data type "+e);for(var i=new pE(r,n,e,o),u=Ct(t,e),a=0;a<u.values.length;a++)u.values[a]=i.nextValue();return u.toTensor()}}),ib=xe({randomUniform_:function(t,r,n,e,o){r===void 0&&(r=0),n===void 0&&(n=1),e===void 0&&(e="float32");for(var i=Ct(t,e),u=new mE(r,n,null,o),a=0;a<i.values.length;a++)i.values[a]=u.nextValue();return i.toTensor()}}),no=xe({reshape_:function(t,r){var n=oe(t,"x","reshape",null);r=uS(r,n.size),ce(n.size===ht(r),function(){return"new shape and old shape must have the same number of elements."});var e={shape:r};return Se.runKernelFunc(function(o){return o.reshape(n,r)},{x:n},function(o){return{x:function(){return o.reshape(n.shape)}}},"Reshape",e)}}),ab=xe({spaceToBatchND_:function(t,r,n){var e=oe(t,"x","spaceToBatchND");return ce(e.rank>=1+r.length,function(){return"input rank "+e.rank+" should be > than [blockShape] "+r.length}),ce(n.length===r.length,function(){return"paddings.shape[0] "+n.length+" must be equal to [blockShape] "+r.length}),ce(e.shape.reduce(function(o,i,u){return u>0&&u<=r.length?o&&(i+n[u-1][0]+n[u-1][1])%r[u-1]==0:o},!0),function(){return"input spatial dimensions "+e.shape.slice(1)+" with paddings "+n.toString()+" must be divisible by blockShapes "+r.toString()}),Se.runKernelFunc(function(o){return o.spaceToBatchND(e,r,n)},{$x:e},function(o){return{$x:function(){return o.batchToSpaceND(r,n)}}})}}),sb=xe({squeeze_:function(t,r){var n=oe(t,"x","squeeze");return no(n,Hi(n.shape,r).newShape)}}),On=xe({stack_:function(t,r){r===void 0&&(r=0);var n=pc(t,"tensors","stack");if(ce(n.length>=1,function(){return"Pass at least one tensor to tf.stack"}),n.length===1)return n[0].expandDims(r);var e=n[0].rank,o=n[0].shape,i=n[0].dtype;ce(r<=e,function(){return"Axis must be <= rank of the tensor"}),n.forEach(function(a){Ut(o,a.shape,"All tensors passed to stack must have matching shapes")}),n.forEach(function(a){ce(i===a.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var u=n.map(function(a){return a.expandDims(r)});return Cr(u,r)}}),$a=xe({tile_:function(t,r){var n=oe(t,"x","tile",null);ce(n.rank===r.length,function(){return"Error in transpose: rank of input "+n.rank+" must match length of reps "+r+"."});var e=[n],o={reps:r};return Se.runKernelFunc(function(i,u){var a=i.tile(n,r);return u([n]),a},{x:n},function(i,u){var a=u[0];return{x:function(){var s=Dt(a);if(a.rank===1)for(var l=0;l<r[0];++l)s=s.add(i.slice([l*a.shape[0]],[a.shape[0]]));else if(a.rank===2)for(l=0;l<r[0];++l)for(var h=0;h<r[1];++h)s=s.add(i.slice([l*a.shape[0],h*a.shape[1]],[a.shape[0],a.shape[1]]));else if(a.rank===3)for(l=0;l<r[0];++l)for(h=0;h<r[1];++h)for(var p=0;p<r[2];++p)s=s.add(i.slice([l*a.shape[0],h*a.shape[1],p*a.shape[2]],[a.shape[0],a.shape[1],a.shape[2]]));else{if(a.rank!==4)throw new Error("Gradient for tile operation is not implemented for rank-"+a.rank+" tensors yet.");for(l=0;l<r[0];++l)for(h=0;h<r[1];++h)for(p=0;p<r[2];++p)for(var c=0;c<r[3];++c)s=s.add(i.slice([l*a.shape[0],h*a.shape[1],p*a.shape[2],c*a.shape[3]],[a.shape[0],a.shape[1],a.shape[2],a.shape[3]]))}return s}}},"Tile",o,e)}}),RE=xe({truncatedNormal_:function(t,r,n,e,o){if(r===void 0&&(r=0),n===void 0&&(n=1),e!=null&&e==="bool")throw new Error("Unsupported data type "+e);for(var i=new Op(r,n,e,!0,o),u=Ct(t,e),a=0;a<u.values.length;a++)u.values[a]=i.nextValue();return u.toTensor()}}),kr=xe({unstack_:function(t,r){r===void 0&&(r=0),r=r||0;var n=oe(t,"x","unstack");ce(r>=-n.shape.length&&r<n.shape.length,function(){return"Axis = "+r+" is not in [-"+n.shape.length+", "+n.shape.length+")"}),r<0&&(r+=n.shape.length);var e={axis:r};return Se.runKernelFunc(function(o){return o.unstack(n,r)},{x:n},function(o){return{x:function(){return On(o,r)}}},"Unpack",e)}}),IE=function(t,r){return lt(this,void 0,void 0,function(){var n,e,o,i,u,a,s,l,h,p;return ct(this,function(c){switch(c.label){case 0:return n=oe(t,"x","setdiff1d"),e=oe(r,"y","setdiff1d"),ce(n.dtype===e.dtype,function(){return"x and y should have the same dtype, but got x ("+n.dtype+") and y ("+e.dtype+")."}),ce(n.rank===1,function(){return"x should be 1D tensor, but got x ("+n.shape+")."}),ce(e.rank===1,function(){return"y should be 1D tensor, but got y ("+e.shape+")."}),[4,n.data()];case 1:return o=c.sent(),[4,e.data()];case 2:for(i=c.sent(),u=new Set(i),a=0,h=0;h<o.length;h++)u.has(o[h])||a++;for(s=new gu([a],n.dtype),l=new gu([a],"int32"),h=0,p=0;h<o.length;h++)u.has(o[h])||(s.values[p]=o[h],l.values[p]=h,p++);return[2,[s.toTensor(),l.toTensor()]]}})})};function yc(t,r,n,e){e===void 0&&(e=!0);var o=[];if(e)(o=o.concat(r.slice(0))).push(t[0]/n),o=o.concat(t.slice(1));else{o=o.concat(t[0]);for(var i=r.length,u=0;u<i;++u)o=o.concat([t[u+1]/r[u],r[u]]);o=o.concat(t.slice(i+1))}return o}function gc(t,r,n){n===void 0&&(n=!0);var e=[];if(n){e.push(r);for(var o=r+1;o<t;++o)o<=2*r?(e.push(o),e.push(o-(r+1))):e.push(o)}else{var i=[],u=[];for(o=1;o<t;++o)o>=2*r+1||o%2==1?u.push(o):i.push(o);e.push.apply(e,i),e.push(0),e.push.apply(e,u)}return e}function vc(t,r,n,e){e===void 0&&(e=!0);var o=[];e?o.push(t[0]/n):o.push(t[0]*n);for(var i=1;i<t.length;++i)i<=r.length?e?o.push(r[i-1]*t[i]):o.push(t[i]/r[i-1]):o.push(t[i]);return o}function ub(t,r){for(var n=[0],e=0;e<r;++e)n.push(t[e][0]);return n}function lb(t,r,n){for(var e=t.slice(0,1),o=0;o<n;++o)e.push(t[o+1]-r[o][0]-r[o][1]);return e}function cb(t,r){if(t.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+t.rank+".");if(r.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+r.rank+".");if(r.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+r.dtype+".");if(r.shape[r.rank-1]>t.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+r.shape[r.rank-1]+" vs. "+t.rank);if(t.size===0)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+t.shape+".");for(var n=r.shape,e=n[n.length-1],o=1,i=0;i<n.length-1;++i)o*=n[i];var u=t.shape,a=n.slice();a.pop();var s=1;for(i=e;i<t.rank;++i)s*=u[i],a.push(u[i]);var l=To(t.shape).map(function(h){return h/s}).concat([1]).slice(0,e);return[a,o,s,l]}var db=30;function Qd(t){return t<=db?t:gh(t,Math.floor(Math.sqrt(t)))}function AE(t,r,n){var e=r.rank>1?r.shape[r.rank-1]:1,o=r.rank>1?r.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+n.shape+", indices.shape: "+r.shape+", shape: "+t+", sliceDim: "+e+", and batchDim: "+o+".";if(n.rank<o)throw new Error(i+" update.rank < "+o+". ");if(t.length<e+(n.rank-o))throw new Error(i+" Output shape length < "+(e+(n.rank-o)));if(n.rank!==o+t.length-e)throw new Error(i+" update.rank != "+(o+t.length-e));for(var u=0;u<o;++u)if(n.shape[u]!==r.shape[u])throw new Error(i+" updates.shape["+u+"] ("+n.shape[u]+") != indices.shape["+u+"] ("+r.shape[u]+").");for(u=0;u<n.rank-o;++u)if(n.shape[u+o]!==t[u+e])throw new Error(i+" updates.shape["+(u+o)+"] ("+n.shape[u+o]+") != shape["+(u+o)+"] ("+t[u+o]+")")}function PE(t,r,n){if(r.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+r.rank+".");if(t.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+t.rank+".");if(r.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: "+r.dtype);if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n);if(n.length===0){if(r.size===0)throw new Error("Indices specified for empty output. indices shape: "+r.shape);if(t.size===0)throw new Error("Updates specified for empty output. updates shape: "+t.shape)}AE(n,r,t)}function bc(t,r,n){for(var e=r.shape.length,o=e>1?r.shape[e-1]:1,i=n.length,u=1,a=o;a<i;++a)u*=n[a];var s=o<1?1:o;return{sliceRank:o,numUpdates:ht(r.shape)/s,sliceSize:u,strides:To(n.slice(0,o)).concat([1]),outputSize:ht(n)}}function DE(t,r,n){ce(t.rank===r.length,function(){return"Error in slice"+t.rank+"D: Length of begin "+r+" must match the rank of the array ("+t.rank+")."}),ce(t.rank===n.length,function(){return"Error in slice"+t.rank+"D: Length of size "+n+" must match the rank of the array ("+t.rank+")."});for(var e=function(i){ce(r[i]+n[i]<=t.shape[i],function(){return"Error in slice"+t.rank+"D: begin["+i+"] + size["+i+"] ("+(r[i]+n[i])+") would overflow input.shape["+i+"] ("+t.shape[i]+")"})},o=0;o<t.rank;++o)e(o)}function Ng(t){for(var r=[],n=0;t>0;)1&t&&r.push(n),t/=2,n++;return r}function Lp(t,r,n){for(var e=[],o=0;o<t.length;o++)e[o]=Math.ceil((r[o]-t[o])/n[o]);return e}function OE(t,r,n,e,o){var i=r[o],u=n[o]||1;(t&1<<o||i==null)&&(i=u>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var a=e[o];return i<0&&(i+=a),i=ph(0,i,a-1)}function LE(t,r,n,e,o){var i=r[o],u=n[o]||1;(t&1<<o||i==null)&&(i=u>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var a=e[o];return i<0&&(i+=a),i=u>0?ph(0,i,a):ph(-1,i,a-1)}function fb(t,r,n){for(var e=n.length,o=0;o<n.length;o++)if(n[o]>1){e=o;break}for(o=e+1;o<n.length;o++)if(r[o]>0||n[o]!==t[o])return!1;return!0}function hb(t,r){for(var n=t.length>0?t[t.length-1]:1,e=0;e<t.length-1;e++)n+=t[e]*r[e];return n}function NE(t,r){ce(yh(t),function(){return"The f passed in variableGrads(f) must be a function"}),ce(r==null||Array.isArray(r)&&r.every(function(h){return h instanceof us}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"});var n=r!=null;if(!n)for(var e in r=[],Se.registeredVariables)r.push(Se.registeredVariables[e]);var o=n?r.filter(function(h){return!h.trainable}):null,i=r.length;ce((r=r.filter(function(h){return h.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+i+" variables is trainable."});var u=Se.gradients(t,r,null,!0),a=u.value,s=u.grads;ce(s.some(function(h){return h!=null}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),ce(a.rank===0,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+a.rank+" tensor"});var l={};return r.forEach(function(h,p){s[p]!=null&&(l[h.name]=s[p])}),o!=null&&o.forEach(function(h){return l[h.name]=null}),{value:a,grads:l}}function Yc(t){return Se.customGrad(t)}var Qo=xe({softmax_:function(t,r){r===void 0&&(r=-1);var n=oe(t,"logits","softmax","float32");if(r===-1&&(r=n.rank-1),r!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and dim was "+r);return Se.runKernelFunc(function(e,o){var i=e.softmax(n,r);return o([i]),i},{logits:n},function(e,o){var i=o[0],u=e.mul(i);return{logits:function(){return u.sub(u.sum([r],!0).mul(i))}}},"Softmax",{dim:r},[],[!0])}}),FE=xe({logSoftmax_:function(t,r){r===void 0&&(r=-1);var n=oe(t,"logits","logSoftmax");if(r===-1&&(r=n.rank-1),r!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and axis was "+r);return Yc(function(e,o){var i=e.max(r,!0),u=e.sub(i),a=u.toFloat().sub(u.exp().sum(r,!0).log());return o([a]),{value:a,gradFunc:function(s,l){var h=l[0].exp();return s.sub(s.sum(r,!0).mul(h))}}})(n)}}),pb=function(){function t(r,n){this.backend=r,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return t.prototype.get=function(r){return this.data.has(r)||this.dataMover.moveData(this.backend,r),this.data.get(r)},t.prototype.set=function(r,n){this.dataIdsCount++,this.data.set(r,n)},t.prototype.has=function(r){return this.data.has(r)},t.prototype.delete=function(r){return this.dataIdsCount--,this.data.delete(r)},t.prototype.numDataIds=function(){return this.dataIdsCount},t}(),mb=function(){function t(){}return t.prototype.time=function(r){return De("time")},t.prototype.read=function(r){return De("read")},t.prototype.readSync=function(r){return De("readSync")},t.prototype.numDataIds=function(){return De("numDataIds")},t.prototype.disposeData=function(r){return De("disposeData")},t.prototype.write=function(r,n,e){return De("write")},t.prototype.move=function(r,n,e,o){return De("move")},t.prototype.memory=function(){return De("memory")},t.prototype.floatPrecision=function(){return De("floatPrecision")},t.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},t.prototype.batchMatMul=function(r,n,e,o){return De("batchMatMul")},t.prototype.fusedBatchMatMul=function(r){return r.a,r.b,r.transposeA,r.transposeB,r.bias,r.activation,r.preluActivationWeights,De("fusedBatchMatMul")},t.prototype.slice=function(r,n,e){return De("slice")},t.prototype.stridedSlice=function(r,n,e,o){return De("stridedSlice")},t.prototype.unstack=function(r,n){return De("unstack")},t.prototype.reverse=function(r,n){return De("reverse")},t.prototype.concat=function(r,n){return De("concat")},t.prototype.neg=function(r){return De("neg")},t.prototype.add=function(r,n){return De("add")},t.prototype.addN=function(r){return De("addN")},t.prototype.subtract=function(r,n){return De("subtract")},t.prototype.multiply=function(r,n){return De("multiply")},t.prototype.realDivide=function(r,n){return De("realDivide")},t.prototype.floorDiv=function(r,n){return De("floorDiv")},t.prototype.sum=function(r,n){return De("sum")},t.prototype.prod=function(r,n){return De("prod")},t.prototype.unsortedSegmentSum=function(r,n,e){return De("unsortedSegmentSum")},t.prototype.argMin=function(r,n){return De("argMin")},t.prototype.argMax=function(r,n){return De("argMax")},t.prototype.equal=function(r,n){return De("equal")},t.prototype.notEqual=function(r,n){return De("notEqual")},t.prototype.less=function(r,n){return De("less")},t.prototype.lessEqual=function(r,n){return De("lessEqual")},t.prototype.greater=function(r,n){return De("greater")},t.prototype.greaterEqual=function(r,n){return De("greaterEqual")},t.prototype.logicalNot=function(r){return De("logicalNot")},t.prototype.logicalAnd=function(r,n){return De("logicalAnd")},t.prototype.logicalOr=function(r,n){return De("logicalOr")},t.prototype.where=function(r){return De("where")},t.prototype.select=function(r,n,e){return De("select")},t.prototype.topk=function(r,n,e){return De("topk")},t.prototype.min=function(r,n){return De("min")},t.prototype.minimum=function(r,n){return De("minimum")},t.prototype.mod=function(r,n){return De("mod")},t.prototype.max=function(r,n){return De("max")},t.prototype.maximum=function(r,n){return De("maximum")},t.prototype.all=function(r,n){return De("all")},t.prototype.any=function(r,n){return De("any")},t.prototype.squaredDifference=function(r,n){return De("squaredDifference")},t.prototype.ceil=function(r){return De("ceil")},t.prototype.floor=function(r){return De("floor")},t.prototype.round=function(r){return De("round")},t.prototype.sign=function(r){return De("sign")},t.prototype.isNaN=function(r){return De("isNaN")},t.prototype.isInf=function(r){return De("isInf")},t.prototype.isFinite=function(r){return De("isFinite")},t.prototype.pow=function(r,n){return De("pow")},t.prototype.exp=function(r){return De("exp")},t.prototype.expm1=function(r){return De("expm1")},t.prototype.softmax=function(r,n){return De("softmax")},t.prototype.log=function(r){return De("log")},t.prototype.log1p=function(r){return De("log1p")},t.prototype.sqrt=function(r){return De("sqrt")},t.prototype.rsqrt=function(r){return De("rsqrt")},t.prototype.square=function(r){return De("square")},t.prototype.reciprocal=function(r){return De("reciprocal")},t.prototype.relu=function(r){return De("relu")},t.prototype.relu6=function(r){return De("relu6")},t.prototype.prelu=function(r,n){return De("prelu")},t.prototype.elu=function(r){return De("elu")},t.prototype.eluDer=function(r,n){return De("eluDer")},t.prototype.selu=function(r){return De("selu")},t.prototype.int=function(r){return De("int")},t.prototype.clip=function(r,n,e){return De("clip")},t.prototype.abs=function(r){return De("abs")},t.prototype.complexAbs=function(r){return De("complexAbs")},t.prototype.sigmoid=function(r){return De("sigmoid")},t.prototype.softplus=function(r){return De("softplus")},t.prototype.sin=function(r){return De("sin")},t.prototype.cos=function(r){return De("cos")},t.prototype.tan=function(r){return De("tan")},t.prototype.asin=function(r){return De("asin")},t.prototype.acos=function(r){return De("acos")},t.prototype.atan=function(r){return De("atan")},t.prototype.atan2=function(r,n){return De("atan2")},t.prototype.sinh=function(r){return De("sinh")},t.prototype.cosh=function(r){return De("cosh")},t.prototype.tanh=function(r){return De("tanh")},t.prototype.asinh=function(r){return De("asinh")},t.prototype.acosh=function(r){return De("acosh")},t.prototype.atanh=function(r){return De("atanh")},t.prototype.erf=function(r){return De("erf")},t.prototype.step=function(r,n){return De("step")},t.prototype.fusedConv2d=function(r){return r.input,r.filter,r.convInfo,r.bias,r.activation,r.preluActivationWeights,De("fusedConv2d")},t.prototype.conv2d=function(r,n,e){return De("conv2d")},t.prototype.conv2dDerInput=function(r,n,e){return De("conv2dDerInput")},t.prototype.conv2dDerFilter=function(r,n,e){return De("conv2dDerFilter")},t.prototype.fusedDepthwiseConv2D=function(r){return r.input,r.filter,r.convInfo,r.bias,r.activation,r.preluActivationWeights,De("fusedDepthwiseConv2D")},t.prototype.depthwiseConv2D=function(r,n,e){return De("depthwiseConv2D")},t.prototype.depthwiseConv2DDerInput=function(r,n,e){return De("depthwiseConv2DDerInput")},t.prototype.depthwiseConv2DDerFilter=function(r,n,e){return De("depthwiseConv2DDerFilter")},t.prototype.conv3d=function(r,n,e){return De("conv3d")},t.prototype.conv3dDerInput=function(r,n,e){return De("conv3dDerInput")},t.prototype.conv3dDerFilter=function(r,n,e){return De("conv3dDerFilter")},t.prototype.maxPool=function(r,n){return De("maxPool")},t.prototype.maxPoolBackprop=function(r,n,e,o){return De("maxPoolBackprop")},t.prototype.avgPool=function(r,n){return De("avgPool")},t.prototype.avgPoolBackprop=function(r,n,e){return De("avgPoolBackprop")},t.prototype.avgPool3d=function(r,n){return De("avgPool3d")},t.prototype.avgPool3dBackprop=function(r,n,e){return De("avgPool3dBackprop")},t.prototype.maxPool3d=function(r,n){return De("maxPool3d")},t.prototype.maxPool3dBackprop=function(r,n,e,o){return De("maxPool3dBackprop")},t.prototype.reshape=function(r,n){return De("reshape")},t.prototype.cast=function(r,n){return De("cast")},t.prototype.tile=function(r,n){return De("tile")},t.prototype.pad=function(r,n,e){return De("pad")},t.prototype.transpose=function(r,n){return De("transpose")},t.prototype.gather=function(r,n,e){return De("gather")},t.prototype.gatherND=function(r,n){return De("gatherND")},t.prototype.scatterND=function(r,n,e){return De("scatterND")},t.prototype.batchToSpaceND=function(r,n,e){return De("batchToSpaceND")},t.prototype.spaceToBatchND=function(r,n,e){return De("spaceToBatchND")},t.prototype.resizeBilinear=function(r,n,e,o){return De("resizeBilinear")},t.prototype.resizeBilinearBackprop=function(r,n,e){return De("resizeBilinearBackprop")},t.prototype.resizeNearestNeighbor=function(r,n,e,o){return De("resizeNearestNeighbor")},t.prototype.resizeNearestNeighborBackprop=function(r,n,e){return De("resizeNearestNeighborBackprop")},t.prototype.batchNormalization=function(r,n,e,o,i,u){return De("batchNormalization")},t.prototype.localResponseNormalization4D=function(r,n,e,o,i){return De("localResponseNormalization4D")},t.prototype.LRNGrad=function(r,n,e,o,i,u,a){return De("LRNGrad")},t.prototype.multinomial=function(r,n,e,o){return De("multinomial")},t.prototype.oneHot=function(r,n,e,o){return De("oneHot")},t.prototype.cumsum=function(r,n,e,o){return De("cumsum")},t.prototype.nonMaxSuppression=function(r,n,e,o,i){return De("nonMaxSuppression")},t.prototype.fft=function(r){return De("fft")},t.prototype.ifft=function(r){return De("ifft")},t.prototype.complex=function(r,n){return De("complex")},t.prototype.real=function(r){return De("real")},t.prototype.imag=function(r){return De("imag")},t.prototype.cropAndResize=function(r,n,e,o,i,u){return De("cropAndResize")},t.prototype.depthToSpace=function(r,n,e){return De("depthToSpace")},t.prototype.split=function(r,n,e){return De("split")},t.prototype.sparseToDense=function(r,n,e,o){return De("sparseToDense")},t.prototype.diag=function(r){return De("diag")},t.prototype.fill=function(r,n,e){return De("fill")},t.prototype.onesLike=function(r){return De("onesLike")},t.prototype.zerosLike=function(r){return De("zerosLike")},t.prototype.linspace=function(r,n,e){return De("linspace")},t.prototype.dispose=function(){return De("dispose")},t}();function De(t){throw new Error("'"+t+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function mi(t,r){for(var n=t.length,e=[],o=0;o<n;o++){var i=n-1-o,u=t[i]||1;(r[r.length-1-o]||1)>1&&u===1&&e.unshift(i)}return e}function Tr(t,r){for(var n=[],e=0;e<r.length;e++){var o=t[t.length-e-1],i=r.length-e-1,u=r[i];(o==null||o===1&&u>1)&&n.unshift(i)}return n}function It(t,r){for(var n=[],e=Math.max(t.length,r.length),o=0;o<e;o++){var i=t[t.length-o-1];i==null&&(i=1);var u=r[r.length-o-1];if(u==null&&(u=1),i===1)n.unshift(u);else if(u===1)n.unshift(i);else{if(i!==u)throw Error("Operands could not be broadcast together with shapes "+t+" and "+r+".");n.unshift(i)}}return n}function bu(t,r,n,e,o,i,u){u===void 0&&(u="channelsLast");var a,s=_c(r),l=s[0],h=s[1];if(u==="channelsLast")a=[l,h,t[3],t[3]];else{if(u!=="channelsFirst")throw new Error("Unknown dataFormat "+u);a=[l,h,t[1],t[1]]}return da(t,a,n,e,o,i,!1,u)}function xc(t,r,n,e,o,i,u){u===void 0&&(u="NDHWC");var a,s,l=Eh(r),h=l[0],p=l[1],c=l[2];if(u==="NDHWC")s="channelsLast",a=[h,p,c,t[4],t[4]];else{if(u!=="NCDHW")throw new Error("Unknown dataFormat "+u);s="channelsFirst",a=[h,p,c,t[1],t[1]]}return wc(t,a,n,e,o,!1,s,i)}function da(t,r,n,e,o,i,u,a){u===void 0&&(u=!1),a===void 0&&(a="channelsLast");var s=[-1,-1,-1,-1],l=s[0],h=s[1],p=s[2],c=s[3];if(a==="channelsLast")l=t[0],h=t[1],p=t[2],c=t[3];else{if(a!=="channelsFirst")throw new Error("Unknown dataFormat "+a);l=t[0],c=t[1],h=t[2],p=t[3]}var d,f=r[0],m=r[1],y=r[3],g=_c(n),v=g[0],b=g[1],w=_c(e),_=w[0],j=w[1],E=Xa(f,_),T=Xa(m,j),R=function(N,W,q,H,B,G,V,X){var te,A,O;if(typeof N=="number"){te={top:N,bottom:N,left:N,right:N,type:N===0?"VALID":"NUMBER"};var U=function(ne,le,me,Q,pe){Q==null&&(Q=yb(ne,le,me));var ye=ne[0],we=ne[1],ge=Qs((ye-le+2*Q)/me+1,pe);ce(pr(ge),function(){return"The output # of rows ("+ge+") must be an integer. Change the stride and/or zero pad parameters"});var Pe=Qs((we-le+2*Q)/me+1,pe);return ce(pr(Pe),function(){return"The output # of columns ("+Pe+") must be an integer. Change the stride and/or zero pad parameters"}),[ge,Pe]}([W,q],G,H,N,X);A=U[0],O=U[1]}else if(N==="same"){A=Math.ceil(W/H),O=Math.ceil(q/B);var Y=Math.max(0,(A-1)*H+G-W),J=Math.max(0,(O-1)*B+V-q),ae=Math.floor(Y/2),ue=Y-ae,de=Math.floor(J/2);te={top:ae,bottom:ue,left:de,right:J-de,type:"SAME"}}else{if(N!=="valid")throw Error("Unknown padding parameter: "+N);te={top:0,bottom:0,left:0,right:0,type:"VALID"},A=Math.ceil((W-G+1)/H),O=Math.ceil((q-V+1)/B)}return{padInfo:te,outHeight:A,outWidth:O}}(o,h,p,v,b,E,T,i),M=R.padInfo,I=R.outHeight,D=R.outWidth,L=u?y*c:y;return a==="channelsFirst"?d=[l,L,I,D]:a==="channelsLast"&&(d=[l,I,D,L]),{batchSize:l,dataFormat:a,inHeight:h,inWidth:p,inChannels:c,outHeight:I,outWidth:D,outChannels:L,padInfo:M,strideHeight:v,strideWidth:b,filterHeight:f,filterWidth:m,effectiveFilterHeight:E,effectiveFilterWidth:T,dilationHeight:_,dilationWidth:j,inShape:t,outShape:d,filterShape:r}}function wc(t,r,n,e,o,i,u,a){i===void 0&&(i=!1),u===void 0&&(u="channelsLast");var s=[-1,-1,-1,-1,-1],l=s[0],h=s[1],p=s[2],c=s[3],d=s[4];if(u==="channelsLast")l=t[0],h=t[1],p=t[2],c=t[3],d=t[4];else{if(u!=="channelsFirst")throw new Error("Unknown dataFormat "+u);l=t[0],d=t[1],h=t[2],p=t[3],c=t[4]}var f,m=r[0],y=r[1],g=r[2],v=r[4],b=Eh(n),w=b[0],_=b[1],j=b[2],E=Eh(e),T=E[0],R=E[1],M=E[2],I=Xa(m,T),D=Xa(y,R),L=Xa(g,M),N=function(V,X,te,A,O,U,Y,J,ae,ue,de){var ne,le,me,Q;if(typeof V=="number"){ne={top:V,bottom:V,left:V,right:V,front:V,back:V,type:V===0?"VALID":"NUMBER"};var pe=function(Je,Ke,at,Ze,_e,Be){_e==null&&(_e=yb(Je,Ke,Ze));var je=Je[0],K=Je[1],ee=Je[2],$=Qs((je-Ke+2*_e)/Ze+1,Be);ce(pr($),function(){return"The output # of depths ("+$+") must be an integer. Change the stride and/or zero pad parameters"});var re=Qs((K-Ke+2*_e)/Ze+1,Be);ce(pr(re),function(){return"The output # of rows ("+re+") must be an integer. Change the stride and/or zero pad parameters"});var ve=Qs((ee-Ke+2*_e)/Ze+1,Be);return ce(pr(ve),function(){return"The output # of columns ("+ve+") must be an integer. Change the stride and/or zero pad parameters"}),[$,re,ve,at]}([X,te,A,1],J,1,O,V,de);le=pe[0],me=pe[1],Q=pe[2]}else if(V==="same"){le=Math.ceil(X/O),me=Math.ceil(te/U),Q=Math.ceil(A/Y);var ye=(le-1)*O+J-X,we=(me-1)*U+ae-te,ge=(Q-1)*Y+ue-A,Pe=Math.floor(ye/2),Ie=ye-Pe,Fe=Math.floor(we/2),Te=we-Fe,$e=Math.floor(ge/2);ne={top:Fe,bottom:Te,left:$e,right:ge-$e,front:Pe,back:Ie,type:"SAME"}}else{if(V!=="valid")throw Error("Unknown padding parameter: "+V);ne={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},le=Math.ceil((X-J+1)/O),me=Math.ceil((te-ae+1)/U),Q=Math.ceil((A-ue+1)/Y)}return{padInfo:ne,outDepth:le,outHeight:me,outWidth:Q}}(o,h,p,c,w,_,j,I,D,L,a),W=N.padInfo,q=N.outDepth,H=N.outHeight,B=N.outWidth,G=i?v*d:v;return u==="channelsFirst"?f=[l,G,q,H,B]:u==="channelsLast"&&(f=[l,q,H,B,G]),{batchSize:l,dataFormat:u,inDepth:h,inHeight:p,inWidth:c,inChannels:d,outDepth:q,outHeight:H,outWidth:B,outChannels:G,padInfo:W,strideDepth:w,strideHeight:_,strideWidth:j,filterDepth:m,filterHeight:y,filterWidth:g,effectiveFilterDepth:I,effectiveFilterHeight:D,effectiveFilterWidth:L,dilationDepth:T,dilationHeight:R,dilationWidth:M,inShape:t,outShape:f,filterShape:r}}function yb(t,r,n,e){e===void 0&&(e=1);var o=Xa(r,e);return Math.floor((t[0]*(n-1)-n+o)/2)}function _c(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function Eh(t){return typeof t=="number"?[t,t,t]:t}function Xa(t,r){return r<=1?t:t+(t-1)*(r-1)}function Qs(t,r){if(!r)return t;switch(r){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error("Unknown roundingMode "+r)}}function cs(t){var r=_c(t),n=r[0],e=r[1],o=r[2];return n===1&&e===1&&o===1}function jn(t,r){return cs(t)||cs(r)}function Np(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error("Unknown dataFormat "+t)}function gb(t,r,n){if(r==="complex64"){if(t.dtype==="complex64")return t.clone();var e=er(t.shape),o=t.toFloat(),i=n.complex(o,e);return e.dispose(),o.dispose(),i}if(!dS(t.dtype,r))return Se.makeTensorFromDataId(t.dataId,t.shape,r);if(t.dtype==="complex64"){var u=n.real(t);return i=u.cast(r),u.dispose(),i}if(r==="int32")return n.int(t);if(r==="bool"){var a=ot(0,t.dtype);return i=n.notEqual(t,a),a.dispose(),i}throw new Error("Error in Cast: failed to cast "+t.dtype+" to "+r)}function jh(t,r){return Se.makeTensorFromDataId(t.dataId,r,t.dtype)}function vb(t,r,n){var e=(r-t)/(n-1),o=Mu(n,"float32");o[0]=t;for(var i=1;i<o.length;i++)o[i]=o[i-1]+e;return wr(o,"float32")}function Ch(t,r){if(t.length!==r.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+t.length+", imag: "+r.length+".");for(var n=new Float32Array(2*t.length),e=0;e<n.length;e+=2)n[e]=t[e/2],n[e+1]=r[e/2];return n}function Fg(t,r){return{real:t[2*r],imag:t[2*r+1]}}function BE(t,r,n,e){t[2*e]=r,t[2*e+1]=n}function UE(t,r,n){var e=(n?2:-2)*Math.PI*(t/r);return{real:Math.cos(e),imag:Math.sin(e)}}function GE(t,r,n){var e=function(i,u,a){return function(s,l,h){for(var p=0,c=s.length,d=0,f=!1;p<c;){var m=h(l,s[d=p+(c-p>>>1)]);m>0?p=d+1:(c=d,f=!m)}return f?p:-p-1}(i,u,a||zE)}(t,r,n),o=e<0?-(e+1):e;t.splice(o,0,r)}function zE(t,r){return t>r?1:t<r?-1:0}function Fp(t,r,n,e,o){return bb(t,r,n,e,o,0).selectedIndices}function Bp(t,r,n,e,o,i){var u=bb(t,r,n,e,o,i);return u.numValidOutputs.dispose(),{selectedIndices:u.selectedIndices,selectedScores:u.selectedScores}}function bb(t,r,n,e,o,i,u,a){a===void 0&&(a=!1);for(var s=Array.from(r).map(function(w,_){return{score:w,boxIndex:_,suppressBeginIndex:0}}).filter(function(w){return w.score>o}).sort(Bg),l=i>0?-.5/i:0,h=[],p=[];h.length<n&&s.length>0;){var c=s.pop(),d=c.score,f=c.boxIndex,m=c.suppressBeginIndex;if(d<o)break;for(var y=!1,g=h.length-1;g>=m;--g){var v=VE(t,f,h[g]);if(v>=e){y=!0;break}if(c.score=c.score*WE(e,l,v),c.score<=o)break}c.suppressBeginIndex=h.length,y||(c.score===d?(h.push(f),p.push(c.score)):c.score>o&&GE(s,c,Bg))}var b=h.length;return a&&(h.fill(0,b),p.fill(0,b)),{selectedIndices:wr(h,"int32"),selectedScores:wr(p,"float32"),numValidOutputs:ot(b,"int32")}}function VE(t,r,n){var e=t.subarray(4*r,4*r+4),o=t.subarray(4*n,4*n+4),i=Math.min(e[0],e[2]),u=Math.min(e[1],e[3]),a=Math.max(e[0],e[2]),s=Math.max(e[1],e[3]),l=Math.min(o[0],o[2]),h=Math.min(o[1],o[3]),p=Math.max(o[0],o[2]),c=Math.max(o[1],o[3]),d=(a-i)*(s-u),f=(p-l)*(c-h);if(d<=0||f<=0)return 0;var m=Math.max(i,l),y=Math.max(u,h),g=Math.min(a,p),v=Math.min(s,c),b=Math.max(g-m,0)*Math.max(v-y,0);return b/(d+f-b)}function WE(t,r,n){var e=Math.exp(r*n*n);return n<=t?e:0}function Bg(t,r){return t.score-r.score||t.score===r.score&&r.boxIndex-t.boxIndex}function xb(t,r,n){var e=new Array(t.rank).fill(0),o=t.shape.slice();return r.map(function(i){o[n]=i;var u=t.slice(e,o);return e[n]+=i,u})}function wb(t,r){for(var n=new Array(t.rank),e=0;e<n.length;e++)n[e]=t.shape[e]*r[e];var o=Ct(n,t.dtype);for(e=0;e<o.values.length;++e){for(var i=o.indexToLoc(e),u=new Array(t.rank),a=0;a<u.length;a++)u[a]=i[a]%t.shape[a];var s=t.locToIndex(u);o.values[e]=t.values[s]}return o.toTensor()}function _b(t,r,n,e,o){for(var i=r[r.length-1],u=[t.length/i,i],a=u[0],s=u[1],l=yu(n,a*e),h=yu("int32",a*e),p=0;p<a;p++){for(var c=p*s,d=t.subarray(c,c+s),f=[],m=0;m<d.length;m++)f.push({value:d[m],index:m});f.sort(function(w,_){return _.value-w.value});var y=p*e,g=l.subarray(y,y+e),v=h.subarray(y,y+e);for(m=0;m<e;m++)g[m]=f[m].value,v[m]=f[m].index}var b=r.slice();return b[b.length-1]=e,[$r(l,b,n),$r(h,b,"int32")]}function Up(t,r){for(var n=[],e=0;e<r.length;e++)r[e]&&n.push(e);var o=Ct(t,"int32"),i=Ct([n.length,t.length],"int32");for(e=0;e<n.length;e++){var u=o.indexToLoc(n[e]),a=e*t.length;i.values.set(u,a)}return i.toTensor()}var HE=function(t,r){this.outputShape=[],this.outputShape=t,this.variableNames=r.map(function(o,i){return"T"+i});var n=[];this.variableNames.forEach(function(o){n.push("float v"+o+" = get"+o+"AtOutCoords();")});var e=this.variableNames.map(function(o){return"v"+o}).join(" + ");this.userCode=`
      void main() {
        `+n.join(`
        `)+`

        float result = `+e+`;
        setOutput(result);
      }
    `},qE=function(t,r){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=r.map(function(o,i){return"T"+i});var n=[];this.variableNames.forEach(function(o){n.push("vec4 v"+o+" = get"+o+"AtOutCoords();")});var e=this.variableNames.map(function(o){return"v"+o}).join(" + ");this.userCode=`
      void main() {
        `+n.join(`
        `)+`

        vec4 result = `+e+`;
        setOutput(result);
      }
    `},$E=function(t,r,n){this.variableNames=["A"];var e=t.windowSize,o=t.batchSize,i=t.inSize,u=Math.ceil(i/e);n||this.variableNames.push("bestIndicesA"),this.outputShape=[o,u];var a=r==="max"?">":"<",s=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+e+`;

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < `+e+`; i++) {
          int inIdx = `+s+`;
          float candidate = getA(batch, inIdx);
          if (candidate `+a+` bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `};function Sb(t,r){return["x","y","z","w","u","v"].slice(0,r).map(function(n){return t+"."+n})}function vn(t,r){return r===1?[t]:Sb(t,r)}function an(){var t,r,n,e,o,i,u,a,s,l;return Ue().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",r="in",n="out",e="in",o="texture",i="outputColor",u="out vec4 outputColor;",a=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,s="",l=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",r="attribute",n="varying",e="varying",o="texture2D",i="gl_FragColor",u="",a=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,s=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,l=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:r,varyingVs:n,varyingFs:e,texture2D:o,output:i,defineOutput:u,defineSpecialNaN:a,defineSpecialInf:s,defineRound:l}}function Yi(t,r,n){n===void 0&&(n="index");var e=To(r);return e.map(function(o,i){return"int "+t[i]+" = "+n+" / "+o+"; "+(i===e.length-1?"int "+t[i+1]+" = "+n+" - "+t[i]+" * "+o:"index -= "+t[i]+" * "+o)+";"}).join("")}function Gp(t){var r=To(t).map(function(n){return n.toString()});return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * `+r[0]+" + coords.y * "+r[1]+` + coords.z;
  }
`}var Eb=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;function XE(t,r,n,e){var o=[];t.forEach(function(d){var f=ht(d.shapeInfo.logicalShape);d.shapeInfo.isUniform?o.push("uniform float "+d.name+(f>1?"["+f+"]":"")+";"):(o.push("uniform sampler2D "+d.name+";"),o.push("uniform int offset"+d.name+";"))});var i,u,a=o.join(`
`),s=t.map(function(d){return function(f,m,y){y===void 0&&(y=!1);var g="";g+=y?jb(f):Sa(f);var v=f.shapeInfo.logicalShape,b=m.logicalShape;return v.length<=b.length&&(g+=y?function(w,_){var j,E=w.name,T=E.charAt(0).toUpperCase()+E.slice(1),R="get"+T+"AtOutCoords",M=w.shapeInfo.logicalShape.length,I=_.logicalShape.length,D=mi(w.shapeInfo.logicalShape,_.logicalShape),L=Yt(I),N=I-M,W=["x","y","z","w","u","v"];j=M===0?"":I<2&&D.length>=1?"coords = 0;":D.map(function(te){return"coords."+W[te+N]+" = 0;"}).join(`
`);var q="";q=I<2&&M>0?"coords":w.shapeInfo.logicalShape.map(function(te,A){return"coords."+W[A+N]}).join(", ");var H="return outputValue;",B=ht(w.shapeInfo.logicalShape)===1,G=ht(_.logicalShape)===1;if(M!==1||B||G){if(B&&!G)H=I===1?`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:`
        return vec4(outputValue.x);
      `;else if(D.length){var V=M-2,X=M-1;D.indexOf(V)>-1&&D.indexOf(X)>-1?H="return vec4(outputValue.x);":D.indexOf(V)>-1?H="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":D.indexOf(X)>-1&&(H="return vec4(outputValue.xx, outputValue.zz);")}}else H=`
      return vec4(outputValue.xy, outputValue.xy);
    `;return`
    vec4 `+R+`() {
      `+L+` coords = getOutputCoords();
      `+j+`
      vec4 outputValue = get`+T+"("+q+`);
      `+H+`
    }
  `}(f,m):function(w,_){var j=w.name,E=j.charAt(0).toUpperCase()+j.slice(1),T="get"+E+"AtOutCoords",R=_.texShape,M=w.shapeInfo.texShape,I=w.shapeInfo.logicalShape.length,D=_.logicalShape.length;if(!w.shapeInfo.isUniform&&I===D&&w.shapeInfo.flatOffset==null&&Br(M,R))return`
      float `+T+`() {
        return sampleTexture(`+j+`, resultUV);
      }
    `;var L,N=Yt(D),W=mi(w.shapeInfo.logicalShape,_.logicalShape),q=D-I,H=["x","y","z","w","u","v"];L=I===0?"":D<2&&W.length>=1?"coords = 0;":W.map(function(G){return"coords."+H[G+q]+" = 0;"}).join(`
`);var B="";return B=D<2&&I>0?"coords":w.shapeInfo.logicalShape.map(function(G,V){return"coords."+H[V+q]}).join(", "),`
    float `+T+`() {
      `+N+` coords = getOutputCoords();
      `+L+`
      return get`+E+"("+B+`);
    }
  `}(f,m)),g}(d,r,e)}).join(`
`),l=r.texShape,h=an(),p=function(d){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return `+d.texture2D+`(textureSampler, uv).r;
    }
  `}(h),c=function(d){return d.version+`
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    `+d.varyingFs+` vec2 resultUV;
    `+d.defineOutput+`
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    `+d.defineSpecialNaN+`
    `+d.defineSpecialInf+`
    `+d.defineRound+`

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    `+YE+`
    `+KE+`
    `+QE+`
  `}(h);return r.isPacked?(i=function(d,f){switch(d.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(w,_){var j=[Math.ceil(_[0]/2),Math.ceil(_[1]/2)];return j[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * `+j[1]+`.0);
      }
    `:j[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * `+j[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+j[0]+", "+j[1]+`));
      return 2 * (resTexRC.x * `+j[1]+` + resTexRC.y);
    }
  `}(0,f);case 2:return function(w,_){var j=[Math.ceil(_[0]/2),Math.ceil(_[1]/2)];if(Br(w,_))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(`+j[0]+", "+j[1]+`));
      }
    `;var E=Math.ceil(w[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+j[0]+", "+j[1]+`));

      int index = resTexRC.x * `+j[1]+` + resTexRC.y;
      int r = 2 * (index / `+E+`);
      int c = imod(index, `+E+`) * 2;

      return ivec2(r, c);
    }
  `}(d,f);case 3:return m=d,y=f,g=[Math.ceil(y[0]/2),Math.ceil(y[1]/2)],v=Math.ceil(m[2]/2),b=v*Math.ceil(m[1]/2),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+g[0]+", "+g[1]+`));
      int index = resTexRC.x * `+g[1]+` + resTexRC.y;

      int b = index / `+b+`;
      index -= b * `+b+`;

      int r = 2 * (index / `+v+`);
      int c = imod(index, `+v+`) * 2;

      return ivec3(b, r, c);
    }
  `;default:return function(w,_){for(var j=[Math.ceil(_[0]/2),Math.ceil(_[1]/2)],E=Math.ceil(w[w.length-1]/2),T=E*Math.ceil(w[w.length-2]/2),R=T,M="",I="b, r, c",D=2;D<w.length-1;D++)R*=w[w.length-D-1],M=`
      int b`+D+" = index / "+R+`;
      index -= b`+D+" * "+R+`;
    `+M,I="b"+D+", "+I;return`
    ivec`+w.length+` getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+j[0]+", "+j[1]+`));
      int index = resTexRC.x * `+j[1]+` + resTexRC.y;

      `+M+`

      int b = index / `+T+`;
      index -= b * `+T+`;

      int r = 2 * (index / `+E+`);
      int c = imod(index, `+E+`) * 2;

      return ivec`+w.length+"("+I+`);
    }
  `}(d,f)}var m,y,g,v,b}(r.logicalShape,l),u=function(d){return`
    void setOutput(vec4 val) {
      `+d.output+` = val;
    }
  `}(h)):(i=function(d,f){switch(d.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(g,v){return v[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * `+v[1]+`.0);
      }
    `:v[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * `+v[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+v[0]+", "+v[1]+`));
      return resTexRC.x * `+v[1]+` + resTexRC.y;
    }
  `}(0,f);case 2:return function(g,v){return Br(g,v)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(`+v[0]+", "+v[1]+`));
      }
    `:g[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+v[0]+", "+v[1]+`));
        int index = resTexRC.x * `+v[1]+` + resTexRC.y;
        return ivec2(index, 0);
      }
    `:g[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+v[0]+", "+v[1]+`));
        int index = resTexRC.x * `+v[1]+` + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+v[0]+", "+v[1]+`));
      int index = resTexRC.x * `+v[1]+` + resTexRC.y;
      int r = index / `+g[1]+`;
      int c = index - r * `+g[1]+`;
      return ivec2(r, c);
    }
  `}(d,f);case 3:return m=f,y=Yi(["r","c","d"],d),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+m[0]+", "+m[1]+`));
      int index = resTexRC.x * `+m[1]+` + resTexRC.y;
      `+y+`
      return ivec3(r, c, d);
    }
  `;case 4:return function(g,v){var b=Yi(["r","c","d","d2"],g);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+v[0]+", "+v[1]+`));
      int index = resTexRC.x * `+v[1]+` + resTexRC.y;
      `+b+`
      return ivec4(r, c, d, d2);
    }
  `}(d,f);case 5:return function(g,v){var b=Yi(["r","c","d","d2","d3"],g);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(`+v[0]+`,
                             `+v[1]+`));

      int index = resTexRC.x * `+v[1]+` + resTexRC.y;

      `+b+`

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}(d,f);case 6:return function(g,v){var b=Yi(["r","c","d","d2","d3","d4"],g);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+v[0]+", "+v[1]+`));
      int index = resTexRC.x * `+v[1]+` + resTexRC.y;

      `+b+`

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}(d,f);default:throw new Error(d.length+"-D output sampling is not yet supported")}var m,y}(r.logicalShape,l),u=function(d){return`
    void setOutput(float val) {
      `+d.output+` = vec4(val, 0, 0, 0);
    }
  `}(h)),e&&(c+=ZE),[c,p,u,a,i,s,n].join(`
`)}function Sa(t){var r=t.shapeInfo.logicalShape;switch(r.length){case 0:return function(n){var e=n.name,o="get"+e.charAt(0).toUpperCase()+e.slice(1);if(n.shapeInfo.isUniform)return"float "+o+"() {return "+e+";}";var i=n.shapeInfo.texShape,u=i[0],a=i[1];if(u===1&&a===1)return`
      float `+o+`() {
        return sampleTexture(`+e+`, halfCR);
      }
    `;var s=n.shapeInfo.texShape,l=s[0],h=s[1],p=Fi(e);return`
    float `+o+`() {
      vec2 uv = uvFromFlat(`+l+", "+h+", "+p+`);
      return sampleTexture(`+e+`, uv);
    }
  `}(t);case 1:return function(n){var e=n.name,o="get"+e.charAt(0).toUpperCase()+e.slice(1);if(n.shapeInfo.isUniform)return`
      float `+o+`(int index) {
        `+ba(n)+`
      }
    `;var i=n.shapeInfo.texShape,u=i[0],a=i[1];if(a===1&&u===1)return`
      float `+o+`(int index) {
        return sampleTexture(`+e+`, halfCR);
      }
    `;var s=Fi(e);return a===1?`
      float `+o+`(int index) {
        vec2 uv = vec2(0.5, (float(index + `+s+") + 0.5) / "+u+`.0);
        return sampleTexture(`+e+`, uv);
      }
    `:u===1?`
      float `+o+`(int index) {
        vec2 uv = vec2((float(index + `+s+") + 0.5) / "+a+`.0, 0.5);
        return sampleTexture(`+e+`, uv);
      }
    `:`
    float `+o+`(int index) {
      vec2 uv = uvFromFlat(`+u+", "+a+", index + "+s+`);
      return sampleTexture(`+e+`, uv);
    }
  `}(t);case 2:return function(n){var e=n.shapeInfo.logicalShape,o=n.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),u=n.shapeInfo.texShape;if(u!=null&&Br(e,u)){var a=u[0],s=u[1];return`
    float `+i+`(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(`+s+".0, "+a+`.0);
      return sampleTexture(`+o+`, uv);
    }
  `}var l=Hi(e),h=l.newShape,p=l.keptDims,c=h;if(c.length<e.length){var d=Ea(n,c);return`
      `+Sa(d)+`
      float `+i+`(int row, int col) {
        return `+i+"("+ja(["row","col"],p)+`);
      }
    `}if(n.shapeInfo.isUniform)return`
      float `+i+`(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(`+e[1]+`, 1)));
        `+ba(n)+`
      }
    `;var f=u[0],m=u[1],y=Fi(o);return m===1?`
    float `+i+`(int row, int col) {
      float index = dot(vec3(row, col, `+y+"), vec3("+e[1]+`, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / `+f+`.0);
      return sampleTexture(`+o+`, uv);
    }
  `:f===1?`
    float `+i+`(int row, int col) {
      float index = dot(vec3(row, col, `+y+"), vec3("+e[1]+`, 1, 1));
      vec2 uv = vec2((index + 0.5) / `+m+`.0, 0.5);
      return sampleTexture(`+o+`, uv);
    }
  `:`
  float `+i+`(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * `+e[1]+" + col + "+y+`;
    vec2 uv = uvFromFlat(`+f+", "+m+`, index);
    return sampleTexture(`+o+`, uv);
  }
`}(t);case 3:return function(n){var e=n.shapeInfo.logicalShape,o=n.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),u=e[1]*e[2],a=e[2],s=Hi(e),l=s.newShape,h=s.keptDims,p=l;if(p.length<e.length){var c=Ea(n,p);return`
        `+Sa(c)+`
        float `+i+`(int row, int col, int depth) {
          return `+i+"("+ja(["row","col","depth"],h)+`);
        }
      `}if(n.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(`+u+", "+a+`, 1)));
        `+ba(n)+`
      }
    `;var d=n.shapeInfo.texShape,f=d[0],m=d[1],y=n.shapeInfo.flatOffset;if(m===u&&y==null)return`
        float `+i+`(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(`+a+`, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(`+m+".0, "+f+`.0);
          return sampleTexture(`+o+`, uv);
        }
      `;if(m===a&&y==null)return`
    float `+i+`(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(`+e[1]+`, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+m+".0, "+f+`.0);
      return sampleTexture(`+o+`, uv);
    }
  `;var g=Fi(o);return`
      float `+i+`(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * `+u+" + col * "+a+" + depth + "+g+`;
        vec2 uv = uvFromFlat(`+f+", "+m+`, index);
        return sampleTexture(`+o+`, uv);
      }
  `}(t);case 4:return function(n){var e=n.shapeInfo.logicalShape,o=n.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),u=e[3],a=e[2]*u,s=e[1]*a,l=Hi(e),h=l.newShape,p=l.keptDims;if(h.length<e.length){var c=Ea(n,h);return`
      `+Sa(c)+`
      float `+i+`(int row, int col, int depth, int depth2) {
        return `+i+"("+ja(["row","col","depth","depth2"],p)+`);
      }
    `}if(n.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(`+s+", "+a+", "+u+`, 1)));
        `+ba(n)+`
      }
    `;var d=n.shapeInfo.flatOffset,f=n.shapeInfo.texShape,m=f[0],y=f[1];if(y===s&&d==null)return`
      float `+i+`(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(`+a+", "+u+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+y+".0, "+m+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;if(y===u&&d==null)return`
      float `+i+`(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(`+e[1]*e[2]+", "+e[2]+`, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+y+".0, "+m+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;var g=Fi(o);return`
    float `+i+`(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+s+" + col * "+a+` +
          depth * `+u+` + depth2;
      vec2 uv = uvFromFlat(`+m+", "+y+", index + "+g+`);
      return sampleTexture(`+o+`, uv);
    }
  `}(t);case 5:return function(n){var e=n.shapeInfo.logicalShape,o=n.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),u=e[4],a=e[3]*u,s=e[2]*a,l=e[1]*s,h=Hi(e),p=h.newShape,c=h.keptDims;if(p.length<e.length){var d=Ea(n,p);return`
      `+Sa(d)+`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        return `+i+"("+ja(["row","col","depth","depth2","depth3"],c)+`);
      }
    `}if(n.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(`+l+", "+s+", "+a+", "+u+`)) +
          depth3;
        `+ba(n)+`
      }
    `;var f=n.shapeInfo.flatOffset,m=n.shapeInfo.texShape,y=m[0],g=m[1];if(g===l&&f==null)return`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(`+s+", "+a+", "+u+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+g+".0, "+y+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;if(g===u&&f==null)return`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(`+e[1]*e[2]*e[3]+`,
               `+e[2]*e[3]+", "+e[3]+`, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+g+".0, "+y+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;var v=Fi(o);return`
    float `+i+`(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+l+" + col * "+s+" + depth * "+a+` +
          depth2 * `+u+" + depth3 + "+v+`;
      vec2 uv = uvFromFlat(`+y+", "+g+`, index);
      return sampleTexture(`+o+`, uv);
    }
  `}(t);case 6:return function(n){var e=n.shapeInfo.logicalShape,o=n.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),u=Hi(e),a=u.newShape,s=u.keptDims;if(a.length<e.length){var l=Ea(n,a);return`
      `+Sa(l)+`
      float `+i+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return `+i+"("+ja(["row","col","depth","depth2","depth3","depth4"],s)+`);
      }
    `}var h=e[5],p=e[4]*h,c=e[3]*p,d=e[2]*c,f=e[1]*d;if(n.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(`+f+", "+d+", "+c+", "+p+`)) +
          dot(
            vec2(depth3, depth4),
            vec2(`+h+`, 1)));
        `+ba(n)+`
      }
    `;var m=n.shapeInfo.flatOffset,y=n.shapeInfo.texShape,g=y[0],v=y[1];if(v===f&&m==null)return`
      float `+i+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(`+d+", "+c+", "+p+", "+h+`)) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+v+".0, "+g+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;if(v===h&&m==null)return`
      float `+i+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(`+e[1]*e[2]*e[3]*e[4]+`,
               `+e[2]*e[3]*e[4]+`,
               `+e[3]*e[4]+`,
               `+e[4]+`)) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+v+".0, "+g+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;var b=Fi(o);return`
    float `+i+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+f+" + col * "+d+" + depth * "+c+` +
          depth2 * `+p+" + depth3 * "+h+" + depth4 + "+b+`;
      vec2 uv = uvFromFlat(`+g+", "+v+`, index);
      return sampleTexture(`+o+`, uv);
    }
  `}(t);default:throw new Error(r.length+"-D input sampling is not yet supported")}}function jb(t){var r,n,e;switch(t.shapeInfo.logicalShape.length){case 0:return r=t.name,n="get"+r.charAt(0).toUpperCase()+r.slice(1),e=an(),`
    vec4 `+n+`() {
      return `+e.texture2D+"("+r+`, halfCR);
    }
  `;case 1:return function(o){var i=o.name,u="get"+i.charAt(0).toUpperCase()+i.slice(1),a=o.shapeInfo.texShape,s=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],l=an();return`
    vec4 `+u+`(int index) {
      vec2 uv = packedUVfrom1D(
        `+s[0]+", "+s[1]+`, index);
      return `+l.texture2D+"("+i+`, uv);
    }
  `}(t);case 2:return function(o){var i=o.shapeInfo.logicalShape,u=o.name,a="get"+u.charAt(0).toUpperCase()+u.slice(1),s=o.shapeInfo.texShape,l=s[0],h=s[1],p=an();if(s!=null&&Br(i,s))return`
      vec4 `+a+`(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(`+h+".0, "+l+`.0);

        return `+p.texture2D+"("+u+`, uv);
      }
    `;var c=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],d=Math.ceil(i[1]/2);return`
    vec4 `+a+`(int row, int col) {
      vec2 uv = packedUVfrom2D(`+d+", "+c[0]+", "+c[1]+`, row, col);
      return `+p.texture2D+"("+u+`, uv);
    }
  `}(t);case 3:return function(o){var i=o.shapeInfo.logicalShape,u=o.name,a="get"+u.charAt(0).toUpperCase()+u.slice(1),s=o.shapeInfo.texShape,l=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];if(i[0]===1){var h=i.slice(1),p=Ea(o,h);return`
        `+jb(p)+`
        vec4 `+a+`(int b, int row, int col) {
          return `+a+"("+ja(["b","row","col"],[1,2])+`);
        }
      `}var c=l[0],d=l[1],f=Math.ceil(i[2]/2),m=f*Math.ceil(i[1]/2),y=an();return`
    vec4 `+a+`(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        `+c+", "+d+", "+m+", "+f+`, b, row, col);
      return `+y.texture2D+"("+u+`, uv);
    }
  `}(t);default:return function(o){for(var i=o.shapeInfo.logicalShape,u=i.length,a=o.name,s="get"+a.charAt(0).toUpperCase()+a.slice(1),l=o.shapeInfo.texShape,h=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)],p=h[0],c=h[1],d=Math.ceil(i[u-1]/2),f=d*Math.ceil(i[u-2]/2),m="int b, int row, int col",y="b * "+f+" + (row / 2) * "+d+" + (col / 2)",g=2;g<u-1;g++)m="int b"+g+", "+m,f*=i[u-g-1],y="b"+g+" * "+f+" + "+y;var v=an();return`
    vec4 `+s+"("+m+`) {
      int index = `+y+`;
      int texR = index / `+c+`;
      int texC = index - texR * `+c+`;
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+c+", "+p+`);
      return `+v.texture2D+"("+a+`, uv);
    }
  `}(t)}}var YE=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,KE=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,QE=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,ZE=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function Fi(t){return"offset"+t}function ba(t){var r=t.name,n=ht(t.shapeInfo.logicalShape);return n<2?"return "+r+";":`
    for (int i = 0; i < `+n+`; i++) {
      if (i == index) {
        return `+r+`[i];
      }
    }
  `}function Yt(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error("GPU for rank "+t+" is not yet supported")}function Ea(t,r){var n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=r,n}function ja(t,r){return r.map(function(n){return t[n]}).join(", ")}var JE=function(t,r,n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,ce(t.length>2,function(){return"Packed arg"+(n.charAt(0).toUpperCase()+n.slice(1))+" supports only inputs with rank above 2."});var o=t[t.length-1],i=Math.ceil(o/r);this.outputShape=t.slice(0,-1),i>1&&this.outputShape.push(i),e||this.variableNames.push("bestIndicesA");var u,a,s=this.outputShape,l=s.length,h=Yt(l),p=vn("coords",l);if(i===1){var c=Yt(a=l+1);u=`
        `+c+" sourceLocR = "+c+"("+p.join()+`, 0);
        ++`+p[l-1]+`;
        `+c+" sourceLocG = "+c+"("+p.join()+`, 0);
        ++`+p[l-2]+`;
        `+c+" sourceLocA = "+c+"("+p.join()+`, 0);
        --`+p[l-1]+`;
        `+c+" sourceLocB = "+c+"("+p.join()+`, 0);
        --`+p[l-2]+";"}else a=l,u=`
        `+h+` sourceLocR = coords;
        ++`+p[l-1]+`;
        `+h+` sourceLocG = coords;
        ++`+p[l-2]+`;
        `+h+` sourceLocA = coords;
        --`+p[l-1]+`;
        `+h+` sourceLocB = coords;
        --`+p[l-2]+";";var d=["x","y","z","w","u","v"].slice(0,a),f="."+d[a-1],m=d.map(function(T){return"int "+T}),y=vn("sourceLocR",a-1).concat("inIdx.r"),g=vn("sourceLocG",a-1).concat("inIdx.g"),v=vn("sourceLocB",a-1).concat("inIdx.b"),b=vn("sourceLocA",a-1).concat("inIdx.a"),w=n==="max"?"greaterThan":"lessThan",_=e?"":`
          inIdx = round(vec4(getBestIndicesAChannel(`+y.join()+`),
                             getBestIndicesAChannel(`+g.join()+`),
                             getBestIndicesAChannel(`+v.join()+`),
                             getBestIndicesAChannel(`+b.join()+")));",j=`vec4(
            getAChannel(`+y.join()+`),
            hasNextCol ? getAChannel(`+g.join()+`) : 0.,
            hasNextRow ? getAChannel(`+v.join()+`) : 0.,
            hasNextRow && hasNextCol ? getAChannel(`+b.join()+") : 0.)",E=e?"":`
      float getBestIndicesAChannel(`+m.join()+`) {
        return getChannel(getBestIndicesA(`+d.join()+`),
                                          vec2(`+d.slice(-2).join()+`));
      }`;this.userCode=`
      float getAChannel(`+m.join()+`) {
        return getChannel(getA(`+d.join()+`),
                               vec2(`+d.slice(-2).join()+`));
      }
      `+E+`
      void main() {
        `+h+` coords = getOutputCoords();
        bool hasNextCol = `+p[l-1]+" < "+(s[l-1]-1)+`;
        bool hasNextRow = `+p[l-2]+" < "+(s[l-2]-1)+`;
        `+u+`
        ivec4 srcIdx = ivec4(sourceLocR`+f+", sourceLocG"+f+`,
          sourceLocB`+f+", sourceLocA"+f+") * "+r+`;
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = `+j+`;

        for (int i = 0; i < `+r+`; i++) {
          inIdx = srcIdx;
          `+_+`
          vec4 candidate = `+j+`;
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(`+w+`(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `},ej=function(t){this.variableNames=["dy"],this.outputShape=t.inShape;var r=t.filterHeight,n=t.filterWidth,e=t.strideHeight,o=t.strideWidth,i=t.dilationHeight,u=t.dilationWidth,a=t.effectiveFilterHeight,s=t.effectiveFilterWidth,l=a-1-t.padInfo.top,h=s-1-t.padInfo.left,p=1/(r*n);this.userCode=`
      const ivec2 pads = ivec2(`+l+", "+h+`);
      const float avgMultiplier = float(`+p+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+a+`;
            wR += `+i+`) {
          float dyR = float(dyRCorner + wR) / `+e+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+s+`;
            wC+= `+u+`) {
            float dyC = float(dyCCorner + wC) / `+o+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `},tj=function(t){this.variableNames=["dy"],this.outputShape=t.inShape;var r=t.filterDepth,n=t.filterHeight,e=t.filterWidth,o=t.strideDepth,i=t.strideHeight,u=t.strideWidth,a=t.dilationDepth,s=t.dilationHeight,l=t.dilationWidth,h=t.effectiveFilterDepth,p=t.effectiveFilterHeight,c=t.effectiveFilterWidth,d=h-1-t.padInfo.front,f=p-1-t.padInfo.top,m=c-1-t.padInfo.left,y=1/(r*n*e);this.userCode=`
      const ivec3 pads = ivec3(`+d+", "+f+", "+m+`);
      const float avgMultiplier = float(`+y+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+h+`;
            wD += `+a+`) {
          float dyD = float(dyDCorner + wD) / `+o+`.0;

          if (dyD < 0.0 || dyD >= `+t.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+p+`;
              wR += `+s+`) {
            float dyR = float(dyRCorner + wR) / `+i+`.0;

            if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+c+`;
                wC += `+l+`) {
              float dyC = float(dyCCorner + wC) / `+u+`.0;

              if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `},rj=function(t,r,n,e,o,i){this.outputShape=[],this.variableNames=["x","mean","variance"],It(t,r),It(t,n);var u="0.0";e!=null&&(It(t,e),this.variableNames.push("offset"),u="getOffsetAtOutCoords()");var a="1.0";o!=null&&(It(t,o),this.variableNames.push("scale"),a="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = `+u+`;
        float scale = `+a+`;
        float inv = scale * inversesqrt(variance + float(`+i+`));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `},nj=function(t,r,n,e,o,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],It(t,r),It(t,n);var u="vec4(0.0)";e!=null&&(It(t,e),this.variableNames.push("offset"),u="getOffsetAtOutCoords()");var a="vec4(1.0)";o!=null&&(It(t,o),this.variableNames.push("scale"),a="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        vec4 offset = `+u+`;
        vec4 scale = `+a+`;

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(`+i+`));

        setOutput((x - mean) * inv + offset);
      }
    `},oj="return areal * breal - aimag * bimag;",ij="return areal * bimag + aimag * breal;",Ug=function(t,r,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=It(r,n),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        `+t+`
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `},Zd="return a + b;",Jd="return a - b;",Gg="return a * b;",Cb="return (a < 0.) ? b * a : a;",fr=function(t,r,n){this.variableNames=["A","B"],this.outputShape=It(r,n),this.userCode=`
      float binaryOperation(float a, float b) {
        `+t+`
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `},kb=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`,Fo=function(t,r,n,e){e===void 0&&(e=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=It(r,n);var o=this.outputShape.length,i="";if(e)if(o===0||ht(this.outputShape)===1)i=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(i=`
          `+Yt(o)+` coords = getOutputCoords();
        `,o===1)i+=`
            result.y = (coords + 1) >= `+this.outputShape[0]+` ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{var u=vn("coords",o);i+=`
            bool nextRowOutOfBounds =
              (`+u[o-2]+" + 1) >= "+this.outputShape[o-2]+`;
            bool nextColOutOfBounds =
              (`+u[o-1]+" + 1) >= "+this.outputShape[o-1]+`;
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        `+t+`
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        `+i+`

        setOutput(result);
      }
    `},aj=function(){function t(r){this.variableNames=["A"],this.outputShape=r,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}return t.prototype.getCustomSetupFunc=function(r,n){var e=this;return function(o,i){e.minLoc==null&&(e.minLoc=o.getUniformLocationNoThrow(i,"minVal"),e.maxLoc=o.getUniformLocationNoThrow(i,"maxVal")),o.gl.uniform1f(e.minLoc,r),o.gl.uniform1f(e.maxLoc,n)}},t}(),sj=function(){function t(r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}return t.prototype.getCustomSetupFunc=function(r,n){var e=this;return function(o,i){e.minLoc==null&&(e.minLoc=o.getUniformLocationNoThrow(i,"minVal"),e.maxLoc=o.getUniformLocationNoThrow(i,"maxVal")),o.gl.uniform1f(e.minLoc,r),o.gl.uniform1f(e.maxLoc,n)}},t}(),uj=function(t){this.variableNames=["real","imag"],this.outputShape=t,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `},lj=function(t){this.outputShape=[],this.outputShape=ls(t,1),this.variableNames=t.map(function(a,s){return"T"+s});var r=new Array(t.length-1);r[0]=t[0][1];for(var n=1;n<r.length;n++)r[n]=r[n-1]+t[n][1];var e=["if (yC < "+r[0]+") setOutput(getT0(yR, yC));"];for(n=1;n<r.length;n++){var o=r[n-1];e.push("else if (yC < "+r[n]+") setOutput(getT"+n+"(yR, yC-"+o+"));")}var i=r.length,u=r[r.length-1];e.push("else setOutput(getT"+i+"(yR, yC-"+u+"));"),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        `+e.join(`
        `)+`
      }
    `},cj=function(t,r){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=ls(t,r);var n=this.outputShape,e=n.length,o=Yt(e),i=vn("coords",e),u=["x","y","z","w","u","v"].slice(0,e);this.variableNames=t.map(function(y,g){return"T"+g});var a=new Array(t.length-1);a[0]=t[0][r];for(var s=1;s<a.length;s++)a[s]=a[s-1]+t[s][r];var l=u[r],h=u.slice(-2),p=u.join(),c="if ("+l+" < "+a[0]+`) {
        return getChannel(
            getT0(`+p+"), vec2("+h.join()+`));
        }`;for(s=1;s<a.length;s++){var d=a[s-1];c+=`
        if (`+l+" < "+a[s]+"  && "+l+" >= "+a[s-1]+`) {
          return getChannel(
            getT`+s+"("+hl(u,l,d)+`),
            vec2(`+hl(h,l,d)+`));
        }`}var f=a.length,m=a[a.length-1];c+=`
        return getChannel(
          getT`+f+"("+hl(u,l,m)+`),
          vec2(`+hl(h,l,m)+"));",this.userCode=`
      float getValue(`+u.map(function(y){return"int "+y})+`) {
        `+c+`
      }

      void main() {
        `+o+` coords = getOutputCoords();
        vec4 result = vec4(getValue(`+i+`), 0., 0., 0.);

        `+i[e-1]+" = "+i[e-1]+` + 1;
        if (`+i[e-1]+" < "+n[e-1]+`) {
          result.g = getValue(`+i+`);
        }

        `+i[e-2]+" = "+i[e-2]+` + 1;
        if (`+i[e-2]+" < "+n[e-2]+`) {
          result.a = getValue(`+i+`);
        }

        `+i[e-1]+" = "+i[e-1]+` - 1;
        if (`+i[e-2]+" < "+n[e-2]+` &&
            `+i[e-1]+" < "+n[e-1]+`) {
          result.b = getValue(`+i+`);
        }
        setOutput(result);
      }
    `};function hl(t,r,n){var e=t.indexOf(r);return t.map(function(o,i){return i===e?o+" - "+n:o}).join()}var dj=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var r=t.strideHeight,n=t.strideWidth,e=t.padInfo.top,o=t.padInfo.left,i=t.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < `+t.batchSize+`; b++) {
          for (int yR = 0; yR < `+t.outHeight+`; yR++) {
            int xR = wR + yR * `+r+" - "+e+`;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+t.outWidth+`; yC++) {
              int xC = wC + yC * `+n+" - "+o+`;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              if (`+i+`) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},fj=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var r=t.filterHeight,n=t.filterWidth,e=t.strideHeight,o=t.strideWidth,i=t.dataFormat==="channelsLast",u=r-1-t.padInfo.top,a=n-1-t.padInfo.left,s=i?1:2,l=i?2:3,h=i?3:1;this.userCode=`
      const ivec2 pads = ivec2(`+u+", "+a+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[`+h+`];

        ivec2 dyCorner = ivec2(coords[`+s+"], coords["+l+`]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+r+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+e+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+r+` - 1 - wR;

          for (int wC = 0; wC < `+n+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+o+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+n+` - 1 - wC;

            for (int d2 = 0; d2 < `+t.outChannels+`; d2++) {

              if (`+i+`) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},hj=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var r=t.strideDepth,n=t.strideHeight,e=t.strideWidth,o=t.padInfo.front,i=t.padInfo.top,u=t.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < `+t.batchSize+`; b++) {
          for (int yF = 0; yF < `+t.outDepth+`; yF++) {
            int xF = wF + yF * `+r+" - "+o+`;

            if (xF < 0 || xF >= `+t.inDepth+`) {
              continue;
            }

            for (int yR = 0; yR < `+t.outHeight+`; yR++) {
              int xR = wR + yR * `+n+" - "+i+`;

              if (xR < 0 || xR >= `+t.inHeight+`) {
                continue;
              }

              for (int yC = 0; yC < `+t.outWidth+`; yC++) {
                int xC = wC + yC * `+e+" - "+u+`;

                if (xC < 0 || xC >= `+t.inWidth+`) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},pj=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var r=t.filterDepth,n=t.filterHeight,e=t.filterWidth,o=t.strideDepth,i=t.strideHeight,u=t.strideWidth,a=r-1-t.padInfo.front,s=n-1-t.padInfo.top,l=e-1-t.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(`+a+", "+s+", "+l+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < `+r+`; wF++) {
          float dyF = float(dyFCorner + wF) / `+o+`.0;

          if (dyF < 0.0 || dyF >= `+t.outDepth+`.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = `+r+` - 1 - wF;

          for (int wR = 0; wR < `+n+`; wR++) {
            float dyR = float(dyRCorner + wR) / `+i+`.0;

            if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = `+n+` - 1 - wR;

            for (int wC = 0; wC < `+e+`; wC++) {
              float dyC = float(dyCCorner + wC) / `+u+`.0;

              if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = `+e+` - 1 - wC;

              for (int d2 = 0; d2 < `+t.outChannels+`; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},mj=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var r=t.strideHeight,n=t.strideWidth,e=t.padInfo.top,o=t.padInfo.left,i=t.outChannels/t.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * `+i+` + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < `+t.batchSize+`; b++) {
          for (int yR = 0; yR < `+t.outHeight+`; yR++) {
            int xR = wR + yR * `+r+" - "+e+`;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+t.outWidth+`; yC++) {
              int xC = wC + yC * `+n+" - "+o+`;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `},yj=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var r=t.filterHeight,n=t.filterWidth,e=t.strideHeight,o=t.strideWidth,i=r-1-t.padInfo.top,u=n-1-t.padInfo.left,a=t.outChannels/t.inChannels;this.userCode=`
      const ivec2 pads = ivec2(`+i+", "+u+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < `+r+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+e+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+r+` - 1 - wR;

          for (int wC = 0; wC < `+n+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+o+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+n+` - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < `+a+`; dm++) {
              int d2 = d1 * `+a+` + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `},zg=function(t,r,n,e){r===void 0&&(r=!1),n===void 0&&(n=null),e===void 0&&(e=!1),this.variableNames=["x","W"],this.outputShape=t.outShape;var o=t.padInfo.top,i=t.padInfo.left,u=t.strideHeight,a=t.strideWidth,s=t.dilationHeight,l=t.dilationWidth,h=t.filterHeight,p=t.filterWidth,c=4*Math.floor(t.inChannels/4),d=t.inChannels%4,f=t.dataFormat==="channelsLast",m=f?1:2,y=f?2:3,g=f?3:1,v="",b="";n&&(v=e?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+n+`
        }`:`
          float activation(float x) {
            `+n+`
          }
        `,b="result = activation(result);");var w=r?"result += getBiasAtOutCoords();":"";r&&this.variableNames.push("bias"),e&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+v+`

      const ivec2 strides = ivec2(`+u+", "+a+`);
      const ivec2 pads = ivec2(`+o+", "+i+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[`+g+`];

        ivec2 xRCCorner =
            ivec2(coords[`+m+"], coords["+y+`]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+h+`; wR++) {
          int xR = xRCorner + wR * `+s+`;

          if (xR < 0 || xR >= `+t.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+p+`; wC++) {
            int xC = xCCorner + wC * `+l+`;

            if (xC < 0 || xC >= `+t.inWidth+`) {
              continue;
            }

            for (int d1 = 0; d1 < `+c+`; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (`+f+`) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (`+(d===1)+`) {

              if (`+f+`) {
                dotProd +=
                    getX(batch, xR, xC, `+c+`) *
                    getW(wR, wC, `+c+`, d2);
              } else {
                dotProd +=
                    getX(batch, `+c+`, xR, xC) *
                    getW(wR, wC, `+c+`, d2);
              }

            } else if (`+(d===2)+`) {
              vec2 wValues = vec2(
                getW(wR, wC, `+c+`, d2),
                getW(wR, wC, `+c+` + 1, d2)
              );

              if (`+f+`) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, `+c+`),
                  getX(batch, xR, xC, `+c+` + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, `+c+`, xR, xC),
                  getX(batch, `+c+` + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (`+(d===3)+`) {
              vec3 wValues = vec3(
                getW(wR, wC, `+c+`, d2),
                getW(wR, wC, `+c+` + 1, d2),
                getW(wR, wC, `+c+` + 2, d2)
              );

              if (`+f+`) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, `+c+`),
                  getX(batch, xR, xC, `+c+` + 1),
                  getX(batch, xR, xC, `+c+` + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, `+c+`, xR, xC),
                  getX(batch, `+c+` + 1, xR, xC),
                  getX(batch, `+c+` + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        `+w+`
        `+b+`
        setOutput(result);
      }
    `},gj=function(t){this.variableNames=["x","W"],this.outputShape=t.outShape;var r=t.padInfo.front,n=t.padInfo.top,e=t.padInfo.left,o=t.strideDepth,i=t.strideHeight,u=t.strideWidth,a=t.dilationDepth,s=t.dilationHeight,l=t.dilationWidth,h=t.filterDepth,p=t.filterHeight,c=t.filterWidth,d=4*Math.floor(t.inChannels/4),f=t.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(`+o+", "+i+", "+u+`);
      const ivec3 pads = ivec3(`+r+", "+n+", "+e+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < `+h+`; wF++) {
          int xF = xFCorner + wF * `+a+`;

          if (xF < 0 || xF >= `+t.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+p+`; wR++) {
            int xR = xRCorner + wR * `+s+`;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+c+`; wC++) {
              int xC = xCCorner + wC * `+l+`;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              for (int d1 = 0; d1 < `+d+`; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (`+(f===1)+`) {
                dotProd +=
                  getX(batch, xF, xR, xC, `+d+`) *
                  getW(wF, wR, wC, `+d+`, d2);
              } else if (`+(f===2)+`) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, `+d+`),
                  getX(batch, xF, xR, xC, `+d+` + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, `+d+`, d2),
                  getW(wF, wR, wC, `+d+` + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (`+(f===3)+`) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, `+d+`),
                  getX(batch, xF, xR, xC, `+d+` + 1),
                  getX(batch, xF, xR, xC, `+d+` + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, `+d+`, d2),
                  getW(wF, wR, wC, `+d+` + 1, d2),
                  getW(wF, wR, wC, `+d+` + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},Vg=function(t,r,n,e){r===void 0&&(r=!1),n===void 0&&(n=null),e===void 0&&(e=!1),this.variableNames=["x","W"],this.outputShape=t.outShape;var o=t.inHeight,i=t.inWidth,u=t.padInfo.top,a=t.padInfo.left,s=t.strideHeight,l=t.strideWidth,h=t.dilationHeight,p=t.dilationWidth,c=t.filterHeight,d=t.filterWidth,f=t.outChannels/t.inChannels,m="",y="";n&&(m=e?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+n+`
        }`:`
          float activation(float x) {
            `+n+`
          }
        `,y="result = activation(result);");var g=r?"result += getBiasAtOutCoords();":"";r&&this.variableNames.push("bias"),e&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+m+`

      const ivec2 strides = ivec2(`+s+", "+l+`);
      const ivec2 pads = ivec2(`+u+", "+a+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / `+f+`;
        int q = d2 - d1 * `+f+`;

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < `+c+`; wR++) {
          int xR = xRCorner + wR * `+h+`;

          if (xR < 0 || xR >= `+o+`) {
            continue;
          }

          for (int wC = 0; wC < `+d+`; wC++) {
            int xC = xCCorner + wC * `+p+`;

            if (xC < 0 || xC >= `+i+`) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        `+g+`
        `+y+`
        setOutput(result);
      }
    `},Wg=function(t,r,n,e){r===void 0&&(r=!1),n===void 0&&(n=null),e===void 0&&(e=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.outShape;for(var o=t.inHeight,i=t.inWidth,u=t.padInfo.top,a=t.padInfo.left,s=t.strideHeight,l=t.strideWidth,h=t.dilationHeight,p=t.dilationWidth,c=t.filterHeight,d=t.filterWidth,f=d,m="int xR; int xC; int xCOffset;",y=0;y<c;y++)for(var g=0;g<d;g++)m+=`
          vec4 xTexelR`+y+"C"+2*g+` = vec4(0.);
          vec4 wR`+y+"C"+g+` = vec4(0.);
          vec4 xR`+y+"C"+g+" = vec4(0.);";for(y=0;y<c;y++)for(var v=0;v<f;v++){if(m+=`
          xR = xRCorner + `+y*h+`;
          xC = xCCorner + `+(g=2*v)*p+`;
        `,l===1){if(g<d&&(m+=a%2==1?`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < `+o+" && xCOffset >= 0 && xCOffset < "+i+`) {
                  xTexelR`+y+"C"+g+` = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+i+`) {
                    xTexelR`+y+"C"+g+`.zw = vec2(0.);
                  }
                } else {
                  xTexelR`+y+"C"+g+` = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < `+o+" && xCOffset >= 0 && xCOffset < "+i+`) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+i+`) {
                    previous.zw = vec2(0.);
                  }

                  xR`+y+"C"+g+" = vec4(previous.zw, xTexelR"+y+"C"+g+`.xy);
                } else {
                  xR`+y+"C"+g+" = vec4(0, 0, xTexelR"+y+"C"+g+`.xy);
                }
              `:`
                if(xR >= 0 && xR < `+o+" && xC >= 0 && xC < "+i+`) {
                  xTexelR`+y+"C"+g+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+y+"C"+g+` = vec4(0.);
                }

                xR`+y+"C"+g+" = xTexelR"+y+"C"+g+`;
              `,g+1<d)){var b=a%2==0?H1(p):p;p%2==0&&a%2==1||p%2!=0&&a%2!=1?(m+=`
                  xCOffset = xC + `+a%2+" + "+b+`;

                  if(xR >= 0 && xR < `+o+` &&
                    xCOffset >= 0 && xCOffset < `+i+`) {
                    xTexelR`+y+"C"+(g+2)+` = getX(batch, xR, xCOffset, d1);
                  }
                `,p>1&&(m+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < `+o+` &&
                      xCOffset >= 0 && xCOffset < `+i+`) {
                      xTexelR`+y+"C"+g+` = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR`+y+"C"+g+` = vec4(0.);
                    }
                  `),m+=`
                  xR`+y+"C"+(g+1)+` = vec4(
                    xTexelR`+y+"C"+g+".zw, xTexelR"+y+"C"+(g+2)+`.xy);
                `):m+=`
                  xCOffset = xC + `+b+`;

                  if(xR >= 0 && xR < `+o+` &&
                    xCOffset >= 0 && xCOffset < `+i+`) {
                    xTexelR`+y+"C"+(g+2)+` = getX(batch, xR, xCOffset, d1);
                  }

                  xR`+y+"C"+(g+1)+" = xTexelR"+y+"C"+(g+2)+`;
                `}}else g<d&&(m+=`
              if(xR >= 0 && xR < `+o+`) {
            `,a%2==1?(m+=`
                xCOffset = xC + 1 - `+l+`;
                if(xCOffset >= 0 && xCOffset < `+i+`) {
                  xTexelR`+y+"C"+g+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+y+"C"+g+` = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < `+i+`) {
                  xTexelR`+y+"C"+(g+2)+` = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR`+y+"C"+(g+2)+` = vec4(0.);
                }

                xR`+y+"C"+g+` = vec4(
                  xTexelR`+y+"C"+g+".zw, xTexelR"+y+"C"+(g+2)+`.zw);
              `,g+1<d&&(m+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + `+l+`;
                  if(xCOffset >= 0 && xCOffset < `+i+`) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR`+y+"C"+(g+1)+" = vec4(xTexelR"+y+"C"+(g+2)+`.xy, final.xy);
                `)):(m+=`
                if(xC >= 0 && xC < `+i+`) {
                  xTexelR`+y+"C"+g+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+y+"C"+g+` = vec4(0.);
                }

                xCOffset = xC + `+l+`;
                if(xCOffset >= 0 && xCOffset < `+i+`) {
                  xTexelR`+y+"C"+(g+2)+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+y+"C"+(g+2)+` = vec4(0.);
                }

                xR`+y+"C"+g+` = vec4(
                  xTexelR`+y+"C"+g+".xy, xTexelR"+y+"C"+(g+2)+`.xy);
              `,g+1<d&&(m+=`
                  xR`+y+"C"+(g+1)+` = vec4(
                    xTexelR`+y+"C"+g+".zw, xTexelR"+y+"C"+(g+2)+`.zw);
                `)),m+="}");g<d&&(m+=`
            vec4 wTexelR`+y+"C"+g+" = getW("+y+", "+g+`, d1, q);
            wR`+y+"C"+g+" = vec4(wTexelR"+y+"C"+g+".xz, wTexelR"+y+"C"+g+`.xz);
          `,g+1<d&&(m+=`
              vec4 wTexelR`+y+"C"+(g+1)+" = getW("+y+", "+(g+1)+`, d1, q);
              wR`+y+"C"+(g+1)+` =
                vec4(wTexelR`+y+"C"+(g+1)+".xz, wTexelR"+y+"C"+(g+1)+".xz);"))}for(y=0;y<c;y++)for(g=0;g<d;g++)m+="dotProd += xR"+y+"C"+g+" * wR"+y+"C"+g+";";var w="",_="";n&&(w=e?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+n+`
        }`:`vec4 activation(vec4 x) {
          `+n+`
        }`,_="result = activation(result);");var j=r?"result += getBiasAtOutCoords();":"";r&&this.variableNames.push("bias"),e&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+w+`

      const ivec2 strides = ivec2(`+s+", "+l+`);
      const ivec2 pads = ivec2(`+u+", "+a+`);

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 dotProd = vec4(0.);

        `+m+`

        vec4 result = dotProd;
        `+j+`
        `+_+`
        setOutput(result);
      }
    `},vj=function(t,r,n,e,o){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var i=t[0],u=t[1],a=t[2],s=t[3],l=r[0],h=n[0],p=n[1];this.outputShape=[l,h,p,s];var c=e==="bilinear"?1:0,d=[u-1+".0",a-1+".0"],f=d[0],m=d[1],y=h>1?[""+(u-1)/(h-1),"(y2-y1) * height_ratio","y1*"+f+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+f],g=y[0],v=y[1],b=y[2],w=p>1?[""+(a-1)/(p-1),"(x2-x1) * width_ratio","x1*"+m+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+m],_=w[0],j=w[1],E=w[2];this.userCode=`
      const float height_ratio = float(`+g+`);
      const float width_ratio = float(`+_+`);
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= `+i+`) {
          return;
        }

        float height_scale = `+v+`;
        float width_scale = `+j+`;

        float in_y = `+b+`;
        if( in_y < 0.0 || in_y > `+f+` ) {
          setOutput(float(`+o+`));
          return;
        }
        float in_x = `+E+`;
        if( in_x < 0.0 || in_x > `+m+` ) {
          setOutput(float(`+o+`));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(`+c+` == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `},bj=function(t,r,n){this.variableNames=["x"],this.outputShape=t;var e=t.length,o=t[t.length-1],i=n?"<":">";this.userCode=`
      int getIndex(int i) {
        `+(n?"return "+o+" -i - 1;":"return i;")+`
      }

      void main() {
        `+Yt(e)+` coords = getOutputCoords();
        int end = `+Hg(e,"coords")+`;
        float val = 0.0;
        for (int i = `+o+` - 1; i >= 0; i -= 1) {
          int idx = getIndex(i);
          if (idx `+i+` end) {
            continue;
          }
          if (idx == end && `+r+`) {
            continue;
          }
          `+Hg(e,"coords")+` = idx;
          val += getX(`+function(u,a){if(u===1)return""+a;if(u===2)return a+".x, "+a+".y";if(u===3)return a+".x, "+a+".y, "+a+".z";if(u===4)return a+".x, "+a+".y, "+a+".z, "+a+".w";throw Error("Cumulative sum for rank "+u+" is not yet supported")}(e,"coords")+`);
        }
        setOutput(val);
      }
    `};function Hg(t,r){if(t===1)return""+r;if(t===2)return r+".y";if(t===3)return r+".z";if(t===4)return r+".w";throw Error("Cumulative sum for rank "+t+" is not yet supported")}var xj=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=vu.DENSE;var r=Ks(t),n=an();this.outputShape=t,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+Yi(["r","c","d"],t)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+r[0]+", "+r[1]+`));
        int index = 4 * (resTexRC.x * `+r[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        `+n.output+` = result;
      }
    `},wj=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=vu.DENSE;var r=Ks(t),n=an();this.outputShape=t,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+Yi(["r","c","d"],t)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+r[0]+", "+r[1]+`));
        int index = 4 * (resTexRC.x * `+r[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        `+n.output+` = result;
      }
    `},_j=function(){function t(r,n,e){this.variableNames=["x"],this.outputShape=[],this.outputShape=r,this.blockSize=n,this.dataFormat=e,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = `+this.getHeightCoordString()+`;
      int w = `+this.getWidthCoordString()+`;
      int d = `+this.getDepthCoordString()+`;

      int in_h = h / `+n+`;
      int offset_h = imod(h, `+n+`);
      int in_w = w / `+n+`;
      int offset_w = imod(w, `+n+`);
      int offset_d = (offset_h * `+n+` + offset_w) *
        `+this.getOutputDepthSize()+`;
      int in_d = d + offset_d;

      float result = `+this.getInputSamplingString()+`;
      setOutput(result);
    }
  `}return t.prototype.getHeightCoordString=function(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"},t.prototype.getWidthCoordString=function(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"},t.prototype.getDepthCoordString=function(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"},t.prototype.getOutputDepthSize=function(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]},t.prototype.getInputSamplingString=function(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},t}(),Sj=function(t){this.variableNames=["X"],this.outputShape=[t,t],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `},Ej=function(t){this.variableNames=["A"],this.outTexUsage=In.DOWNLOAD;var r=an();this.outputShape=t,this.userCode=`
      `+Eb+`

      void main() {
        float x = getAAtOutCoords();
        `+r.output+` = encode_float(x);
      }
    `},jj=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=In.DOWNLOAD;var r=an();this.outputShape=t,this.userCode=`
      `+Eb+`

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        `+r.output+` = encode_float(x);
      }
    `},Cj=function(t,r,n){n===void 0&&(n=!1),this.variableNames=["A"];var e=an(),o=r[0],i=r[1];this.outputShape=t;var u="result";n&&(u="floor(result * 255. + 0.5)"),this.userCode=`
      `+Gp(t)+`

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);
        
        int r = flatIndex / `+i+`;
        int c = imod(flatIndex, `+i+`);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(`+i+".0, "+o+`.0);
        vec4 values = `+e.texture2D+`(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        `+e.output+" = vec4("+u+`, 0., 0., 0.);
      }
    `},kj=function(t,r,n){n===void 0&&(n=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var e=an(),o=r[0],i=r[1];this.outputShape=t;var u="",a="result";n&&(a="floor(result * 255. + 0.5)");for(var s=0;s<=1;s++)for(var l=0;l<=1;l++){var h=2*s+l;u+=`
          localCoords = coords;
          if(localCoords[2] + `+l+" < "+t[2]+`) {
            localCoords[2] += `+l+`;
            if(localCoords[1] + `+s+" < "+t[1]+`) {
              localCoords[1] += `+s+`;

              flatIndex = getFlatIndex(localCoords);
              offset = imod(flatIndex, 4);

              flatIndex = idiv(flatIndex, 4, 1.);

              r = flatIndex / `+i+`;
              c = imod(flatIndex, `+i+`);
              uv = (vec2(c, r) + halfCR) / vec2(`+i+".0, "+o+`.0);
              values = `+e.texture2D+`(A, uv);

              if(offset == 0) {
                result[`+h+`] = values[0];
              } else if(offset == 1) {
                result[`+h+`] = values[1];
              } else if(offset == 2) {
                result[`+h+`] = values[2];
              } else {
                result[`+h+`] = values[3];
              }
            }
          }
        `}this.userCode=`
      `+Gp(t)+`

      void main() {
        ivec3 coords = getOutputCoords();

        vec4 result = vec4(0.);
        int flatIndex, r, c, offset;
        ivec3 localCoords;
        vec2 uv;
        vec4 values;

        `+u+`

        `+e.output+" = "+a+`;
      }
    `},Tj="return real * expR - imag * expI;",Mj="return real * expI + imag * expR;",qg=function(t,r,n){this.variableNames=["real","imag"];var e=r[1];this.outputShape=r;var o=n?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,i=n?e+".0":"1.0";this.userCode=`
      const float exponentMultiplier = `+o+`;

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        `+t+`
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(`+e+`);
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < `+e+`; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / `+i+`;
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `},Rj=function(){function t(r,n){this.outputShape=[],this.variableNames=["x"],this.outputShape=r,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}return t.prototype.getCustomSetupFunc=function(r){var n=this;return function(e,o){n.valueLoc==null&&(n.valueLoc=e.getUniformLocationNoThrow(o,"value")),e.gl.uniform1f(n.valueLoc,r)}},t}(),Ij=function(t,r,n){this.variableNames=["A","indices"];var e=t.slice();e[n]=r,this.outputShape=e,this.rank=e.length;var o=Yt(this.rank),i=function(u,a){var s=u.length;if(s>4)throw Error("Gather for rank "+s+" is not yet supported");if(s===1)return"int(getIndices(resRC))";for(var l=["resRC.x","resRC.y","resRC.z","resRC.w"],h=[],p=0;p<u.length;p++)p===a?h.push("int(getIndices("+l[p]+"))"):h.push(""+l[p]);return h.join()}(t,n);this.userCode=`
      void main() {
        `+o+` resRC = getOutputCoords();
        setOutput(getA(`+i+`));
      }
    `},Aj=function(t,r,n){this.sliceDim=t,this.strides=r,this.variableNames=["x","indices"],this.outputShape=n;var e=Yt(r.length),o=Yt(n.length),i=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        `+e+" strides = "+e+"("+this.strides+`);
         void main() {
          `+o+` coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < `+this.sliceDim+`; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * `+i+`;
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `};function Pj(t,r){var n=an();return TS(t,r,n.version+`
    precision highp float;
    `+n.attribute+` vec3 clipSpacePos;
    `+n.attribute+` vec2 uv;
    `+n.varyingVs+` vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`)}function Dj(t,r){return PS(t,r,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function Oj(t,r){return DS(t,r,new Uint16Array([0,1,2,2,1,3]))}function Iu(t,r,n,e,o,i,u){LS(n,e);var a=OS(t,r),s=t.TEXTURE_2D;return mt(t,r,function(){return t.bindTexture(s,a)}),mt(t,r,function(){return t.texParameteri(s,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)}),mt(t,r,function(){return t.texParameteri(s,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)}),mt(t,r,function(){return t.texParameteri(s,t.TEXTURE_MIN_FILTER,t.NEAREST)}),mt(t,r,function(){return t.texParameteri(s,t.TEXTURE_MAG_FILTER,t.NEAREST)}),mt(t,r,function(){return t.texImage2D(s,0,o,n,e,0,i,u,null)}),mt(t,r,function(){return t.bindTexture(t.TEXTURE_2D,null)}),a}function Lj(t,r,n,e,o){var i=$c(n,e);return Iu(t,r,i[0],i[1],o.internalFormatFloat,o.textureFormatFloat,t.FLOAT)}function Nj(t,r,n,e,o){var i=$c(n,e);return Iu(t,r,i[0],i[1],o.internalFormatHalfFloat,o.textureFormatFloat,o.textureTypeHalfFloat)}function Fj(t,r,n,e,o){var i=$c(n,e);return Iu(t,r,i[0],i[1],t.RGBA,t.RGBA,t.UNSIGNED_BYTE)}function Bj(t,r,n,e,o){var i=Ru(n,e);return Iu(t,r,i[0],i[1],o.internalFormatPackedFloat,t.RGBA,t.FLOAT)}function Uj(t,r,n,e,o){var i=Ru(n,e);return Iu(t,r,i[0],i[1],o.internalFormatPackedHalfFloat,t.RGBA,o.textureTypeHalfFloat)}function Gj(t,r,n,e){return mt(t,r,function(){return t.bindBuffer(t.ARRAY_BUFFER,e)}),Pg(t,r,n,"clipSpacePos",e,3,20,0)&&Pg(t,r,n,"uv",e,2,20,12)}function zj(t,r,n,e,o,i,u){var a,s,l;mt(t,r,function(){return t.bindTexture(t.TEXTURE_2D,n)}),i instanceof Uint8Array?(a=new Uint8Array(e*o*4),s=t.UNSIGNED_BYTE,l=t.RGBA):(a=new Float32Array(e*o*4),s=t.FLOAT,l=u.internalFormatPackedFloat),a.set(i),mt(t,r,function(){return t.texImage2D(t.TEXTURE_2D,0,l,e,o,0,t.RGBA,s,a)}),mt(t,r,function(){return t.bindTexture(t.TEXTURE_2D,null)})}function Vj(t,r,n,e){mt(t,r,function(){return t.bindTexture(t.TEXTURE_2D,n)}),e.data instanceof Uint8Array?mt(t,r,function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e.width,e.height,0,t.RGBA,t.UNSIGNED_BYTE,e.data)}):mt(t,r,function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e)}),mt(t,r,function(){return t.bindTexture(t.TEXTURE_2D,null)})}function Wj(t,r,n,e,o){var i=t.createBuffer();mt(t,r,function(){return t.bindBuffer(t.PIXEL_PACK_BUFFER,i)});var u=16*n*e;return mt(t,r,function(){return t.bufferData(t.PIXEL_PACK_BUFFER,u,t.STREAM_READ)}),mt(t,r,function(){return t.readPixels(0,0,e,n,t.RGBA,t.FLOAT,0)}),mt(t,r,function(){return t.bindBuffer(t.PIXEL_PACK_BUFFER,null)}),i}function Hj(t,r,n){var e=t,o=new Float32Array(n);return e.bindBuffer(e.PIXEL_PACK_BUFFER,r),e.getBufferSubData(e.PIXEL_PACK_BUFFER,0,o),e.bindBuffer(e.PIXEL_PACK_BUFFER,null),o}function qj(t,r,n,e,o){var i=$c(n,e),u=i[0],a=i[1],s=new Uint8Array(n*e*4);return mt(t,r,function(){return t.readPixels(0,0,u,a,o.downloadTextureFormat,t.UNSIGNED_BYTE,s)}),new Float32Array(s.buffer)}function $j(t,r,n,e,o,i,u,a){var s=t,l=new Float32Array(function(h,p){var c=Ru(h,p);return c[0]*c[1]*4}(i,u));return s.bindBuffer(s.PIXEL_PACK_BUFFER,r),s.getBufferSubData(s.PIXEL_PACK_BUFFER,0,l),s.bindBuffer(s.PIXEL_PACK_BUFFER,null),l}function Xj(t,r,n,e){var o=new Float32Array(n*e*4);return mt(t,r,function(){return t.readPixels(0,0,e,n,t.RGBA,t.FLOAT,o)}),o}var Yj=function(){function t(r){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var n=Ue().getNumber("WEBGL_VERSION");r!=null?(this.gl=r,SS(n,r)):this.gl=Io(n);var e="WEBGL_color_buffer_float";if(Ue().getNumber("WEBGL_VERSION")===1){if(this.textureFloatExtension=ll(this.gl,this.debug,"OES_texture_float"),Wn(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=ll(this.gl,this.debug,"OES_texture_half_float");else if(Ue().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(e),Wn(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=ll(this.gl,this.debug,"EXT_color_buffer_half_float");else if(Ue().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(e="EXT_color_buffer_float",Wn(this.gl,e))this.colorBufferFloatExtension=this.gl.getExtension(e);else{if(!Wn(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=Dj(this.gl,this.debug),this.indexBuffer=Oj(this.gl,this.debug),this.framebuffer=NS(this.gl,this.debug),this.textureConfig=Ip(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(t.prototype,"debug",{get:function(){return Ue().getBool("DEBUG")},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){var r=this;if(!this.disposed){this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var n=this.gl;mt(n,this.debug,function(){return n.finish()}),mt(n,this.debug,function(){return n.bindFramebuffer(n.FRAMEBUFFER,null)}),mt(n,this.debug,function(){return n.deleteFramebuffer(r.framebuffer)}),mt(n,this.debug,function(){return n.bindBuffer(n.ARRAY_BUFFER,null)}),mt(n,this.debug,function(){return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null)}),mt(n,this.debug,function(){return n.deleteBuffer(r.indexBuffer)}),this.disposed=!0}},t.prototype.createFloat32MatrixTexture=function(r,n){return this.throwIfDisposed(),Lj(this.gl,this.debug,r,n,this.textureConfig)},t.prototype.createFloat16MatrixTexture=function(r,n){return this.throwIfDisposed(),Nj(this.gl,this.debug,r,n,this.textureConfig)},t.prototype.createUnsignedBytesMatrixTexture=function(r,n){return this.throwIfDisposed(),Fj(this.gl,this.debug,r,n,this.textureConfig)},t.prototype.uploadPixelDataToTexture=function(r,n){this.throwIfDisposed(),Vj(this.gl,this.debug,r,n)},t.prototype.uploadDenseMatrixToTexture=function(r,n,e,o){this.throwIfDisposed(),zj(this.gl,this.debug,r,n,e,o,this.textureConfig)},t.prototype.createFloat16PackedMatrixTexture=function(r,n){return this.throwIfDisposed(),Uj(this.gl,this.debug,r,n,this.textureConfig)},t.prototype.createPackedMatrixTexture=function(r,n){return this.throwIfDisposed(),Bj(this.gl,this.debug,r,n,this.textureConfig)},t.prototype.deleteMatrixTexture=function(r){var n=this;this.throwIfDisposed(),this.outputTexture===r&&(Dg(this.gl,this.debug,this.framebuffer),this.outputTexture=null),mt(this.gl,this.debug,function(){return n.gl.deleteTexture(r)})},t.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(r,n,e){var o=this;return this.downloadMatrixDriver(r,function(){return qj(o.gl,o.debug,n,e,o.textureConfig)})},t.prototype.downloadPackedMatrixFromBuffer=function(r,n,e,o,i,u){return $j(this.gl,r,0,0,0,i,u,this.textureConfig)},t.prototype.downloadFloat32MatrixFromBuffer=function(r,n){return Hj(this.gl,r,n)},t.prototype.createBufferFromTexture=function(r,n,e){this.bindTextureToFrameBuffer(r);var o=Wj(this.gl,this.debug,n,e,this.textureConfig);return this.unbindTextureToFrameBuffer(),o},t.prototype.createAndWaitForFence=function(){var r=this.createFence(this.gl);return this.pollFence(r)},t.prototype.createFence=function(r){var n,e,o=this;if(Ue().getBool("WEBGL_FENCE_API_ENABLED")){var i=r,u=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);r.flush(),e=function(){var a=i.clientWaitSync(u,0,0);return a===i.ALREADY_SIGNALED||a===i.CONDITION_SATISFIED},n=u}else Ue().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),e=function(){return o.isQueryAvailable(n,Ue().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):e=function(){return!0};return{query:n,isFencePassed:e}},t.prototype.downloadMatrixFromPackedTexture=function(r,n,e){var o=this;return this.downloadMatrixDriver(r,function(){return Xj(o.gl,o.debug,n,e)})},t.prototype.createProgram=function(r){this.throwIfDisposed();var n=this.gl,e=MS(n,this.debug,r),o=Pj(n,this.debug),i=IS(n,this.debug);return mt(n,this.debug,function(){return n.attachShader(i,o)}),mt(n,this.debug,function(){return n.attachShader(i,e)}),AS(n,this.debug,i),this.debug&&Xd(n,this.debug,i),this.vertexAttrsAreBound||(this.setProgram(i),this.vertexAttrsAreBound=Gj(n,this.debug,this.program,this.vertexBuffer)),i},t.prototype.deleteProgram=function(r){var n=this;this.throwIfDisposed(),r===this.program&&(this.program=null),r!=null&&mt(this.gl,this.debug,function(){return n.gl.deleteProgram(r)})},t.prototype.setProgram=function(r){var n=this;this.throwIfDisposed(),this.program=r,this.program!=null&&this.debug&&Xd(this.gl,this.debug,this.program),mt(this.gl,this.debug,function(){return n.gl.useProgram(r)})},t.prototype.getUniformLocation=function(r,n,e){return e===void 0&&(e=!0),this.throwIfDisposed(),e?BS(this.gl,this.debug,r,n):US(this.gl,r,n)},t.prototype.getAttributeLocation=function(r,n){var e=this;return this.throwIfDisposed(),mt(this.gl,this.debug,function(){return e.gl.getAttribLocation(r,n)})},t.prototype.getUniformLocationNoThrow=function(r,n){return this.throwIfDisposed(),this.gl.getUniformLocation(r,n)},t.prototype.setInputMatrixTexture=function(r,n,e){this.throwIfDisposed(),this.throwIfNoProgram(),GS(this.gl,this.debug,this.program,r,n,e)},t.prototype.setOutputMatrixTexture=function(r,n,e){this.setOutputMatrixTextureDriver(r,e,n)},t.prototype.setOutputPackedMatrixTexture=function(r,n,e){this.throwIfDisposed();var o=Ru(n,e),i=o[0],u=o[1];this.setOutputMatrixTextureDriver(r,i,u)},t.prototype.setOutputMatrixWriteRegion=function(r,n,e,o){this.setOutputMatrixWriteRegionDriver(e,r,o,n)},t.prototype.setOutputPackedMatrixWriteRegion=function(r,n,e,o){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},t.prototype.debugValidate=function(){this.program!=null&&Xd(this.gl,this.debug,this.program),cl(this.gl)},t.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var r=this.gl;this.debug&&this.debugValidate(),mt(r,this.debug,function(){return r.drawElements(r.TRIANGLES,6,r.UNSIGNED_SHORT,0)})},t.prototype.blockUntilAllProgramsCompleted=function(){var r=this;this.throwIfDisposed(),mt(this.gl,this.debug,function(){return r.gl.finish()})},t.prototype.getQueryTimerExtension=function(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=ll(this.gl,this.debug,Ue().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},t.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},t.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},t.prototype.beginQuery=function(){if(Ue().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){var r=this.gl,n=this.getQueryTimerExtensionWebGL2(),e=r.createQuery();return r.beginQuery(n.TIME_ELAPSED_EXT,e),e}var o=this.getQueryTimerExtensionWebGL1(),i=o.createQueryEXT();return o.beginQueryEXT(o.TIME_ELAPSED_EXT,i),i},t.prototype.endQuery=function(){if(Ue().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")!==2){var r=this.getQueryTimerExtensionWebGL1();r.endQueryEXT(r.TIME_ELAPSED_EXT)}else{var n=this.gl,e=this.getQueryTimerExtensionWebGL2();n.endQuery(e.TIME_ELAPSED_EXT)}},t.prototype.waitForQueryAndGetTime=function(r){return lt(this,void 0,void 0,function(){var n=this;return ct(this,function(e){switch(e.label){case 0:return[4,kg(function(){return n.disposed||n.isQueryAvailable(r,Ue().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return e.sent(),[2,this.getQueryTime(r,Ue().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},t.prototype.getQueryTime=function(r,n){if(n===0)return null;if(n===2){var e=this.gl;return e.getQueryParameter(r,e.QUERY_RESULT)/1e6}var o=this.getQueryTimerExtensionWebGL1();return o.getQueryObjectEXT(r,o.QUERY_RESULT_EXT)/1e6},t.prototype.isQueryAvailable=function(r,n){if(n===0)return!0;if(n===2){var e=this.gl,o=this.getQueryTimerExtensionWebGL2(),i=e.getQueryParameter(r,e.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),i&&!this.disjoint}return i=(o=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(r,o.QUERY_RESULT_AVAILABLE_EXT),this.disjoint==null&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),i&&!this.disjoint},t.prototype.pollFence=function(r){var n=this;return new Promise(function(e){n.addItemToPoll(function(){return r.isFencePassed()},function(){return e()})})},t.prototype.pollItems=function(){for(var r=function(e){for(var o=0;o<e.length&&e[o]();++o);return o-1}(this.itemsToPoll.map(function(e){return e.isDoneFn})),n=0;n<=r;++n)(0,this.itemsToPoll[n].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(r+1)},t.prototype.addItemToPoll=function(r,n){var e=this;this.itemsToPoll.push({isDoneFn:r,resolveFn:n}),this.itemsToPoll.length>1||kg(function(){return e.pollItems(),e.itemsToPoll.length===0})},t.prototype.bindTextureToFrameBuffer=function(r){this.throwIfDisposed(),Yd(this.gl,this.debug,r,this.framebuffer),this.debug&&cl(this.gl)},t.prototype.unbindTextureToFrameBuffer=function(){this.outputTexture!=null?(Yd(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&cl(this.gl)):Dg(this.gl,this.debug,this.framebuffer)},t.prototype.downloadMatrixDriver=function(r,n){this.bindTextureToFrameBuffer(r);var e=n();return this.unbindTextureToFrameBuffer(),e},t.prototype.setOutputMatrixTextureDriver=function(r,n,e){this.throwIfDisposed();var o=this.gl;Yd(o,this.debug,r,this.framebuffer),this.debug&&cl(o),this.outputTexture=r,mt(o,this.debug,function(){return o.viewport(0,0,n,e)}),mt(o,this.debug,function(){return o.scissor(0,0,n,e)})},t.prototype.setOutputMatrixWriteRegionDriver=function(r,n,e,o){var i=this;this.throwIfDisposed(),mt(this.gl,this.debug,function(){return i.gl.scissor(r,n,e,o)})},t.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},t.prototype.throwIfNoProgram=function(){if(this.program==null)throw new Error("No GPU program is currently set.")},t}();function $g(t,r){if(t.length!==r.length)throw Error("Binary was compiled with "+t.length+" inputs, but was executed with "+r.length+" inputs");t.forEach(function(n,e){var o=n.logicalShape,i=r[e],u=i.shape;if(!Br(o,u))throw Error("Binary was compiled with different shapes than the current args. Shapes "+o+" and "+u+" must match");if(!n.isUniform||!i.isUniform){var a=n.texShape,s=i.isUniform?null:i.texData.texShape;if(!Br(a,s))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+a+" and "+s+" must match")}})}var Kj=function(t,r,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var e=n.filterWidth,o=n.inChannels,i=n.strideWidth,u=n.strideHeight,a=n.padInfo,s=n.outWidth,l=n.dilationWidth,h=n.dilationHeight,p=n.dataFormat,c=a.left,d=a.top,f=o*e,m=an(),y=p==="channelsLast",g=y?0:1,v=y?1:2,b="",w=0;w<=1;w++)for(var _=0;_<=1;_++)b+=`
          blockIndex = rc.y + `+_+`;
          pos = rc.x + `+w+`;

          if(blockIndex < `+t[1]+" && pos < "+t[0]+`) {
            offsetY = int(blockIndex / (`+s+")) * "+u+" - "+d+`;
            d0 = offsetY + `+h+" * (pos / "+f+`);

            if(d0 < `+r[g]+` && d0 >= 0) {

              offsetX = int(mod(float(blockIndex), `+s+".) * "+i+". - "+c+`.);
              d1 = offsetX + `+l+" * (int(mod(float(pos), "+f+".) / "+o+`.));

              if(d1 < `+r[v]+` && d1 >= 0) {

                ch = int(mod(float(pos), `+o+`.));

                if (`+y+`) {
                  innerDims = vec2(d1, ch);
                  result[`+(2*w+_)+`] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[`+(2*w+_)+`] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        `+b+`

        `+m.output+` = result;
      }
    `},Qj=function(t,r,n,e,o){this.variableNames=["x"],this.outputShape=[];var i,u=r,a=t[3]-1;this.outputShape=t;var s="float("+n+") + float("+e+") * sum";i=o===.5?"inversesqrt("+s+")":o===1?"1.0/("+s+")":"exp(log("+s+") * float(-"+o+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -`+u+"; j <= "+u+`; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  `+a+`) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * `+i+`;
        setOutput(val);
      }
    `},Zj=function(t,r,n,e,o){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=r,this.bias=n,this.alpha=e,this.beta=o,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < `+this.depth+`; ++d) {
          int depthBegin = int(max(0.0, float(d - `+r+`)));
          int depthEnd = int(min(float(`+this.depth+`),
              float(d + `+r+` + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = `+this.depth+`;

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(`+e+") * norm + float("+n+`);

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(`+e+`)
                * float(`+o+`)
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * `+o+`);
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `},Jj=function(t,r,n,e,o){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var i,u=r,a=t[3]-1;this.outputShape=t;var s="float("+n+") + float("+e+") * sum";i=o===.5?"inversesqrt("+s+")":o===1?"1.0/("+s+")":"exp(log("+s+") * float(-"+o+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < `+this.outputShape[3]+`;
        bool hasNextRow = c < `+this.outputShape[2]+`;

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - `+u+`;
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - `+u+"; j <= "+u+`; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(`+a+`));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * `+i+`;
        setOutput(result);
      }
    `},eC=function(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var r=t.strideHeight,n=t.strideWidth,e=t.dilationHeight,o=t.effectiveFilterHeight,i=t.effectiveFilterWidth,u=o-1-t.padInfo.top,a=i-1-t.padInfo.left,s=o*i-1;this.userCode=`
      const ivec2 pads = ivec2(`+u+", "+a+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+o+`;
          wR += `+e+`) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+i+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+n+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = `+s+` - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * `+i+` + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `},tC=function(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var r=t.strideDepth,n=t.strideHeight,e=t.strideWidth,o=t.dilationDepth,i=t.dilationHeight,u=t.dilationWidth,a=t.effectiveFilterDepth,s=t.effectiveFilterHeight,l=t.effectiveFilterWidth,h=a-1-t.padInfo.front,p=s-1-t.padInfo.top,c=l-1-t.padInfo.left,d=a*s*l-1;this.userCode=`
      const ivec3 pads = ivec3(`+h+", "+p+", "+c+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+a+`;
           wD += `+o+`) {
          float dyD = float(dyDCorner + wD) / `+r+`.0;

          if (dyD < 0.0 || dyD >= `+t.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+s+`;
              wR += `+i+`) {
            float dyR = float(dyRCorner + wR) / `+n+`.0;

            if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+l+`;
                wC += `+u+`) {
              float dyC = float(dyCCorner + wC) / `+e+`.0;

              if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = `+d+` -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * `+s+" * "+l+` +
                  wR * `+l+` + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `},ef=function(t,r,n,e,o,i,u){n===void 0&&(n=!1),e===void 0&&(e=!1),o===void 0&&(o=!1),i===void 0&&(i=null),u===void 0&&(u=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r;var a=n?t[1]:t[2],s=Math.ceil(a/2),l=n?"i * 2, rc.y":"rc.y, i * 2",h=e?"rc.z, i * 2":"i * 2, rc.z",p=n?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],c=e?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],d="",f="";i&&(d=u?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+i+`
        }`:`vec4 activation(vec4 x) {
          `+i+`
        }`,f="result = activation(result);");var m=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),u&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+d+`

      const float sharedDimension = `+s+`.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < `+s+`; i++) {
          vec4 a = getMatrixA(rc.x, `+l+`);
          vec4 b = getMatrixB(rc.x, `+h+`);

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (`+p[0]+" * "+c[0]+`);
          result += (`+p[1]+" * "+c[1]+`);
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        `+m+`

        `+f+`

        setOutput(result);
      }
    `},rC=function(){function t(r,n,e){this.variableNames=["probs"],this.outputShape=[r,e],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < `+(n-1)+`; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(`+(n-1)+`));
      }
    `}return t.prototype.getCustomSetupFunc=function(r){var n=this;return function(e,o){n.seedLoc==null&&(n.seedLoc=e.getUniformLocation(o,"seed")),e.gl.uniform1f(n.seedLoc,r)}},t}(),nC=function(t,r,n,e){this.variableNames=["indices"],this.outputShape=[t,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(`+e+"), float("+n+`),
                      float(index == coords.y)));
      }
    `},oC=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t;var r=t.length;if(r===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{var n=vn("rc",r),e=Yt(r),o=function(a,s,l){if(a===1)return"rc > "+s[0];for(var h="",p=a-2;p<a;p++)h+=l[p]+" >= "+s[p],p<a-1&&(h+="||");return h}(r,t,n),i=function(a,s,l,h){if(a===1)return"";var p=h.slice(-2);return`
    int r = `+p[0]+`;
    int c = `+p[1]+`;
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= `+s+`;
    bool rEdge = rp1 >= `+l+`;
  `}(r,t[t.length-1],t[t.length-2],n),u=function(a,s){var l=a.length,h=function(p,c){for(var d=[],f=0;f<=1;f++)for(var m=0;m<=1;m++){for(var y=(f===0?"r":"rp1")+", "+(m===0?"c":"cp1"),g=2;g<p;g++)y=c[c.length-1-g]+","+y;d.push(y)}return d}(l,s);return l===1?`getA(rc),
            rc + 1 >= `+a[0]+` ? 0. : getA(rc + 1),
            0, 0`:"getA("+h[0]+`),
          cEdge ? 0. : getA(`+h[1]+`),
          rEdge ? 0. : getA(`+h[2]+`),
          rEdge || cEdge ? 0. : getA(`+h[3]+")"}(t,n);this.userCode=`
        void main() {
          `+e+` rc = getOutputCoords();

          if(`+o+`) {
            setOutput(vec4(0));
          } else {
            `+i+`

            setOutput(vec4(`+u+`));
          }
        }
      `}},iC=function(t,r,n){this.variableNames=["x"],this.outputShape=r.map(function(s,l){return s[0]+t[l]+s[1]});var e=t.length,o=Yt(e),i=r.map(function(s){return s[0]}).join(","),u=r.map(function(s,l){return s[0]+t[l]}).join(","),a=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,e);this.userCode=e!==1?`
      `+o+" start = "+o+"("+i+`);
      `+o+" end = "+o+"("+u+`);

      void main() {
        `+o+` outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(`+n+`));
        } else {
          `+o+` coords = outC - start;
          setOutput(getX(`+a+`));
        }
      }
    `:`
        int start = `+i+`;
        int end = `+u+`;

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(`+n+`));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `},aC=function(t,r,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r.map(function(y,g){return y[0]+t[g]+y[1]});for(var e=t.length,o=Yt(e),i=r.map(function(y){return y[0]}).join(","),u=r.map(function(y,g){return y[0]+t[g]}).join(","),a=vn("rc",e),s=vn("source",e),l=a[e-1]+" < "+this.outputShape[e-1],h=e===1?"source":"vec2("+s.slice(-2).join()+")",p=[o+" rc = outputLoc;",a[e-1]+` += 1;
       if(`+l+`) {
      `,e===1?"":`}
       rc = outputLoc;
       `+a[e-2]+` += 1;
       if(`+a[e-2]+" < "+this.outputShape[e-2]+") {",e===1?"":"  "+a[e-1]+` += 1;
         if(`+l+") {"],c=e===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",d="",f=0,m=e===1?2:4;f<m;f++)d+=`
        `+p[f]+`
        if (`+c+`) {
          result[`+f+"] = float("+n+`);
        } else {
          `+o+` source = rc - start;
          result[`+f+"] = getChannel(getX("+s.join()+"), "+h+`);
        }
      `;d+=e===1?"} ":"}}",this.userCode=`
      const `+o+" start = "+o+"("+i+`);
      const `+o+" end = "+o+"("+u+`);

      void main() {
        `+o+` outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        `+d+`
        setOutput(result);
      }
    `},tf=function(t,r,n){if(this.variableNames=["x"],r==="avg"&&n)throw new Error("Cannot compute positions for average pool.");var e=t.filterWidth,o=t.strideHeight,i=t.strideWidth,u=t.dilationHeight,a=t.dilationWidth,s=t.effectiveFilterHeight,l=t.effectiveFilterWidth,h=t.padInfo.top,p=t.padInfo.left;this.outputShape=t.outShape;var c=r==="avg",d="0.0";if(c||(d="-1.0 / 1e-20"),n)this.userCode=`
        const ivec2 strides = ivec2(`+o+", "+i+`);
        const ivec2 pads = ivec2(`+h+", "+p+`);

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < `+s+`;
              wR += `+u+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+l+`;
                wC += `+a+`) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = wR * `+l+` + wC;
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var f=r+"("+r+"("+r+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";r==="avg"&&(f="avgValue / count");var m=4*Math.floor(e/4),y=e%4,g=`
      if (`+c+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(`+o+", "+i+`);
      const ivec2 pads = ivec2(`+h+", "+p+`);
      const float initializationValue = `+d+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= `+t.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+d+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < `+s+`;
            wR += `+u+`) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= `+t.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+m+`; wC += 4) {
            int xC = xCCorner + wC * `+a+`;

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+a+`, d),
              getValue(batch, xR, xC + 2 * `+a+`, d),
              getValue(batch, xR, xC + 3 * `+a+`, d)
            );

            `+g+`
          }

          int xC = xCCorner + `+m+`;
          if (`+(y===1)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            `+g+`
          } else if (`+(y===2)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+a+`, d),
              initializationValue,
              initializationValue
            );

            `+g+`
          } else if (`+(y===3)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+a+`, d),
              getValue(batch, xR, xC + 2 * `+a+`, d),
              initializationValue
            );

            `+g+`
          }
        }
        setOutput(`+f+`);
      }
    `}},rf=function(t,r,n){if(this.variableNames=["x"],r==="avg"&&n)throw new Error("Cannot compute positions for average pool.");var e=t.filterWidth,o=t.strideDepth,i=t.strideHeight,u=t.strideWidth,a=t.dilationDepth,s=t.dilationHeight,l=t.dilationWidth,h=t.effectiveFilterDepth,p=t.effectiveFilterHeight,c=t.effectiveFilterWidth,d=t.padInfo.front,f=t.padInfo.top,m=t.padInfo.left;this.outputShape=t.outShape;var y=r==="avg",g="0.0";if(y||(g="-1.0 / 1e-20"),n)this.userCode=`
        const ivec3 strides =
            ivec3(`+o+", "+i+", "+u+`);
        const ivec3 pads = ivec3(`+d+", "+f+", "+m+`);

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < `+h+`;
              wD += `+a+`) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= `+t.inDepth+`) {
              continue;
            }

            for (int wR = 0; wR < `+p+`;
                wR += `+s+`) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= `+t.inHeight+`) {
                continue;
              }

              for (int wC = 0; wC < `+c+`;
                  wC += `+l+`) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= `+t.inWidth+`) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition =
                      wD * `+p+" * "+c+` +
                      wR * `+c+` + wC;;
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var v=r+"("+r+"("+r+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";r==="avg"&&(v="avgValue / count");var b=4*Math.floor(e/4),w=e%4,_=`
      if (`+y+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(`+o+", "+i+", "+u+`);
      const ivec3 pads = ivec3(`+d+", "+f+", "+m+`);
      const float initializationValue = `+g+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= `+t.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+g+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < `+h+`;
            wD += `+a+`) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= `+t.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+p+`;
            wR += `+s+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+b+`; wC += 4) {
              int xC = xCCorner + wC * `+l+`;

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+l+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+l+`, ch),
                getValue(batch, xD, xR, xC + 3 * `+l+`, ch)
              );

              `+_+`
            }

            int xC = xCCorner + `+b+`;
            if (`+(w===1)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              `+_+`
            } else if (`+(w===2)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+l+`, ch),
                initializationValue,
                initializationValue
              );

              `+_+`
            } else if (`+(w===3)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+l+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+l+`, ch),
                initializationValue
              );

              `+_+`
            }
          }
          setOutput(`+v+`);
        }
      }
    `}},sC=function(t,r){this.variableNames=["x"];var n=t.windowSize,e=t.batchSize,o=t.inSize,i=Math.ceil(o/n);this.outputShape=[e,i];var u="0.0",a="";r==="prod"?u="1.0":r==="min"?(u="1.0 / 1e-20",a="min"):r==="max"&&(u="-1.0 / 1e-20",a="max");var s=r+"("+r+"("+r+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";r==="sum"?s="sumValue":r==="prod"?s="prodValue":r==="all"?s="allValue":r==="any"&&(s="anyValue");var l=4*Math.floor(n/4),h=n%4,p=`
      if (`+(r==="sum")+`) {
        sumValue += dot(values, ones);
      } else if (`+(r==="prod")+`) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = `+a+`(values, minMaxValue);
      }
    `,c="vec4";r==="all"?(u="1.0",p=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,c="bvec4"):r==="any"&&(u="0.0",p=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,c="bvec4");var d="";o%n>0&&(d=`
        if (inIdx < 0 || inIdx >= `+o+`) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = `+u+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        `+d+`
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+n+`;

        vec4 minMaxValue = vec4(`+u+`);
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < `+l+`; i += 4) {
          int inIdx = inOffset + i;
          `+c+" values = "+c+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          `+p+`
        }

        int inIdx = inOffset + `+l+`;
        if (`+(h===1)+`) {
          `+c+" values = "+c+`(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          `+p+`
        } else if (`+(h===2)+`) {
          `+c+" values = "+c+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          `+p+`
        } else if (`+(h===3)+`) {
          `+c+" values = "+c+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          `+p+`
        }
        setOutput(`+s+`);
      }
    `},uC=function(t,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var n="",e=0;e<4;e++){var o="thisRC = rc;";e%2==1&&(o+="thisRC.z += 1;"),e>1&&(o+="thisRC.y += 1;"),n+=`
        `+o+`
        `+(e>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+`
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[`+e+`] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        `+(e>0?"}":"")+`
      `}this.userCode=`
      
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      `+Yi(["r","c","d"],r)+`
      return ivec3(r, c, d);
    }
  
      `+Gp(t)+`

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = `+t[1]+`;
        int cols = `+t[2]+`;

        `+n+`

        setOutput(result);
      }
    `},lC=function(t,r,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=r.shape;var e=r.shape,o=e[1],i=e[2],u=t.shape,a=u[1],s=u[2],l=[n&&a>1?o-1:o,n&&s>1?i-1:i],h=[n&&a>1?a-1:a,n&&s>1?s-1:s],p=l[0]/h[0],c=l[1]/h[1],d=1/p,f=1/c,m=2*Math.ceil(d)+2,y=2*Math.ceil(f)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+p+`);
        const float widthScale = float(`+c+`);

        const float invHeightScale = float(`+d+`);
        const float invWidthScale = float(`+f+`);

        const int winHeight = int(`+m+`);
        const int winWidth = int(`+y+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+a+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+s+`) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), `+(o-1)+`.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), `+(i-1)+`.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},cC=function(t,r,n,e){this.variableNames=["A"],this.outputShape=[];var o=t[0],i=t[1],u=t[2],a=t[3];this.outputShape=[o,r,n,a];var s=[e&&r>1?i-1:i,e&&n>1?u-1:u],l=[e&&r>1?r-1:r,e&&n>1?n-1:n];this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+s[0]/l[0]+`,
          `+s[1]/l[1]+`);
      const vec2 inputShapeRC = vec2(`+i+".0, "+u+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `},dC=function(t,r,n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=t[0],i=t[1],u=t[2],a=t[3];this.outputShape=[o,r,n,a];var s=[e&&r>1?i-1:i,e&&n>1?u-1:u],l=[e&&r>1?r-1:r,e&&n>1?n-1:n];this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          `+s[0]/l[0]+`,
          `+s[1]/l[1]+`,
          `+s[1]/l[1]+`);
      const vec3 inputShapeRC = vec3(`+i+".0, "+u+`.0,
                                     `+u+`.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < `+(a-1)+`;
        bool hasNextRow = coords.z < `+(n-1)+`;

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `},fC=function(t,r,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=r.shape;var e=r.shape,o=e[1],i=e[2],u=t.shape,a=u[1],s=u[2],l=[n&&a>1?o-1:o,n&&s>1?i-1:i],h=[n&&a>1?a-1:a,n&&s>1?s-1:s],p=l[0]/h[0],c=l[1]/h[1],d=1/p,f=1/c,m=2*Math.ceil(d)+2,y=2*Math.ceil(f)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+p+`);
        const float widthScale = float(`+c+`);

        const float invHeightScale = float(`+d+`);
        const float invWidthScale = float(`+f+`);

        const int winHeight = int(`+m+`);
        const int winWidth = int(`+y+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+a+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+s+`) {
              continue;
            }

            float sourceFracRow =
              float(`+l[0]+`) *
                (float(dyR) / float(`+h[0]+`));

            float sourceFracCol =
                float(`+l[1]+`) *
                  (float(dyC) / float(`+h[1]+`));

            int sourceNearestRow = int(min(
                float(int(`+o+`) - 1),
                `+n+` ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(`+i+`) - 1),
                `+n+` ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},hC=function(t,r,n,e){this.variableNames=["A"],this.outputShape=[];var o=t[0],i=t[1],u=t[2],a=t[3];this.outputShape=[o,r,n,a];var s=[e&&r>1?i-1:i,e&&n>1?u-1:u],l=[e&&r>1?r-1:r,e&&n>1?n-1:n],h=e?"0.5":"0.0";this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+s[0]/l[0]+`,
          `+s[1]/l[1]+`);
      const vec2 inputShapeRC = vec2(`+i+".0, "+u+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + `+h+`)));

        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `},pC=function(t,r){this.variableNames=["x"];var n=t.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");if(this.outputShape=t,n!==1){var e=t.map(function(i,u){return function(a){return r.indexOf(a)!==-1&&t[a]!==1?t[a]+" - coords["+a+"] - 1":"coords["+a+"]"}(u)}).join(","),o=Yt(n);this.userCode=`
      void main() {
        `+o+` coords = getOutputCoords();
        setOutput(getX(`+e+`));
      }
    `}else this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(`+t[0]+` - coord - 1));
        }
      `},mC=function(t,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var n=t.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");this.outputShape=t;var e=vn("rc",n),o=e[n-1]+" + 1 < "+this.outputShape[n-1],i=e[n-2]+" + 1 < "+this.outputShape[n-2],u=Yt(n);function a(s){var l=t.map(function(h,p){return function(c,d){return r.indexOf(c)!==-1&&t[c]!==1?t[c]+" - "+d[c]+" - 1":""+d[c]}(p,s)});return"getChannel(getX("+l.join(",")+"), vec2("+l.slice(-2).join(",")+"))"}this.userCode=n===1?`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(`+t[0]+` - rc - 1),
            `+t[0]+` - rc - 1);
          if(`+o+`){
              result.g = getChannel(getX(`+t[0]+` - (rc  + 1) - 1),
                `+t[0]+` - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:`
        void main() {
          `+u+` rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = `+function(s){return a(s)}(e.slice())+`;
          if(`+o+`){
            result.g = `+function(s){return s[n-1]="("+s[n-1]+" + 1)",a(s)}(e.slice())+`;
          }
          if(`+i+`) {
            result.b = `+function(s){return s[n-2]="("+s[n-2]+" + 1)",a(s)}(e.slice())+`;
            if(`+o+`) {
              result.a = `+function(s){return s[n-1]="("+s[n-1]+" + 1)",s[n-2]="("+s[n-2]+" + 1)",a(s)}(e.slice())+`;
            }
          }
          setOutput(result);
        }
    `},Xg=function(t,r,n,e,o,i,u){this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;var a=Yt(o.length),s=Yt(i.length),l="";n===1?l="i":n===2&&(l="i, j");var h="getIndices("+l+")",p="";e===1?p="i":e===2&&(p="i, coords[1]");var c="getUpdates("+p+")",d=r>1?"strides[j]":"strides";this.userCode=`
        `+a+" strides = "+a+"("+o+`);

        void main() {
          `+s+` coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < `+t+`; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < `+r+`; j++) {
              int index = round(`+h+`);
              flattenedIndex += index * `+d+`;
            }
            if (flattenedIndex == coords[0]) {
              sum += `+c+`;
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `},yC=function(t,r){this.variableNames=["x","segmentIds"];var n=t.windowSize,e=t.batchSize,o=t.inSize,i=t.numSegments,u=i*Math.ceil(o/n);this.outputShape=[e,u];var a=4*Math.floor(n/4),s=n%4,l=`
        sumValue += dot(values, segFilter);
    `,h="";o%n>0&&(h=`
        if (inIdx < 0 || inIdx >= `+o+`) {
          return initializationValue;
        }
      `);var p="";o%n>0&&(p=`
        if (inIdx < 0 || inIdx >= `+o+`) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = 0.0;

      float getValue(int batch, int inIdx) {
        `+h+`
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        `+p+`
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          `+i+")) * float("+n+`));
        int currentSeg = int(mod(float(outIdx), float(`+i+`)));

        float sumValue = 0.0;

        for (int i = 0; i < `+a+`; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          `+l+`
        }

        int inIdx = inOffset + `+a+`;
        if (`+(s===1)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          `+l+`
        } else if (`+(s===2)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          `+l+`
        } else if (`+(s===3)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          `+l+`
        }
        setOutput(sumValue);
      }
    `},gC=function(t,r,n){var e,o;if(this.variableNames=["c","a","b"],this.outputShape=r,n>4)throw Error("Where for rank "+n+" is not yet supported");if(n===1)o="resRC",e="resRC";else{for(var i=["resRC.x","resRC.y","resRC.z","resRC.w"],u=[],a=[],s=0;s<r.length;s++)a.push(""+i[s]),s<t&&u.push(""+i[s]);e=u.join(),o=a.join()}var l=Yt(n);this.userCode=`
      void main() {
        `+l+` resRC = getOutputCoords();
        float cVal = getC(`+e+`);
        if (cVal >= 1.0) {
          setOutput(getA(`+o+`));
        } else {
          setOutput(getB(`+o+`));
        }
      }
    `},vC=function(){function t(r){this.variableNames=["source"],this.outputShape=r,this.rank=r.length;var n,e=Yt(this.rank),o="uniform int start["+this.rank+"];",i=function(u){if(u===1)return"sourceLoc";if(u<=6)return nf.slice(0,u).map(function(a){return"sourceLoc."+a}).join(",");throw Error("Slicing for rank "+u+" is not yet supported")}(this.rank);n=`
        `+e+` sourceLoc;
        `+e+` coords = getOutputCoords();
        `+r.map(function(u,a){return"sourceLoc."+nf[a]+" = start["+a+"] + coords."+nf[a]+";"}).join(`
`)+`
      `,this.userCode=`
      `+o+`
      void main() {
        `+n+`
        setOutput(getSource(`+i+`));
      }
    `}return t.prototype.getCustomSetupFunc=function(r){var n=this;if(r.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+r.length+")");return function(e,o){n.startLoc==null&&(n.startLoc=e.getUniformLocationNoThrow(o,"start"),n.startLoc==null)||e.gl.uniform1iv(n.startLoc,r)}},t}(),nf=["x","y","z","w","u","v"],bC=function(){function t(r){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.rank=r.length;var n=Yt(this.rank),e=vn("coords",this.rank),o=vn("sourceLoc",this.rank),i=this.rank===1?"sourceLoc":"vec2("+o.slice(-2).join()+")",u="getChannel(getSource("+o.join()+"), "+i+")",a=`
      result.x = `+u+`;
      if (++`+e[this.rank-1]+" < "+r[this.rank-1]+`) {
        ++`+o[this.rank-1]+`;
        result.y = `+u+`;
        --`+o[this.rank-1]+`;
      }
    `,s=this.rank===1?"":`
      --`+e[this.rank-1]+`;
      if (++`+e[this.rank-2]+" < "+r[this.rank-2]+`) {
        ++`+o[this.rank-2]+`;
        result.z = `+u+`;
        if (++`+e[this.rank-1]+" < "+r[this.rank-1]+`) {
          ++`+o[this.rank-1]+`;
          result.w = `+u+`;
        }
      }
    `,l=this.rank<=4?`sourceLoc = coords +
            `+n+"("+r.map(function(h,p){return"start["+p+"]"}).join()+");":r.map(function(h,p){return o[p]+" = "+e[p]+" + start["+p+"];"}).join(`
`);this.userCode=`
      uniform int start[`+this.rank+`];
      void main() {
        `+n+` coords = getOutputCoords();
        `+n+` sourceLoc;
        `+l+`
        vec4 result = vec4(0.);
        `+a+`
        `+s+`
        setOutput(result);
      }
    `}return t.prototype.getCustomSetupFunc=function(r){var n=this;if(r.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+r.length+")");return function(e,o){n.startLoc==null&&(n.startLoc=e.getUniformLocationNoThrow(o,"start"),n.startLoc==null)||e.gl.uniform1iv(n.startLoc,r)}},t}(),xC=function(t,r,n){this.variableNames=["x"],this.outputShape=n;var e=n.length,o=Yt(n.length),i=Yt(n.length),u="";if(e===1)u="coords * strides + begin";else{var a=0;u=n.map(function(s,l){return a++,n.length===1?"coords * strides["+l+"] + begin["+l+"]":"coords["+(a-1)+"] * strides["+l+"] + begin["+l+"]"}).join(",")}this.userCode=`
      `+o+" begin = "+o+"("+t+`);
      `+o+" strides = "+o+"("+r+`);

      void main() {
        `+i+` coords = getOutputCoords();
        setOutput(getX(`+u+`));
      }
    `},wC=function(){function t(r){this.gpgpu=r,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return t.prototype.acquireTexture=function(r,n,e){var o,i=Yg(n,e),u=Kg(r,i,e);if(u in this.freeTextures||(this.freeTextures[u]=[]),u in this.usedTextures||(this.usedTextures[u]=[]),this.freeTextures[u].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var a=this.freeTextures[u].shift();return this.usedTextures[u].push(a),a}return this.numUsedTextures++,this.log(),i===Mn.PACKED_2X2_FLOAT32?o=this.gpgpu.createPackedMatrixTexture(r[0],r[1]):i===Mn.PACKED_2X2_FLOAT16?o=this.gpgpu.createFloat16PackedMatrixTexture(r[0],r[1]):i===Mn.UNPACKED_FLOAT32?o=this.gpgpu.createFloat32MatrixTexture(r[0],r[1]):i===Mn.UNPACKED_FLOAT16?o=this.gpgpu.createFloat16MatrixTexture(r[0],r[1]):i===Mn.PACKED_4X1_UNSIGNED_BYTE&&(o=this.gpgpu.createUnsignedBytesMatrixTexture(r[0],r[1])),this.usedTextures[u].push(o),o},t.prototype.releaseTexture=function(r,n,e,o){if(this.freeTextures!=null){var i=Kg(n,Yg(e,o),o);i in this.freeTextures||(this.freeTextures[i]=[]),this.freeTextures[i].push(r),this.numFreeTextures++,this.numUsedTextures--;var u=this.usedTextures[i],a=u.indexOf(r);if(a<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u.splice(a,1),this.log()}},t.prototype.log=function(){if(this.logEnabled){var r=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+r+")")}},t.prototype.getNumUsedTextures=function(){return this.numUsedTextures},t.prototype.getNumFreeTextures=function(){return this.numFreeTextures},t.prototype.dispose=function(){var r=this;if(this.freeTextures!=null){for(var n in this.freeTextures)this.freeTextures[n].forEach(function(e){r.gpgpu.deleteMatrixTexture(e)});for(var n in this.usedTextures)this.usedTextures[n].forEach(function(o){r.gpgpu.deleteMatrixTexture(o)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},t}();function Yg(t,r){if(t===In.UPLOAD)return Mn.PACKED_2X2_FLOAT32;if(t===In.RENDER||t==null)return function(n){return Ue().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?n?Mn.PACKED_2X2_FLOAT32:Mn.UNPACKED_FLOAT32:n?Mn.PACKED_2X2_FLOAT16:Mn.UNPACKED_FLOAT16}(r);if(t===In.DOWNLOAD||t===In.PIXELS)return Mn.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+t)}function Kg(t,r,n){return t[0]+"_"+t[1]+"_"+r+"_"+n}var _C=function(t,r){this.variableNames=["A"];for(var n=new Array(t.length),e=0;e<n.length;e++)n[e]=t[e]*r[e];this.outputShape=n,this.rank=n.length;var o=Yt(this.rank),i=function(u){var a=u.length;if(a>5)throw Error("Tile for rank "+a+" is not yet supported");if(a===1)return"imod(resRC, "+u[0]+")";for(var s=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],l=[],h=0;h<u.length;h++)l.push("imod("+s[h]+", "+u[h]+")");return l.join()}(t);this.userCode=`
      void main() {
        `+o+` resRC = getOutputCoords();
        setOutput(getA(`+i+`));
      }
    `},SC=function(t,r){this.variableNames=["A"];for(var n=new Array(t.length),e=0;e<n.length;e++)n[e]=t[r[e]];this.outputShape=n,this.rank=n.length;var o=Yt(this.rank),i=function(u){var a=u.length;if(a>6)throw Error("Transpose for rank "+a+" is not yet supported");for(var s=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],l=new Array(a),h=0;h<u.length;h++)l[u[h]]=s[h];return l.join()}(r);this.userCode=`
    void main() {
      `+o+` resRC = getOutputCoords();
      setOutput(getA(`+i+`));
    }
    `},EC=function(t,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var n=new Array(t.length),e=0;e<n.length;e++)n[e]=t[r[e]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var o=Yt(this.rank),i=Sb("rc",this.rank),u=new Array(this.rank);for(e=0;e<r.length;e++)u[r[e]]=i[e];var a="vec2("+u.slice(-2).join()+")",s="++"+i[this.rank-1]+" < "+n[this.rank-1],l="getChannel(getA("+u.join()+"), "+a+")";this.userCode=`
    void main() {
      `+o+` rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = `+l+`;
      if(`+s+`) {
        result[1] = `+l+`;
      }
      --`+i[this.rank-1]+`;
      if(++`+i[this.rank-2]+" < "+n[this.rank-2]+`) {
        result[2] = `+l+`;
        if(`+s+`) {
          result[3] = `+l+`;
        }
      }
      setOutput(result);
    }
    `},zp=1.7580993408473768,Vp=1.0507009873554805,kt=function(t,r){this.variableNames=["A"],this.outputShape=t,this.userCode=`
      float unaryOperation(float x) {
        `+r+`
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `},lo="if (isnan(x)) return x;",jC="return x;",Qg="return abs(x);",Tb=lo+`
  return (x < 0.0) ? 0.0 : x;
`,Mb=lo+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Rb="return (x >= 0.0) ? x : (exp(x) - 1.0);",CC=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = `+zp+`;
  float scale = `+Vp+`;
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,Zg="return -x;",Jg="return ceil(x);",ev="return floor(x);",tv="return exp(x);",rv="return exp(x) - 1.0;",kC=lo+`
  return sin(x);
`,TC=lo+`
  return cos(x);
`,MC=lo+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,RC=lo+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,IC=lo+`
  return atan(x);
`,AC=lo+"return log(x + sqrt(x * x + 1.0));",PC=lo+`
  if (x < 1.0) return NAN;
  return log(x + sqrt(x * x - 1.0));`,DC=lo+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
  return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,pl="return x;",OC="return x;",Ib=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Ab=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Pb=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,Ls=function(t,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        `+r+`
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `},LC=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t;var r=t.length,n=vn("rc",r),e=Yt(r),o=function(a,s){if(a===1)return"rc";for(var l="",h=0;h<a;h++)l+=s[h],h<a-1&&(l+=",");return l}(r,n),i=n.slice(-2),u=r<=1?"rc":"vec2("+i.join(",")+")";this.userCode=`
      void main() {
        `+e+` rc = getOutputCoords();
        vec4 packedInput = getA(`+o+`);

        setOutput(getChannel(packedInput, `+u+`));
      }
    `},ml={};function yl(t,r){if(r===void 0&&(r=!1),t==="linear")return r?OC:jC;if(t==="relu")return r?Ib:Tb;if(t==="elu")return r?Pb:Rb;if(t==="relu6")return r?Ab:Mb;if(t==="prelu")return r?kb:Cb;throw new Error("Activation "+t+" has not been implemented for the WebGL backend.")}var NC=600,FC=function(t){function r(n){var e,o=t.call(this)||this;if(o.pendingRead=new WeakMap,o.pendingDisposal=new WeakSet,o.dataRefCount=new WeakMap,o.numBytesInGPU=0,o.uploadWaitMs=0,o.downloadWaitMs=0,o.warnedAboutMemory=!1,o.pendingDeletes=0,o.disposed=!1,!Ue().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(n==null){var i=Io(Ue().getNumber("WEBGL_VERSION"));o.binaryCache=((e=Ue().getNumber("WEBGL_VERSION"))in ml||(ml[e]={}),ml[e]),o.gpgpu=new Yj(i),o.canvas=i.canvas,o.gpgpuCreatedLocally=!0}else o.gpgpu=n,o.binaryCache={},o.gpgpuCreatedLocally=!1,o.canvas=n.gl.canvas;return o.textureManager=new wC(o.gpgpu),o.numMBBeforeWarning=Ue().global.screen==null?1024:Ue().global.screen.height*Ue().global.screen.width*window.devicePixelRatio*NC/1024/1024,o.texData=new pb(o,Se),o}return uo(r,t),r.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},r.prototype.write=function(n,e,o){if(Ue().getBool("DEBUG")&&this.checkNumericalProblems(n),o==="complex64"&&n!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var i={};return this.texData.set(i,{shape:e,dtype:o,values:n,usage:In.UPLOAD}),i},r.prototype.move=function(n,e,o,i){if(Ue().getBool("DEBUG")&&this.checkNumericalProblems(e),i==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(n,{shape:o,dtype:i,values:e,usage:In.UPLOAD})},r.prototype.readSync=function(n){var e=this.texData.get(n),o=e.values,i=e.dtype,u=e.complexTensors,a=e.slice,s=e.shape,l=e.isPacked;if(a!=null){var h=void 0;h=l?new Ls(s,pl):new kt(s,pl);var p=this.runWebGLProgram(h,[{dataId:n,shape:s,dtype:i}],i),c=this.readSync(p.dataId);return this.disposeData(p.dataId),c}if(o!=null)return this.convertAndCacheOnCPU(n);if(i==="string")return o;var d,f,m=this.activeTimers!=null;return m&&(d=xo()),i==="complex64"?f=Ch(u.real.dataSync(),u.imag.dataSync()):f=this.getValuesFromTexture(n),m&&(this.downloadWaitMs+=xo()-d),this.convertAndCacheOnCPU(n,f)},r.prototype.read=function(n){return lt(this,void 0,void 0,function(){var e,o,i,u,a,s,l,h,p,c,d,f,m,y,g,v,b,w,_,j,E,T;return ct(this,function(R){switch(R.label){case 0:if(this.pendingRead.has(n))return e=this.pendingRead.get(n),[2,new Promise(function(M){return e.push(M)})];if(o=this.texData.get(n),i=o.values,u=o.shape,a=o.slice,s=o.dtype,l=o.complexTensors,h=o.isPacked,a!=null)return p=void 0,p=h?new Ls(u,pl):new kt(u,pl),c=this.runWebGLProgram(p,[{dataId:n,shape:u,dtype:s}],s),d=this.read(c.dataId),this.disposeData(c.dataId),[2,d];if(i!=null)return[2,this.convertAndCacheOnCPU(n)];if(!Ue().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&Ue().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return f=null,s!=="complex64"&&Ue().get("WEBGL_BUFFER_SUPPORTED")&&(m=this.decode(n),y=this.texData.get(m.dataId),f=(T=this.gpgpu).createBufferFromTexture.apply(T,[y.texture].concat(Ks(u)))),this.pendingRead.set(n,[]),s==="complex64"?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:R.sent(),R.label=2;case 2:return s!=="complex64"?[3,4]:[4,Promise.all([l.real.data(),l.imag.data()])];case 3:return v=R.sent(),b=v[0],w=v[1],g=Ch(b,w),[3,5];case 4:f==null?g=this.getValuesFromTexture(n):(_=ht(u),g=this.gpgpu.downloadFloat32MatrixFromBuffer(f,_)),R.label=5;case 5:return m!=null&&this.disposeData(m.dataId),j=this.convertAndCacheOnCPU(n,g),E=this.pendingRead.get(n),this.pendingRead.delete(n),E.forEach(function(M){return M(j)}),this.pendingDisposal.has(n)&&(this.pendingDisposal.delete(n),this.disposeData(n),this.pendingDeletes--),[2,j]}})})},r.prototype.checkNumericalProblems=function(n){if(n!=null)for(var e=0;e<n.length;e++){var o=n[e];if(!CS(o))throw Ue().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value "+o+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"):Error("The value "+o+" cannot be represented on this device.")}},r.prototype.getValuesFromTexture=function(n){var e,o=this.texData.get(n),i=o.shape,u=o.dtype,a=o.isPacked,s=ht(i);if(Ue().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var l=this.decode(n),h=this.texData.get(l.dataId),p=(e=this.gpgpu).downloadMatrixFromPackedTexture.apply(e,[h.texture].concat(Ks(i))).subarray(0,s);return this.disposeData(l.dataId),p}var c=Ue().getBool("WEBGL_PACK")&&a===!0,d=c?Kd(i):i,f=c?new jj(d):new Ej(d),m=this.runWebGLProgram(f,[{shape:d,dtype:u,dataId:n}],"float32"),y=this.texData.get(m.dataId),g=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(y.texture,y.texShape[0],y.texShape[1]).subarray(0,s);return this.disposeData(m.dataId),g},r.prototype.time=function(n){return lt(this,void 0,void 0,function(){var e,o,i,u,a,s,l;return ct(this,function(h){switch(h.label){case 0:return e=this.activeTimers,o=[],i=!1,this.programTimersStack==null?(this.programTimersStack=o,i=!0):this.activeTimers.push(o),this.activeTimers=o,n(),u=ss(this.activeTimers.map(function(p){return p.query})).filter(function(p){return p!=null}),a=ss(this.activeTimers.map(function(p){return p.name})).filter(function(p){return p!=null}),this.activeTimers=e,i&&(this.programTimersStack=null),s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},Ue().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(u)]:[3,2];case 1:return l=h.sent(),s.kernelMs=aS(l),s.getExtraProfileInfo=function(){return l.map(function(p,c){return{name:a[c],ms:p}}).map(function(p){return p.name+": "+p.ms}).join(", ")},[3,3];case 2:s.kernelMs={error:"WebGL query timers are not supported in this environment."},h.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,s]}})})},r.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},r.prototype.startTimer=function(){return Ue().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:xo(),endMs:null}},r.prototype.endTimer=function(n){return Ue().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),n):(n.endMs=xo(),n)},r.prototype.getQueryTime=function(n){return lt(this,void 0,void 0,function(){var e;return ct(this,function(o){return Ue().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(n)]:[2,(e=n).endMs-e.startMs]})})},r.prototype.disposeData=function(n){if(!this.pendingDisposal.has(n)){if(this.pendingRead.has(n))return this.pendingDisposal.add(n),void this.pendingDeletes++;if(this.texData.has(n)){this.releaseGPUData(n);var e=this.texData.get(n).complexTensors;e!=null&&(e.real.dispose(),e.imag.dispose()),this.texData.delete(n)}}},r.prototype.releaseGPUData=function(n){var e=this.texData.get(n),o=e.texture,i=e.dtype,u=e.texShape,a=e.usage,s=e.isPacked,l=e.slice,h=l&&l.origDataId||n,p=this.dataRefCount.get(h);p>1?this.dataRefCount.set(h,p-1):(this.dataRefCount.delete(h),o!=null&&(this.numBytesInGPU-=this.computeBytes(u,i),this.textureManager.releaseTexture(o,u,a,s)));var c=this.texData.get(n);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null},r.prototype.getTexture=function(n){return this.uploadToGPU(n),this.texData.get(n).texture},r.prototype.getDataInfo=function(n){return this.texData.get(n)},r.prototype.getCPUBackend=function(){return Ue().getBool("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=Se.findBackend("cpu")),this.cpuBackend):null},r.prototype.shouldExecuteOnCPU=function(n,e){var o=this;return e===void 0&&(e=128),this.getCPUBackend()!=null&&n.every(function(i){return o.texData.get(i.dataId).texture==null&&i.size<e})},r.prototype.getGPGPUContext=function(){return this.gpgpu},r.prototype.complex=function(n,e){var o=this.makeOutput(n.shape,"complex64");return this.texData.get(o.dataId).complexTensors={real:Se.keep(n.clone()),imag:Se.keep(e.clone())},o},r.prototype.real=function(n){return this.texData.get(n.dataId).complexTensors.real.clone()},r.prototype.imag=function(n){return this.texData.get(n.dataId).complexTensors.imag.clone()},r.prototype.slice=function(n,e,o){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.slice(n,e,o);if(ht(o)===0)return $r([],o,n.dtype);var i=this.texData.get(n.dataId).isPacked,u=fb(n.shape,e,o);if(i||!u){var a=Ue().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new bC(o):new vC(o),s=a.getCustomSetupFunc(e);return this.compileAndRun(a,[n],null,s)}return this.uploadToGPU(n.dataId),this.shallowSlice(n,e,o)},r.prototype.shallowSlice=function(n,e,o){var i=this.texData.get(n.dataId),u=this.makeOutput(o,n.dtype),a=this.texData.get(u.dataId);Object.assign(a,i),a.shape=o,a.dtype=n.dtype;var s=hb(e,n.strides);i.slice&&(s+=i.slice.flatOffset),a.slice={flatOffset:s,origDataId:i.slice&&i.slice.origDataId||n.dataId};var l=this.dataRefCount.get(a.slice.origDataId)||1;return this.dataRefCount.set(a.slice.origDataId,l+1),u},r.prototype.stridedSlice=function(n,e,o,i){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.stridedSlice(n,e,o,i);var u=Lp(e,o,i);if(u.some(function(s){return s===0}))return $r([],u);var a=new xC(e,i,u);return this.compileAndRun(a,[n])},r.prototype.reverse=function(n,e){var o=Ue().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new mC(n.shape,e):new pC(n.shape,e);return this.compileAndRun(o,[n])},r.prototype.concat=function(n,e){if(n[0].dtype==="complex64"){var o=n.map(function(d){return zn(d)}),i=n.map(function(d){return So(d)});return Hr(this.concat(o,e),this.concat(i,e))}if(this.shouldExecuteOnCPU(n))return this.cpuBackend.concat(n,e);if(n.length===1)return n[0];if(n.length>Ue().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var u=Math.floor(n.length/2),a=this.concat(n.slice(0,u),e),s=this.concat(n.slice(u),e);return this.concat([a,s],e)}if(Ue().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&n[0].rank>1){var l=new cj(n.map(function(d){return d.shape}),e);return this.compileAndRun(l,n)}var h=ls(n.map(function(d){return d.shape}),e),p=n.map(function(d){return d.as2D(-1,ht(d.shape.slice(e)))}),c=new lj(p.map(function(d){return d.shape}));return this.compileAndRun(c,p).reshape(h)},r.prototype.neg=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.neg(n);if(Ue().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,Zg,n.dtype);var e=new kt(n.shape,Zg);return this.compileAndRun(e,[n])},r.prototype.batchMatMul=function(n,e,o,i){var u=o?n.shape[2]:n.shape[1],a=i?e.shape[1]:e.shape[2],s=o?n.shape[1]:n.shape[2],l=n.shape[0];if((u===1||a===1)&&s>1e3){o&&(n=n.transpose([0,2,1])),i&&(e=e.transpose([0,2,1]));var h=a===1?n:n.as3D(l,s,1),p=a===1?2:1,c=a===1?e.as3D(l,1,s):e;return this.multiply(h,c).sum(p,!0)}var d=qr(n.dtype,e.dtype),f=new ef(n.shape,[l,u,a],o,i);return this.compileAndRun(f,[n,e],d)},r.prototype.fusedBatchMatMul=function(n){var e=n.a,o=n.b,i=n.transposeA,u=n.transposeB,a=n.bias,s=n.activation,l=n.preluActivationWeights,h=i?e.shape[2]:e.shape[1],p=u?o.shape[1]:o.shape[2],c=e.shape[0],d=qr(e.dtype,o.dtype),f=a!=null,m=l!=null,y=s?yl(s,!0):null,g=new ef(e.shape,[c,h,p],i,u,f,y,m),v=[e,o];return a&&v.push(a),l&&v.push(l),this.compileAndRun(g,v,d)},r.prototype.multiply=function(n,e){if(n.dtype==="complex64"){var o=this.texData.get(n.dataId),i=this.texData.get(e.dataId),u=new Ug(oj,n.shape,e.shape),a=new Ug(ij,n.shape,e.shape),s=[this.makeComplexComponentTensorInfo(n,o.complexTensors.real),this.makeComplexComponentTensorInfo(n,o.complexTensors.imag),this.makeComplexComponentTensorInfo(e,i.complexTensors.real),this.makeComplexComponentTensorInfo(e,i.complexTensors.imag)],l=this.compileAndRun(u,s),h=this.compileAndRun(a,s),p=this.complex(l,h);return l.dispose(),h.dispose(),p}if(this.shouldExecuteOnCPU([n,e]))return this.cpuBackend.multiply(n,e);if(Ue().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,e,Gg,n.dtype);var c=new fr(Gg,n.shape,e.shape);return this.compileAndRun(c,[n,e],n.dtype)},r.prototype.batchNormalization=function(n,e,o,i,u,a){var s=[n,e,o],l=null;a!=null&&(l=a.shape,s.push(a));var h=null;if(u!=null&&(h=u.shape,s.push(u)),Ue().getBool("WEBGL_PACK_NORMALIZATION")){var p=new nj(n.shape,e.shape,o.shape,l,h,i);return this.compileAndRun(p,s)}var c=new rj(n.shape,e.shape,o.shape,l,h,i);return this.compileAndRun(c,s)},r.prototype.localResponseNormalization4D=function(n,e,o,i,u){var a=Ue().getBool("WEBGL_PACK_NORMALIZATION")?new Jj(n.shape,e,o,i,u):new Qj(n.shape,e,o,i,u);return this.compileAndRun(a,[n])},r.prototype.LRNGrad=function(n,e,o,i,u,a,s){var l=new Zj(e.shape,i,u,a,s);return this.compileAndRun(l,[e,o,n])},r.prototype.tile=function(n,e){if(n.dtype==="string"){var o=this.readSync(n.dataId).map(function(u){return cc(u)});return wb(Ct(n.shape,n.dtype,o),e)}var i=new _C(n.shape,e);return this.compileAndRun(i,[n])},r.prototype.pad=function(n,e,o){var i=Ue().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new aC(n.shape,e,o):new iC(n.shape,e,o);return this.compileAndRun(i,[n])},r.prototype.transpose=function(n,e){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.transpose(n,e);var o=Ue().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new EC(n.shape,e):new SC(n.shape,e);return this.compileAndRun(o,[n])},r.prototype.gather=function(n,e,o){if(this.shouldExecuteOnCPU([n,e]))return this.cpuBackend.gather(n,e,o);var i=new Ij(n.shape,e.size,o);return this.compileAndRun(i,[n,e])},r.prototype.batchToSpaceND=function(n,e,o){ce(n.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var i=e.reduce(function(p,c){return p*c}),u=yc(n.shape,e,i),a=gc(u.length,e.length),s=vc(n.shape,e,i),l=ub(o,e.length),h=lb(s,o,e.length);return n.reshape(u).transpose(a).reshape(s).slice(l,h)},r.prototype.spaceToBatchND=function(n,e,o){ce(n.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var i=e.reduce(function(c,d){return c*d}),u=[[0,0]];u.push.apply(u,o);for(var a=1+e.length;a<n.shape.length;++a)u.push([0,0]);var s=n.pad(u),l=yc(s.shape,e,i,!1),h=gc(l.length,e.length,!1),p=vc(s.shape,e,i,!1);return s.reshape(l).transpose(h).reshape(p)},r.prototype.reduce=function(n,e,o){var i=n.shape[0],u=n.shape[1],a=Qd(u),s=new sC({windowSize:a,inSize:u,batchSize:i},e),l=this.compileAndRun(s,[n],o);return l.shape[1]===1?l:this.reduce(l,e,o)},r.prototype.argReduce=function(n,e,o){o===void 0&&(o=null);var i=n.shape[0],u=n.shape[1];o!=null&&(i=o.shape[0],u=o.shape[1]);var a=Qd(u),s=new $E({windowSize:a,inSize:u,batchSize:i},e,o==null),l=[n];o!=null&&l.push(o);var h=this.compileAndRun(s,l,"int32");return h.shape[1]===1?h:this.argReduce(n,e,h)},r.prototype.argReducePacked=function(n,e,o){o===void 0&&(o=null);var i=o!=null?o.shape:n.shape,u=Qd(i[i.length-1]),a=new JE(i,u,e,o==null),s=o==null?[n]:[n,o],l=this.compileAndRun(a,s,"int32");return l.rank===n.rank?this.argReducePacked(n,e,l):l},r.prototype.sum=function(n,e){Tn("sum",e,n.rank);var o=rn(n.shape,e),i=o[0],u=ht(o[1]),a=n.as2D(-1,u),s=Vd(n.dtype);return this.reduce(a,"sum",s).reshape(i)},r.prototype.prod=function(n,e){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.prod(n,e);var o=rn(n.shape,e),i=o[0],u=ht(o[1]),a=n.as2D(-1,u),s=Vd(n.dtype);return this.reduce(a,"prod",s).reshape(i)},r.prototype.unsortedSegmentSum=function(n,e,o){var i=0,u=Ao([i],n.rank),a=n;u!=null&&(a=n.transpose(u),i=Po(1,n.rank)[0]);var s=function(d,f,m){for(var y=[],g=d.length,v=0;v<g;v++)v!==f?y.push(d[v]):y.push(m);return y}(a.shape,i,o),l=ht([a.shape[i]]),h=a.as2D(-1,l),p=Vd(n.dtype),c=this.segOpCompute(h,"unsortedSegmentSum",e,p,o).reshape(s);return u!=null&&(c=c.transpose(Ap(u))),c},r.prototype.segOpCompute=function(n,e,o,i,u){var a=n.shape[0],s=n.shape[1],l=function(c,d){var f,m=!1;for(c<=db?(f=c,m=!0):f=gh(c,Math.floor(Math.sqrt(c)));!m;)f>d||f===c?m=!0:f=gh(c,f+1);return f}(s,u),h=new yC({windowSize:l,inSize:s,batchSize:a,numSegments:u}),p=this.compileAndRun(h,[n,o],i);return p.shape[1]===u?p:(o=mc(0,u).tile([s/l]),this.segOpCompute(p,e,o,i,u))},r.prototype.argMinMaxReduce=function(n,e,o){var i=[e];if(Tn("arg"+o.charAt(0).toUpperCase()+o.slice(1),i,n.rank),!Ue().getBool("WEBGL_PACK_REDUCE")||n.rank<=2){var u=rn(n.shape,i),a=u[0],s=ht(u[1]),l=n.as2D(-1,s);return this.argReduce(l,o).reshape(a)}return this.argReducePacked(n,o)},r.prototype.argMin=function(n,e){return this.argMinMaxReduce(n,e,"min")},r.prototype.argMax=function(n,e){return this.argMinMaxReduce(n,e,"max")},r.prototype.cumsum=function(n,e,o,i){if(e!==n.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(n.rank-1)+" but got axis="+e);var u=new bj(n.shape,o,i);return this.compileAndRun(u,[n])},r.prototype.equal=function(n,e){if(Ue().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,e,`
  return vec4(equal(a, b));
`,"bool");var o=new fr("return float(a == b);",n.shape,e.shape);return this.compileAndRun(o,[n,e],"bool")},r.prototype.notEqual=function(n,e){if(Ue().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,e,`
  return vec4(notEqual(a, b));
`,"bool");var o=new fr("return float(a != b);",n.shape,e.shape);return this.compileAndRun(o,[n,e],"bool")},r.prototype.less=function(n,e){if(this.shouldExecuteOnCPU([n,e]))return this.cpuBackend.less(n,e);if(Ue().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,e,`
  return vec4(lessThan(a, b));
`,"bool");var o=new fr("return float(a < b);",n.shape,e.shape);return this.compileAndRun(o,[n,e],"bool")},r.prototype.lessEqual=function(n,e){if(Ue().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,e,`
  return vec4(lessThanEqual(a, b));
`,"bool");var o=new fr("return float(a <= b);",n.shape,e.shape);return this.compileAndRun(o,[n,e],"bool")},r.prototype.greater=function(n,e){if(this.shouldExecuteOnCPU([n,e]))return this.cpuBackend.greater(n,e);if(Ue().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,e,`
  return vec4(greaterThan(a, b));
`,"bool");var o=new fr("return float(a > b);",n.shape,e.shape);return this.compileAndRun(o,[n,e],"bool")},r.prototype.greaterEqual=function(n,e){if(Ue().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,e,`
  return vec4(greaterThanEqual(a, b));
`,"bool");var o=new fr("return float(a >= b);",n.shape,e.shape);return this.compileAndRun(o,[n,e],"bool")},r.prototype.logicalNot=function(n){var e=new kt(n.shape,"return float(!(x >= 1.0));");return this.compileAndRun(e,[n])},r.prototype.logicalAnd=function(n,e){if(Ue().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,e,`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,"bool");var o=new fr("return float(a >= 1.0 && b >= 1.0);",n.shape,e.shape);return this.compileAndRun(o,[n,e],"bool")},r.prototype.logicalOr=function(n,e){if(Ue().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,e,`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,"bool");var o=new fr("return float(a >= 1.0 || b >= 1.0);",n.shape,e.shape);return this.compileAndRun(o,[n,e],"bool")},r.prototype.select=function(n,e,o){var i=new gC(n.rank,e.shape,e.rank);return this.compileAndRun(i,[n,e,o],qr(e.dtype,o.dtype))},r.prototype.where=function(n){hc("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var e=n.dataSync();return Up(n.shape,e)},r.prototype.topk=function(n,e,o){return _b(n.dataSync(),n.shape,n.dtype,e)},r.prototype.min=function(n,e){Tn("min",e,n.rank);var o=rn(n.shape,e),i=o[0],u=ht(o[1]),a=n.as2D(-1,u);return this.reduce(a,"min",a.dtype).reshape(i)},r.prototype.minimum=function(n,e){if(this.shouldExecuteOnCPU([n,e]))return this.cpuBackend.minimum(n,e);var o=Ue().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Fo(`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,e.shape):new fr(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return min(a, b);
`,n.shape,e.shape);return this.compileAndRun(o,[n,e])},r.prototype.mod=function(n,e){var o=Ue().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Fo(`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,e.shape):new fr(`if (b == 0.0) return NAN;
  return mod(a, b);`,n.shape,e.shape);return this.compileAndRun(o,[n,e])},r.prototype.max=function(n,e){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.max(n,e);Tn("max",e,n.rank);var o=rn(n.shape,e),i=o[0],u=ht(o[1]),a=n.as2D(-1,u);return this.reduce(a,"max",a.dtype).reshape(i)},r.prototype.maximum=function(n,e){if(this.shouldExecuteOnCPU([n,e]))return this.cpuBackend.maximum(n,e);var o=Ue().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Fo(`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,e.shape):new fr(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return max(a, b);
`,n.shape,e.shape);return this.compileAndRun(o,[n,e])},r.prototype.all=function(n,e){Tn("all",e,n.rank);var o=rn(n.shape,e),i=o[0],u=ht(o[1]),a=n.as2D(-1,u);return this.reduce(a,"all",a.dtype).reshape(i)},r.prototype.any=function(n,e){Tn("any",e,n.rank);var o=rn(n.shape,e),i=o[0],u=ht(o[1]),a=n.as2D(-1,u);return this.reduce(a,"any",a.dtype).reshape(i)},r.prototype.realDivide=function(n,e){if(Ue().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,e,`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,"float32",!0);var o=new fr(`
if (a == b) {
  return 1.0;
};
return a / b;`,n.shape,e.shape);return this.compileAndRun(o,[n,e],"float32")},r.prototype.floorDiv=function(n,e){if(Ue().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,e,`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,"int32");var o=new fr(`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,n.shape,e.shape);return this.compileAndRun(o,[n,e],"int32")},r.prototype.add=function(n,e){if(n.dtype==="complex64"&&e.dtype==="complex64")return this.complexSeparableBinaryOp(n,e,Zd);if(this.shouldExecuteOnCPU([n,e]))return this.cpuBackend.add(n,e);var o=qr(n.dtype,e.dtype);if(Ue().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,e,Zd,o);var i=new fr(Zd,n.shape,e.shape);return this.compileAndRun(i,[n,e],o)},r.prototype.packedUnaryOp=function(n,e,o){var i=new Ls(n.shape,e);return this.compileAndRun(i,[n],o)},r.prototype.packedBinaryOp=function(n,e,o,i,u){u===void 0&&(u=!1);var a=new Fo(o,n.shape,e.shape,u);return this.compileAndRun(a,[n,e],i)},r.prototype.complexSeparableBinaryOp=function(n,e,o){var i=this,u=this.texData.get(n.dataId),a=this.texData.get(e.dataId),s=[[u.complexTensors.real,a.complexTensors.real],[u.complexTensors.imag,a.complexTensors.imag]].map(function(c){var d=c[0],f=c[1],m=i.makeComplexComponentTensorInfo(n,d),y=i.makeComplexComponentTensorInfo(e,f),g=new fr(o,n.shape,e.shape);return i.compileAndRun(g,[m,y],qr(d.dtype,f.dtype))}),l=s[0],h=s[1],p=this.complex(l,h);return l.dispose(),h.dispose(),p},r.prototype.makeComplexComponentTensorInfo=function(n,e){return{dataId:e.dataId,dtype:e.dtype,shape:n.shape}},r.prototype.addN=function(n){if(n.length===1)return n[0];if(n.length>Ue().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var e=Math.floor(n.length/2),o=this.addN(n.slice(0,e)),i=this.addN(n.slice(e));return this.addN([o,i])}var u=n.map(function(l){return l.dtype}).reduce(function(l,h){return qr(l,h)}),a=n.map(function(l){return l.shape}),s=Ue().getBool("WEBGL_PACK")?new qE(n[0].shape,a):new HE(n[0].shape,a);return this.compileAndRun(s,n,u)},r.prototype.subtract=function(n,e){if(n.dtype==="complex64"&&e.dtype==="complex64")return this.complexSeparableBinaryOp(n,e,Jd);if(this.shouldExecuteOnCPU([n,e]))return this.cpuBackend.subtract(n,e);var o=qr(n.dtype,e.dtype);if(Ue().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,e,Jd,n.dtype);var i=new fr(Jd,n.shape,e.shape);return this.compileAndRun(i,[n,e],o)},r.prototype.pow=function(n,e){var o=Ue().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Fo(`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,e.shape):new fr(`
if(a < 0.0 && floor(b) < b){
  return NAN;
}
if (b == 0.0) {
  return 1.0;
}
return (round(mod(b, 2.0)) != 1) ?
    pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,n.shape,e.shape),i=qr(n.dtype,e.dtype);return this.compileAndRun(o,[n,e],i)},r.prototype.ceil=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.ceil(n);if(Ue().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,Jg,n.dtype);var e=new kt(n.shape,Jg);return this.compileAndRun(e,[n])},r.prototype.floor=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.floor(n);if(Ue().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,ev,n.dtype);var e=new kt(n.shape,ev);return this.compileAndRun(e,[n])},r.prototype.sign=function(n){var e=new kt(n.shape,`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`);return this.compileAndRun(e,[n])},r.prototype.isNaN=function(n){var e=new kt(n.shape,"return float(isnan(x));");return this.compileAndRun(e,[n],"bool")},r.prototype.isInf=function(n){var e=new kt(n.shape,"return float(isinf(x));");return this.compileAndRun(e,[n],"bool")},r.prototype.isFinite=function(n){var e=new kt(n.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(e,[n],"bool")},r.prototype.round=function(n){var e=new kt(n.shape,`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`);return this.compileAndRun(e,[n])},r.prototype.exp=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.exp(n);if(Ue().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,tv,n.dtype);var e=new kt(n.shape,tv);return this.compileAndRun(e,[n])},r.prototype.expm1=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.expm1(n);if(Ue().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,rv,n.dtype);var e=new kt(n.shape,rv);return this.compileAndRun(e,[n])},r.prototype.softmax=function(n,e){var o=Rr([e],n.shape),i=this.max(n,o),u=En(i.shape,o),a=this.subtract(n,i.reshape(u)),s=this.exp(a),l=this.sum(s,o).reshape(u);return this.realDivide(s,l)},r.prototype.log=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.log(n);if(Ue().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,n.dtype);var e=new kt(n.shape,`if (x < 0.0) return NAN;
  return log(x);`);return this.compileAndRun(e,[n])},r.prototype.log1p=function(n){var e=new kt(n.shape,"return log(1.0 + x);");return this.compileAndRun(e,[n])},r.prototype.sqrt=function(n){var e=new kt(n.shape,"return sqrt(x);");return this.compileAndRun(e,[n])},r.prototype.rsqrt=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.rsqrt(n);var e=new kt(n.shape,"return inversesqrt(x);");return this.compileAndRun(e,[n])},r.prototype.reciprocal=function(n){var e=new kt(n.shape,"return 1.0 / x;");return this.compileAndRun(e,[n])},r.prototype.relu=function(n){var e;return e=Ue().getBool("WEBGL_PACK")?new Ls(n.shape,Ib):new kt(n.shape,Tb),this.compileAndRun(e,[n])},r.prototype.relu6=function(n){var e;return e=Ue().getBool("WEBGL_PACK")?new Ls(n.shape,Ab):new kt(n.shape,Mb),this.compileAndRun(e,[n])},r.prototype.prelu=function(n,e){var o=Ue().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Fo(kb,n.shape,e.shape):new fr(Cb,n.shape,e.shape);return this.compileAndRun(o,[n,e])},r.prototype.elu=function(n){if(Ue().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,Pb,n.dtype);var e=new kt(n.shape,Rb);return this.compileAndRun(e,[n])},r.prototype.eluDer=function(n,e){var o=Ue().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Fo(`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,n.shape,e.shape):new fr("return (b >= 1.0) ? a : a * (b + 1.0);",n.shape,e.shape);return this.compileAndRun(o,[n,e])},r.prototype.selu=function(n){var e=new kt(n.shape,CC);return this.compileAndRun(e,[n])},r.prototype.int=function(n){var e=new kt(n.shape,"return float(int(x));");return this.compileAndRun(e,[n],"int32")},r.prototype.clip=function(n,e,o){var i,u=(i=Ue().getBool("WEBGL_PACK_CLIP")?new sj(n.shape):new aj(n.shape)).getCustomSetupFunc(e,o);return this.compileAndRun(i,[n],null,u)},r.prototype.abs=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.abs(n);if(Ue().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,Qg,n.dtype);var e=new kt(n.shape,Qg);return this.compileAndRun(e,[n])},r.prototype.complexAbs=function(n){var e=this.texData.get(n.dataId),o=new uj(n.shape),i=[this.makeComplexComponentTensorInfo(n,e.complexTensors.real),this.makeComplexComponentTensorInfo(n,e.complexTensors.imag)];return this.compileAndRun(o,i)},r.prototype.sigmoid=function(n){var e=new kt(n.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(e,[n])},r.prototype.softplus=function(n){var e=new kt(n.shape,`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`);return this.compileAndRun(e,[n])},r.prototype.sin=function(n){var e=new kt(n.shape,kC);return this.compileAndRun(e,[n])},r.prototype.cos=function(n){var e=new kt(n.shape,TC);return this.compileAndRun(e,[n])},r.prototype.tan=function(n){var e=new kt(n.shape,"return tan(x);");return this.compileAndRun(e,[n])},r.prototype.asin=function(n){var e=new kt(n.shape,MC);return this.compileAndRun(e,[n])},r.prototype.acos=function(n){var e=new kt(n.shape,RC);return this.compileAndRun(e,[n])},r.prototype.atan=function(n){var e=new kt(n.shape,IC);return this.compileAndRun(e,[n])},r.prototype.atan2=function(n,e){var o=Ue().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Fo(`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,e.shape):new fr(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return atan(a, b);
`,n.shape,e.shape);return this.compileAndRun(o,[n,e])},r.prototype.sinh=function(n){var e=new kt(n.shape,`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`);return this.compileAndRun(e,[n])},r.prototype.cosh=function(n){var e=new kt(n.shape,`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`);return this.compileAndRun(e,[n])},r.prototype.tanh=function(n){var e=new kt(n.shape,`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`);return this.compileAndRun(e,[n])},r.prototype.asinh=function(n){var e=new kt(n.shape,AC);return this.compileAndRun(e,[n])},r.prototype.acosh=function(n){var e=new kt(n.shape,PC);return this.compileAndRun(e,[n])},r.prototype.atanh=function(n){var e=new kt(n.shape,DC);return this.compileAndRun(e,[n])},r.prototype.erf=function(n){var e=new kt(n.shape,`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = 0.3275911;
  float a1 = 0.254829592;
  float a2 = -0.284496736;
  float a3 = 1.421413741;
  float a4 = -1.453152027;
  float a5 = 1.061405429;

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`);return this.compileAndRun(e,[n])},r.prototype.step=function(n,e){var o=new kt(n.shape,function(i){return i===void 0&&(i=0),lo+`
    return x > 0.0 ? 1.0 : float(`+i+`);
  `}(e));return this.compileAndRun(o,[n])},r.prototype.conv2dByMatMul=function(n,e,o,i,u,a){var s=n.shape,l=this.texData.get(n.dataId),h=o.inChannels,p=s[0]*s[1]*s[2],c=o.outChannels,d=o.dataFormat==="channelsLast",f=(p===1||c===1)&&h>1e3,m=s[2]%2!=0&&!!l.isPacked;if(f||!Ue().getBool("WEBGL_LAZILY_UNPACK")||!Ue().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!m){var y=d?s[0]*s[1]*s[2]:s[0]*s[2]*s[3],g=this.reshape(n,[1,y,o.inChannels]),v=this.reshape(e,[1,o.inChannels,o.outChannels]);return this.reshape(this.fusedBatchMatMul({a:g,b:v,transposeA:!1,transposeB:!1,bias:i,activation:u,preluActivationWeights:a}),o.outShape)}var b=d?s[0]*s[1]*(s[2]+1):s[0]*s[2]*(s[3]+1),w={dataId:n.dataId,shape:[1,b,o.inChannels],dtype:n.dtype},_=l.shape;l.shape=l.shape.slice(),l.shape[l.shape.length-2]++,ce(fl(l.shape,w.shape),function(){return"packed reshape "+l.shape+" to "+w.shape+" isn't free"});var j=this.reshape(e,[1,o.inChannels,o.outChannels]),E=this.fusedBatchMatMul({a:w,b:j,transposeA:!1,transposeB:!1,bias:i,activation:u,preluActivationWeights:a}),T=this.texData.get(E.dataId);return ce(T.isPacked,function(){return"batchMatMul result is expected to be packed"}),l.shape=_,T.shape=o.outShape,Se.makeTensorFromDataId(E.dataId,o.outShape,E.dtype)},r.prototype.conv2dWithIm2Row=function(n,e,o,i,u,a){var s=o.filterWidth,l=o.filterHeight,h=o.inChannels,p=o.outWidth,c=o.outHeight,d=o.dataFormat==="channelsLast",f=s*l*h,m=c*p,y=[f,m],g=n.squeeze([0]),v=e.reshape([1,f,-1]),b=new Kj(y,g.shape,o),w=this.compileAndRun(b,[g]).reshape([1,y[0],y[1]]),_=i!=null,j=a!=null,E=u?yl(u,!0):null,T=new ef(w.shape,[1,m,o.outChannels],!0,!1,_,E,j),R=[w,v];i&&R.push(i),j&&R.push(a);var M=this.compileAndRun(T,R);return d?M.reshape([1,c,p,o.outChannels]):M.reshape([1,o.outChannels,c,p])},r.prototype.fusedConv2d=function(n){var e=n.input,o=n.filter,i=n.convInfo,u=n.bias,a=n.activation,s=n.preluActivationWeights;if(i.filterHeight===1&&i.filterWidth===1&&i.dilationHeight===1&&i.dilationWidth===1&&i.strideHeight===1&&i.strideWidth===1&&(i.padInfo.type==="SAME"||i.padInfo.type==="VALID"))return this.conv2dByMatMul(e,o,i,u,a,s);if(Ue().getBool("WEBGL_CONV_IM2COL")&&e.shape[0]===1)return this.conv2dWithIm2Row(e,o,i,u,a,s);var l=u!=null,h=s!=null,p=a?yl(a,!1):null,c=new zg(i,l,p,h),d=[e,o];return u&&d.push(u),s&&d.push(s),this.compileAndRun(c,d)},r.prototype.conv2d=function(n,e,o){if(o.filterHeight===1&&o.filterWidth===1&&o.dilationHeight===1&&o.dilationWidth===1&&o.strideHeight===1&&o.strideWidth===1&&(o.padInfo.type==="SAME"||o.padInfo.type==="VALID"))return this.conv2dByMatMul(n,e,o);if(Ue().getBool("WEBGL_CONV_IM2COL")&&n.shape[0]===1)return this.conv2dWithIm2Row(n,e,o);var i=new zg(o);return this.compileAndRun(i,[n,e])},r.prototype.conv2dDerInput=function(n,e,o){var i=new fj(o);return this.compileAndRun(i,[n,e])},r.prototype.conv2dDerFilter=function(n,e,o){var i=new dj(o);return this.compileAndRun(i,[n,e])},r.prototype.fusedDepthwiseConv2D=function(n){var e,o=n.input,i=n.filter,u=n.convInfo,a=n.bias,s=n.activation,l=n.preluActivationWeights,h=Ue().getBool("WEBGL_PACK_DEPTHWISECONV")&&u.strideWidth<=2&&u.outChannels/u.inChannels==1,p=s?yl(s,h):null,c=[o,i],d=a!=null,f=l!=null;return d&&c.push(a),f&&c.push(l),h?(e=new Wg(u,d,p,f),this.compileAndRun(e,c)):(e=new Vg(u,d,p,f),this.compileAndRun(e,c))},r.prototype.depthwiseConv2D=function(n,e,o){var i;return Ue().getBool("WEBGL_PACK_DEPTHWISECONV")&&o.strideWidth<=2&&o.outChannels/o.inChannels==1?(i=new Wg(o),this.compileAndRun(i,[n,e])):(i=new Vg(o),this.compileAndRun(i,[n,e]))},r.prototype.depthwiseConv2DDerInput=function(n,e,o){var i=new yj(o);return this.compileAndRun(i,[n,e])},r.prototype.depthwiseConv2DDerFilter=function(n,e,o){var i=new mj(o);return this.compileAndRun(i,[n,e])},r.prototype.conv3d=function(n,e,o){var i=new gj(o);return this.compileAndRun(i,[n,e])},r.prototype.conv3dDerInput=function(n,e,o){var i=new pj(o);return this.compileAndRun(i,[n,e])},r.prototype.conv3dDerFilter=function(n,e,o){var i=new hj(o);return this.compileAndRun(i,[n,e])},r.prototype.maxPool=function(n,e){var o=new tf(e,"max",!1);return this.compileAndRun(o,[n])},r.prototype.avgPool=function(n,e){var o=new tf(e,"avg",!1);return this.compileAndRun(o,[n],"float32")},r.prototype.maxPoolBackprop=function(n,e,o,i){var u=new tf(i,"max",!0),a=this.compileAndRun(u,[e]),s=new eC(i),l=this.compileAndRun(s,[n,a],e.dtype);return a.dispose(),l},r.prototype.avgPoolBackprop=function(n,e,o){var i=new ej(o);return this.compileAndRun(i,[n],e.dtype)},r.prototype.cast=function(n,e){return gb(n,e,this)},r.prototype.unstack=function(n,e){for(var o=n.shape[e],i=new Array(n.rank-1),u=0,a=0;a<n.rank;a++)a!==e&&(i[u++]=n.shape[a]);var s=new Array(n.rank).fill(0),l=n.shape.slice();l[e]=1;var h=new Array(o);for(a=0;a<h.length;a++)s[e]=a,h[a]=this.slice(n,s,l).reshape(i);return h},r.prototype.avgPool3d=function(n,e){var o=new rf(e,"avg",!1);return this.compileAndRun(o,[n],"float32")},r.prototype.avgPool3dBackprop=function(n,e,o){var i=new tj(o);return this.compileAndRun(i,[n],e.dtype)},r.prototype.maxPool3d=function(n,e){var o=new rf(e,"max",!1);return this.compileAndRun(o,[n],"float32")},r.prototype.maxPool3dBackprop=function(n,e,o,i){var u=new rf(i,"max",!0),a=this.compileAndRun(u,[e]),s=new tC(i),l=this.compileAndRun(s,[n,a],e.dtype);return a.dispose(),l},r.prototype.reshape=function(n,e){var o=this.texData.get(n.dataId);if(o.isPacked&&!fl(n.shape,e)&&(o.texture===null||!fl(o.shape,e))){var i=this.packedReshape(n,e);return Se.makeTensorFromDataId(i.dataId,i.shape,i.dtype)}return jh(n,e)},r.prototype.resizeBilinear=function(n,e,o,i){var u=Ue().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new dC(n.shape,e,o,i):new cC(n.shape,e,o,i);return this.compileAndRun(u,[n],"float32")},r.prototype.resizeBilinearBackprop=function(n,e,o){var i=new lC(n,e,o);return this.compileAndRun(i,[n])},r.prototype.resizeNearestNeighbor=function(n,e,o,i){var u=new hC(n.shape,e,o,i);return this.compileAndRun(u,[n])},r.prototype.resizeNearestNeighborBackprop=function(n,e,o){var i=new fC(n,e,o);return this.compileAndRun(i,[n])},r.prototype.multinomial=function(n,e,o,i){var u=e?n:Qo(n),a=u.shape[0],s=u.shape[1],l=new rC(a,s,o),h=l.getCustomSetupFunc(i);return this.compileAndRun(l,[u],"int32",h)},r.prototype.oneHot=function(n,e,o,i){var u=new nC(n.size,e,o,i);return this.compileAndRun(u,[n])},r.prototype.diag=function(n){var e=new Sj(n.size);return this.compileAndRun(e,[n])},r.prototype.nonMaxSuppression=function(n,e,o,i,u){return hc("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),Fp(n.dataSync(),e.dataSync(),o,i,u)},r.prototype.cropAndResize=function(n,e,o,i,u,a){var s=new vj(n.shape,e.shape,i,u,a);return this.compileAndRun(s,[n,e,o],"float32")},r.prototype.depthToSpace=function(n,e,o){ce(e>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+e});var i=n.shape[0],u=o==="NHWC"?n.shape[1]:n.shape[2],a=o==="NHWC"?n.shape[2]:n.shape[3],s=o==="NHWC"?n.shape[3]:n.shape[1],l=u*e,h=a*e,p=s/(e*e),c=new _j(o==="NHWC"?[i,l,h,p]:[i,p,l,h],e,o);return this.compileAndRun(c,[n])},r.prototype.split=function(n,e,o){return xb(n,e,o)},r.prototype.scatterND=function(n,e,o){var i=bc(0,n,o),u=i.sliceRank,a=i.numUpdates,s=i.sliceSize,l=i.strides,h=i.outputSize,p=[h/s,s],c=n.reshape([a,u]),d=e.reshape([a,s]);if(h===0)return jh($r([]),o);var f=ot(0),m=new Xg(a,u,c.rank,d.rank,l,p);return this.compileAndRun(m,[d,c,f]).reshape(o)},r.prototype.sparseToDense=function(n,e,o,i){var u=bc(0,n,o),a=u.sliceRank,s=u.numUpdates,l=u.strides,h=u.outputSize,p=new Xg(s,a,n.rank,e.rank,l,[h,1]);return this.compileAndRun(p,[e,n,i]).reshape(o)},r.prototype.fft=function(n){return this.fftImpl(n,!1)},r.prototype.ifft=function(n){return this.fftImpl(n,!0)},r.prototype.fftImpl=function(n,e){var o=this.texData.get(n.dataId),i=new qg(Tj,n.shape,e),u=new qg(Mj,n.shape,e),a=[this.makeComplexComponentTensorInfo(n,o.complexTensors.real),this.makeComplexComponentTensorInfo(n,o.complexTensors.imag)],s=this.compileAndRun(i,a),l=this.compileAndRun(u,a),h=this.complex(s,l).as2D(n.shape[0],n.shape[1]);return s.dispose(),l.dispose(),h},r.prototype.gatherND=function(n,e){var o=e.shape,i=o[o.length-1],u=cb(n,e),a=u[0],s=u[1],l=u[2],h=u[3],p=e.reshape([s,i]),c=n.reshape([n.size/l,l]),d=new Aj(i,h,[s,l]);return this.compileAndRun(d,[c,p]).reshape(a)},r.prototype.fill=function(n,e,o){if((o=o||Tu(e))==="string"){var i=lc(o,ht(n));return i.fill(e),Se.makeTensor(i,n,o,this)}var u=new Rj(n,e),a=u.getCustomSetupFunc(e);return this.compileAndRun(u,[],o,a)},r.prototype.onesLike=function(n){if(n.dtype==="string")throw new Error("onesLike is not supported under string dtype");return this.fill(n.shape,1,n.dtype)},r.prototype.zerosLike=function(n){return this.fill(n.shape,n.dtype==="string"?"":0,n.dtype)},r.prototype.linspace=function(n,e,o){return vb(n,e,o)},r.prototype.makeTensorInfo=function(n,e){var o=this.write(null,n,e);return this.texData.get(o).usage=null,{dataId:o,shape:n,dtype:e}},r.prototype.makeOutput=function(n,e){var o=this.makeTensorInfo(n,e).dataId;return Se.makeTensorFromDataId(o,n,e,this)},r.prototype.unpackTensor=function(n){var e=new LC(n.shape);return this.runWebGLProgram(e,[n],n.dtype)},r.prototype.packTensor=function(n){var e=new oC(n.shape);return this.runWebGLProgram(e,[n],n.dtype,null,!0)},r.prototype.packedReshape=function(n,e){var o=[dc(n.shape)].concat(fc(n.shape)),i={dtype:n.dtype,shape:o,dataId:n.dataId},u=[dc(e)].concat(fc(e)),a=new uC(u,o),s=this.runWebGLProgram(a,[i],n.dtype,null,!0);return{dataId:s.dataId,shape:e,dtype:s.dtype}},r.prototype.decode=function(n){var e,o=this.texData.get(n),i=o.isPacked,u=o.shape,a=o.dtype,s=Kd(u);return e=i?new wj(s):new xj(s),{dtype:a,shape:u,dataId:this.runWebGLProgram(e,[{shape:s,dtype:a,dataId:n}],a,null,!0).dataId}},r.prototype.runWebGLProgram=function(n,e,o,i,u){var a=this;u===void 0&&(u=!1);var s=this.makeTensorInfo(n.outputShape,o),l=this.texData.get(s.dataId);if(n.packedOutput&&(l.isPacked=!0),n.outPackingScheme===vu.DENSE){var h=Ks(n.outputShape);l.texShape=h.map(function(b){return 2*b})}if(n.outTexUsage!=null&&(l.usage=n.outTexUsage),ht(s.shape)===0)return l.values=yu(s.dtype,0),s;var p=[],c=e.map(function(b){if(b.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var w=a.texData.get(b.dataId);if(w.texture==null){if(!n.packedInputs&&ht(b.shape)<=Ue().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:b.shape,texData:null,isUniform:!0,uniformValues:w.values};n.packedInputs&&(w.isPacked=!0,w.shape=b.shape)}else if(!!w.isPacked!=!!n.packedInputs)b=w.isPacked?a.unpackTensor(b):a.packTensor(b),p.push(b),w=a.texData.get(b.dataId);else if(w.isPacked&&!fl(w.shape,b.shape)){var _=b,j=b.shape;b.shape=w.shape,b=a.packedReshape(b,j),p.push(b),w=a.texData.get(b.dataId),_.shape=j}return a.uploadToGPU(b.dataId),{shape:b.shape,texData:w,isUniform:!1}});this.uploadToGPU(s.dataId);var d,f={shape:s.shape,texData:l,isUniform:!1},m=function(b,w,_){var j="";w.concat(_).forEach(function(R){var M=R.texData!=null&&R.texData.slice!=null&&R.texData.slice.flatOffset>0,I=R.isUniform?"uniform":R.texData.texShape;j+=R.shape+"_"+I+"_"+M});var E=b.userCode,T=b.constructor.name;return T+="_"+j+"_"+E}(n,c,f),y=this.getAndSaveBinary(m,function(){return function(b,w,_,j){var E=w.userCode,T=_.map(function(B,G){var V={logicalShape:B.shape,texShape:B.isUniform?null:B.texData.texShape,isUniform:B.isUniform,isPacked:!B.isUniform&&B.texData.isPacked,flatOffset:null};return B.texData!=null&&B.texData.slice!=null&&B.texData.slice.flatOffset>0&&(V.flatOffset=B.texData.slice.flatOffset),{name:w.variableNames[G],shapeInfo:V}}),R=T.map(function(B){return B.shapeInfo}),M={logicalShape:j.shape,texShape:j.texData.texShape,isUniform:!1,isPacked:j.texData.isPacked,flatOffset:null},I=XE(T,M,E,w.packedInputs),D=b.createProgram(I),L=null,N=b.getUniformLocation(D,"NAN",!1);Ue().getNumber("WEBGL_VERSION")===1&&(L=b.getUniformLocation(D,"INFINITY",!1));for(var W={},q=0;q<w.variableNames.length;q++){var H=w.variableNames[q];W[H]=b.getUniformLocation(D,H,!1),W["offset"+H]=b.getUniformLocation(D,"offset"+H,!1)}return{program:w,source:I,webGLProgram:D,uniformLocations:W,inShapeInfos:R,outShapeInfo:M,infLoc:L,nanLoc:N}}(a.gpgpu,n,c,f)}),g=this.activeTimers!=null;if(g&&(d=this.startTimer()),function(b,w,_,j,E){$g(w.inShapeInfos,_),$g([w.outShapeInfo],[j]);var T=j.texData.texture,R=j.texData.texShape;j.texData.isPacked?b.setOutputPackedMatrixTexture(T,R[0],R[1]):b.setOutputMatrixTexture(T,R[0],R[1]),b.setProgram(w.webGLProgram),Ue().getNumber("WEBGL_VERSION")===1&&w.infLoc!==null&&b.gl.uniform1f(w.infLoc,1/0),w.nanLoc!==null&&b.gl.uniform1f(w.nanLoc,NaN),_.forEach(function(M,I){var D=w.program.variableNames[I],L=w.uniformLocations[D],N=w.uniformLocations["offset"+D];if(L!=null)if(M.isUniform)if(ht(M.shape)<2)b.gl.uniform1f(L,M.uniformValues[0]);else{var W=M.uniformValues;W instanceof Float32Array||(W=new Float32Array(W)),b.gl.uniform1fv(L,W)}else M.texData.slice!=null&&N!=null&&b.gl.uniform1i(N,M.texData.slice.flatOffset),b.setInputMatrixTexture(M.texData.texture,L,I)}),E!=null&&E(b,w.webGLProgram),b.executeProgram()}(this.gpgpu,y,c,f,i),p.forEach(function(b){return a.disposeData(b.dataId)}),g&&(d=this.endTimer(d),this.activeTimers.push({name:n.constructor.name,query:this.getQueryTime(d)})),!Ue().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&u===!1){var v=this.unpackTensor(s);return this.disposeData(s.dataId),v}return s},r.prototype.compileAndRun=function(n,e,o,i,u){u===void 0&&(u=!1),o=o||e[0].dtype;var a=this.runWebGLProgram(n,e,o,i,u);return Se.makeTensorFromDataId(a.dataId,a.shape,a.dtype)},r.prototype.getAndSaveBinary=function(n,e){return n in this.binaryCache||(this.binaryCache[n]=e()),this.binaryCache[n]},r.prototype.getTextureManager=function(){return this.textureManager},r.prototype.dispose=function(){var n=this;this.disposed||(Ue().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(function(e){n.gpgpu.deleteProgram(n.binaryCache[e].webGLProgram),delete n.binaryCache[e]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},r.prototype.floatPrecision=function(){var n=this;return this.floatPrecisionValue==null&&(this.floatPrecisionValue=it(function(){if(!Ue().get("WEBGL_RENDER_FLOAT32_ENABLED")){var e=Ue().getBool("DEBUG");Ue().set("DEBUG",!1);var o=n.abs(ot(1e-8)).dataSync()[0];if(Ue().set("DEBUG",e),o>0)return 32}return 16})),this.floatPrecisionValue},r.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},r.prototype.uploadToGPU=function(n){var e,o=this.texData.get(n),i=o.shape,u=o.dtype,a=o.values,s=o.texture,l=o.usage,h=o.isPacked;if(s==null){var p,c=this.activeTimers!=null;c&&(p=xo());var d=o.texShape;if(d==null&&(d=WS(i,h),o.texShape=d),a!=null){var f=Kd(i),m=void 0,y=d[1],g=d[0],v=a instanceof Uint8Array;h?(y=(e=Ru(d[0],d[1]))[0],g=e[1],m=new kj(f,[g,y],v)):m=new Cj(f,[g,y],v);var b=this.makeTensorInfo([g,y],u);this.texData.get(b.dataId).usage=v?In.PIXELS:In.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(b.dataId),y,g,a);var w=this.runWebGLProgram(m,[b],u,null,!0),_=this.texData.get(w.dataId);o.texture=_.texture,o.texShape=_.texShape,o.isPacked=_.isPacked,o.usage=_.usage,this.disposeData(b.dataId),this.texData.delete(w.dataId),o.values=null,c&&(this.uploadWaitMs+=xo()-p)}else{var j=this.acquireTexture(d,l,u,h);o.texture=j}}},r.prototype.convertAndCacheOnCPU=function(n,e){var o=this.texData.get(n),i=o.dtype;return this.releaseGPUData(n),e!=null&&(o.values=function(u,a){if(a==="float32"||a==="complex64")return u;if(a==="int32"||a==="bool"){for(var s=a==="int32"?new Int32Array(u.length):new Uint8Array(u.length),l=0;l<s.length;++l)s[l]=Math.round(u[l]);return s}throw new Error("Unknown dtype "+a)}(e,i)),o.values},r.prototype.acquireTexture=function(n,e,o,i){if(this.numBytesInGPU+=this.computeBytes(n,o),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var u=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+u+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(n,e,i)},r.prototype.computeBytes=function(n,e){return n[0]*n[1]*q1(e)},r}(mb);J1()&&Se.registerBackend("webgl",function(){return new FC},2);var BC=xe({square_:function(t){var r=oe(t,"x","square"),n=[r];return Se.runKernelFunc(function(e,o){return o([r]),e.square(r)},{x:r},null,"Square",{},n,[])}}),xu="SquaredDifference",Db=xe({squaredDifference_:function(t,r){var n,e=oe(t,"a","squaredDifference"),o=oe(r,"b","squaredDifference");n=lr(e,o),e=n[0],o=n[1],It(e.shape,o.shape);var i={a:e,b:o},u=[e,o];return Se.runKernelFunc(function(a,s){var l=a.squaredDifference(e,o);return s([e,o]),l},i,function(a,s){var l=s[0],h=s[1],p=ot(2);return{a:function(){return a.mul(l.sub(h).mul(p))},b:function(){return a.mul(h.sub(l).mul(p))}}},xu,{},u,[])}}),UC=xe({abs_:function(t){var r=oe(t,"x","abs");return r.dtype==="complex64"?Se.runKernelFunc(function(n){return n.complexAbs(r)},{$x:r}):Se.runKernelFunc(function(n,e){var o=n.abs(r);return e([r]),o},{x:r},function(n,e){var o=e[0];return{x:function(){return n.mul(o.toFloat().step(-1))}}},"Abs")}}),GC=xe({acos_:function(t){var r=oe(t,"x","acos");return Se.runKernelFunc(function(n,e){var o=n.acos(r);return e([r]),o},{$x:r},function(n,e){var o=e[0];return{$x:function(){return n.divStrict(ot(1).sub(o.toFloat().square()).sqrt()).neg()}}})}}),zC=xe({acosh_:function(t){var r=oe(t,"x","acosh");return Se.runKernelFunc(function(n,e){var o=n.acosh(r);return e([r]),o},{$x:r},function(n,e){var o=e[0];return{$x:function(){return n.divStrict(o.toFloat().square().sub(1).sqrt())}}})}}),VC=xe({asin_:function(t){var r=oe(t,"x","asin");return Se.runKernelFunc(function(n,e){var o=n.asin(r);return e([r]),o},{$x:r},function(n,e){var o=e[0];return{$x:function(){return n.divStrict(ot(1).sub(o.toFloat().square()).sqrt())}}})}}),WC=xe({asinh_:function(t){var r=oe(t,"x","asinh");return Se.runKernelFunc(function(n,e){var o=n.asinh(r);return e([r]),o},{$x:r},function(n,e){var o=e[0];return{$x:function(){return n.divStrict(ot(1).add(o.toFloat().square()).sqrt())}}})}}),HC=xe({atan_:function(t){var r=oe(t,"x","atan");return Se.runKernelFunc(function(n,e){var o=n.atan(r);return e([r]),o},{$x:r},function(n,e){var o=e[0];return{$x:function(){return n.div(o.toFloat().square().add(1))}}})}}),qC=xe({atanh_:function(t){var r=oe(t,"x","atanh");return Se.runKernelFunc(function(n,e){var o=n.atanh(r);return e([r]),o},{$x:r},function(n,e){var o=e[0];return{$x:function(){return n.div(ot(1).sub(o.toFloat().square()))}}})}}),$C=xe({ceil_:function(t){var r=oe(t,"x","ceil");return Se.runKernelFunc(function(n){return n.ceil(r)},{$x:r},function(n){return{$x:function(){return Dt(n)}}})}}),Wp=xe({clipByValue_:function(t,r,n){var e=oe(t,"x","clipByValue");ce(r<=n,function(){return"Error in clip: min ("+r+") must be less than or equal to max ("+n+")."});var o=[e],i={min:r,max:n};return Se.runKernelFunc(function(u,a){var s=u.clip(e,r,n);return a([e]),s},{x:e},function(u,a){var s=a[0];return{x:function(){return u.where(s.greaterEqual(r).logicalAnd(s.lessEqual(n)),Dt(u))}}},"ClipByValue",i,o)}}),XC=xe({cos_:function(t){var r=oe(t,"x","cos"),n=[r];return Se.runKernelFunc(function(e,o){var i=e.cos(r);return o([r]),i},{x:r},function(e,o){var i=o[0];return{x:function(){return i.toFloat().sin().neg().mul(e)}}},"Cos",{},n)}}),YC=xe({cosh_:function(t){var r=oe(t,"x","cosh");return Se.runKernelFunc(function(n,e){var o=n.cosh(r);return e([r]),o},{$x:r},function(n,e){var o=e[0];return{$x:function(){return o.toFloat().sinh().mulStrict(n)}}})}}),KC=xe({erf_:function(t){var r=oe(t,"x","erf");return ce(r.dtype==="int32"||r.dtype==="float32",function(){return"Input dtype must be `int32` or `float32`."}),r.dtype==="int32"&&(r=r.toFloat()),Se.runKernelFunc(function(n,e){var o=n.erf(r);return e([r]),o},{$x:r},function(n,e){var o=e[0];return{$x:function(){return n.mul(o.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}}),kh=xe({exp_:function(t){var r=oe(t,"x","exp");return Se.runKernelFunc(function(n,e){var o=n.exp(r);return e([o]),o},{x:r},function(n,e){return{x:function(){return n.mulStrict(e[0])}}},"Exp",{},[],[!0])}}),QC=xe({expm1_:function(t){var r=oe(t,"x","expm1");return Se.runKernelFunc(function(n,e){var o=n.expm1(r);return e([r]),o},{$x:r},function(n,e){var o=e[0];return{$x:function(){return n.mul(o.exp())}}})}}),ZC=xe({floor_:function(t){var r=oe(t,"x","floor");return Se.runKernelFunc(function(n){return n.floor(r)},{$x:r},function(n){return{$x:function(){return Dt(n)}}})}}),JC=xe({log_:function(t){var r=oe(t,"x","log"),n=[r];return Se.runKernelFunc(function(e,o){var i=e.log(r);return o([r]),i},{x:r},function(e,o){var i=o[0];return{x:function(){return e.div(i.toFloat())}}},"Log",{},n)}}),ek=xe({log1p_:function(t){var r=oe(t,"x","log1p");return Se.runKernelFunc(function(n,e){var o=n.log1p(r);return e([r]),o},{$x:r},function(n,e){var o=e[0];return{$x:function(){return n.div(o.add(1))}}})}}),tk=xe({logSigmoid_:function(t){var r=oe(t,"x","logSigmoid");return Se.runKernelFunc(function(n,e){var o=n.softplus(r.neg()).neg();return e([r]),o},{$x:r},function(n,e){var o=e[0];return{$x:function(){return n.mul(o.neg().sigmoid())}}})}}),Sc=xe({neg_:function(t){var r=oe(t,"x","neg"),n=[r];return Se.runKernelFunc(function(e){return e.neg(r)},{x:r},function(e){return{x:function(){return e.neg()}}},"Neg",{},n)}}),rk=xe({reciprocal_:function(t){var r=oe(t,"x","reciprocal");return Se.runKernelFunc(function(n,e){var o=n.reciprocal(r);return e([r]),o},{$x:r},function(n,e){var o=e[0];return{$x:function(){return n.div(o.square().neg())}}})}}),nk=xe({round_:function(t){var r=oe(t,"x","round");return Se.runKernelFunc(function(n){return n.round(r)},{$x:r},function(n){return{$x:function(){return Dt(n)}}})}}),Ob=xe({rsqrt_:function(t){var r=oe(t,"x","rsqrt"),n=[r];return Se.runKernelFunc(function(e,o){var i=e.rsqrt(r);return o([r]),i},{x:r},function(e,o){var i=o[0];return{x:function(){return e.div(i.pow(1.5).mul(2)).neg()}}},"Rsqrt",{},n)}}),Lb=xe({sigmoid_:function(t){var r=oe(t,"x","sigmoid");return Se.runKernelFunc(function(n,e){var o=n.sigmoid(r);return e([o]),o},{x:r},function(n,e){var o=e[0];return{x:function(){return n.mul(o.mul(ot(1).sub(o)))}}},"Sigmoid")}}),ok=xe({sign_:function(t){var r=oe(t,"x","sign");return Se.runKernelFunc(function(n){return n.sign(r)},{$x:r},function(n){return{$x:function(){return Dt(n)}}})}}),ik=xe({isNaN_:function(t){var r=oe(t,"x","isNaN");return Se.runKernelFunc(function(n){return n.isNaN(r)},{$x:r},function(n){return{$x:function(){return Dt(n)}}})}}),ak=xe({isInf_:function(t){var r=oe(t,"x","isInf");return Se.runKernelFunc(function(n){return n.isInf(r)},{$x:r},function(n){return{$x:function(){return Dt(n)}}})}}),sk=xe({isFinite_:function(t){var r=oe(t,"x","isFinite");return Se.runKernelFunc(function(n){return n.isFinite(r)},{$x:r},function(n){return{$x:function(){return Dt(n)}}})}}),uk=xe({sin_:function(t){var r=oe(t,"x","sin"),n=[r];return Se.runKernelFunc(function(e,o){var i=e.sin(r);return o([r]),i},{x:r},function(e,o){var i=o[0];return{x:function(){return i.toFloat().cos().mul(e)}}},"Sin",{},n)}}),lk=xe({sinh_:function(t){var r=oe(t,"x","sinh");return Se.runKernelFunc(function(n,e){var o=n.sinh(r);return e([r]),o},{$x:r},function(n,e){var o=e[0];return{$x:function(){return o.toFloat().cosh().mulStrict(n)}}})}}),ck=xe({softplus_:function(t){var r=oe(t,"x","softplus");return Se.runKernelFunc(function(n,e){var o=n.softplus(r);return e([r]),o},{$x:r},function(n,e){var o=e[0];return{$x:function(){return n.mul(o.sigmoid())}}})}}),dk=xe({sqrt_:function(t){var r=oe(t,"x","sqrt");return Se.runKernelFunc(function(n,e){var o=n.sqrt(r);return e([r]),o},{$x:r},function(n,e){var o=e[0];return{$x:function(){return n.div(o.toFloat().sqrt().mul(2))}}})}}),fk=xe({step_:function(t,r){r===void 0&&(r=0);var n=oe(t,"x","step");return Se.runKernelFunc(function(e){return e.step(n,r)},{$x:n},function(e){return{$x:function(){return Dt(e)}}})}}),hk=xe({tan_:function(t){var r=oe(t,"x","tan");return Se.runKernelFunc(function(n,e){var o=n.tan(r);return e([r]),o},{$x:r},function(n,e){var o=e[0];return{$x:function(){return n.div(o.cos().square())}}})}}),pk=xe({tanh_:function(t){var r=oe(t,"x","tanh");return Se.runKernelFunc(function(n,e){var o=n.tanh(r);return e([o]),o},{x:r},function(n,e){var o=e[0];return{x:function(){return ot(1).sub(o.square()).mulStrict(n)}}},"Tanh",{},null,[!0])}});function Nb(t,r,n,e,o,i){var u,a,s=oe(t,"x","batchNorm"),l=oe(r,"mean","batchNorm"),h=oe(n,"variance","batchNorm");return o!=null&&(u=oe(o,"scale","batchNorm")),e!=null&&(a=oe(e,"offset","batchNorm")),ce(s.rank===2,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+s.rank+"."}),ce(l.rank===2||l.rank===1,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+l.rank+"."}),ce(h.rank===2||h.rank===1,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+h.rank+"."}),u!=null&&ce(u.rank===2||u.rank===1,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+u.rank+"."}),a!=null&&ce(a.rank===2||a.rank===1,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+a.rank+"."}),Au(s,l,h,a,u,i)}function Fb(t,r,n,e,o,i){var u,a,s=oe(t,"x","batchNorm"),l=oe(r,"mean","batchNorm"),h=oe(n,"variance","batchNorm");return o!=null&&(u=oe(o,"scale","batchNorm")),e!=null&&(a=oe(e,"offset","batchNorm")),ce(s.rank===3,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+s.rank+"."}),ce(l.rank===3||l.rank===1,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+l.rank+"."}),ce(h.rank===3||h.rank===1,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+h.rank+"."}),u!=null&&ce(u.rank===3||u.rank===1,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+u.rank+"."}),a!=null&&ce(a.rank===3||a.rank===1,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+a.rank+"."}),Au(s,l,h,a,u,i)}function Bb(t,r,n,e,o,i){var u,a,s=oe(t,"x","batchNorm"),l=oe(r,"mean","batchNorm"),h=oe(n,"variance","batchNorm");return o!=null&&(u=oe(o,"scale","batchNorm")),e!=null&&(a=oe(e,"offset","batchNorm")),ce(s.rank===4,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+s.rank+"."}),ce(l.rank===4||l.rank===1,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+l.rank+"."}),ce(h.rank===4||h.rank===1,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+h.rank+"."}),u!=null&&ce(u.rank===4||u.rank===1,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+u.rank+"."}),a!=null&&ce(a.rank===4||a.rank===1,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+a.rank+"."}),Au(s,l,h,a,u,i)}function Au(t,r,n,e,o,i){i==null&&(i=.001);var u,a,s,l=oe(t,"x","batchNorm"),h=oe(r,"mean","batchNorm"),p=oe(n,"variance","batchNorm");o!=null&&(u=oe(o,"scale","batchNorm")),e!=null&&(a=oe(e,"offset","batchNorm")),ce(h.rank===p.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),ce(a==null||h.rank===a.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),ce(u==null||h.rank===u.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}),s=l.rank===0||l.rank===1?l.as4D(1,1,1,l.size):l.rank===2?l.as4D(1,1,l.shape[0],l.shape[1]):l.rank===3?l.as4D(1,l.shape[0],l.shape[1],l.shape[2]):l;var c=[l,h,p,u];return Se.runKernelFunc(function(d,f){var m=d.batchNormalization(s,gl(h),gl(p),i,gl(u),gl(a));return f([l,h,p,u]),m},{x:l,mean:h,variance:p,scale:u,offset:a},function(d,f){var m=f,y=m[0],g=m[1],v=m[2],b=m[3],w=b??ot(1),_=Tr(g.shape,s.shape),j=[];if(g.rank===1){for(var E=0;E<s.shape.length-1;++E)j.push(s.shape[E]);j.push(1)}var T=y.sub(g),R=d.mul(w),M=Ob(v.add(ot(i))),I=M.mul(M).mul(M).mul(ot(-.5));return{x:function(){return g.rank===1?d.mul($a(M.as4D(1,1,1,g.shape[0]),j)).mul(w).reshape(y.shape):d.mul(M).mul(w).reshape(y.shape)},mean:function(){var D=M.mul(ot(-1)).mul(R);return g.rank===1&&(D=D.sum(_)),D.reshape(g.shape)},variance:function(){var D=I.mul(T).mul(R);return g.rank===1&&(D=D.sum(_)),D.reshape(g.shape)},scale:function(){var D=T.mul(M),L=d.mul(D);return g.rank===1&&(L=L.sum(_)),L.reshape(g.shape)},offset:function(){var D=d;return g.rank===1&&(D=D.sum(_)),D.reshape(g.shape)}}},"BatchNormalization",{varianceEpsilon:i},c).reshape(l.shape)}function gl(t){return t==null?null:t.rank===0?t.as1D():t.rank===1?t:t.rank===2?t.as4D(1,1,t.shape[0],t.shape[1]):t.rank===3?t.as4D(1,t.shape[0],t.shape[1],t.shape[2]):t}function Kc(){eb("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var mk=xe({batchNormalization2d_:function(t,r,n,e,o,i){return e===void 0&&(e=.001),Kc(),Nb(t,r,n,i,o,e)}}),yk=xe({batchNormalization3d_:function(t,r,n,e,o,i){return e===void 0&&(e=.001),Kc(),Fb(t,r,n,i,o,e)}}),gk=xe({batchNormalization4d_:function(t,r,n,e,o,i){return e===void 0&&(e=.001),Kc(),Bb(t,r,n,i,o,e)}}),vk=xe({batchNormalization_:function(t,r,n,e,o,i){return e===void 0&&(e=.001),Kc(),Au(t,r,n,i,o,e)}}),Ub=xe({batchNorm_:Au}),bk=xe({batchNorm2d_:Nb}),xk=xe({batchNorm3d_:Fb}),wk=xe({batchNorm4d_:Bb}),Qc=xe({logicalAnd_:function(t,r){var n=oe(t,"a","logicalAnd","bool"),e=oe(r,"b","logicalAnd","bool");return It(n.shape,e.shape),Se.runKernelFunc(function(o){return o.logicalAnd(n,e)},{a:n,b:e},null,"LogicalAnd")}}),_k=xe({logicalNot_:function(t){var r=oe(t,"x","logicalNot","bool");return Se.runKernelFunc(function(n){return n.logicalNot(r)},{$x:r})}}),Gb=xe({logicalOr_:function(t,r){var n=oe(t,"a","logicalOr","bool"),e=oe(r,"b","logicalOr","bool");return It(n.shape,e.shape),Se.runKernelFunc(function(o){return o.logicalOr(n,e)},{$a:n,$b:e})}}),Sk=xe({logicalXor_:function(t,r){var n=oe(t,"a","logicalXor","bool"),e=oe(r,"b","logicalXor","bool");return It(n.shape,e.shape),Gb(t,r).logicalAnd(Qc(t,r).logicalNot())}}),ia=xe({where_:function(t,r,n){var e=oe(r,"a","where"),o=oe(n,"b","where"),i=oe(t,"condition","where","bool");return Ut(e.shape,o.shape,"Error in where: "),i.rank===1?ce(i.shape[0]===e.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):Ut(i.shape,o.shape,"Error in where: "),Se.runKernelFunc(function(u,a){var s=u.select(i,e,o);return a([i]),s},{$condition:i,$a:e,$b:o},function(u,a){var s=a[0];return{$condition:function(){return Dt(s).toFloat()},$a:function(){return u.mul(s.cast(u.dtype))},$b:function(){return u.mul(s.logicalNot().cast(u.dtype))}}})}}),zb=function(t){return lt(this,void 0,void 0,function(){var r,n,e;return ct(this,function(o){switch(o.label){case 0:return[4,(r=oe(t,"condition","whereAsync","bool")).data()];case 1:return n=o.sent(),e=Up(r.shape,n),t!==r&&r.dispose(),[2,e]}})})},Mt=xe({add_:function(t,r){var n,e=oe(t,"a","add"),o=oe(r,"b","add");n=lr(e,o),e=n[0],o=n[1];var i=It(e.shape,o.shape);return Se.runKernelFunc(function(u){return u.add(e,o)},{a:e,b:o},function(u){return{a:function(){var a=u,s=Tr(e.shape,i);return s.length>0&&(a=a.sum(s)),a.reshape(e.shape)},b:function(){var a=u,s=Tr(o.shape,i);return s.length>0&&(a=a.sum(s)),a.reshape(o.shape)}}},"Add")}}),Ek=xe({addN_:function(t){ce(Array.isArray(t),function(){return"The argument passed to tf.addN() must be a list of tensors"}),ce(t.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+t.length});var r=t.map(function(o,i){return oe(o,"tensors"+i,"addN")}),n=r[0];r.forEach(function(o){if(o.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),r.forEach(function(o){if(!Br(o.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var e=r;return Se.runKernelFunc(function(o){return o.addN(r)},e,function(o){var i={};return r.forEach(function(u,a){i[a]=function(){return o.clone()}}),i},"AddN")}}),jk=xe({addStrict_:function(t,r){var n=oe(t,"a","addStrict"),e=oe(r,"b","addStrict");return Ut(n.shape,e.shape,"Error in addStrict: "),n.add(e)}}),Ck=xe({atan2_:function(t,r){var n,e=oe(t,"a","atan2"),o=oe(r,"b","atan2");n=lr(e,o),e=n[0],o=n[1];var i=It(e.shape,o.shape);return Se.runKernelFunc(function(u,a){var s=u.atan2(e,o);return a([e,o]),s},{$a:e,$b:o},function(u,a){var s=a[0],l=a[1];return{$a:function(){var h=Mt(s.square(),l.square()),p=u.mul(l.div(h)),c=Tr(s.shape,i);return c.length>0&&(p=p.sum(c)),p.reshape(s.shape)},$b:function(){var h=Mt(s.square(),l.square()),p=Sc(u.mul(s.div(h))),c=Tr(l.shape,i);return c.length>0&&(p=p.sum(c)),p.reshape(l.shape)}}})}}),ro=xe({div_:function(t,r){var n,e=oe(t,"a","div"),o=oe(r,"b","div");if(n=lr(e,o),e=n[0],o=n[1],e.dtype==="int32"&&o.dtype==="int32")return Vb(e,o);var i=It(e.shape,o.shape);return Se.runKernelFunc(function(u,a){var s=u.realDivide(e,o);return a([e,o]),s},{a:e,b:o},function(u,a){var s=a[0],l=a[1];return{a:function(){var h=u.div(l.toFloat()),p=Tr(s.shape,i);return p.length>0?h.sum(p).reshape(s.shape):h},b:function(){var h=u.mul(s.toFloat()),p=Tr(l.shape,i);p.length>0&&(h=h.sum(p).reshape(l.shape));var c=l.square();return h.div(c.toFloat()).neg()}}},"Div")}}),kk=xe({divNoNan_:function(t,r){var n,e=oe(t,"a","div"),o=oe(r,"b","div");e=(n=lr(e,o))[0],o=n[1];var i=ro(e,o),u=Dt(i),a=o.equal(u);return ia(a,u,i)}}),Tk=xe({divStrict_:function(t,r){var n=oe(t,"a","div"),e=oe(r,"b","div");return Ut(n.shape,e.shape,"Error in divideStrict: "),n.div(e)}}),Vb=xe({floorDiv_:function(t,r){var n,e=oe(t,"a","floorDiv"),o=oe(r,"b","floorDiv");n=lr(e,o),e=n[0],o=n[1];var i=It(e.shape,o.shape);return Se.runKernelFunc(function(u,a){var s=u.floorDiv(e,o);return a([e,o]),s},{a:e,b:o},function(u,a){var s=a[0],l=a[1];return{a:function(){var h=u.div(l.toFloat()),p=Tr(s.shape,i);return p.length>0?h.sum(p).reshape(s.shape):h},b:function(){var h=u.mul(s.toFloat()),p=Tr(l.shape,i);p.length>0&&(h=h.sum(p).reshape(l.shape));var c=l.square();return h.div(c.toFloat()).neg()}}},"FloorDiv")}}),Hp=xe({maximum_:function(t,r){var n,e=oe(t,"a","maximum"),o=oe(r,"b","maximum");return n=lr(e,o),e=n[0],o=n[1],e.dtype==="bool"&&(e=e.toInt(),o=o.toInt()),It(e.shape,o.shape),Se.runKernelFunc(function(i,u){var a=i.maximum(e,o);return u([e,o]),a},{a:e,b:o},function(i,u){var a=u[0],s=u[1];return{a:function(){return i.mul(a.greaterEqual(s).toFloat())},b:function(){return i.mul(a.less(s).toFloat())}}},"Maximum")}}),Mk=xe({maximumStrict_:function(t,r){var n=oe(t,"a","maximumStrict"),e=oe(r,"b","maximumStrict");return Ut(n.shape,e.shape,"Error in maximumStrict: "),n.maximum(e)}}),Wb=xe({minimum_:function(t,r){var n,e=oe(t,"a","minimum"),o=oe(r,"b","minimum");return n=lr(e,o),e=n[0],o=n[1],e.dtype==="bool"&&(e=e.toInt(),o=o.toInt()),It(e.shape,o.shape),Se.runKernelFunc(function(i,u){var a=i.minimum(e,o);return u([e,o]),a},{a:e,b:o},function(i,u){var a=u[0],s=u[1];return{a:function(){return i.mul(a.lessEqual(s).toFloat())},b:function(){return i.mul(a.greater(s).toFloat())}}},"Minimum")}}),Rk=xe({minimumStrict_:function(t,r){var n=oe(t,"a","minimumStrict"),e=oe(r,"b","minimumStrict");return Ut(n.shape,e.shape,"Error in minimumStrict: "),n.minimum(e)}}),Ik=xe({mod_:function(t,r){var n,e=oe(t,"a","mod"),o=oe(r,"b","mod");n=lr(e,o),e=n[0],o=n[1];var i=It(e.shape,o.shape);return Se.runKernelFunc(function(u,a){var s=u.mod(e,o);return a([e,o]),s},{$a:e,$b:o},function(u,a){var s=a[0],l=a[1];return{$a:function(){var h=Tr(s.shape,i);return h.length>0?u.sum(h).reshape(s.shape):u},$b:function(){var h=u.mul(s.div(l).floor().neg()),p=Tr(l.shape,i);return p.length>0?h.sum(p).reshape(l.shape):h}}})}}),Ak=xe({modStrict_:function(t,r){var n=oe(t,"a","modStrict"),e=oe(r,"b","modStrict");return Ut(n.shape,e.shape,"Error in modStrict: "),n.mod(e)}}),un=xe({mul_:function(t,r){var n,e=oe(t,"a","mul"),o=oe(r,"b","mul");n=lr(e,o),e=n[0],o=n[1];var i=It(e.shape,o.shape);return Se.runKernelFunc(function(u,a){var s=u.multiply(e,o);return a([e,o]),s},{a:e,b:o},function(u,a){var s=a[0],l=a[1];return{a:function(){var h=u.mul(l.toFloat()),p=Tr(s.shape,i);return p.length>0?h.sum(p).reshape(s.shape):h},b:function(){var h=u.mul(s.toFloat()),p=Tr(l.shape,i);return p.length>0?h.sum(p).reshape(l.shape):h}}},"Mul")}}),Pk=xe({mulStrict_:function(t,r){var n=oe(t,"a","mul"),e=oe(r,"b","mul");return Ut(n.shape,e.shape,"Error in multiplyStrict: "),n.mul(e)}}),Ec=xe({pow_:function(t,r){var n,e=oe(t,"base","pow"),o=oe(r,"exp","pow");n=lr(e,o),e=n[0],o=n[1];var i=It(e.shape,o.shape),u=[e,o];return Se.runKernelFunc(function(a,s){var l=a.pow(e,o);return s([e,o,l]),l},{a:e,b:o},function(a,s){var l=s[0],h=s[1],p=s[2];return{a:function(){var c=h.toFloat(),d=a.mul(c.mul(l.pow(c.sub(ot(1))))),f=Tr(l.shape,i);return f.length>0&&(d=d.sum(f)),d.reshape(l.shape)},b:function(){var c=l.greater(0),d=l.log().where(c,Dt(l)),f=a.mul(p.mul(d)),m=Tr(h.shape,i);return m.length>0&&(f=f.sum(m)),f.reshape(h.shape)}}},"Pow",{},u,[!0])}}),Dk=xe({powStrict_:function(t,r){return Ut(t.shape,r.shape,"Error in powStrict: "),t.pow(r)}}),Ok=xe({squaredDifferenceStrict_:function(t,r){var n=oe(t,"a","squaredDifferenceStrict"),e=oe(r,"b","squaredDifferenceStrict");return Ut(n.shape,e.shape,"Error in squaredDifferenceStrict: "),n.squaredDifference(e)}}),Mr=xe({sub_:function(t,r){var n,e=oe(t,"a","sub"),o=oe(r,"b","sub");n=lr(e,o),e=n[0],o=n[1];var i=It(e.shape,o.shape);return Se.runKernelFunc(function(u){return u.subtract(e,o)},{a:e,b:o},function(u){return{a:function(){var a=u,s=Tr(e.shape,i);return s.length>0&&(a=a.sum(s)),a.reshape(e.shape)},b:function(){var a=u,s=Tr(o.shape,i);return s.length>0&&(a=a.sum(s)),a.neg().reshape(o.shape)}}},"Sub")}}),Lk=xe({subStrict_:function(t,r){var n=oe(t,"a","subStrict"),e=oe(r,"b","subStrict");return Ut(n.shape,e.shape,"Error in subStrict: "),n.sub(e)}}),Hb=xe({equal_:function(t,r){var n,e=oe(t,"a","equal"),o=oe(r,"b","equal");return n=lr(e,o),e=n[0],o=n[1],It(e.shape,o.shape),Se.runKernelFunc(function(i){return i.equal(e,o)},{$a:e,$b:o})}}),Nk=xe({equalStrict_:function(t,r){var n=oe(t,"a","equalStrict"),e=oe(r,"b","equalStrict");return Ut(n.shape,e.shape,"Error in equalStrict: "),n.equal(e)}}),Fk=xe({greater_:function(t,r){var n,e=oe(t,"a","greater"),o=oe(r,"b","greater");return n=lr(e,o),e=n[0],o=n[1],It(e.shape,o.shape),Se.runKernelFunc(function(i){return i.greater(e,o)},{a:e,b:o},null,"Greater")}}),qb=xe({greaterEqual_:function(t,r){var n,e=oe(t,"a","greaterEqual"),o=oe(r,"b","greaterEqual");return n=lr(e,o),e=n[0],o=n[1],It(e.shape,o.shape),Se.runKernelFunc(function(i,u){var a=i.greaterEqual(e,o);return u([e,o]),a},{a:e,b:o},function(i,u){var a=u[0],s=u[1];return{a:function(){return Dt(a)},b:function(){return Dt(s)}}},"GreaterEqual")}}),Bk=xe({greaterEqualStrict_:function(t,r){var n=oe(t,"a","greaterEqualStrict"),e=oe(r,"b","greaterEqualStrict");return Ut(n.shape,e.shape,"Error in greaterEqualStrict: "),n.greaterEqual(e)}}),Uk=xe({greaterStrict_:function(t,r){var n=oe(t,"a","greaterStrict"),e=oe(r,"b","greaterStrict");return Ut(n.shape,e.shape,"Error in greaterStrict: "),n.greater(e)}}),Gk=xe({less_:function(t,r){var n,e=oe(t,"a","less"),o=oe(r,"b","less");return n=lr(e,o),e=n[0],o=n[1],It(e.shape,o.shape),Se.runKernelFunc(function(i){return i.less(e,o)},{a:e,b:o},null,"Less")}}),zk=xe({lessEqual_:function(t,r){var n,e=oe(t,"a","lessEqual"),o=oe(r,"b","lessEqual");return n=lr(e,o),e=n[0],o=n[1],It(e.shape,o.shape),Se.runKernelFunc(function(i,u){var a=i.lessEqual(e,o);return u([e,o]),a},{a:e,b:o},null,"LessEqual")}}),Vk=xe({lessEqualStrict_:function(t,r){var n=oe(t,"a","lessEqualStrict"),e=oe(r,"b","lessEqualStrict");return Ut(n.shape,e.shape,"Error in lessEqualStrict: "),n.lessEqual(e)}}),Wk=xe({lessStrict_:function(t,r){var n=oe(t,"a","lessStrict"),e=oe(r,"b","lessStrict");return Ut(n.shape,e.shape,"Error in lessStrict: "),n.less(e)}}),Hk=xe({notEqual_:function(t,r){var n,e=oe(t,"a","notEqual"),o=oe(r,"b","notEqual");return n=lr(e,o),e=n[0],o=n[1],It(e.shape,o.shape),Se.runKernelFunc(function(i){return i.notEqual(e,o)},{a:e,b:o},null,"NotEqual")}}),qk=xe({notEqualStrict_:function(t,r){var n=oe(t,"a","notEqualStrict"),e=oe(r,"b","notEqualStrict");return Ut(n.shape,e.shape,"Error in notEqualStrict: "),n.notEqual(e)}});function nv(t,r){for(var n=[],e=t;e<r;++e)n.push(e);return n}function ov(t){for(var r=[],n=0;n<t.length;++n)for(var e=0;e<t[n].length;++e)r.push(t[n][e]);return r}var qp=xe({gather_:function(t,r,n){n===void 0&&(n=0);var e=oe(t,"x","gather"),o=oe(r,"indices","gather","int32");n=Rr(n,e.shape)[0];var i=function(u,a,s){for(var l=u.shape[s],h=[],p=1,c=1,d=0;d<s;d++)h.push(u.shape[d]),p*=u.shape[d];for(d=0;d<a.rank;d++)h.push(a.shape[d]);for(d=s+1;d<u.rank;d++)h.push(u.shape[d]),c*=u.shape[d];return{batchSize:p,sliceSize:c,dimSize:l,outputShape:h}}(e,o,n);return Se.runKernelFunc(function(u,a){var s=u.gather(e,o.flatten(),n);return a([o]),s},{x:e,indices:o},function(u,a){var s=a[0];return{x:function(){var l=e.shape,h=s.size,p=l.slice(0,n),c=p.length,d=l.slice(n,l.length).slice(1),f=d.length,m=nv(0,c),y=nv(c+1,c+1+f),g=ov([p,[h],d]),v=u.reshape(g),b=s.reshape([h]),w=ov([[c],m,y]),_=v.transpose(w),j=$b(_,b,e.shape[n]),E=Ap(w);return j=j.transpose(E)},indices:function(){return s}}},"Gather",{axis:n}).reshape(i.outputShape)}}),$b=xe({unsortedSegmentSum_:function(t,r,n){var e=oe(t,"x","unsortedSegmentSum"),o=oe(r,"segmentIds","unsortedSegmentSum","int32");return ce(pr(n),function(){return"numSegments must be of dtype int"}),Se.runKernelFunc(function(i,u){var a=i.unsortedSegmentSum(e,o,n);return u([o]),a},{$x:e},function(i,u){var a=u[0];return{$x:function(){return function(s,l){for(var h=Hp(l,Dt(l)),p=qp(s,h),c=qb(l,ot(0,"int32")),d=p.rank-c.rank,f=0;f<d;++f)c=Gn(c,f+1);c=Qc(c,ms(p.shape,"bool"));var m=Dt(p);return ia(c,p,m)}(i,a)}}})}}),$k=function(t,r,n){return lt(this,void 0,void 0,function(){var e,o,i,u,a,s,l,h,p,c,d,f,m;return ct(this,function(y){switch(y.label){case 0:for(e=oe(t,"tensor","boolMask"),o=oe(r,"mask","boolMask","bool"),i=n??0,u=o.rank,a=e.shape,ce(u>0,function(){return"mask cannot be scalar"}),Ut(a.slice(i,i+u),o.shape,"mask's shape must match the first K dimensions of tensor's shape,"),s=1,l=i;l<i+u;l++)s*=a[l];return h=a.slice(0,i).concat([s],a.slice(i+u)),p=e.reshape(h),c=o.reshape([-1]),[4,zb(c)];case 1:return d=y.sent(),f=d.squeeze([1]),m=qp(p,f,i),t!==e&&e.dispose(),r!==o&&o.dispose(),f.dispose(),p.dispose(),c.dispose(),d.dispose(),[2,m]}})})};function Xb(t,r,n,e,o,i,u){i===void 0&&(i="NHWC"),ce(t.length===r.rank,function(){return"Length of inShape ("+t.length+") and rank of dy ("+r.rank+") must match"});var a=t,s=r,l=!1;r.rank===3&&(l=!0,s=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]),a=[1,t[0],t[1],t[2]]),ce(a.length===4,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+a.length+"."}),ce(s.rank===4,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+s.rank}),ce(n.rank===4,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank});var h=i==="NHWC"?a[3]:a[1],p=i==="NHWC"?s.shape[3]:s.shape[1];ce(h===n.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+h+") must match input depth for filter "+n.shape[2]+"."}),ce(p===n.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+p+") must match output depth for filter "+n.shape[3]+"."}),u!=null&&ce(pr(o),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+u+" but got pad "+o+"."});var c=Np(i),d=da(a,n.shape,e,1,o,u,!1,c),f=Se.runKernelFunc(function(m,y){var g=m.conv2dDerInput(s,n,d);return y([n,s]),g},{dy4D:s,filter:n},function(m,y){var g=y[0],v=y[1];return{dy4D:function(){return Xn(m,g,e,o,i,1,u)},filter:function(){return $p(m,v,g.shape,e,o,i,u)}}});return l?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}function of(t){var r=function(i){return typeof i=="number"?[i,i,i]:i.length===2?[i[0],i[1],1]:i}(t),n=r[0],e=r[1],o=r[2];return n===1&&e===1&&o===1}function Yb(t,r,n,e,o){ce(t.length===r.rank,function(){return"Length of inShape ("+t.length+") and rank of dy ("+r.rank+") must match"});var i=t,u=r,a=!1;r.rank===4&&(a=!0,u=r.as5D(1,r.shape[0],r.shape[1],r.shape[2],r.shape[3]),i=[1,t[0],t[1],t[2],t[3]]);var s=i[4],l=u.shape[4];ce(i.length===5,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+i.length+"."}),ce(u.rank===5,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+u.rank}),ce(n.rank===5,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+n.rank}),ce(s===n.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+s+") must match input depth for filter "+n.shape[3]+"."}),ce(l===n.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+l+") must match output depth for filter "+n.shape[4]+"."});var h=wc(i,n.shape,e,1,o),p=Se.runKernelFunc(function(c){return c.conv3dDerInput(u,n,h)},{dy5D:u});return a?p.as4D(p.shape[1],p.shape[2],p.shape[3],p.shape[4]):p}var Xk=xe({conv1d_:function(t,r,n,e,o,i,u){o===void 0&&(o="NWC"),i===void 0&&(i=1);var a=oe(t,"x","conv1d"),s=oe(r,"filter","conv1d"),l=a,h=!1;a.rank===2&&(h=!0,l=a.as3D(1,a.shape[0],a.shape[1])),ce(l.rank===3,function(){return"Error in conv1d: input must be rank 3, but got rank "+l.rank+"."}),ce(s.rank===3,function(){return"Error in conv1d: filter must be rank 3, but got rank "+s.rank+"."}),u!=null&&ce(pr(e),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+u+" but got pad "+e+"."}),ce(l.shape[2]===s.shape[1],function(){return"Error in conv1d: depth of input ("+l.shape[2]+") must match input depth for filter "+s.shape[1]+"."}),ce(jn(n,i),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+n+" and dilation '"+i+"'"}),ce(o==="NWC",function(){return"Error in conv1d: got dataFormat of "+o+" but only NWC is currently supported."});var p=s.as4D(1,s.shape[0],s.shape[1],s.shape[2]),c=l.as4D(l.shape[0],1,l.shape[1],l.shape[2]),d=Xn(c,p,[1,n],e,"NHWC",[1,i],u);return h?d.as2D(d.shape[2],d.shape[3]):d.as3D(d.shape[0],d.shape[2],d.shape[3])}}),Xn=xe({conv2d_:function(t,r,n,e,o,i,u){o===void 0&&(o="NHWC"),i===void 0&&(i=[1,1]);var a=oe(t,"x","conv2d"),s=oe(r,"filter","conv2d"),l=a,h=!1;a.rank===3&&(h=!0,l=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),ce(l.rank===4,function(){return"Error in conv2d: input must be rank 4, but got rank "+l.rank+"."}),ce(s.rank===4,function(){return"Error in conv2d: filter must be rank 4, but got rank "+s.rank+"."}),u!=null&&ce(pr(e),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+u+" but got pad "+e+"."});var p=o==="NHWC"?l.shape[3]:l.shape[1];ce(p===s.shape[2],function(){return"Error in conv2d: depth of input ("+p+") must match input depth for filter "+s.shape[2]+"."}),ce(jn(n,i),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"});var c=Np(o),d=da(l.shape,s.shape,n,i,e,u,!1,c),f=[s,l],m=Se.runKernelFunc(function(y,g){var v=y.conv2d(l,s,d);return g([s,l]),v},{x:l,filter:s},function(y,g){var v=g,b=v[0],w=v[1];return ce(cs(i),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+i+"'"}),{x:function(){return Kb(w.shape,y,b,n,e,o)},filter:function(){return $p(w,y,b.shape,n,e,o)}}},"Conv2D",d,f);return h?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}}),Yk=xe({conv3d_:function(t,r,n,e,o,i){o===void 0&&(o="NDHWC"),i===void 0&&(i=[1,1,1]);var u=oe(t,"x","conv3d"),a=oe(r,"filter","conv3d"),s=u,l=!1;u.rank===4&&(l=!0,s=u.as5D(1,u.shape[0],u.shape[1],u.shape[2],u.shape[3])),ce(s.rank===5,function(){return"Error in conv3d: input must be rank 5, but got rank "+s.rank+"."}),ce(a.rank===5,function(){return"Error in conv3d: filter must be rank 5, but got rank "+a.rank+"."}),ce(s.shape[4]===a.shape[3],function(){return"Error in conv3d: depth of input ("+s.shape[4]+") must match input depth for filter "+a.shape[3]+"."}),ce(function(c,d){return of(c)||of(d)}(n,i),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"}),ce(o==="NDHWC",function(){return"Error in conv3d: got dataFormat of "+o+" but only NDHWC is currently supported."});var h=wc(s.shape,a.shape,n,i,e),p=Se.runKernelFunc(function(c,d){var f=c.conv3d(s,a,h);return d([s,a]),f},{x:s,$filter:a},function(c,d){ce(of(i),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+i+"'"});var f=d[0],m=d[1];return{x:function(){return Yb(f.shape,c,m,n,e)},$filter:function(){return function(y,g,v,b,w){var _=y;y.rank===4&&(_=y.as5D(1,y.shape[0],y.shape[1],y.shape[2],y.shape[3]));var j=g;j.rank===4&&(j=g.as5D(1,g.shape[0],g.shape[1],g.shape[2],g.shape[3])),ce(_.rank===5,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+_.shape+"."}),ce(j.rank===5,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+j.shape+"."}),ce(v.length===5,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+v+"."}),ce(_.shape[4]===v[3],function(){return"Error in conv3dDerFilter: depth of input "+_.shape[4]+") must match input depth in filter ("+v[3]+"."}),ce(j.shape[4]===v[4],function(){return"Error in conv3dDerFilter: depth of dy ("+j.shape[4]+") must match output depth for filter ("+v[4]+")."});var E=wc(_.shape,v,b,1,w);return Se.runKernelFunc(function(T){return T.conv3dDerFilter(_,j,E)},{x5D:_,dy5D:j})}(f,c,m.shape,n,e)}}});return l?p.as4D(p.shape[1],p.shape[2],p.shape[3],p.shape[4]):p}}),$p=xe({conv2dDerFilter_:function(t,r,n,e,o,i,u){i===void 0&&(i="NHWC");var a=t;t.rank===3&&(a=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var s=r;s.rank===3&&(s=r.as4D(1,r.shape[0],r.shape[1],r.shape[2])),ce(a.rank===4,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+a.shape+"."}),ce(s.rank===4,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+s.shape+"."}),ce(n.length===4,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+"."});var l=i==="NHWC"?a.shape[3]:a.shape[1],h=i==="NHWC"?s.shape[3]:s.shape[1];ce(l===n[2],function(){return"Error in conv2dDerFilter: depth of input "+l+") must match input depth in filter ("+n[2]+"."}),ce(h===n[3],function(){return"Error in conv2dDerFilter: depth of dy ("+h+") must match output depth for filter ("+n[3]+")."}),u!=null&&ce(pr(o),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+u+" but got pad "+o+"."});var p=Np(i),c=da(a.shape,n,e,1,o,u,!1,p);return Se.runKernelFunc(function(d){return d.conv2dDerFilter(a,s,c)},{x4D:a,dy4D:s})}}),Kb=xe({conv2dDerInput_:Xb}),Zc=xe({depthwiseConv2d_:function(t,r,n,e,o,i,u){i===void 0&&(i=[1,1]);var a=oe(t,"x","depthwiseConv2d"),s=oe(r,"filter","depthwiseConv2d"),l=a,h=!1;a.rank===3&&(h=!0,l=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),ce(l.rank===4,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+l.rank+"."}),ce(s.rank===4,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+s.rank+"."}),ce(l.shape[3]===s.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+l.shape[3]+") must match the inChannels dimension in filter "+s.shape[2]+"."}),i==null&&(i=[1,1]),ce(jn(n,i),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"}),u!=null&&ce(pr(e),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+u+" but got pad "+e+"."});var p=da(l.shape,s.shape,n,i,e,u,!0),c=[l,s],d=Se.runKernelFunc(function(f,m){var y=f.depthwiseConv2D(l,s,p);return m([l,s]),y},{x:l,filter:s},function(f,m){ce(cs(i),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+i+"'"});var y=m[0],g=m[1];return{x:function(){return Qb(y.shape,f,g,p)},filter:function(){return Zb(y,f,g.shape,p)}}},"DepthwiseConv2dNative",p,c);return h?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}}),Qb=xe({depthwiseConv2dDerInput_:function(t,r,n,e){var o=r,i=!1;r.rank===3&&(i=!0,o=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var u=Se.runKernelFunc(function(a){return a.depthwiseConv2DDerInput(o,n,e)},{dy4D:o});return i?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),Zb=xe({depthwiseConv2dDerFilter_:function(t,r,n,e){var o=t;t.rank===3&&(o=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var i=r;return i.rank===3&&(i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2])),Se.runKernelFunc(function(u){return u.depthwiseConv2DDerFilter(o,i,e)},{x4D:o,dy4D:i})}}),Xp=xe({separableConv2d_:function(t,r,n,e,o,i,u){i===void 0&&(i=[1,1]),u===void 0&&(u="NHWC");var a=oe(t,"x","separableConv2d"),s=oe(r,"depthwiseFilter","separableConv2d"),l=oe(n,"pointwiseFilter","separableConv2d"),h=a,p=!1;if(a.rank===3&&(p=!0,h=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),u==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");ce(h.rank===4,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+h.rank+"."}),ce(s.rank===4,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+s.rank+"."}),ce(l.rank===4,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+s.rank+"."}),ce(l.shape[0]===1,function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+l.shape[0]+"."}),ce(l.shape[1]===1,function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+l.shape[1]+"."});var c=s.shape[2],d=s.shape[3];ce(l.shape[2]===c*d,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+c*d+", but got "+l.shape[2]+"."});var f=Zc(h,s,e,o,u,i),m=Xn(f,l,1,"valid",u);return p?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}}),Kk=xe({conv2dTranspose_:function(t,r,n,e,o,i){return Xb(n,oe(t,"x","conv2dTranspose"),oe(r,"filter","conv2dTranspose"),e,o,"NHWC",i)}}),Qk=xe({conv3dTranspose_:function(t,r,n,e,o){return Yb(n,oe(t,"x","conv3dTranspose"),oe(r,"filter","conv3dTranspose"),e,o)}}),Jc=xe({matMul_:function(t,r,n,e){var o;n===void 0&&(n=!1),e===void 0&&(e=!1);var i=oe(t,"a","matMul"),u=oe(r,"b","matMul");o=lr(i,u),i=o[0],u=o[1];var a=n?i.shape[i.rank-2]:i.shape[i.rank-1],s=e?u.shape[u.rank-1]:u.shape[u.rank-2],l=n?i.shape[i.rank-1]:i.shape[i.rank-2],h=e?u.shape[u.rank-2]:u.shape[u.rank-1],p=i.shape.slice(0,-2),c=u.shape.slice(0,-2),d=ht(p),f=ht(c);ce(i.rank>=2&&u.rank>=2&&i.rank===u.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+i.rank+" and "+u.rank+"."}),ce(Br(p,c),function(){return"Error in matMul: outer dimensions ("+p+") and ("+c+") of Tensors with shapes "+i.shape+" and "+u.shape+" must match."}),ce(a===s,function(){return"Error in matMul: inner shapes ("+a+") and ("+s+") of Tensors with shapes "+i.shape+" and "+u.shape+" and transposeA="+n+" and transposeB="+e+" must match."});var m=i.shape.slice(0,-2).concat([l,h]),y=n?i.as3D(d,a,l):i.as3D(d,l,a),g=e?u.as3D(f,h,s):u.as3D(f,s,h),v={transposeA:n,transposeB:e};return Se.runKernelFunc(function(b,w){var _=b.batchMatMul(y,g,n,e);return w([y,g]),_},{a:y,b:g},function(b,w){var _=w,j=_[0],E=_[1];return n||e?!n&&e?{a:function(){return b.matMul(E,!1,!1)},b:function(){return b.matMul(j,!0,!1)}}:n&&!e?{a:function(){return E.matMul(b,!1,!0)},b:function(){return j.matMul(b,!1,!1)}}:{a:function(){return E.matMul(b,!0,!0)},b:function(){return b.matMul(j,!0,!0)}}:{a:function(){return b.matMul(E,!1,!0)},b:function(){return j.matMul(b,!0,!1)}}},"BatchMatMul",v).reshape(m)}}),Zk=xe({dot_:function(t,r){var n=oe(t,"t1","dot"),e=oe(r,"t2","dot");ce(!(n.rank!==1&&n.rank!==2||e.rank!==1&&e.rank!==2),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+n.rank+" and "+e.rank+"."});var o=n.rank===1?n.size:n.shape[1],i=e.rank===1?e.size:e.shape[0];return ce(o===i,function(){return"Error in dot: inner dimensions of inputs must match, but got "+o+" and "+i+"."}),n.rank===1&&e.rank===1?n.as2D(1,-1).matMul(e.as2D(-1,1)).asScalar():n.rank===1&&e.rank===2?n.as2D(1,-1).matMul(e.as2D(e.shape[0],e.shape[1])).as1D():n.rank===2&&e.rank===1?n.matMul(e.as2D(-1,1)).as1D():n.matMul(e.as2D(e.shape[0],e.shape[1]))}}),Jk=xe({outerProduct_:function(t,r){var n=oe(t,"v1","outerProduct"),e=oe(r,"v2","outerProduct");return ce(n.rank===1&&e.rank===1,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+n.rank+" and "+e.rank+"."}),n.as2D(-1,1).matMul(e.as2D(1,-1))}}),Pu=xe({reverse_:function(t,r){var n=oe(t,"x","reverse");if(n.rank===0)return n.clone();var e=Rr(r,n.shape);return Se.runKernelFunc(function(o){return o.reverse(n,e)},{$x:n},function(o){return{$x:function(){return o.reverse(e)}}}).reshapeAs(n)}}),eT=xe({reverse1d_:function(t){var r=oe(t,"x","reverse");return ce(r.rank===1,function(){return"Error in reverse1D: x must be rank 1 but got rank "+r.rank+"."}),Pu(r,0)}}),tT=xe({reverse2d_:function(t,r){var n=oe(t,"x","reverse");return ce(n.rank===2,function(){return"Error in reverse2D: x must be rank 2 but got rank "+n.rank+"."}),Pu(n,r)}}),rT=xe({reverse3d_:function(t,r){var n=oe(t,"x","reverse");return ce(n.rank===3,function(){return"Error in reverse3D: x must be rank 3 but got rank "+n.rank+"."}),Pu(n,r)}}),nT=xe({reverse4d_:function(t,r){var n=oe(t,"x","reverse");return ce(n.rank===4,function(){return"Error in reverse4D: x must be rank 4 but got rank "+n.rank+"."}),Pu(n,r)}});function Jb(t,r,n,e,o,i){var u=oe(t,"x","maxPool"),a=u,s=!1;u.rank===3&&(s=!0,a=u.as4D(1,u.shape[0],u.shape[1],u.shape[2])),e==null&&(e=[1,1]),ce(a.rank===4,function(){return"Error in maxPool: input must be rank 4 but got rank "+a.rank+"."}),ce(jn(n,e),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+e+"'"}),i!=null&&ce(pr(o),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+o+"."});var l=bu(a.shape,r,n,e,o,i);if(l.filterWidth===1&&l.filterHeight===1&&Br(l.inShape,l.outShape))return u.clone();var h=[a],p=Se.runKernelFunc(function(c,d){var f=c.maxPool(a,l);return d([a,f]),f},{x:a},function(c,d){var f=d[0],m=d[1];return{x:function(){return function(y,g,v,b,w,_,j,E){var T=oe(y,"dy","maxPoolBackprop"),R=oe(g,"input","maxPoolBackprop"),M=oe(v,"output","maxPoolBackprop");ce(R.rank===T.rank,function(){return"Rank of input ("+R.rank+") does not match rank of dy ("+T.rank+")"}),_==null&&(_=[1,1]),ce(jn(w,_),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+w+" and dilations '"+_+"'"}),ce(T.rank===4,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+T.rank+"."}),ce(R.rank===4,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+R.rank+"."}),E!=null&&ce(pr(j),function(){return"Error in maxPoolBackprop: pad must be an integer when using, dimRoundingMode "+E+" but got pad "+j+"."});var I=bu(R.shape,b,w,_,j,E);return Se.runKernelFunc(function(D){return D.maxPoolBackprop(T,R,M,I)},{$dy:T,$input:R})}(c,f,m,r,n,e,o)}}},"MaxPool",l,h);return s?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}function ex(t,r,n,e,o,i){var u=oe(t,"x","avgPool","float32");e==null&&(e=[1,1]),ce(jn(n,e),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+e+"'"});var a=u,s=!1;u.rank===3&&(s=!0,a=u.as4D(1,u.shape[0],u.shape[1],u.shape[2])),ce(a.rank===4,function(){return"Error in avgPool: x must be rank 4 but got rank "+a.rank+"."}),i!=null&&ce(pr(o),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+o+"."});var l=bu(a.shape,r,n,e,o,i);if(l.filterWidth===1&&l.filterHeight===1&&Br(l.inShape,l.outShape))return u.clone();var h=Se.runKernelFunc(function(p){return p.avgPool(a,l)},{x:a},function(p){return{x:function(){return function(c,d,f,m,y,g){var v=oe(c,"dy","avgPoolBackprop"),b=oe(d,"input","avgPoolBackprop");ce(b.rank===v.rank,function(){return"Rank of input ("+b.rank+") does not match rank of dy ("+v.rank+")"}),y==null&&(y=[1,1]),ce(jn(m,y),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+m+" and dilations '"+y+"'"});var w=b,_=v,j=!1;b.rank===3&&(j=!0,w=b.as4D(1,b.shape[0],b.shape[1],b.shape[2]),_=v.as4D(1,v.shape[0],v.shape[1],v.shape[2])),ce(_.rank===4,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+_.rank+"."}),ce(w.rank===4,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+w.rank+"."});var E=bu(w.shape,f,m,y,g),T=Se.runKernelFunc(function(R){return R.avgPoolBackprop(_,w,E)},{dy4D:_,input4D:w});return j?T.as3D(T.shape[1],T.shape[2],T.shape[3]):T}(p,a,r,n,e,o)}}},"AvgPool",l);return h=h.cast(u.dtype),s?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h}var Or=xe({maxPool_:function(t,r,n,e,o){return Jb(t,r,n,1,e,o)}}),Du=xe({avgPool_:function(t,r,n,e,o){return ex(t,r,n,1,e,o)}}),oT=xe({pool_:function(t,r,n,e,o,i){o==null&&(o=[1,1]),i==null&&(i=1),e===0&&(e="valid");var u=oe(t,"x","maxPool"),a=u,s=!1;u.rank===3&&(s=!0,a=u.as4D(1,u.shape[0],u.shape[1],u.shape[2])),ce(jn(i,o),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+i+" and dilations '"+o+"'"});var l,h=bu(a.shape,r,i,o,e),p=[h.dilationHeight,h.dilationWidth];l=e==="same"?function(w,_){var j=w.map(function(R,M){return R+(R-1)*(_[M]-1)}).map(function(R){return R-1}),E=j.map(function(R){return Math.floor(R/2)}),T=j.map(function(R,M){return R-E[M]});return j.map(function(R,M){return[E[M],T[M]]})}([h.filterHeight,h.filterWidth],p):[[0,0],[0,0]];var c=p[0]===1&&p[1]===1,d=function(w,_,j){var E=j.map(function(N){return N[0]}),T=j.map(function(N){return N[1]}),R=w.concat(E,T),M=_.map(function(N,W){return(N-R[W]%N)%N}),I=T.map(function(N,W){return N+M[W]}),D=_.map(function(N,W){return[E[W],I[W]]}),L=_.map(function(N,W){return[0,M[W]]});return[D,L]}([h.inHeight,h.inWidth],p,l),f=d[0],m=d[1],y=c?e:"valid",g=c?a:ab(a,p,f),v=(n==="avg"?function(){return ex(g,r,i,1,y)}:function(){return Jb(g,r,i,1,y)})(),b=c?v:nb(v,p,m);return s?b.as3D(b.shape[1],b.shape[2],b.shape[3]):b}}),iT=xe({maxPool3d_:function(t,r,n,e,o,i,u){i===void 0&&(i="NDHWC");var a=oe(t,"x","maxPool3d"),s=a,l=!1;a.rank===4&&(l=!0,s=a.as5D(1,a.shape[0],a.shape[1],a.shape[2],a.shape[3])),u==null&&(u=[1,1,1]),ce(s.rank===5,function(){return"Error in maxPool3d: x must be rank 5 but got rank "+s.rank+"."}),ce(i==="NDHWC",function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+i}),ce(jn(n,u),function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+u+"'"}),o!=null&&ce(pr(e),function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+e+"."});var h=xc(s.shape,r,n,u,e,o,i),p=Se.runKernelFunc(function(c,d){var f=c.maxPool3d(s,h);return d([s,f]),f},{x:s},function(c,d){var f=d[0],m=d[1];return{x:function(){return function(y,g,v,b,w,_,j,E){var T=oe(y,"dy","maxPool3dBackprop"),R=oe(g,"input","maxPool3dBackprop"),M=oe(v,"output","maxPool3dBackprop"),I=T,D=R,L=M,N=!1;R.rank===4&&(N=!0,I=T.as5D(1,T.shape[0],T.shape[1],T.shape[2],T.shape[3]),D=R.as5D(1,R.shape[0],R.shape[1],R.shape[2],R.shape[3]),L=M.as5D(1,M.shape[0],M.shape[1],M.shape[2],M.shape[3])),ce(I.rank===5,function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+I.rank+"."}),ce(D.rank===5,function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+D.rank+"."}),ce(L.rank===5,function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+L.rank+"."}),_==null&&(_=[1,1,1]),ce(jn(w,_),function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+w+" and dilations '"+_+"'"}),E!=null&&ce(pr(j),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+E+" but got pad "+j+"."});var W=xc(D.shape,b,w,_,j,E),q=Se.runKernelFunc(function(H){return H.maxPool3dBackprop(I,D,L,W)},{dy5D:I,input5D:D});return N?q.as4D(q.shape[1],q.shape[2],q.shape[3],q.shape[4]):q}(c,f,m,r,n,u,e,o)}}});return l?p.as4D(p.shape[1],p.shape[2],p.shape[3],p.shape[4]):p}}),aT=xe({avgPool3d_:function(t,r,n,e,o,i,u){i===void 0&&(i="NDHWC");var a=oe(t,"x","avgPool3d","float32"),s=a,l=!1;a.rank===4&&(l=!0,s=a.as5D(1,a.shape[0],a.shape[1],a.shape[2],a.shape[3])),u==null&&(u=[1,1,1]),ce(s.rank===5,function(){return"Error in avgPool3d: x must be rank 5 but got rank "+s.rank+"."}),ce(i==="NDHWC",function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+i}),ce(jn(n,u),function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+u+"'"}),o!=null&&ce(pr(e),function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+e+"."});var h=xc(s.shape,r,n,u,e,o,i),p=Se.runKernelFunc(function(c){return c.avgPool3d(s,h)},{x:s},function(c){return{x:function(){return function(d,f,m,y,g,v,b){var w=oe(d,"dy","avgPool3dBackprop"),_=oe(f,"input","avgPool3dBackprop"),j=w,E=_,T=!1;_.rank===4&&(T=!0,j=w.as5D(1,w.shape[0],w.shape[1],w.shape[2],w.shape[3]),E=_.as5D(1,_.shape[0],_.shape[1],_.shape[2],_.shape[3])),ce(j.rank===5,function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+j.rank+"."}),ce(E.rank===5,function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+E.rank+"."}),g==null&&(g=[1,1,1]),ce(jn(y,g),function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+y+" and dilations '"+g+"'"}),b!=null&&ce(pr(v),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+b+" but got pad "+v+"."});var R=xc(E.shape,m,y,g,v,b),M=Se.runKernelFunc(function(I){return I.avgPool3dBackprop(j,E,R)},{dy5D:j,input5D:E});return T?M.as4D(M.shape[1],M.shape[2],M.shape[3],M.shape[4]):M}(c,s,r,n,u,e,o)}}});return p=p.cast(s.dtype),l?p.as4D(p.shape[1],p.shape[2],p.shape[3],p.shape[4]):p}}),Ro=xe({slice_:function(t,r,n){var e,o,i=oe(t,"x","slice");if(i.rank===0)throw new Error("Slicing scalar is not possible");(e=typeof r=="number"?[r].concat(new Array(i.rank-1).fill(0)):r.length<i.rank?r.concat(new Array(i.rank-r.length).fill(0)):r.slice()).forEach(function(s){ce(s!==-1,function(){return"slice() does not support negative begin indexing."})}),o=(o=n==null?new Array(i.rank).fill(-1):typeof n=="number"?[n].concat(new Array(i.rank-1).fill(-1)):n.length<i.rank?n.concat(new Array(i.rank-n.length).fill(-1)):n).map(function(s,l){return s>=0?s:(ce(s===-1,function(){return"Negative size values should be exactly -1 but got "+s+" for the slice() size at index "+l+"."}),i.shape[l]-e[l])}),DE(i,e,o);var u=i.shape,a={begin:e,size:o};return Se.runKernelFunc(function(s){return s.slice(i,e,o)},{x:i},function(s){for(var l=[],h=0;h<s.rank;h++)l.push([e[h],u[h]-e[h]-o[h]]);return{x:function(){return s.pad(l)}}},"Slice",a)}}),sT=xe({slice1d_:function(t,r,n){var e=oe(t,"x","slice1d");return ce(e.rank===1,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+e.rank+" tensor"}),Ro(e,[r],[n])}}),uT=xe({slice2d_:function(t,r,n){var e=oe(t,"x","slice2d");return ce(e.rank===2,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+e.rank+" tensor"}),Ro(e,r,n)}}),tx=xe({slice3d_:function(t,r,n){var e=oe(t,"x","slice3d");return ce(e.rank===3,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+e.rank+" tensor"}),Ro(e,r,n)}}),lT=xe({slice4d_:function(t,r,n){var e=oe(t,"x","slice4d");return ce(e.rank===4,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+e.rank+" tensor"}),Ro(e,r,n)}});function rx(t,r,n,e,o){return r.rank<n.rank&&(r=r.reshape(En(r.shape,e))),t.rank<n.rank&&(t=t.reshape(En(t.shape,e))),{x:function(){var i=t.mul(n.equal(r).cast(t.dtype));return o==null?i:i.transpose(o)}}}var cT=xe({all_:function(t,r,n){r===void 0&&(r=null),n===void 0&&(n=!1);var e=oe(t,"x","all","bool"),o=Rr(r,e.shape),i=o,u=Ao(i,e.rank);u!=null&&(e=e.transpose(u),i=Po(i.length,e.rank));var a=Se.runKernelFunc(function(l){return l.all(e,i)},{$x:e});if(n){var s=En(a.shape,o);return a.reshape(s)}return a}}),dT=xe({any_:function(t,r,n){r===void 0&&(r=null),n===void 0&&(n=!1);var e=oe(t,"x","any","bool"),o=Rr(r,e.shape),i=o,u=Ao(i,e.rank);u!=null&&(e=e.transpose(u),i=Po(i.length,e.rank));var a=Se.runKernelFunc(function(l){return l.any(e,i)},{$x:e});if(n){var s=En(a.shape,o);return a.reshape(s)}return a}}),fT=xe({argMax_:function(t,r){r===void 0&&(r=0);var n=oe(t,"x","argMax");r==null&&(r=0);var e=Rr(r,n.shape),o=Ao(e,n.rank);o!=null&&(n=n.transpose(o),e=Po(e.length,n.rank));var i={axis:e[0]},u=[n];return Se.runKernelFunc(function(a,s){var l=a.argMax(n,e[0]);return s([n]),l},{x:n},function(a,s){var l=s[0];return{x:function(){return Dt(l)}}},"ArgMax",i,u)}}),hT=xe({argMin_:function(t,r){r===void 0&&(r=0);var n=oe(t,"x","argMin");r==null&&(r=0);var e=Rr(r,n.shape),o=Ao(e,n.rank);return o!=null&&(n=n.transpose(o),e=Po(e.length,n.rank)),Se.runKernelFunc(function(i,u){var a=i.argMin(n,e[0]);return u([n]),a},{$x:n},function(i,u){var a=u[0];return{$x:function(){return Dt(a)}}})}}),pT=xe({logSumExp_:function(t,r,n){r===void 0&&(r=null),n===void 0&&(n=!1);var e=oe(t,"x","logSumExp"),o=Rr(r,e.shape),i=e.max(o,!0),u=e.sub(i).exp().sum(o).log(),a=i.reshape(u.shape).add(u);if(n){var s=En(a.shape,o);return a.reshape(s)}return a}}),ed=xe({max_:function(t,r,n){r===void 0&&(r=null),n===void 0&&(n=!1);var e=oe(t,"x","max"),o=e,i=Rr(r,e.shape),u=i,a=Ao(u,e.rank);a!=null&&(e=e.transpose(a),u=Po(u.length,e.rank));var s=[e],l=Se.runKernelFunc(function(p,c){var d=p.max(e,u);return c([o,d]),d},{x:e},function(p,c){return rx(p,c[1],c[0],i,a)},"Max",{axes:u},s,[!0]);if(n){var h=En(l.shape,i);l=l.reshape(h)}return l}}),mT=xe({mean_:function(t,r,n){r===void 0&&(r=null),n===void 0&&(n=!1);var e=oe(t,"x","mean"),o=Rr(r,e.shape),i=ht(rn(e.shape,o)[1]);return Yc(function(u){var a=ot(i);return{value:(a.dtype===u.dtype?u:u.cast(a.dtype)).div(a).sum(r,n),gradFunc:function(s){var l=u.shape.slice();return o.forEach(function(h){l[h]=1}),s.reshape(l).mul(ms(u.shape,"float32")).div(i)}}})(e)}}),yT=xe({min_:function(t,r,n){r===void 0&&(r=null),n===void 0&&(n=!1);var e=oe(t,"x","min"),o=e,i=Rr(r,e.shape),u=i,a=Ao(u,e.rank);a!=null&&(e=e.transpose(a),u=Po(u.length,e.rank));var s=[e],l=Se.runKernelFunc(function(p,c){var d=p.min(e,u);return c([o,d]),d},{x:e},function(p,c){return rx(p,c[1],c[0],i,a)},"Min",{axes:u},s,[!0]);if(n){var h=En(l.shape,i);l=l.reshape(h)}return l}}),gT=xe({moments_:function(t,r,n){r===void 0&&(r=null),n===void 0&&(n=!1);var e=Rr(r,(t=oe(t,"x","moments")).shape),o=t.mean(e,n),i=o.shape;n||(i=En(o.shape,e));var u=t.toFloat().sub(o.reshape(i)).square();return{mean:o,variance:u.mean(e,n)}}}),nx=xe({sum_:function(t,r,n){r===void 0&&(r=null),n===void 0&&(n=!1);var e=oe(t,"x","sum");e.dtype==="bool"&&(e=e.toInt());var o=Rr(r,e.shape);return Yc(function(i){var u=Ao(o,i.rank),a=o,s=i;u!=null&&(s=i.transpose(u),a=Po(a.length,i.rank));var l=function(d){var f=i.shape.slice();return o.forEach(function(m){f[m]=1}),d.reshape(f).mul(ms(i.shape,"float32"))},h={axes:a},p=Se.runKernelFunc(function(d){return d.sum(s,a)},{x:s},function(d){return{x:function(){return l(d)}}},"Sum",h);if(n){var c=En(p.shape,o);p=p.reshape(c)}return{value:p,gradFunc:l}})(e)}}),vT=xe({prod_:function(t,r,n){r===void 0&&(r=null),n===void 0&&(n=!1);var e=oe(t,"x","prod");e.dtype==="bool"&&(e=e.toInt());var o=Rr(r,e.shape),i=Ao(o,e.rank),u=o,a=e;i!=null&&(a=e.transpose(i),u=Po(u.length,e.rank));var s=Se.runKernelFunc(function(h){return h.prod(a,u)},{permutedX:a});if(n){var l=En(s.shape,o);s=s.reshape(l)}return s}}),ox=xe({elu_:function(t){var r=oe(t,"x","elu");return Se.runKernelFunc(function(n,e){var o=n.elu(r);return e([o]),o},{$x:r},function(n,e){var o=e[0];return{$x:function(){return Se.runKernelFunc(function(i){return i.eluDer(n,o)},{dy:n,y:o})}}})}}),bT=xe({leakyRelu_:function(t,r){r===void 0&&(r=.2);var n=oe(t,"x","leakyRelu");return Hp(ot(r).mul(n),n)}}),ix=xe({prelu_:function(t,r){var n=oe(t,"x","prelu"),e=oe(r,"alpha","prelu");return Se.runKernelFunc(function(o,i){var u=o.prelu(n,e);return i([n,e]),u},{x:n,alpha:e},function(o,i){var u=i[0],a=i[1],s=u.greater(0);return{x:function(){return ia(s,o,o.mul(a))},alpha:function(){var l=ia(s,Dt(o),o.mul(u)),h=Tr(a.shape,o.shape);return h.length>0&&(l=l.sum(h)),l.reshape(a.shape)}}},"Prelu")}}),ar=xe({relu_:function(t){var r=oe(t,"x","relu");return r.dtype==="bool"?r.toInt():Se.runKernelFunc(function(n,e){var o=n.relu(r);return e([r]),o},{x:r},function(n,e){var o=e[0];return{x:function(){return n.mulStrict(o.step().toFloat())}}},"Relu")}}),ax=xe({relu6_:function(t){var r=oe(t,"x","relu6");return r.dtype==="bool"?r.toInt():Se.runKernelFunc(function(n,e){var o=n.relu6(r);return e([r]),o},{x:r},function(n,e){var o=e[0],i=o.lessEqual(6).mul(o.step());return{x:function(){return n.mulStrict(i.toFloat())}}},"Relu6")}}),xT=xe({selu_:function(t){var r=oe(t,"x","selu");return Se.runKernelFunc(function(n,e){var o=n.selu(r);return e([r]),o},{$x:r},function(n,e){var o=e[0];return{$x:function(){var i=o.greater(ot(0)),u=ot(zp),a=ot(Vp),s=n.mul(a),l=n.mul(u).mul(o.toFloat().exp());return ia(i,s,l)}}})}}),Ri=xe({transpose_:function(t,r){var n=oe(t,"x","transpose");if(r==null&&(r=n.shape.map(function(o,i){return i}).reverse()),ce(n.rank===r.length,function(){return"Error in transpose: rank of input "+n.rank+" must match length of perm "+r+"."}),r.forEach(function(o){ce(o>=0&&o<n.rank,function(){return"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+r})}),n.rank<=1)return n.clone();var e={perm:r};return Se.runKernelFunc(function(o){return o.transpose(n,r)},{x:n},function(o){var i=Ap(r);return{x:function(){return o.transpose(i)}}},"Transpose",e)}}),wT=xe({localResponseNormalization_:function(t,r,n,e,o){r===void 0&&(r=5),n===void 0&&(n=1),e===void 0&&(e=1),o===void 0&&(o=.5);var i=oe(t,"x","localResponseNormalization");ce(i.rank===4||i.rank===3,function(){return`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank `+i.rank+"."}),ce(pr(r),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+r+"."});var u=i,a=!1;i.rank===3&&(a=!0,u=i.as4D(1,i.shape[0],i.shape[1],i.shape[2]));var s=Se.runKernelFunc(function(l,h){var p=l.localResponseNormalization4D(u,r,n,e,o);return h([u,p]),p},{x4D:u},function(l,h){var p=h[0],c=h[1];return{x4D:function(){return Se.runKernelFunc(function(d){return d.LRNGrad(l,p,c,r,n,e,o)},{})}}});return a?s.as3D(s.shape[1],s.shape[2],s.shape[3]):s}}),sx=xe({norm_:function(t,r,n,e){r===void 0&&(r="euclidean"),n===void 0&&(n=null),e===void 0&&(e=!1);var o=function a(s,l,h){if(h===void 0&&(h=null),s.rank===0)return s.abs();if(s.rank!==1&&h===null)return a(s.reshape([-1]),l,h);if(s.rank===1||typeof h=="number"||Array.isArray(h)&&h.length===1){if(l===1)return s.abs().sum(h);if(l===1/0)return s.abs().max(h);if(l===-1/0)return s.abs().min(h);if(l==="euclidean"||l===2)return s.abs().pow(ot(2,"int32")).sum(h).sqrt();throw new Error("Error in norm: invalid ord value: "+l)}if(Array.isArray(h)&&h.length===2){if(l===1)return s.abs().sum(h[0]).max(h[1]-1);if(l===1/0)return s.abs().sum(h[1]).max(h[0]);if(l===-1/0)return s.abs().sum(h[1]).min(h[0]);if(l==="fro"||l==="euclidean")return s.square().sum(h).sqrt();throw new Error("Error in norm: invalid ord value: "+l)}throw new Error("Error in norm: invalid axis: "+h)}(t=oe(t,"x","norm"),r,n),i=o.shape;if(e){var u=Rr(n,t.shape);i=En(o.shape,u)}return o.reshape(i)}}),_T=xe({basicLSTMCell_:function(t,r,n,e,o,i){var u=oe(t,"forgetBias","basicLSTMCell"),a=oe(r,"lstmKernel","basicLSTMCell"),s=oe(n,"lstmBias","basicLSTMCell"),l=oe(e,"data","basicLSTMCell"),h=oe(o,"c","basicLSTMCell"),p=oe(i,"h","basicLSTMCell"),c=l.concat(p,1).matMul(a).add(s),d=c.shape[0],f=c.shape[1]/4,m=[d,f],y=c.slice([0,0],m),g=c.slice([0,f],m),v=c.slice([0,2*f],m),b=c.slice([0,3*f],m),w=y.sigmoid().mulStrict(g.tanh()).addStrict(h.mulStrict(u.add(v).sigmoid())),_=w.tanh().mulStrict(b.sigmoid());return[w,_]}}),ST=xe({multiRNNCell_:function(t,r,n,e){for(var o=oe(r,"data","multiRNNCell"),i=pc(n,"c","multiRNNCell"),u=pc(e,"h","multiRNNCell"),a=o,s=[],l=0;l<t.length;l++){var h=t[l](a,i[l],u[l]);s.push(h[0]),s.push(h[1]),a=h[1]}var p=[],c=[];for(l=0;l<s.length;l+=2)p.push(s[l]),c.push(s[l+1]);return[p,c]}}),ET=xe({movingAverage_:function(t,r,n,e,o){o===void 0&&(o=!0);var i=oe(t,"v","movingAverage"),u=oe(r,"x","movingAverage"),a=oe(n,"decay","movingAverage");wS(i,u),ce(Br(i.shape,u.shape),function(){return"Shape mismatch in v and x"});var s=ot(1),l=s.sub(a),h=u.sub(i).mul(l);if(o){ce(e!=null,function(){return"When using zeroDebias: true, step is required."});var p=oe(e,"step","movingAverage");h=h.div(s.sub(Ec(a,p)))}return i.add(h)}}),jT=xe({stridedSlice_:function(t,r,n,e,o,i,u,a,s){if(o===void 0&&(o=0),i===void 0&&(i=0),u===void 0&&(u=0),a===void 0&&(a=0),s===void 0&&(s=0),e==null&&(e=new Array(r.length)),u!==0)throw new Error("ellipsis mask is not yet supported");var l=oe(t,"x","stridedSlice"),h=Ng(a),p=l.shape.slice();h.forEach(function(y){r[y]=0,n[y]=1,p.splice(y,0,1)}),l=l.reshape(p);for(var c=0;c<l.rank;c++)r[c]=OE(o,r,e,l.shape,c),n[c]=LE(i,n,e,l.shape,c),e[c]=e[c]||1;var d=Ng(s);d.forEach(function(y){n[y]=r[y]+1,e[y]=1});var f=Lp(r,n,e),m=f.filter(function(y,g){return d.indexOf(g)===-1});return e.every(function(y){return y===1})?Ro(l,r,f).reshape(m):Se.runKernelFunc(function(y){return y.stridedSlice(l,r,n,e)},{$x:l}).reshape(m)}}),CT=xe({topk_:function(t,r,n){r===void 0&&(r=1),n===void 0&&(n=!0);var e=oe(t,"x","topk");if(e.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var o=e.shape[e.shape.length-1];if(r>o)throw new Error("'k' passed to topk() must be <= the last dimension ("+o+") but got "+r);var i=Se.runKernelFunc(function(u){return u.topk(e,r,n)},{$x:e});return{values:i[0],indices:i[1]}}}),kT=xe({scatterND_:function(t,r,n){var e=oe(t,"indices","scatterND","int32"),o=oe(r,"updates","scatterND");return PE(o,e,n),Se.runKernelFunc(function(i){return i.scatterND(e,o,n)},{indices:e,updates:o},null,"ScatterNd",{shape:n})}}),Yp=xe({fft_:function(t){ce(t.dtype==="complex64",function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+t.dtype+"."});var r=t.shape[t.shape.length-1],n=t.size/r,e=t.as2D(n,r);return Se.runKernelFunc(function(o){return o.fft(e)},{input:t}).reshape(t.shape)}}),jc=xe({ifft_:function(t){ce(t.dtype==="complex64",function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+t.dtype+"."});var r=t.shape[t.shape.length-1],n=t.size/r,e=t.as2D(n,r);return Se.runKernelFunc(function(o){return o.ifft(e)},{input:t}).reshape(t.shape)}}),Kp=xe({rfft_:function(t,r){ce(t.dtype==="float32",function(){return"The dtype for rfft() must be real value but got "+t.dtype});var n,e=t.shape[t.shape.length-1],o=t.size/e;if(r!=null&&r<e){var i=t.shape.map(function(g){return 0}),u=t.shape.map(function(g){return g});u[t.shape.length-1]=r,n=t.slice(i,u),e=r}else if(r!=null&&r>e){var a=t.shape.map(function(g){return g});a[t.shape.length-1]=r-e,n=t.concat(er(a),t.shape.length-1),e=r}else n=t;var s=n.zerosLike(),l=Hr(n,s).as2D(o,e),h=Yp(l),p=Math.floor(e/2)+1,c=zn(h),d=So(h),f=c.split([p,e-p],c.shape.length-1),m=d.split([p,e-p],d.shape.length-1),y=n.shape.slice();return y[n.shape.length-1]=p,Hr(f[0],m[0]).reshape(y)}}),ux=xe({irfft_:function(t){var r=t.shape[t.shape.length-1],n=t.size/r;if(r<=2){var e=t.as2D(n,r),o=jc(e);return zn(o)}var i=[n,2*(r-1)],u=zn(t).as2D(n,r),a=So(t).as2D(n,r),s=u.slice([0,1],[n,r-2]).reverse(1),l=a.slice([0,1],[n,r-2]).reverse(1).mul(ot(-1)),h=u.concat(s,1),p=a.concat(l,1);return e=Hr(h,p).as2D(i[0],i[1]),o=jc(e),zn(o)}}),TT=Object.freeze({fft:Yp,ifft:jc,rfft:Kp,irfft:ux}),MT=xe({sparseToDense_:function(t,r,n,e){e===void 0&&(e=0);var o=oe(t,"sparseIndices","sparseToDense","int32"),i=oe(r,"sparseValues","sparseToDense"),u=oe(e,"defaultValue","sparseToDense",i.dtype);return function(a,s,l,h){if(a.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+a.dtype+".");if(a.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+a.shape+".");var p=a.rank>0?a.shape[0]:1,c=a.rank>1?a.shape[1]:1;if(l.length!==c)throw new Error("outputShape has incorrect number of elements:, "+l.length+", should be: "+c+".");var d=s.size;if(s.rank!==0&&(s.rank!==1||d!==p))throw new Error("sparseValues has incorrect shape "+s.shape+", should be [] or ["+p+"]");if(s.dtype!==h.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(o,i,n,u),Se.runKernelFunc(function(a){return a.sparseToDense(o,i,n,u)},{$sparseIndices:o,$sparseValues:i,$defaultValue:u})}}),RT=xe({gatherND_:function(t,r){var n=oe(r,"indices","gatherND","int32"),e=oe(t,"x","gatherND");return Se.runKernelFunc(function(o){return o.gatherND(e,n)},{x:e,indices:n},null,"GatherNd")}}),IT=xe({diag_:function(t){var r=oe(t,"x","diag").flatten(),n=t.shape.concat(t.shape);return Se.runKernelFunc(function(e){return e.diag(r)},{$x:r}).reshape(n)}}),AT=xe({dropout_:function(t,r,n,e){var o=oe(t,"x","dropout");if(ce(o.dtype==="float32",function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+o.dtype+" tensor instead."}),ce(r>=0&&r<1,function(){return"rate must be a float in the range [0, 1), but got "+r+"."}),r===0)return t instanceof ir?o.clone():o;var i=function(s,l){if(l==null)return s.shape.slice();if(Br(s.shape,l))return l;if(s.shape.length===l.length){for(var h=[],p=0;p<s.shape.length;p++)l[p]==null&&s.shape[p]!=null?h.push(s.shape[p]):h.push(l[p]);return h}return l}(o,n),u=1-r,a=ib(i,0,1,"float32",e).add(u).floor().div(u);return o.mul(a)}});function lx(t,r,n){for(var e=1-t%2,o=new Float32Array(t),i=0;i<t;++i){var u=2*Math.PI*i/(t+e-1);o[i]=r-n*Math.cos(u)}return wr(o,"float32")}var Qp=xe({hannWindow_:function(t){return lx(t,.5,.5)}}),cx=xe({hammingWindow_:function(t){return lx(t,.54,.46)}}),Zp=xe({frame_:function(t,r,n,e,o){e===void 0&&(e=!1),o===void 0&&(o=0);for(var i=0,u=[];i+r<=t.size;)u.push(Ro(t,i,r)),i+=n;if(e)for(;i<t.size;){var a=i+r-t.size,s=Cr([Ro(t,i,r-a),Mo([a],o)]);u.push(s),i+=n}return u.length===0?ji([],[0,r]):Cr(u).as2D(u.length,r)}}),dx=xe({stft_:function(t,r,n,e,o){var i;o===void 0&&(o=Qp),e==null&&(i=r,e=Math.floor(Math.pow(2,Math.ceil(Math.log(i)/Math.log(2)))));for(var u=Zp(t,r,n),a=un(u,o(r)),s=[],l=0;l<u.shape[0];l++)s.push(Kp(a.slice([l,0],[1,r]),e));return Cr(s)}}),PT=Object.freeze({hannWindow:Qp,hammingWindow:cx,frame:Zp,stft:dx}),sn,DT=function(t,r,n){return n===void 0&&(n=1),lt(this,void 0,void 0,function(){var e,o,i,u,a,s,l,h,p,c,d,f,m,y;return ct(this,function(g){switch(g.label){case 0:return e=oe(t,"predictions","inTopK"),o=oe(r,"targets","inTopK"),ce(e.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+e.rank}),ce(e.rank-1===o.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+e.rank+" and targets rank "+o.rank}),Ut(e.shape.slice(0,e.shape.length-1),o.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),i=e.shape[e.shape.length-1],ce(n>0&&n<=i,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+i+"), but got "+n}),[4,e.data()];case 1:return u=g.sent(),[4,o.data()];case 2:for(a=g.sent(),s=[u.length/i,i],h=s[1],p=yu("bool",l=s[0]),c=0;c<l;c++){for(d=c*h,f=u.subarray(d,d+h),m=[],y=0;y<f.length;y++)m.push({value:f[y],index:y});for(m.sort(function(v,b){return b.value-v.value}),p[c]=0,y=0;y<n;y++)if(m[y].index===a[c]){p[c]=1;break}}return t!==e&&e.dispose(),r!==o&&o.dispose(),[2,$r(p,o.shape,"bool")]}})})};(function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(sn||(sn={}));var OT=xe({absoluteDifference_:function(t,r,n,e){e===void 0&&(e=sn.SUM_BY_NONZERO_WEIGHTS);var o=oe(t,"labels","absoluteDifference"),i=oe(r,"predictions","absoluteDifference"),u=null;n!=null&&(u=oe(n,"weights","absoluteDifference")),Ut(o.shape,i.shape,"Error in absoluteDifference: ");var a=o.sub(i).abs();return Zo(a,u,e)}}),Zo=xe({computeWeightedLoss_:function(t,r,n){n===void 0&&(n=sn.SUM_BY_NONZERO_WEIGHTS);var e=oe(t,"losses","computeWeightedLoss"),o=null;r!=null&&(o=oe(r,"weights","computeWeightedLoss"));var i=o==null?e:e.mul(o);if(n===sn.NONE)return i;if(n===sn.SUM)return i.sum();if(n===sn.MEAN){if(o==null)return i.mean();var u=e.size/o.size,a=i.sum().div(o.sum());return u>1?a.div(ot(u)):a}if(n===sn.SUM_BY_NONZERO_WEIGHTS){if(o==null)return i.sum().div(ot(e.size));var s=o.mul(ms(e.shape)).notEqual(ot(0)).sum().toFloat();return i.sum().div(s)}throw Error("Unknown reduction: "+n)}}),LT=xe({cosineDistance_:function(t,r,n,e,o){o===void 0&&(o=sn.SUM_BY_NONZERO_WEIGHTS);var i=oe(t,"labels","cosineDistance"),u=oe(r,"predictions","cosineDistance"),a=null;e!=null&&(a=oe(e,"weights","cosineDistance")),Ut(i.shape,u.shape,"Error in cosineDistance: ");var s=ot(1).sub(i.mul(u).sum(n,!0));return Zo(s,a,o)}}),NT=xe({hingeLoss_:function(t,r,n,e){e===void 0&&(e=sn.SUM_BY_NONZERO_WEIGHTS);var o=oe(t,"labels","hingeLoss"),i=oe(r,"predictions","hingeLoss"),u=null;n!=null&&(u=oe(n,"weights","hingeLoss")),Ut(o.shape,i.shape,"Error in hingeLoss: ");var a=ot(1);o=ot(2).mul(o).sub(a);var s=a.sub(o.mul(i)).relu();return Zo(s,u,e)}}),FT=xe({huberLoss_:function(t,r,n,e,o){e===void 0&&(e=1),o===void 0&&(o=sn.SUM_BY_NONZERO_WEIGHTS);var i=oe(t,"labels","huberLoss"),u=oe(r,"predictions","huberLoss"),a=null;n!=null&&(a=oe(n,"weights","huberLoss")),Ut(i.shape,u.shape,"Error in huberLoss: ");var s=ot(e),l=u.sub(i).abs(),h=Wb(l,s),p=l.sub(h),c=ot(.5).mul(h.square()).add(s.mul(p));return Zo(c,a,o)}}),BT=xe({logLoss_:function(t,r,n,e,o){e===void 0&&(e=1e-7),o===void 0&&(o=sn.SUM_BY_NONZERO_WEIGHTS);var i=oe(t,"labels","logLoss"),u=oe(r,"predictions","logLoss"),a=null;n!=null&&(a=oe(n,"weights","logLoss")),Ut(i.shape,u.shape,"Error in logLoss: ");var s=ot(1),l=ot(e),h=i.mul(u.add(l).log()).neg().sub(s.sub(i).mul(s.sub(u).add(l).log()));return Zo(h,a,o)}}),UT=xe({meanSquaredError_:function(t,r,n,e){e===void 0&&(e=sn.SUM_BY_NONZERO_WEIGHTS);var o=oe(t,"labels","meanSquaredError"),i=oe(r,"predictions","meanSquaredError"),u=null;n!=null&&(u=oe(n,"weights","meanSquaredError")),Ut(o.shape,i.shape,"Error in meanSquaredError: ");var a=o.squaredDifference(i);return Zo(a,u,e)}}),GT=xe({sigmoidCrossEntropy_:function(t,r,n,e,o){e===void 0&&(e=0),o===void 0&&(o=sn.SUM_BY_NONZERO_WEIGHTS);var i=oe(t,"multiClassLabels","sigmoidCrossEntropy"),u=oe(r,"logits","sigmoidCrossEntropy"),a=null;if(n!=null&&(a=oe(n,"weights","sigmoidCrossEntropy")),Ut(i.shape,u.shape,"Error in sigmoidCrossEntropy: "),e>0){var s=ot(e),l=ot(1),h=ot(.5);i=i.mul(l.sub(s)).add(h.mul(s))}var p=function(c,d){var f=oe(c,"labels","sigmoidCrossEntropyWithLogits"),m=oe(d,"logits","sigmoidCrossEntropyWithLogits");Ut(f.shape,m.shape,"Error in sigmoidCrossEntropyWithLogits: ");var y=m.relu(),g=m.mul(f),v=m.abs().neg().exp().log1p();return y.sub(g).add(v)}(i,u);return Zo(p,a,o)}}),zT=xe({softmaxCrossEntropy_:function(t,r,n,e,o){e===void 0&&(e=0),o===void 0&&(o=sn.SUM_BY_NONZERO_WEIGHTS);var i=oe(t,"onehotLabels","softmaxCrossEntropy"),u=oe(r,"logits","softmaxCrossEntropy"),a=null;if(n!=null&&(a=oe(n,"weights","softmaxCrossEntropy")),Ut(i.shape,u.shape,"Error in softmaxCrossEntropy: "),e>0){var s=ot(e),l=ot(1),h=ot(i.shape[1]);i=i.mul(l.sub(s)).add(s.div(h))}var p=function(c,d,f){if(f===void 0&&(f=-1),f===-1&&(f=d.rank-1),f!==d.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+d.rank+" and dim was "+f);return Yc(function(m,y,g){var v=y.logSumExp([f],!0),b=y.toFloat().sub(v);return g([m,b]),{value:b.mul(m).neg().sum([f]),gradFunc:function(w,_){var j=_[0],E=_[1],T=En(w.shape,[f]);return[w.reshape(T).mul(j.toFloat().sub(E.exp())),w.reshape(T).mul(E.exp().sub(j.toFloat()))]}}})(c,d)}(i,u);return Zo(p,a,o)}}),VT=Object.freeze({get Reduction(){return sn},absoluteDifference:OT,computeWeightedLoss:Zo,cosineDistance:LT,hingeLoss:NT,huberLoss:FT,logLoss:BT,meanSquaredError:UT,sigmoidCrossEntropy:GT,softmaxCrossEntropy:zT});function iv(t,r){return r===void 0&&(r=!1),Se.tidy(function(){if(t.shape.length!==2)throw new Error("qr2d() requires a 2D Tensor, but got a "+t.shape.length+"D Tensor.");for(var n=t.shape[0],e=t.shape[1],o=ob(n),i=t.clone(),u=ji([[1]],[1,1]),a=u.clone(),s=n>=e?e:n,l=function(p){var c,d=i,f=a,m=o;c=Se.tidy(function(){var y=i.slice([p,p],[n-p,1]),g=y.norm(),v=i.slice([p,p],[1,1]),b=ji([[-1]]).where(v.greater(0),ji([[1]])),w=v.sub(b.mul(g)),_=y.div(w);a=_.shape[0]===1?u.clone():u.concat(_.slice([1,0],[_.shape[0]-1,_.shape[1]]),0);var j=b.matMul(w).div(g).neg(),E=i.slice([p,0],[n-p,e]),T=j.mul(a);if(p===0)i=E.sub(T.matMul(a.transpose().matMul(E)));else{var R=E.sub(T.matMul(a.transpose().matMul(E)));i=i.slice([0,0],[p,e]).concat(R,0)}var M=o.slice([0,p],[n,o.shape[1]-p]);if(p===0)o=M.sub(M.matMul(a).matMul(T.transpose()));else{var I=M.sub(M.matMul(a).matMul(T.transpose()));o=o.slice([0,0],[n,p]).concat(I,1)}return[a,i,o]}),a=c[0],i=c[1],o=c[2],Sn([d,f,m])},h=0;h<s;++h)l(h);return!r&&n>e&&(o=o.slice([0,0],[n,e]),i=i.slice([0,0],[e,e])),[o,i]})}var WT=xe({bandPart_:function(t,r,n){if(r%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+r+".");if(n%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+n+".");var e=oe(t,"a","bandPart");if(e.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+e.rank+".");var o=e.shape,i=e.shape.slice(-2),u=i[0],a=i[1];if(!(r<=u))throw new Error("bandPart(): numLower ("+r+") must not be greater than the number of rows ("+u+").");if(!(n<=a))throw new Error("bandPart(): numUpper ("+n+") must not be greater than the number of columns ("+a+").");r<0&&(r=u),n<0&&(n=a);var s=mc(0,u,1,"int32").reshape([-1,1]),l=mc(0,a,1,"int32"),h=Mr(s,l),p=Qc(h.lessEqual(ot(+r,"int32")),h.greaterEqual(ot(-n,"int32"))),c=er([u,a],e.dtype);return On(kr(e.reshape([-1,u,a])).map(function(d){return ia(p,d,c)})).reshape(o)}}),HT=xe({gramSchmidt_:function(t){var r;if(Array.isArray(t)){r=!1,ce(t!=null&&t.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var n=t[0].shape[0],e=function(s){ce(t[s].shape[0]===n,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+t[s].shape[0]+" vs. "+n+")"})},o=1;o<t.length;++o)e(o)}else r=!0,t=Dp(t,t.shape[0],0).map(function(s){return sb(s,[0])});ce(t.length<=t[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+t.length+") exceeds number of dimensions ("+t[0].shape[0]+")."});var i=[],u=t,a=function(s){i.push(Se.tidy(function(){var l=u[s];if(s>0)for(var h=0;h<s;++h){var p=nx(i[h].mulStrict(l)).mul(i[h]);l=l.sub(p)}return l.div(sx(l,"euclidean"))}))};for(o=0;o<t.length;++o)a(o);return r?On(i,0):i}}),qT=xe({qr_:function(t,r){if(r===void 0&&(r=!1),t.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+t.rank);if(t.rank===2)return iv(t,r);var n=t.shape.slice(0,t.shape.length-2).reduce(function(u,a){return u*a}),e=kr(t.reshape([n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),o=[],i=[];return e.forEach(function(u){var a=iv(u,r),s=a[0],l=a[1];o.push(s),i.push(l)}),[On(o,0).reshape(t.shape),On(i,0).reshape(t.shape)]}}),$T=Object.freeze({bandPart:WT,gramSchmidt:HT,qr:qT});function td(t,r,n,e,o,i){e==null&&(e=.5),o==null&&(o=Number.NEGATIVE_INFINITY),i==null&&(i=0);var u=t.shape[0];return n=Math.min(n,u),ce(0<=e&&e<=1,function(){return"iouThreshold must be in [0, 1], but was '"+e+"'"}),ce(t.rank===2,function(){return"boxes must be a 2D tensor, but was of rank '"+t.rank+"'"}),ce(t.shape[1]===4,function(){return"boxes must have 4 columns, but 2nd dimension was "+t.shape[1]}),ce(r.rank===1,function(){return"scores must be a 1D tensor"}),ce(r.shape[0]===u,function(){return"scores has incompatible shape with boxes. Expected "+u+", but was "+r.shape[0]}),ce(0<=i&&i<=1,function(){return"softNmsSigma must be in [0, 1], but was '"+i+"'"}),{maxOutputSize:n,iouThreshold:e,scoreThreshold:o,softNmsSigma:i}}var XT=xe({resizeBilinear_:function(t,r,n){n===void 0&&(n=!1);var e=oe(t,"images","resizeBilinear");ce(e.rank===3||e.rank===4,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+e.rank+"."}),ce(r.length===2,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+r+"."});var o=e,i=!1;e.rank===3&&(i=!0,o=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var u=r[0],a=r[1],s=Se.runKernelFunc(function(l,h){return h([o]),l.resizeBilinear(o,u,a,n)},{x:o},function(l,h){return{x:function(){return Se.runKernelFunc(function(p){return p.resizeBilinearBackprop(l,h[0],n)},{})}}},"ResizeBilinear",{alignCorners:n,newHeight:u,newWidth:a});return i?s.as3D(s.shape[1],s.shape[2],s.shape[3]):s}}),YT=xe({resizeNearestNeighbor_:function(t,r,n){n===void 0&&(n=!1);var e=oe(t,"images","resizeNearestNeighbor");ce(e.rank===3||e.rank===4,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+e.rank+"."}),ce(r.length===2,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+r+"."}),ce(e.dtype==="float32"||e.dtype==="int32",function(){return"`images` must have `int32` or `float32` as dtype"});var o=e,i=!1;e.rank===3&&(i=!0,o=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var u=r[0],a=r[1],s=Se.runKernelFunc(function(l,h){return h([o]),l.resizeNearestNeighbor(o,u,a,n)},{batchImages:o},function(l,h){return{batchImages:function(){return Se.runKernelFunc(function(p){return p.resizeNearestNeighborBackprop(l,h[0],n)},{})}}});return i?s.as3D(s.shape[1],s.shape[2],s.shape[3]):s}}),KT=xe({nonMaxSuppression_:function(t,r,n,e,o){e===void 0&&(e=.5),o===void 0&&(o=Number.NEGATIVE_INFINITY);var i=oe(t,"boxes","nonMaxSuppression"),u=oe(r,"scores","nonMaxSuppression"),a=td(i,u,n,e,o);n=a.maxOutputSize,e=a.iouThreshold,o=a.scoreThreshold;var s={maxOutputSize:n,iouThreshold:e,scoreThreshold:o};return Se.runKernelFunc(function(l){return l.nonMaxSuppression(i,u,n,e,o)},{boxes:i,scores:u},null,"NonMaxSuppressionV3",s)}}),QT=function(t,r,n,e,o){return e===void 0&&(e=.5),o===void 0&&(o=Number.NEGATIVE_INFINITY),lt(this,void 0,void 0,function(){var i,u,a,s,l,h,p;return ct(this,function(c){switch(c.label){case 0:return i=oe(t,"boxes","nonMaxSuppressionAsync"),u=oe(r,"scores","nonMaxSuppressionAsync"),a=td(i,u,n,e,o),n=a.maxOutputSize,e=a.iouThreshold,o=a.scoreThreshold,[4,Promise.all([i.data(),u.data()])];case 1:return s=c.sent(),l=s[0],h=s[1],p=Fp(l,h,n,e,o),i!==t&&i.dispose(),u!==r&&u.dispose(),[2,p]}})})},ZT=xe({nonMaxSuppressionWithScore_:function(t,r,n,e,o,i){e===void 0&&(e=.5),o===void 0&&(o=Number.NEGATIVE_INFINITY),i===void 0&&(i=0);var u=oe(t,"boxes","nonMaxSuppression"),a=oe(r,"scores","nonMaxSuppression"),s=td(u,a,n,e,o,i),l={maxOutputSize:n=s.maxOutputSize,iouThreshold:e=s.iouThreshold,scoreThreshold:o=s.scoreThreshold,softNmsSigma:i=s.softNmsSigma},h=Se.runKernel("NonMaxSuppressionV5",{boxes:u,scores:a},l);return{selectedIndices:h[0],selectedScores:h[1]}}}),JT=function(t,r,n,e,o,i){return e===void 0&&(e=.5),o===void 0&&(o=Number.NEGATIVE_INFINITY),i===void 0&&(i=0),lt(this,void 0,void 0,function(){var u,a,s,l,h,p,c;return ct(this,function(d){switch(d.label){case 0:return u=oe(t,"boxes","nonMaxSuppressionAsync"),a=oe(r,"scores","nonMaxSuppressionAsync"),s=td(u,a,n,e,o,i),n=s.maxOutputSize,e=s.iouThreshold,o=s.scoreThreshold,i=s.softNmsSigma,[4,Promise.all([u.data(),a.data()])];case 1:return l=d.sent(),h=l[0],p=l[1],c=Bp(h,p,n,e,o,i),u!==t&&u.dispose(),a!==r&&a.dispose(),[2,c]}})})},e3=xe({cropAndResize_:function(t,r,n,e,o,i){var u=oe(t,"image","cropAndResize"),a=oe(r,"boxes","cropAndResize","float32"),s=oe(n,"boxInd","cropAndResize","int32");o=o||"bilinear",i=i||0;var l=a.shape[0];return ce(u.rank===4,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+u.rank+"."}),ce(a.rank===2&&a.shape[1]===4,function(){return"Error in cropAndResize: boxes must be have size ["+l+",4] but had shape "+a.shape+"."}),ce(s.rank===1&&s.shape[0]===l,function(){return"Error in cropAndResize: boxInd must be have size ["+l+"] but had shape "+a.shape+"."}),ce(e.length===2,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+e.length+"."}),ce(e[0]>=1&&e[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+e}),ce(o==="bilinear"||o==="nearest",function(){return"method must be bilinear or nearest, but was "+o}),Se.runKernelFunc(function(h,p){return h.cropAndResize(u,a,s,e,o,i)},{images:u,boxes:a,boxInd:s},null,"CropAndResize",{method:o,extrapolationValue:i,cropSize:e})}}),Jp=Object.freeze({resizeBilinear:XT,resizeNearestNeighbor:YT,nonMaxSuppression:KT,nonMaxSuppressionAsync:QT,nonMaxSuppressionWithScore:ZT,nonMaxSuppressionWithScoreAsync:JT,cropAndResize:e3}),em=function(t,r){return!(t>0)||r==="linear"},tm=function(t,r,n){if(n==null||n==="linear")return t;if(n==="relu")return t.mul(r.step());throw new Error("Gradient for activation "+n+" has not been implemented yet.")},rm=function(t,r){var n=r,e=Tr(t.shape,r.shape);return e.length>0&&(n=n.sum(e)),n.reshape(t.shape)},nm=function(t,r,n){if(r==="linear")return t;if(r==="relu")return ar(t);if(r==="elu")return ox(t);if(r==="relu6")return ax(t);if(r==="prelu")return ix(t,n);throw new Error("Unknown fused activation "+r+".")},t3=xe({fusedMatMul_:function(t){var r,n=t.a,e=t.b,o=t.transposeA,i=o!==void 0&&o,u=t.transposeB,a=u!==void 0&&u,s=t.bias,l=t.activation,h=l===void 0?"linear":l,p=t.preluActivationWeights;if(em(Se.state.gradientDepth,h)===!1){var c=Jc(n,e,i,a);return s!=null&&(c=Mt(c,s)),nm(c,h,p)}var d=oe(n,"a","fused matMul"),f=oe(e,"b","fused matMul");r=lr(d,f),d=r[0],f=r[1];var m=i?d.shape[d.rank-2]:d.shape[d.rank-1],y=a?f.shape[f.rank-1]:f.shape[f.rank-2],g=i?d.shape[d.rank-1]:d.shape[d.rank-2],v=a?f.shape[f.rank-2]:f.shape[f.rank-1],b=d.shape.slice(0,-2),w=f.shape.slice(0,-2),_=ht(b),j=ht(w);ce(d.rank>=2&&f.rank>=2&&d.rank===f.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+d.rank+" and "+f.rank+"."}),ce(Br(b,w),function(){return"Error in fused matMul: outer dimensions ("+b+") and ("+w+") of Tensors with shapes "+d.shape+" and "+f.shape+" must match."}),ce(m===y,function(){return"Error in fused matMul: inner shapes ("+m+") and ("+y+") of Tensors with shapes "+d.shape+" and "+f.shape+" and transposeA="+i+" and transposeB="+a+" must match."});var E,T,R=d.shape.slice(0,-2).concat([g,v]),M=i?d.as3D(_,m,g):d.as3D(_,g,m),I=a?f.as3D(j,v,y):f.as3D(j,y,v);s!=null&&It(R,(E=lr(E=oe(s,"bias","fused matMul"),d)[0]).shape),p!=null&&(T=oe(p,"prelu weights","fused matMul"));var D={a:M,b:I};s!=null&&(D.bias=E),p!=null&&(D.preluActivationWeights=T);var L=[M,I];return Se.runKernelFunc(function(N,W){var q=N.fusedBatchMatMul({a:M,b:I,transposeA:i,transposeB:a,bias:E,activation:h,preluActivationWeights:T});return W([M,I,q]),q},D,function(N,W){var q=W[0],H=W[1],B=W[2],G=tm(N,B,h),V={};return s!=null&&(V={bias:function(){return rm(E,G)}}),Object.assign(i||a?!i&&a?{a:function(){return G.matMul(H,!1,!1)},b:function(){return G.matMul(q,!0,!1)}}:i&&!a?{a:function(){return H.matMul(G,!1,!0)},b:function(){return q.matMul(G,!1,!1)}}:{a:function(){return H.matMul(G,!0,!0)},b:function(){return G.matMul(q,!0,!0)}}:{a:function(){return G.matMul(H,!1,!0)},b:function(){return q.matMul(G,!0,!1)}},V)},"_FusedMatMul",{transposeA:i,transposeB:a,activation:h},L,[!0]).reshape(R)}}),r3=xe({fusedConv2d_:function(t){var r=t.x,n=t.filter,e=t.strides,o=t.pad,i=t.dataFormat,u=i===void 0?"NHWC":i,a=t.dilations,s=a===void 0?[1,1]:a,l=t.dimRoundingMode,h=t.bias,p=t.activation,c=p===void 0?"linear":p,d=t.preluActivationWeights;if(c=c||"linear",em(Se.state.gradientDepth,c)===!1){var f=Xn(r,n,e,o,u,s,l);return h!=null&&(f=Mt(f,h)),nm(f,c,d)}var m=oe(r,"x","conv2d"),y=oe(n,"filter","conv2d"),g=m,v=!1;m.rank===3&&(v=!0,g=m.as4D(1,m.shape[0],m.shape[1],m.shape[2])),ce(g.rank===4,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+g.rank+"."}),ce(y.rank===4,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+y.rank+"."}),l!=null&&ce(pr(o),function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+l+" but got pad "+o+"."}),ce(g.shape[3]===y.shape[2],function(){return"Error in conv2d: depth of input ("+g.shape[3]+") must match input depth for filter "+y.shape[2]+"."}),ce(jn(e,s),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+s+"'"}),ce(u==="NHWC",function(){return"Error in conv2d: got dataFormat of "+u+" but only NHWC is currently supported."});var b,w,_=da(g.shape,y.shape,e,s,o,l);h!=null&&(b=lr(b=oe(h,"bias","fused conv2d"),m)[0],It(_.outShape,b.shape)),d!=null&&(w=oe(d,"prelu weights","fused conv2d"));var j={x:g,filter:y};h!=null&&(j.bias=b),d!=null&&(j.preluActivationWeights=w);var E=[y,g],T=Se.runKernelFunc(function(R,M){var I=R.fusedConv2d({input:g,filter:y,convInfo:_,bias:b,activation:c,preluActivationWeights:w});return M([y,g,I]),I},j,function(R,M){var I=M,D=I[0],L=I[1],N=I[2],W=tm(R,N,c);ce(cs(s),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+s+"'"});var q={};return h!=null&&(q={bias:function(){return rm(b,W)}}),Object.assign({x:function(){return Kb(L.shape,W,D,e,o)},filter:function(){return $p(L,W,D.shape,e,o)}},q)},"FusedConv2D",{convInfo:_,activation:c},E,[!0]);return v?T.as3D(T.shape[1],T.shape[2],T.shape[3]):T}}),n3=xe({fusedDepthwiseConv2d_:function(t){var r=t.x,n=t.filter,e=t.strides,o=t.pad,i=t.dataFormat,u=i===void 0?"NHWC":i,a=t.dilations,s=a===void 0?[1,1]:a,l=t.dimRoundingMode,h=t.bias,p=t.activation,c=p===void 0?"linear":p,d=t.preluActivationWeights;if(em(Se.state.gradientDepth,c)===!1){var f=Zc(r,n,e,o,u,s,l);return h!=null&&(f=Mt(f,h)),nm(f,c,d)}var m=oe(r,"x","depthwiseConv2d"),y=oe(n,"filter","depthwiseConv2d"),g=m,v=!1;m.rank===3&&(v=!0,g=m.as4D(1,m.shape[0],m.shape[1],m.shape[2])),ce(g.rank===4,function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+g.rank+"."}),ce(y.rank===4,function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+y.rank+"."}),ce(g.shape[3]===y.shape[2],function(){return"Error in fused depthwiseConv2d: number of input channels ("+g.shape[3]+") must match the inChannels dimension in filter "+y.shape[2]+"."}),s==null&&(s=[1,1]),ce(jn(e,s),function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+s+"'"}),l!=null&&ce(pr(o),function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+l+" but got pad "+o+"."});var b,w,_=da(g.shape,y.shape,e,s,o,l,!0);h!=null&&(b=lr(b=oe(h,"bias","fused conv2d"),m)[0],It(_.outShape,b.shape)),d!=null&&(w=oe(d,"prelu weights","fused depthwiseConv2d"));var j={x:g,filter:y};h!=null&&(j.bias=b),d!=null&&(j.preluActivationWeights=w);var E=[y,g],T=Se.runKernelFunc(function(R,M){var I=R.fusedDepthwiseConv2D({input:g,filter:y,convInfo:_,bias:b,activation:c,preluActivationWeights:w});return M([y,g,I]),I},j,function(R,M){ce(cs(s),function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+s+"'"});var I=M[0],D=M[1],L=M[2],N=tm(R,L,c),W={};return h!=null&&(W={bias:function(){return rm(b,N)}}),Object.assign({x:function(){return Qb(D.shape,N,I,_)},filter:function(){return Zb(D,N,I.shape,_)}},W)},"FusedDepthwiseConv2D",{convInfo:_,activation:c},E,[!0]);return v?T.as3D(T.shape[1],T.shape[2],T.shape[3]):T}}),o3=Object.freeze({matMul:t3,conv2d:r3,depthwiseConv2d:n3}),i3=Object.freeze({image:Jp,linalg:$T,losses:VT,spectral:TT,fused:o3,signal:PT,square:BC,squaredDifference:Db,conv1d:Xk,conv2d:Xn,conv3d:Yk,depthwiseConv2d:Zc,separableConv2d:Xp,conv2dTranspose:Kk,conv3dTranspose:Qk,op:xe,batchNormalization2d:mk,batchNormalization3d:yk,batchNormalization4d:gk,batchNormalization:vk,batchNorm:Ub,batchNorm2d:bk,batchNorm3d:xk,batchNorm4d:wk,booleanMaskAsync:$k,complex:Hr,real:zn,imag:So,concat:Cr,concat1d:oE,concat2d:iE,concat3d:aE,concat4d:sE,split:Dp,matMul:Jc,dot:Zk,outerProduct:Jk,reverse:Pu,reverse1d:eT,reverse2d:tT,reverse3d:rT,reverse4d:nT,maxPool:Or,avgPool:Du,pool:oT,maxPool3d:iT,avgPool3d:aT,slice:Ro,slice1d:sT,slice2d:uT,slice3d:tx,slice4d:lT,abs:UC,acos:GC,acosh:zC,asin:VC,asinh:WC,atan:HC,atanh:qC,ceil:$C,clipByValue:Wp,cos:XC,cosh:YC,erf:KC,exp:kh,expm1:QC,floor:ZC,log:JC,log1p:ek,logSigmoid:tk,neg:Sc,reciprocal:rk,round:nk,rsqrt:Ob,sigmoid:Lb,sign:ok,isNaN:ik,isInf:ak,isFinite:sk,sin:uk,sinh:lk,softplus:ck,sqrt:dk,step:fk,tan:hk,tanh:pk,all:cT,any:dT,argMax:fT,argMin:hT,logSumExp:pT,max:ed,mean:mT,min:yT,moments:gT,sum:nx,prod:vT,equal:Hb,equalStrict:Nk,greater:Fk,greaterEqual:qb,greaterEqualStrict:Bk,greaterStrict:Uk,less:Gk,lessEqual:zk,lessEqualStrict:Vk,lessStrict:Wk,notEqual:Hk,notEqualStrict:qk,add:Mt,addN:Ek,addStrict:jk,atan2:Ck,div:ro,divNoNan:kk,divStrict:Tk,floorDiv:Vb,maximum:Hp,maximumStrict:Mk,minimum:Wb,minimumStrict:Rk,mod:Ik,modStrict:Ak,mul:un,mulStrict:Pk,pow:Ec,powStrict:Dk,squaredDifferenceStrict:Ok,sub:Mr,subStrict:Lk,elu:ox,leakyRelu:bT,prelu:ix,relu:ar,relu6:ax,selu:xT,logicalAnd:Qc,logicalNot:_k,logicalOr:Gb,logicalXor:Sk,where:ia,whereAsync:zb,buffer:Ct,print:yE,batchToSpaceND:nb,broadcastTo:gE,cast:vE,clone:bE,cumsum:xE,depthToSpace:wE,expandDims:Gn,eye:ob,multinomial:_E,oneHot:Sh,pad:ca,pad1d:SE,pad2d:EE,pad3d:jE,pad4d:CE,rand:kE,randomNormal:TE,randomGamma:ME,randomUniform:ib,reshape:no,spaceToBatchND:ab,squeeze:sb,stack:On,tile:$a,truncatedNormal:RE,unstack:kr,setdiff1dAsync:IE,fill:Mo,linspace:nE,ones:ms,range:mc,scalar:ot,tensor:$r,tensor1d:wr,tensor2d:ji,tensor3d:Pp,tensor4d:yn,tensor5d:eE,tensor6d:tE,variable:rE,zeros:er,onesLike:rb,zerosLike:Dt,transpose:Ri,softmax:Qo,logSoftmax:FE,localResponseNormalization:wT,norm:sx,gather:qp,unsortedSegmentSum:$b,basicLSTMCell:_T,multiRNNCell:ST,movingAverage:ET,stridedSlice:jT,topk:CT,scatterND:kT,fft:Yp,ifft:jc,rfft:Kp,irfft:ux,sparseToDense:MT,gatherND:RT,diag:IT,dropout:AT,hannWindow:Qp,hammingWindow:cx,frame:Zp,stft:dx,inTopKAsync:DT});function Ve(t,r){Array.isArray(t)||(t=[t]),t.forEach(function(n){n!=null&&ce(n.dtype!=="complex64",function(){return r+" does not support complex64 tensors."})})}function af(t,r,n,e){if(n==="linear")return t.linear(r);if(n==="relu")return t.relu(r);if(n==="elu")return t.elu(r);if(n==="relu6")return t.relu6(r);if(n==="prelu")return t.prelu(r,e);throw new Error("Activation "+n+" has not been implemented for the CPU backend.")}var a3=function(t){function r(){var n=t.call(this)||this;return n.blockSize=48,n.firstUse=!0,n.data=new pb(n,Se),n}return uo(r,t),r.prototype.write=function(n,e,o){this.firstUse&&(this.firstUse=!1,Ue().get("IS_NODE")&&hc(`
============================
Hi there . Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================`));var i={};return this.data.set(i,{values:n,dtype:o}),i},r.prototype.move=function(n,e,o,i){this.data.set(n,{values:e,dtype:i})},r.prototype.numDataIds=function(){return this.data.numDataIds()},r.prototype.read=function(n){return lt(this,void 0,void 0,function(){return ct(this,function(e){return[2,this.readSync(n)]})})},r.prototype.readSync=function(n){var e=this.data.get(n),o=e.dtype,i=e.complexTensors;return o==="complex64"?Ch(this.readSync(i.real.dataId),this.readSync(i.imag.dataId)):this.data.get(n).values},r.prototype.bufferSync=function(n){var e=this.readSync(n.dataId),o=e;if(n.dtype==="string")try{o=e.map(function(i){return cc(i)})}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Ct(n.shape,n.dtype,o)},r.prototype.makeOutput=function(n,e,o){var i=this.write(n,e,o);return Se.makeTensorFromDataId(i,e,o,this)},r.prototype.disposeData=function(n){if(this.data.has(n)){var e=this.data.get(n).complexTensors;e!=null&&(e.real.dispose(),e.imag.dispose()),this.data.delete(n)}},r.prototype.time=function(n){return lt(this,void 0,void 0,function(){var e;return ct(this,function(o){return e=xo(),n(),[2,{kernelMs:xo()-e}]})})},r.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},r.prototype.complex=function(n,e){var o=this.makeOutput(null,n.shape,"complex64");return this.data.get(o.dataId).complexTensors={real:Se.keep(n.clone()),imag:Se.keep(e.clone())},o},r.prototype.real=function(n){return this.data.get(n.dataId).complexTensors.real.clone()},r.prototype.imag=function(n){return this.data.get(n.dataId).complexTensors.imag.clone()},r.prototype.slice=function(n,e,o){if(Ve(n,"slice"),fb(n.shape,e,o)){var i=hb(e,n.strides),u=ht(o);return $r(this.readSync(n.dataId).subarray(i,i+u),o,n.dtype)}for(var a=Ct(o,n.dtype),s=this.bufferSync(n),l=0;l<a.size;++l){var h=a.indexToLoc(l).map(function(p,c){return p+e[c]});a.values[l]=s.get.apply(s,h)}return a.toTensor()},r.prototype.stridedSlice=function(n,e,o,i){Ve(n,"stridedSlice");var u=Lp(e,o,i);if(u.some(function(d){return d===0}))return $r([],u);for(var a=Ct(u,n.dtype),s=this.bufferSync(n),l=0;l<a.size;l++){for(var h=a.indexToLoc(l),p=new Array(h.length),c=0;c<p.length;c++)p[c]=h[c]*i[c]+e[c];a.set.apply(a,[s.get.apply(s,p)].concat(h))}return a.toTensor()},r.prototype.diag=function(n){for(var e=this.readSync(n.dataId),o=Ct([n.size,n.size],n.dtype),i=o.values,u=0;u<e.length;u++)i[u*n.size+u]=e[u];return o.toTensor()},r.prototype.unstack=function(n,e){for(var o=n.shape[e],i=new Array(n.rank-1),u=0,a=0;a<n.rank;a++)a!==e&&(i[u++]=n.shape[a]);var s=new Array(n.rank).fill(0),l=n.shape.slice();l[e]=1;var h=new Array(o);for(a=0;a<h.length;a++)s[e]=a,h[a]=this.slice(n,s,l).reshape(i);return h},r.prototype.reverse=function(n,e){Ve(n,"reverse");for(var o=Ct(n.shape,n.dtype),i=this.bufferSync(n),u=function(s){var l=o.indexToLoc(s),h=l.slice();e.forEach(function(p){return h[p]=n.shape[p]-1-h[p]}),o.set.apply(o,[i.get.apply(i,h)].concat(l))},a=0;a<o.size;a++)u(a);return o.toTensor()},r.prototype.concat=function(n,e){var o=this;if(n[0].dtype==="complex64"){var i=n.map(function(d){return zn(d)}),u=n.map(function(d){return So(d)});return Hr(this.concat(i,e),this.concat(u,e))}var a=n.map(function(d){var f=ht(d.shape.slice(e));return d.as2D(-1,f)}),s=ls(a.map(function(d){return d.shape}),1),l=Ct(s,n[0].dtype).values;if(a[0].shape[0]===1){var h=0;a.forEach(function(d){l.set(o.readSync(d.dataId),h),h+=d.size})}else{var p=0;a.forEach(function(d){for(var f=o.readSync(d.dataId),m=0,y=0;y<d.shape[0];++y)for(var g=y*s[1]+p,v=0;v<d.shape[1];++v)l[g+v]=f[m++];p+=d.shape[1]})}var c=ls(n.map(function(d){return d.shape}),e);return $r(l,c,n[0].dtype)},r.prototype.neg=function(n){return Ve(n,"neg"),this.multiply(ot(-1),n)},r.prototype.add=function(n,e){return n.dtype==="complex64"||e.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),e.cast("complex64"),function(o,i,u,a){return{real:o+u,imag:i+a}}):this.broadcastedBinaryOp(n,e,qr(n.dtype,e.dtype),function(o,i){return o+i})},r.prototype.addN=function(n){var e=this;Ve(n,"addN");for(var o=n.map(function(h){return e.readSync(h.dataId)}),i=Ct(n[0].shape,n[0].dtype),u=i.values,a=0;a<n.length;a++)for(var s=o[a],l=0;l<u.length;l++)u[l]+=s[l];return i.toTensor()},r.prototype.softmax=function(n,e){var o=Rr([e],n.shape),i=this.max(n,o),u=En(i.shape,o),a=this.subtract(n,i.reshape(u)),s=this.exp(a),l=this.sum(s,o).reshape(u);return this.realDivide(s,l)},r.prototype.subtract=function(n,e){return n.dtype==="complex64"||e.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),e.cast("complex64"),function(o,i,u,a){return{real:o-u,imag:i-a}}):this.broadcastedBinaryOp(n,e,qr(n.dtype,e.dtype),function(o,i){return o-i})},r.prototype.pow=function(n,e){return Ve([n,e],"pow"),this.broadcastedBinaryOp(n,e,n.dtype,function(o,i){return Math.pow(o,i)})},r.prototype.batchMatMul=function(n,e,o,i){Ve([n,e],"matMul");for(var u=o?n.shape[1]:n.shape[2],a=o?n.shape[2]:n.shape[1],s=i?e.shape[1]:e.shape[2],l=n.shape[0],h=this.readSync(n.dataId),p=this.readSync(e.dataId),c=o?[n.strides[0],1,n.strides[1]]:[n.strides[0],n.strides[1],1],d=c[0],f=c[1],m=c[2],y=i?[1,e.strides[1],e.strides[0]]:[e.strides[1],1,e.strides[0]],g=y[0],v=y[1],b=y[2],w=a*s,_=Ct([l,a,s],n.dtype),j=_.values,E=this.blockSize,T=0;T<l;T++)for(var R=0;R<a;R+=E)for(var M=0;M<s;M+=E)for(var I=0;I<u;I+=E)for(var D=Math.min(R+E,a),L=Math.min(M+E,s),N=Math.min(I+E,u),W=R;W<D;W++)for(var q=M;q<L;q++){for(var H=0,B=I;B<N;B++)H+=h[T*d+W*f+B*m]*p[B*g+q*v+T*b];j[T*w+(W*s+q)]+=H}return _.toTensor()},r.prototype.fusedBatchMatMul=function(n){var e=n.a,o=n.b,i=n.transposeA,u=n.transposeB,a=n.bias,s=n.activation,l=n.preluActivationWeights,h=this.batchMatMul(e,o,i,u);return a&&(h=this.add(h,a)),s&&(h=af(this,h,s,l)),h},r.prototype.multiply=function(n,e){return n.dtype==="complex64"||e.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),e.cast("complex64"),function(o,i,u,a){return{real:o*u-i*a,imag:o*a+i*u}}):this.broadcastedBinaryOp(n,e,qr(n.dtype,e.dtype),function(o,i){return o*i})},r.prototype.realDivide=function(n,e){return Ve([n,e],"realDivide"),this.broadcastedBinaryOp(n,e,"float32",function(o,i){return o/i})},r.prototype.floorDiv=function(n,e){return Ve([n,e],"floorDiv"),this.broadcastedBinaryOp(n,e,"int32",function(o,i){return Math.floor(o/i)})},r.prototype.sum=function(n,e){Ve(n,"sum"),Tn("sum",e,n.rank);for(var o=rn(n.shape,e),i=o[0],u=o[1],a=er(i,qr(n.dtype,"int32")),s=ht(u),l=this.readSync(a.dataId),h=this.readSync(n.dataId),p=0;p<l.length;++p){for(var c=p*s,d=0,f=0;f<s;++f)d+=h[c+f];l[p]=d}return a},r.prototype.prod=function(n,e){Ve(n,"sum");for(var o=rn(n.shape,e),i=o[0],u=o[1],a=er(i,qr(n.dtype,"int32")),s=ht(u),l=this.readSync(a.dataId),h=this.readSync(n.dataId),p=0;p<l.length;++p){for(var c=p*s,d=1,f=0;f<s;++f)d*=h[c+f];l[p]=d}return a},r.prototype.unsortedSegmentSum=function(n,e,o){Ve(n,"unsortedSegmentSum");for(var i=[],u=n.rank-e.rank,a=0;a<u;++a)e=e.expandDims(a+1);for(a=0;a<o;++a){var s=ot(a,"int32"),l=Hb(s,e).asType("float32").mul(n).sum(0);i.push(l)}return On(i)},r.prototype.argMin=function(n,e){Ve(n,"argMin");var o=[e];Tn("argMin",o,n.rank);for(var i=rn(n.shape,o),u=i[0],a=i[1],s=er(u,"int32"),l=ht(a),h=this.readSync(s.dataId),p=this.readSync(n.dataId),c=0;c<h.length;++c){for(var d=c*l,f=p[d],m=0,y=0;y<l;++y){var g=p[d+y];g<f&&(f=g,m=y)}h[c]=m}return s},r.prototype.argMax=function(n,e){Ve(n,"argMax");var o=[e];Tn("argMax",o,n.rank);for(var i=rn(n.shape,o),u=i[0],a=i[1],s=er(u,"int32"),l=ht(a),h=this.readSync(s.dataId),p=this.readSync(n.dataId),c=0;c<h.length;++c){for(var d=c*l,f=p[d],m=0,y=0;y<l;++y){var g=p[d+y];g>f&&(f=g,m=y)}h[c]=m}return s},r.prototype.cumsum=function(n,e,o,i){if(Ve(n,"cumsum"),e!==n.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(n.rank-1)+" but got axis="+e);for(var u=qr(n.dtype,"int32"),a=er(n.shape,u),s=this.readSync(a.dataId),l=this.readSync(n.dataId),h=n.shape[n.rank-1],p=i?function(y,g){return y+h-g-1}:function(y,g){return y+g},c=0;c<l.length;c+=h)for(var d=0;d<h;d++){var f=p(c,d);if(d===0)s[f]=o?0:l[f];else{var m=p(c,d-1);s[f]=o?l[m]+s[m]:l[f]+s[m]}}return a},r.prototype.equal=function(n,e){return Ve([n,e],"equal"),this.broadcastedBinaryOp(n,e,"bool",function(o,i){return o===i?1:0})},r.prototype.notEqual=function(n,e){return Ve([n,e],"notEqual"),this.broadcastedBinaryOp(n,e,"bool",function(o,i){return o!==i?1:0})},r.prototype.less=function(n,e){return Ve([n,e],"less"),this.broadcastedBinaryOp(n,e,"bool",function(o,i){return o<i?1:0})},r.prototype.lessEqual=function(n,e){return Ve([n,e],"lessEqual"),this.broadcastedBinaryOp(n,e,"bool",function(o,i){return o<=i?1:0})},r.prototype.greater=function(n,e){return Ve([n,e],"greater"),this.broadcastedBinaryOp(n,e,"bool",function(o,i){return o>i?1:0})},r.prototype.greaterEqual=function(n,e){return Ve([n,e],"greaterEqual"),this.broadcastedBinaryOp(n,e,"bool",function(o,i){return o>=i?1:0})},r.prototype.logicalNot=function(n){Ve(n,"logicalNot");for(var e=this.readSync(n.dataId),o=new Uint8Array(e.length),i=0;i<e.length;++i)o[i]=e[i]?0:1;return this.makeOutput(o,n.shape,"bool")},r.prototype.logicalAnd=function(n,e){return Ve([n,e],"logicalAnd"),this.broadcastedBinaryOp(n,e,"bool",function(o,i){return o&&i})},r.prototype.logicalOr=function(n,e){return Ve([n,e],"logicalOr"),this.broadcastedBinaryOp(n,e,"bool",function(o,i){return o||i})},r.prototype.select=function(n,e,o){Ve([n,e,o],"select");for(var i=this.readSync(n.dataId),u=this.readSync(e.dataId),a=this.readSync(o.dataId),s=er(e.shape,qr(e.dtype,o.dtype)),l=this.readSync(s.dataId),h=0,p=n.rank===0||n.rank>1||e.rank===1?1:ht(e.shape.slice(1)),c=0;c<i.length;c++)for(var d=0;d<p;d++)i[c]===1?l[h++]=u[c]:l[h++]=a[c];return s},r.prototype.where=function(n){Ve([n],"where");var e=this.readSync(n.dataId);return Up(n.shape,e)},r.prototype.topk=function(n,e,o){return Ve(n,"topk"),_b(this.readSync(n.dataId),n.shape,n.dtype,e)},r.prototype.min=function(n,e){Ve(n,"min"),Tn("min",e,n.rank);for(var o=rn(n.shape,e),i=o[0],u=o[1],a=er(i,n.dtype),s=ht(u),l=this.readSync(a.dataId),h=this.readSync(n.dataId),p=0;p<l.length;++p){for(var c=p*s,d=h[c],f=0;f<s;++f){var m=h[c+f];m<d&&(d=m)}l[p]=d}return a},r.prototype.minimum=function(n,e){return Ve([n,e],"minimum"),this.broadcastedBinaryOp(n,e,n.dtype,function(o,i){return Math.min(o,i)})},r.prototype.mod=function(n,e){return Ve([n,e],"mod"),this.broadcastedBinaryOp(n,e,n.dtype,function(o,i){var u=o%i;return o<0&&i<0||o>=0&&i>=0?u:(u+i)%i})},r.prototype.max=function(n,e){Ve(n,"max"),Tn("max",e,n.rank);for(var o=rn(n.shape,e),i=o[0],u=o[1],a=er(i,n.dtype),s=ht(u),l=this.readSync(a.dataId),h=this.readSync(n.dataId),p=0;p<l.length;++p){for(var c=p*s,d=h[c],f=0;f<s;++f){var m=h[c+f];m>d&&(d=m)}l[p]=d}return a},r.prototype.maximum=function(n,e){return Ve([n,e],"maximum"),this.broadcastedBinaryOp(n,e,n.dtype,function(o,i){return Math.max(o,i)})},r.prototype.all=function(n,e){Ve(n,"all"),Tn("all",e,n.rank);for(var o=rn(n.shape,e),i=o[0],u=o[1],a=er(i,n.dtype),s=ht(u),l=this.readSync(a.dataId),h=this.readSync(n.dataId),p=0;p<l.length;++p){for(var c=p*s,d=h[c],f=0;f<s;++f){var m=h[c+f];d=d&&m}l[p]=d}return a},r.prototype.any=function(n,e){Ve(n,"any"),Tn("any",e,n.rank);for(var o=rn(n.shape,e),i=o[0],u=o[1],a=er(i,n.dtype),s=ht(u),l=this.readSync(a.dataId),h=this.readSync(n.dataId),p=0;p<l.length;++p){for(var c=p*s,d=h[c],f=0;f<s;++f){var m=h[c+f];d=d||m}l[p]=d}return a},r.prototype.squaredDifference=function(n,e){return Ve([n,e],"squaredDifference"),this.broadcastedBinaryOp(n,e,n.dtype,function(o,i){var u=o-i;return u*u})},r.prototype.ceil=function(n){Ve(n,"ceil");for(var e=this.readSync(n.dataId),o=new Float32Array(e.length),i=0;i<e.length;++i)o[i]=Math.ceil(e[i]);return this.makeOutput(o,n.shape,"float32")},r.prototype.floor=function(n){Ve(n,"floor");for(var e=this.readSync(n.dataId),o=new Float32Array(e.length),i=0;i<e.length;++i)o[i]=Math.floor(e[i]);return this.makeOutput(o,n.shape,"float32")},r.prototype.sign=function(n){Ve(n,"x");for(var e=this.readSync(n.dataId),o=new Float32Array(e.length),i=0;i<e.length;++i)e[i]<0?o[i]=-1:e[i]>0?o[i]=1:o[i]=0;return this.makeOutput(o,n.shape,"float32")},r.prototype.isNaN=function(n){Ve(n,"x");for(var e=this.readSync(n.dataId),o=new Uint8Array(e.length),i=0;i<e.length;++i)Number.isNaN(e[i])&&(o[i]=1);return this.makeOutput(o,n.shape,"bool")},r.prototype.isInf=function(n){Ve(n,"x");for(var e=this.readSync(n.dataId),o=new Uint8Array(e.length),i=0;i<e.length;++i)Math.abs(e[i])===1/0&&(o[i]=1);return this.makeOutput(o,n.shape,"bool")},r.prototype.isFinite=function(n){Ve(n,"x");for(var e=this.readSync(n.dataId),o=new Uint8Array(e.length),i=0;i<e.length;++i)Number.isFinite(e[i])&&(o[i]=1);return this.makeOutput(o,n.shape,"bool")},r.prototype.round=function(n){Ve(n,"round");for(var e=this.readSync(n.dataId),o=new Float32Array(e.length),i=0;i<e.length;++i){var u=Math.floor(e[i]);e[i]-u<.5?o[i]=Math.floor(e[i]):e[i]-u>.5?o[i]=Math.ceil(e[i]):o[i]=u%2==0?u:u+1}return this.makeOutput(o,n.shape,"float32")},r.prototype.exp=function(n){Ve(n,"exp");for(var e=this.readSync(n.dataId),o=new Float32Array(e.length),i=0;i<e.length;++i)o[i]=Math.exp(e[i]);return this.makeOutput(o,n.shape,"float32")},r.prototype.expm1=function(n){Ve(n,"expm1");for(var e=this.readSync(n.dataId),o=new Float32Array(e.length),i=0;i<e.length;++i)o[i]=Math.expm1(e[i]);return this.makeOutput(o,n.shape,"float32")},r.prototype.log=function(n){Ve(n,"log");for(var e=this.readSync(n.dataId),o=new Float32Array(e.length),i=0;i<e.length;++i){var u=e[i];o[i]=Math.log(u)}return this.makeOutput(o,n.shape,"float32")},r.prototype.log1p=function(n){Ve(n,"log1p");for(var e=this.readSync(n.dataId),o=new Float32Array(e.length),i=0;i<e.length;++i){var u=e[i];o[i]=Math.log1p(u)}return this.makeOutput(o,n.shape,"float32")},r.prototype.sqrt=function(n){Ve(n,"sqrt");for(var e=this.readSync(n.dataId),o=new Float32Array(e.length),i=0;i<e.length;++i){var u=e[i];o[i]=Math.sqrt(u)}return this.makeOutput(o,n.shape,"float32")},r.prototype.rsqrt=function(n){Ve(n,"rsqrt");for(var e=this.readSync(n.dataId),o=new Float32Array(e.length),i=0;i<e.length;++i){var u=e[i];o[i]=1/Math.sqrt(u)}return this.makeOutput(o,n.shape,"float32")},r.prototype.reciprocal=function(n){Ve(n,"reciprocal");for(var e=this.readSync(n.dataId),o=new Float32Array(e.length),i=0;i<e.length;++i)o[i]=1/e[i];return this.makeOutput(o,n.shape,"float32")},r.prototype.linear=function(n){return n},r.prototype.relu=function(n){Ve(n,"relu");for(var e=er(n.shape,n.dtype),o=this.readSync(e.dataId),i=this.readSync(n.dataId),u=0;u<i.length;++u)o[u]=Math.max(0,i[u]);return e},r.prototype.relu6=function(n){Ve(n,"relu");for(var e=er(n.shape,n.dtype),o=this.readSync(e.dataId),i=this.readSync(n.dataId),u=0;u<i.length;++u)o[u]=Math.min(Math.max(0,i[u]),6);return e},r.prototype.prelu=function(n,e){return Ve([n,e],"prelu"),this.broadcastedBinaryOp(n,e,n.dtype,function(o,i){return o<0?i*o:o})},r.prototype.elu=function(n){Ve(n,"elu");for(var e=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i){var u=o[i];e[i]=u>=0?u:Math.exp(u)-1}return this.makeOutput(e,n.shape,"float32")},r.prototype.eluDer=function(n,e){Ve([n,e],"eluDer");for(var o=new Float32Array(e.size),i=this.readSync(e.dataId),u=this.readSync(n.dataId),a=0;a<i.length;++a){var s=i[a];o[a]=s>=1?u[a]:u[a]*(s+1)}return this.makeOutput(o,e.shape,"float32")},r.prototype.selu=function(n){Ve(n,"selu");for(var e=zp,o=Vp,i=new Float32Array(n.size),u=this.readSync(n.dataId),a=0;a<u.length;++a){var s=u[a];i[a]=s>=0?o*s:e*(Math.exp(s)-1)}return this.makeOutput(i,n.shape,"float32")},r.prototype.clip=function(n,e,o){Ve(n,"clip");for(var i=new Float32Array(n.size),u=this.readSync(n.dataId),a=0;a<u.length;++a){var s=u[a];i[a]=s>o?o:s<e?e:s}return this.makeOutput(i,n.shape,"float32")},r.prototype.abs=function(n){for(var e=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)e[i]=Math.abs(o[i]);return this.makeOutput(e,n.shape,"float32")},r.prototype.complexAbs=function(n){for(var e=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<n.size;++i){var u=o[2*i],a=o[2*i+1];e[i]=Math.hypot(u,a)}return this.makeOutput(e,n.shape,"float32")},r.prototype.int=function(n){Ve(n,"int");for(var e=new Int32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)e[i]=o[i];return this.makeOutput(e,n.shape,"int32")},r.prototype.sigmoid=function(n){Ve(n,"sigmoid");for(var e=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)e[i]=1/(1+Math.exp(-o[i]));return this.makeOutput(e,n.shape,"float32")},r.prototype.softplus=function(n){Ve(n,"softplus");for(var e=Math.log(11920928955078125e-23)+2,o=new Float32Array(n.size),i=this.readSync(n.dataId),u=0;u<i.length;++u){var a=i[u]>-e,s=i[u]<e,l=Math.exp(i[u]),h=void 0;h=s?l:a?i[u]:Math.log(1+l),o[u]=h}return this.makeOutput(o,n.shape,"float32")},r.prototype.sin=function(n){Ve(n,"sin");for(var e=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)e[i]=Math.sin(o[i]);return this.makeOutput(e,n.shape,"float32")},r.prototype.cos=function(n){Ve(n,"cos");for(var e=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)e[i]=Math.cos(o[i]);return this.makeOutput(e,n.shape,"float32")},r.prototype.tan=function(n){Ve(n,"tan");for(var e=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)e[i]=Math.tan(o[i]);return this.makeOutput(e,n.shape,"float32")},r.prototype.asin=function(n){Ve(n,"asin");for(var e=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)e[i]=Math.asin(o[i]);return this.makeOutput(e,n.shape,"float32")},r.prototype.acos=function(n){Ve(n,"acos");for(var e=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)e[i]=Math.acos(o[i]);return this.makeOutput(e,n.shape,"float32")},r.prototype.atan=function(n){Ve(n,"atan");for(var e=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)e[i]=Math.atan(o[i]);return this.makeOutput(e,n.shape,"float32")},r.prototype.atan2=function(n,e){return Ve([n,e],"atan2"),this.broadcastedBinaryOp(n,e,n.dtype,function(o,i){return Math.atan2(o,i)})},r.prototype.sinh=function(n){Ve(n,"sinh");for(var e=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)e[i]=Math.sinh(o[i]);return this.makeOutput(e,n.shape,"float32")},r.prototype.cosh=function(n){Ve(n,"cosh");for(var e=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)e[i]=Math.cosh(o[i]);return this.makeOutput(e,n.shape,"float32")},r.prototype.tanh=function(n){Ve(n,"tanh");for(var e=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)e[i]=sS(o[i]);return this.makeOutput(e,n.shape,"float32")},r.prototype.asinh=function(n){Ve(n,"asinh");for(var e=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)e[i]=Math.asinh(o[i]);return this.makeOutput(e,n.shape,"float32")},r.prototype.acosh=function(n){Ve(n,"acosh");for(var e=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)e[i]=Math.acosh(o[i]);return this.makeOutput(e,n.shape,"float32")},r.prototype.atanh=function(n){Ve(n,"atanh");for(var e=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)e[i]=Math.atanh(o[i]);return this.makeOutput(e,n.shape,"float32")},r.prototype.erf=function(n){Ve(n,"erf");for(var e=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i){var u=Math.sign(o[i]),a=Math.abs(o[i]),s=1/(1+.3275911*a);e[i]=u*(1-((((1.061405429*s-1.453152027)*s+1.421413741)*s-.284496736)*s+.254829592)*s*Math.exp(-a*a))}return this.makeOutput(e,n.shape,"float32")},r.prototype.step=function(n,e){e===void 0&&(e=0),Ve(n,"step");for(var o=new Float32Array(n.size),i=this.readSync(n.dataId),u=0;u<i.length;++u){var a=i[u];isNaN(a)?o[u]=NaN:o[u]=a>0?1:e}return this.makeOutput(o,n.shape,"float32")},r.prototype.fusedConv2d=function(n){var e=n.input,o=n.filter,i=n.convInfo,u=n.bias,a=n.activation,s=n.preluActivationWeights,l=this.conv2d(e,o,i);return u&&(l=this.add(l,u)),a&&(l=af(this,l,a,s)),l},r.prototype.conv2d=function(n,e,o){Ve([n,e],"conv2d");for(var i=o.filterHeight,u=o.filterWidth,a=o.dilationHeight,s=o.dilationWidth,l=o.padInfo.left,h=o.padInfo.top,p=o.dataFormat==="channelsLast",c=Ct(o.outShape,n.dtype),d=n.strides[0],f=p?n.strides[1]:n.strides[2],m=p?n.strides[2]:1,y=p?1:n.strides[1],g=c.strides[0],v=p?c.strides[1]:c.strides[2],b=p?c.strides[2]:1,w=p?1:c.strides[1],_=this.readSync(n.dataId),j=this.readSync(e.dataId),E=c.values,T=0;T<o.batchSize;++T)for(var R=T*d,M=T*g,I=0;I<o.outHeight;++I)for(var D=M+I*v,L=I*o.strideHeight-h,N=0;N<i;N++){var W=L+N*a;if(!(W<0||W>=o.inHeight))for(var q=N*e.strides[0],H=R+W*f,B=0;B<o.outWidth;++B)for(var G=D+B*b,V=B*o.strideWidth-l,X=0;X<u;X++){var te=V+X*s;if(!(te<0||te>=o.inWidth))for(var A=H+te*m,O=q+X*e.strides[1],U=0;U<o.inChannels;++U){for(var Y=_[A+U*y],J=0;J<o.outChannels;++J)E[G+J*w]+=Y*j[O+J];O+=o.outChannels}}}return c.toTensor()},r.prototype.conv3d=function(n,e,o){for(var i=o.filterDepth,u=o.filterHeight,a=o.filterWidth,s=o.dilationDepth,l=o.dilationHeight,h=o.dilationWidth,p=o.padInfo.front,c=o.padInfo.left,d=o.padInfo.top,f=Ct(o.outShape,n.dtype),m=this.readSync(n.dataId),y=this.readSync(e.dataId),g=f.values,v=0;v<o.batchSize;++v)for(var b=v*n.strides[0],w=v*f.strides[0],_=0;_<o.outDepth;++_)for(var j=w+_*f.strides[1],E=_*o.strideDepth-p,T=0;T<i;T++){var R=E+T*s;if(!(R<0||R>=o.inDepth))for(var M=T*e.strides[0],I=b+R*n.strides[1],D=0;D<o.outHeight;++D)for(var L=j+D*f.strides[2],N=D*o.strideHeight-d,W=0;W<u;W++){var q=N+W*l;if(!(q<0||q>=o.inHeight))for(var H=M+W*e.strides[1],B=I+q*n.strides[2],G=0;G<o.outWidth;++G)for(var V=L+G*o.outChannels,X=G*o.strideWidth-c,te=0;te<a;te++){var A=X+te*h;if(!(A<0||A>=o.inWidth))for(var O=H+te*e.strides[2],U=B+A*o.inChannels,Y=O,J=0;J<o.inChannels;++J){for(var ae=m[U+J],ue=0;ue<o.outChannels;++ue)g[V+ue]+=ae*y[Y+ue];Y+=o.outChannels}}}}return f.toTensor()},r.prototype.conv2dDerInput=function(n,e,o){Ve([n,e],"conv2dDerInput");for(var i=Ct(o.inShape,"float32"),u=i.values,a=this.readSync(n.dataId),s=this.readSync(e.dataId),l=e.strides,h=l[0],p=l[1],c=l[2],d=o.batchSize,f=o.filterHeight,m=o.filterWidth,y=o.inChannels,g=o.inHeight,v=o.inWidth,b=o.outChannels,w=o.outHeight,_=o.outWidth,j=o.strideHeight,E=o.strideWidth,T=o.dataFormat,R=f-1-o.padInfo.top,M=m-1-o.padInfo.left,I=T==="channelsLast",D=i.strides[0],L=I?i.strides[1]:i.strides[2],N=I?i.strides[2]:1,W=I?1:i.strides[1],q=n.strides[0],H=I?n.strides[1]:n.strides[2],B=I?n.strides[2]:1,G=I?1:n.strides[1],V=0;V<d;++V)for(var X=0;X<y;++X)for(var te=0;te<g;++te)for(var A=te-R,O=Math.max(0,Math.ceil(A/j)),U=Math.min(w,(f+A)/j),Y=0;Y<v;++Y){for(var J=Y-M,ae=Math.max(0,Math.ceil(J/E)),ue=Math.min(_,(m+J)/E),de=0,ne=O;ne<U;++ne)for(var le=ne*j-A,me=ae;me<ue;++me)for(var Q=q*V+H*ne+B*me,pe=h*(f-1-le)+p*(m-1-(me*E-J))+c*X,ye=0;ye<b;++ye)de+=a[Q+G*ye]*s[pe+ye];u[D*V+L*te+N*Y+W*X]=de}return i.toTensor()},r.prototype.conv3dDerInput=function(n,e,o){for(var i=Ct(o.inShape,"float32"),u=i.values,a=i.strides,s=a[0],l=a[1],h=a[2],p=a[3],c=this.readSync(n.dataId),d=n.strides,f=d[0],m=d[1],y=d[2],g=d[3],v=this.readSync(e.dataId),b=e.strides,w=b[0],_=b[1],j=b[2],E=b[3],T=o.batchSize,R=o.filterDepth,M=o.filterHeight,I=o.filterWidth,D=o.inChannels,L=o.inDepth,N=o.inHeight,W=o.inWidth,q=o.outChannels,H=o.outDepth,B=o.outHeight,G=o.outWidth,V=o.strideDepth,X=o.strideHeight,te=o.strideWidth,A=R-1-o.padInfo.front,O=M-1-o.padInfo.top,U=I-1-o.padInfo.left,Y=0;Y<T;++Y)for(var J=0;J<D;++J)for(var ae=0;ae<L;++ae)for(var ue=ae-A,de=Math.max(0,Math.ceil(ue/V)),ne=Math.min(H,(R+ue)/V),le=0;le<N;++le)for(var me=le-O,Q=Math.max(0,Math.ceil(me/X)),pe=Math.min(B,(M+me)/X),ye=0;ye<W;++ye){for(var we=ye-U,ge=Math.max(0,Math.ceil(we/te)),Pe=Math.min(G,(I+we)/te),Ie=0,Fe=de;Fe<ne;++Fe)for(var Te=Fe*V-ue,$e=Q;$e<pe;++$e)for(var Je=$e*X-me,Ke=ge;Ke<Pe;++Ke)for(var at=f*Y+m*Fe+y*$e+g*Ke,Ze=w*(R-1-Te)+_*(M-1-Je)+j*(I-1-(Ke*te-we))+E*J,_e=0;_e<q;++_e)Ie+=c[at+_e]*v[Ze+_e];u[s*Y+l*ae+h*le+p*ye+J]=Ie}return i.toTensor()},r.prototype.conv2dDerFilter=function(n,e,o){Ve([n,e],"conv2dDerFilter");for(var i=o.strideHeight,u=o.strideWidth,a=o.filterHeight,s=o.filterWidth,l=o.dataFormat==="channelsLast",h=Ct(o.filterShape,"float32"),p=o.padInfo.left,c=o.padInfo.top,d=this.bufferSync(n),f=this.bufferSync(e),m=0;m<a;++m)for(var y=Math.max(0,Math.ceil((c-m)/i)),g=Math.min(o.outHeight,(o.inHeight+c-m)/i),v=0;v<s;++v)for(var b=Math.max(0,Math.ceil((p-v)/u)),w=Math.min(o.outWidth,(o.inWidth+p-v)/u),_=0;_<o.inChannels;++_)for(var j=0;j<o.outChannels;++j){for(var E=0,T=0;T<o.batchSize;++T)for(var R=y;R<g;++R)for(var M=m+R*i-c,I=b;I<w;++I){var D=v+I*u-p;E+=l?d.get(T,M,D,_)*f.get(T,R,I,j):d.get(T,_,M,D)*f.get(T,j,R,I)}h.set(E,m,v,_,j)}return h.toTensor()},r.prototype.conv3dDerFilter=function(n,e,o){for(var i=o.strideDepth,u=o.strideHeight,a=o.strideWidth,s=o.filterDepth,l=o.filterHeight,h=o.filterWidth,p=Ct(o.filterShape,"float32"),c=p.values,d=p.strides,f=d[0],m=d[1],y=d[2],g=d[3],v=this.readSync(e.dataId),b=e.strides,w=b[0],_=b[1],j=b[2],E=b[3],T=this.readSync(n.dataId),R=n.strides,M=R[0],I=R[1],D=R[2],L=R[3],N=o.padInfo.front,W=o.padInfo.left,q=o.padInfo.top,H=0;H<s;++H)for(var B=Math.max(0,Math.ceil((N-H)/i)),G=Math.min(o.outDepth,(o.inDepth+N-H)/i),V=H*f,X=0;X<l;++X)for(var te=Math.max(0,Math.ceil((q-X)/u)),A=Math.min(o.outHeight,(o.inHeight+q-X)/u),O=X*m+V,U=0;U<h;++U)for(var Y=Math.max(0,Math.ceil((W-U)/a)),J=Math.min(o.outWidth,(o.inWidth+W-U)/a),ae=U*y+O,ue=0;ue<o.inChannels;++ue)for(var de=ue*g+ae,ne=0;ne<o.outChannels;++ne){for(var le=0,me=0;me<o.batchSize;++me)for(var Q=me*M,pe=me*w,ye=B;ye<G;++ye)for(var we=(H+ye*i-N)*I+Q,ge=ye*_+pe,Pe=te;Pe<A;++Pe)for(var Ie=(X+Pe*u-q)*D+we,Fe=Pe*j+ge,Te=Y;Te<J;++Te){var $e=Te*E+Fe;le+=T[(U+Te*a-W)*L+Ie+ue]*v[$e+ne]}c[de+ne]=le}return p.toTensor()},r.prototype.fusedDepthwiseConv2D=function(n){var e=n.input,o=n.filter,i=n.convInfo,u=n.bias,a=n.activation,s=n.preluActivationWeights,l=this.depthwiseConv2D(e,o,i);return u&&(l=this.add(l,u)),a&&(l=af(this,l,a,s)),l},r.prototype.depthwiseConv2D=function(n,e,o){Ve([n,e],"depthwiseConv2D");for(var i=o.filterHeight,u=o.filterWidth,a=o.dilationHeight,s=o.dilationWidth,l=o.padInfo.left,h=o.padInfo.top,p=o.outChannels/o.inChannels,c=Ct(o.outShape,n.dtype),d=this.readSync(n.dataId),f=this.readSync(e.dataId),m=c.values,y=0;y<o.batchSize;++y)for(var g=y*n.strides[0],v=y*c.strides[0],b=0;b<o.outHeight;++b)for(var w=v+b*c.strides[1],_=b*o.strideHeight-l,j=0;j<i;++j){var E=_+j*a;if(!(E<0||E>=o.inHeight))for(var T=j*e.strides[0],R=g+E*n.strides[1],M=0;M<o.outWidth;++M)for(var I=w+M*c.strides[2],D=M*o.strideWidth-h,L=0;L<u;++L){var N=D+L*s;if(!(N<0||N>=o.inWidth))for(var W=T+L*e.strides[1],q=R+N*o.inChannels,H=I,B=W,G=0;G<o.inChannels;++G){for(var V=d[q+G],X=0;X<p;++X)m[H+X]+=V*f[B+X];H+=p,B+=p}}}return c.toTensor()},r.prototype.depthwiseConv2DDerInput=function(n,e,o){Ve([n,e],"depthwiseConv2DDerInput");for(var i=Ct(o.inShape,"float32"),u=i.values,a=i.strides,s=a[0],l=a[1],h=a[2],p=this.readSync(n.dataId),c=n.strides,d=c[0],f=c[1],m=c[2],y=this.readSync(e.dataId),g=e.strides,v=g[0],b=g[1],w=g[2],_=o.batchSize,j=o.filterHeight,E=o.filterWidth,T=o.inChannels,R=o.inHeight,M=o.inWidth,I=o.outChannels,D=o.outHeight,L=o.outWidth,N=o.strideHeight,W=o.strideWidth,q=j-1-o.padInfo.top,H=E-1-o.padInfo.left,B=I/T,G=0;G<_;++G)for(var V=0;V<T;++V)for(var X=0;X<R;++X)for(var te=X-q,A=Math.max(0,Math.ceil(te/N)),O=Math.min(D,(j+te)/N),U=0;U<M;++U){for(var Y=U-H,J=Math.max(0,Math.ceil(Y/W)),ae=Math.min(L,(E+Y)/W),ue=0,de=A;de<O;++de)for(var ne=de*N-te,le=J;le<ae;++le)for(var me=d*G+f*de+m*le,Q=v*(j-1-ne)+b*(E-1-(le*W-Y))+w*V,pe=0;pe<B;++pe)ue+=p[me+(V*B+pe)]*y[Q+pe];u[s*G+l*X+h*U+V]=ue}return i.toTensor()},r.prototype.depthwiseConv2DDerFilter=function(n,e,o){Ve([n,e],"depthwiseConv2DDerFilter");for(var i=o.strideHeight,u=o.strideWidth,a=o.filterHeight,s=o.filterWidth,l=Ct(o.filterShape,"float32"),h=o.padInfo.left,p=o.padInfo.top,c=o.outChannels/o.inChannels,d=this.bufferSync(n),f=this.bufferSync(e),m=0;m<a;++m)for(var y=Math.max(0,Math.ceil((p-m)/i)),g=Math.min(o.outHeight,(o.inHeight+p-m)/i),v=0;v<s;++v)for(var b=Math.max(0,Math.ceil((h-v)/u)),w=Math.min(o.outWidth,(o.inWidth+h-v)/u),_=0;_<o.outChannels;++_){for(var j=Math.trunc(_/c),E=_%c,T=0,R=0;R<o.batchSize;++R)for(var M=y;M<g;++M)for(var I=m+M*i-p,D=b;D<w;++D){var L=v+D*u-h;T+=d.get(R,I,L,j)*f.get(R,M,D,_)}l.set(T,m,v,j,E)}return l.toTensor()},r.prototype.tile=function(n,e){return Ve(n,"tile"),wb(this.bufferSync(n),e)},r.prototype.pad=function(n,e,o){Ve(n,"pad");var i=e.map(function(c,d){return c[0]+n.shape[d]+c[1]}),u=e.map(function(c){return c[0]}),a=this.bufferSync(n),s=Ct(i,n.dtype);o!==0&&s.values.fill(o);for(var l=0;l<n.size;l++){var h=a.indexToLoc(l),p=h.map(function(c,d){return c+u[d]});s.set.apply(s,[a.get.apply(a,h)].concat(p))}return s.toTensor()},r.prototype.transpose=function(n,e){Ve(n,"transpose");for(var o=new Array(n.rank),i=0;i<o.length;i++)o[i]=n.shape[e[i]];var u=this.readSync(n.dataId),a=Ct(o,n.dtype),s=this.bufferSync(n);for(i=0;i<n.size;++i){for(var l=s.indexToLoc(i),h=new Array(l.length),p=0;p<h.length;p++)h[p]=l[e[p]];var c=a.locToIndex(h);a.values[c]=u[i]}return a.toTensor()},r.prototype.gather=function(n,e,o){Ve([n,e],"gather");var i=n.shape.slice(),u=this.readSync(e.dataId);i[o]=u.length;for(var a=Ct(i,n.dtype),s=this.bufferSync(n),l=0;l<a.size;++l){var h=a.indexToLoc(l),p=h.slice();p[o]=u[h[o]];var c=s.locToIndex(p);a.values[l]=s.values[c]}return a.toTensor()},r.prototype.batchToSpaceND=function(n,e,o){Ve([n],"batchToSpaceND");var i=e.reduce(function(p,c){return p*c}),u=yc(n.shape,e,i),a=gc(u.length,e.length),s=vc(n.shape,e,i),l=ub(o,e.length),h=lb(s,o,e.length);return n.reshape(u).transpose(a).reshape(s).slice(l,h)},r.prototype.spaceToBatchND=function(n,e,o){Ve([n],"spaceToBatchND");var i=e.reduce(function(c,d){return c*d}),u=[[0,0]];u.push.apply(u,o);for(var a=1+e.length;a<n.shape.length;++a)u.push([0,0]);var s=n.pad(u),l=yc(s.shape,e,i,!1),h=gc(l.length,e.length,!1),p=vc(s.shape,e,i,!1);return s.reshape(l).transpose(h).reshape(p)},r.prototype.pool=function(n,e,o){Ve(n,"pool");for(var i=e.strideHeight,u=e.strideWidth,a=e.dilationHeight,s=e.dilationWidth,l=e.effectiveFilterHeight,h=e.effectiveFilterWidth,p=e.padInfo.top,c=e.padInfo.left,d=o==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,f=this.readSync(n.dataId),m=Ct(e.outShape,n.dtype),y=m.values,g=e.outShape[1]*e.outShape[2]*e.outShape[3],v=e.outShape[2]*e.outShape[3],b=e.outShape[3],w=0;w<e.batchSize;++w)for(var _=w*g,j=w*n.strides[0],E=0;E<e.inChannels;++E)for(var T=0;T<e.outHeight;++T)for(var R=T*i-p,M=Math.max(0,R),I=Math.min(e.inHeight,l+R),D=_+T*v,L=0;L<e.outWidth;++L){for(var N=L*u-c,W=Math.max(0,N),q=Math.min(e.inWidth,h+N),H=d,B=0,G=0,V=M;V<I;V+=a){for(var X=j+V*n.strides[1],te=W;te<q;te+=s){var A=f[X+te*n.strides[2]+E];o==="max"&&A>H?H=A:o==="avg"&&(B+=A,G++)}if(isNaN(H))break}y[D+L*b+E]=o==="avg"?B/G:H}return m.toTensor()},r.prototype.maxPool=function(n,e){return this.pool(n,e,"max")},r.prototype.maxPoolPositions=function(n,e){for(var o=Ct(e.outShape,"int32"),i=e.strideHeight,u=e.strideWidth,a=e.dilationHeight,s=e.dilationWidth,l=e.effectiveFilterHeight,h=e.effectiveFilterWidth,p=e.padInfo.top,c=e.padInfo.left,d=this.bufferSync(n),f=0;f<e.batchSize;++f)for(var m=0;m<e.inChannels;++m)for(var y=0;y<e.outHeight;++y){for(var g=y*i-p,v=g;v<0;)v+=a;for(var b=Math.min(e.inHeight,l+g),w=0;w<e.outWidth;++w){for(var _=w*u-c,j=_;j<0;)j+=s;for(var E=Math.min(e.inWidth,h+_),T=Number.NEGATIVE_INFINITY,R=-1,M=v;M<b;M+=a)for(var I=M-g,D=j;D<E;D+=s){var L=D-_,N=d.get(f,M,D,m);N>T&&(T=N,R=I*h+L)}o.set(R,f,y,w,m)}}return o.toTensor()},r.prototype.maxPoolBackprop=function(n,e,o,i){Ve([e,o],"maxPoolBackprop");for(var u=this.maxPoolPositions(e,i),a=i.strideHeight,s=i.strideWidth,l=i.dilationHeight,h=i.dilationWidth,p=i.effectiveFilterHeight,c=i.effectiveFilterWidth,d=c-1-i.padInfo.left,f=p-1-i.padInfo.top,m=Ct(e.shape,"float32"),y=this.bufferSync(u),g=this.bufferSync(n),v=0;v<i.batchSize;++v)for(var b=0;b<i.inChannels;++b)for(var w=0;w<i.inHeight;++w)for(var _=0;_<i.inWidth;++_){for(var j=w-f,E=_-d,T=0,R=0;R<p;R+=l){var M=(j+R)/a;if(!(M<0||M>=i.outHeight||Math.floor(M)!==M))for(var I=0;I<c;I+=h){var D=(E+I)/s;if(!(D<0||D>=i.outWidth||Math.floor(D)!==D)){var L=p*c-1-y.get(v,M,D,b)===R*c+I?1:0;L!==0&&(T+=g.get(v,M,D,b)*L)}}}m.set(T,v,w,_,b)}return m.toTensor()},r.prototype.avgPoolBackprop=function(n,e,o){Ve([n,e],"avgPoolBackprop");for(var i=o.strideHeight,u=o.strideWidth,a=o.filterHeight,s=o.filterWidth,l=o.dilationHeight,h=o.dilationWidth,p=o.effectiveFilterHeight,c=o.effectiveFilterWidth,d=c-1-o.padInfo.left,f=p-1-o.padInfo.top,m=Ct(e.shape,"float32"),y=1/(a*s),g=this.bufferSync(n),v=0;v<o.batchSize;++v)for(var b=0;b<o.inChannels;++b)for(var w=0;w<o.inHeight;++w)for(var _=0;_<o.inWidth;++_){for(var j=w-f,E=_-d,T=0,R=0;R<p;R+=l){var M=(j+R)/i;if(!(M<0||M>=o.outHeight||Math.floor(M)!==M))for(var I=0;I<c;I+=h){var D=(E+I)/u;D<0||D>=o.outWidth||Math.floor(D)!==D||(T+=g.get(v,M,D,b))}}m.set(T*y,v,w,_,b)}return m.toTensor()},r.prototype.pool3d=function(n,e,o){Ve(n,"pool3d");for(var i=e.strideDepth,u=e.strideHeight,a=e.strideWidth,s=e.dilationDepth,l=e.dilationHeight,h=e.dilationWidth,p=e.effectiveFilterDepth,c=e.effectiveFilterHeight,d=e.effectiveFilterWidth,f=e.padInfo.front,m=e.padInfo.top,y=e.padInfo.left,g=o==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=this.readSync(n.dataId),b=Ct(e.outShape,n.dtype),w=b.values,_=e.outShape[1]*e.outShape[2]*e.outShape[3]*e.outShape[4],j=e.outShape[2]*e.outShape[3]*e.outShape[4],E=e.outShape[3]*e.outShape[4],T=e.outShape[4],R=0;R<e.batchSize;++R)for(var M=R*_,I=R*n.strides[0],D=0;D<e.inChannels;++D)for(var L=0;L<e.outDepth;++L){for(var N=L*i-f,W=N;W<0;)W+=s;for(var q=Math.min(e.inDepth,p+N),H=M+L*j,B=0;B<e.outHeight;++B){for(var G=B*u-m,V=G;V<0;)V+=l;for(var X=Math.min(e.inHeight,c+G),te=H+B*E,A=0;A<e.outWidth;++A){for(var O=A*a-y,U=O;U<0;)U+=h;for(var Y=Math.min(e.inWidth,d+O),J=te+A*T,ae=g,ue=0,de=0,ne=W;ne<q;ne+=s){for(var le=I+ne*n.strides[1],me=V;me<X;me+=l){for(var Q=le+me*n.strides[2],pe=U;pe<Y;pe+=h){var ye=v[Q+pe*n.strides[3]+D];if(o==="max"&&ye>ae?ae=ye:o==="avg"&&(ue+=ye,de++),isNaN(ae))break}if(isNaN(ae))break}if(isNaN(ae))break}w[J+D]=o==="avg"?ue/de:ae}}}return b.toTensor()},r.prototype.avgPool3d=function(n,e){return Ve(n,"avgPool3d"),this.pool3d(n,e,"avg").toFloat()},r.prototype.avgPool3dBackprop=function(n,e,o){Ve([n,e],"avgPool3dBackprop");for(var i=o.strideDepth,u=o.strideHeight,a=o.strideWidth,s=o.filterDepth,l=o.filterHeight,h=o.filterWidth,p=o.dilationDepth,c=o.dilationHeight,d=o.dilationWidth,f=o.effectiveFilterDepth,m=o.effectiveFilterHeight,y=o.effectiveFilterWidth,g=f-1-o.padInfo.front,v=y-1-o.padInfo.left,b=m-1-o.padInfo.top,w=Ct(e.shape,"float32"),_=1/(s*l*h),j=this.bufferSync(n),E=0;E<o.batchSize;++E)for(var T=0;T<o.inChannels;++T)for(var R=0;R<o.inDepth;++R)for(var M=0;M<o.inHeight;++M)for(var I=0;I<o.inWidth;++I){for(var D=R-g,L=M-b,N=I-v,W=0,q=0;q<f;q+=p){var H=(D+q)/i;if(!(H<0||H>=o.outDepth||Math.floor(H)!==H))for(var B=0;B<m;B+=c){var G=(L+B)/u;if(!(G<0||G>=o.outHeight||Math.floor(G)!==G))for(var V=0;V<y;V+=d){var X=(N+V)/a;X<0||X>=o.outWidth||Math.floor(X)!==X||(W+=j.get(E,H,G,X,T))}}}w.set(W*_,E,R,M,I,T)}return w.toTensor()},r.prototype.maxPool3d=function(n,e){return Ve(n,"maxPool3d"),this.pool3d(n,e,"max").toFloat()},r.prototype.maxPool3dPositions=function(n,e){for(var o=Ct(e.outShape,"int32"),i=e.strideDepth,u=e.strideHeight,a=e.strideWidth,s=e.dilationDepth,l=e.dilationHeight,h=e.dilationWidth,p=e.effectiveFilterDepth,c=e.effectiveFilterHeight,d=e.effectiveFilterWidth,f=e.padInfo.front,m=e.padInfo.top,y=e.padInfo.left,g=this.bufferSync(n),v=0;v<e.batchSize;++v)for(var b=0;b<e.inChannels;++b)for(var w=0;w<e.outDepth;++w){for(var _=w*i-f,j=_;j<0;)j+=s;for(var E=Math.min(e.inDepth,p+_),T=0;T<e.outHeight;++T){for(var R=T*u-m,M=R;M<0;)M+=l;for(var I=Math.min(e.inHeight,c+R),D=0;D<e.outWidth;++D){for(var L=D*a-y,N=L;N<0;)N+=h;for(var W=Math.min(e.inWidth,d+L),q=Number.NEGATIVE_INFINITY,H=-1,B=j;B<E;B+=s)for(var G=B-_,V=M;V<I;V+=l)for(var X=V-R,te=N;te<W;te+=h){var A=te-L,O=g.get(v,B,V,te,b);O>=q&&(q=O,H=G*c*d+X*c+A)}o.set(H,v,w,T,D,b)}}}return o.toTensor()},r.prototype.maxPool3dBackprop=function(n,e,o,i){Ve([e,o],"maxPool3dBackprop");for(var u=this.maxPool3dPositions(e,i),a=i.strideDepth,s=i.strideHeight,l=i.strideWidth,h=i.dilationDepth,p=i.dilationHeight,c=i.dilationWidth,d=i.effectiveFilterDepth,f=i.effectiveFilterHeight,m=i.effectiveFilterWidth,y=d-1-i.padInfo.front,g=m-1-i.padInfo.left,v=f-1-i.padInfo.top,b=Ct(e.shape,"float32"),w=this.bufferSync(u),_=this.bufferSync(n),j=0;j<i.batchSize;++j)for(var E=0;E<i.inChannels;++E)for(var T=0;T<i.inDepth;++T)for(var R=0;R<i.inHeight;++R)for(var M=0;M<i.inWidth;++M){for(var I=T-y,D=R-v,L=M-g,N=0,W=0;W<d;W+=h){var q=(I+W)/a;if(!(q<0||q>=i.outDepth||Math.floor(q)!==q))for(var H=0;H<f;H+=p){var B=(D+H)/s;if(!(B<0||B>=i.outHeight||Math.floor(B)!==B))for(var G=0;G<m;G+=c){var V=(L+G)/l;if(!(V<0||V>=i.outWidth||Math.floor(V)!==V)){var X=d*f*m-1-w.get(j,q,B,V,E)===W*f*m+H*m+G?1:0;X!==0&&(N+=_.get(j,q,B,V,E)*X)}}}}b.set(N,j,T,R,M,E)}return b.toTensor()},r.prototype.cast=function(n,e){return gb(n,e,this)},r.prototype.reshape=function(n,e){return jh(n,e)},r.prototype.avgPool=function(n,e){return Ve(n,"avgPool"),this.pool(n,e,"avg").toFloat()},r.prototype.resizeBilinear=function(n,e,o,i){Ve(n,"resizeBilinear");for(var u=n.shape,a=u[0],s=u[1],l=u[2],h=u[3],p=this.readSync(n.dataId),c=new Float32Array(ht([a,e,o,h])),d=[i&&e>1?s-1:s,i&&o>1?l-1:l],f=[i&&e>1?e-1:e,i&&o>1?o-1:o],m=0,y=d[0]/f[0],g=d[1]/f[1],v=0;v<a;v++)for(var b=0;b<e;b++)for(var w=y*b,_=Math.floor(w),j=w-_,E=Math.min(s-1,Math.ceil(w)),T=v*n.strides[0]+_*n.strides[1],R=v*n.strides[0]+E*n.strides[1],M=0;M<o;M++)for(var I=g*M,D=Math.floor(I),L=I-D,N=Math.min(l-1,Math.ceil(I)),W=T+D*n.strides[2],q=R+D*n.strides[2],H=T+N*n.strides[2],B=R+N*n.strides[2],G=0;G<h;G++){var V=p[W+G],X=p[q+G],te=V+(p[H+G]-V)*L,A=te+(X+(p[B+G]-X)*L-te)*j;c[m++]=A}return $r(c,[a,e,o,h])},r.prototype.resizeBilinearBackprop=function(n,e,o){Ve([n,e],"resizeBilinearBackprop");for(var i=e.shape,u=i[0],a=i[1],s=i[2],l=i[3],h=n.shape,p=h[1],c=h[2],d=new Float32Array(u*a*s*l),f=[o&&p>1?a-1:a,o&&c>1?s-1:s],m=[o&&p>1?p-1:p,o&&c>1?c-1:c],y=f[0]/m[0],g=f[1]/m[1],v=this.readSync(n.dataId),b=0,w=0;w<u;w++)for(var _=w*e.strides[0],j=0;j<p;j++)for(var E=j*y,T=Math.floor(E),R=Math.min(Math.ceil(E),a-1),M=_+T*e.strides[1],I=_+R*e.strides[1],D=E-T,L=1-D,N=0;N<c;N++)for(var W=N*g,q=Math.floor(W),H=Math.min(Math.ceil(W),s-1),B=W-q,G=1-B,V=M+q*e.strides[2],X=M+H*e.strides[2],te=I+q*e.strides[2],A=I+H*e.strides[2],O=L*G,U=L*B,Y=D*G,J=D*B,ae=0;ae<l;ae++){var ue=v[b++];d[V+ae]+=ue*O,d[X+ae]+=ue*U,d[te+ae]+=ue*Y,d[A+ae]+=ue*J}return yn(d,[u,s,a,l],e.dtype)},r.prototype.resizeNearestNeighbor=function(n,e,o,i){Ve(n,"resizeNearestNeighbor");for(var u=n.shape,a=u[0],s=u[1],l=u[2],h=u[3],p=this.readSync(n.dataId),c=new Float32Array(a*e*o*h),d=[i&&e>1?s-1:s,i&&o>1?l-1:l],f=[i&&e>1?e-1:e,i&&o>1?o-1:o],m=d[0]/f[0],y=d[1]/f[1],g=0,v=0;v<a;v++)for(var b=v*n.strides[0],w=0;w<e;w++)for(var _=m*w,j=b+Math.min(s-1,i?Math.round(_):Math.floor(_))*n.strides[1],E=0;E<o;E++)for(var T=y*E,R=j+Math.min(l-1,i?Math.round(T):Math.floor(T))*n.strides[2],M=0;M<h;M++){var I=p[R+M];c[g++]=I}return $r(c,[a,e,o,h],n.dtype)},r.prototype.resizeNearestNeighborBackprop=function(n,e,o){Ve([n,e],"resizeNearestNeighborBackprop");for(var i=e.shape,u=i[0],a=i[1],s=i[2],l=i[3],h=n.shape,p=h[1],c=h[2],d=new Float32Array(u*a*s*l),f=this.readSync(n.dataId),m=[o&&p>1?a-1:a,o&&c>1?s-1:s],y=[o&&p>1?p-1:p,o&&c>1?c-1:c],g=m[0]/y[0],v=m[1]/y[1],b=1/g,w=1/v,_=2*Math.ceil(b)+2,j=2*Math.ceil(w)+2,E=0;E<u;E++)for(var T=E*e.strides[0],R=0;R<a;R++)for(var M=T+R*e.strides[1],I=Math.floor(R*b),D=Math.floor(I-_/2),L=0;L<s;L++)for(var N=M+L*e.strides[2],W=Math.floor(L*w),q=Math.floor(W-j/2),H=0;H<l;H++){for(var B=0,G=0;G<_;G++){var V=G+D;if(!(V<0||V>=p)){var X=T+V*n.strides[1],te=V*g;if(R===Math.min(a-1,o?Math.round(te):Math.floor(te)))for(var A=0;A<j;A++){var O=A+q;if(!(O<0||O>=c)){var U=X+O*n.strides[2],Y=O*v;L===Math.min(s-1,o?Math.round(Y):Math.floor(Y))&&(B+=f[U+H])}}}}d[N+H]=B}return yn(d,e.shape,e.dtype)},r.prototype.batchNormalization=function(n,e,o,i,u,a){Ve([n,e,o,u,a],"batchNorm");for(var s=this.readSync(n.dataId),l=this.readSync(e.dataId),h=this.readSync(o.dataId),p=u?this.readSync(u.dataId):new Float32Array([1]),c=a?this.readSync(a.dataId):new Float32Array([0]),d=new Float32Array(s.length),f=c.length,m=p.length,y=h.length,g=l.length,v=0,b=0,w=0,_=0,j=0;j<s.length;++j)d[j]=c[v++]+(s[j]-l[b++])*p[w++]/Math.sqrt(h[_++]+i),v>=f&&(v=0),b>=g&&(b=0),w>=m&&(w=0),_>=y&&(_=0);return yn(d,n.shape)},r.prototype.localResponseNormalization4D=function(n,e,o,i,u){Ve(n,"localResponseNormalization4D");var a=n.shape[3],s=a-1,l=this.readSync(n.dataId),h=n.size,p=new Float32Array(h);function c(y){for(var g=y%a,v=y-g+Math.max(0,g-e),b=y-g+Math.min(g+e,s),w=0;v<=b;v++){var _=l[v];w+=_*_}return w}for(var d=0;d<h;d++){var f=c(d),m=l[d]*Math.pow(o+i*f,-u);p[d]=m}return yn(p,n.shape)},r.prototype.LRNGrad=function(n,e,o,i,u,a,s){Ve(n,"LRNGrad");for(var l=n.shape[3],h=this.readSync(n.dataId),p=this.readSync(e.dataId),c=this.readSync(o.dataId),d=new Float32Array(n.size),f=n.size,m=0;m<f;m++){for(var y=m%l,g=m-y+Math.max(0,y-i),v=m-y+Math.min(l,y+i+1),b=0,w=g;w<v;w++)b+=Math.pow(p[w],2);for(b=a*b+u,w=g;w<v;w++){var _=-2*a*s*p[w]*c[m]/b;m===w&&(_+=Math.pow(b,-s)),_*=h[m],d[w]+=_}}return yn(d,n.shape)},r.prototype.multinomial=function(n,e,o,i){Ve(n,"multinomial");for(var u=e?n:Qo(n),a=u.shape[0],s=u.shape[1],l=er([a,o],"int32"),h=this.readSync(l.dataId),p=this.readSync(u.dataId),c=0;c<a;++c){var d=c*s,f=new Float32Array(s-1);f[0]=p[d];for(var m=1;m<f.length;++m)f[m]=f[m-1]+p[d+m];for(var y=Xc(i.toString()),g=c*o,v=0;v<o;++v){var b=y();h[g+v]=f.length;for(var w=0;w<f.length;w++)if(b<f[w]){h[g+v]=w;break}}}return l},r.prototype.oneHot=function(n,e,o,i){Ve(n,"oneHot");var u=new Float32Array(n.size*e);u.fill(i);for(var a=this.readSync(n.dataId),s=0;s<n.size;++s)a[s]>=0&&a[s]<e&&(u[s*e+a[s]]=o);return ji(u,[n.size,e],"int32")},r.prototype.nonMaxSuppression=function(n,e,o,i,u){return Ve(n,"nonMaxSuppression"),Fp(this.readSync(n.dataId),this.readSync(e.dataId),o,i,u)},r.prototype.fft=function(n){return this.fftBatch(n,!1)},r.prototype.ifft=function(n){return this.fftBatch(n,!0)},r.prototype.fftBatch=function(n,e){for(var o=n.shape[0],i=n.shape[1],u=Ct(n.shape,"float32"),a=Ct(n.shape,"float32"),s=zn(n).as2D(o,i),l=So(n).as2D(o,i),h=0;h<o;h++)for(var p=s.slice([h,0],[1,i]),c=l.slice([h,0],[1,i]),d=Hr(p,c),f=this.readSync(this.fftImpl(d,e).dataId),m=0;m<i;m++){var y=Fg(f,m);u.values[h*i+m]=y.real,a.values[h*i+m]=y.imag}return Hr(u.toTensor(),a.toTensor()).as2D(o,i)},r.prototype.fftImpl=function(n,e){var o=n.as1D(),i=o.size;if(this.isExponentOf2(i)){var u=this.fftRadix2(o,i,e).as2D(n.shape[0],n.shape[1]);return e&&(u=Hr(zn(u).div(ot(i)),So(u).div(ot(i)))),u}var a=this.readSync(n.dataId),s=function(l){for(var h=new Float32Array(l.length/2),p=new Float32Array(l.length/2),c=0;c<l.length;c+=2)h[c/2]=l[c],p[c/2]=l[c+1];return{real:h,imag:p}}(this.fourierTransformByMatmul(a,i,e));return Hr(s.real,s.imag).as2D(n.shape[0],n.shape[1])},r.prototype.isExponentOf2=function(n){return(n&n-1)==0},r.prototype.fftRadix2=function(n,e,o){if(e===1)return n;var i=this.readSync(n.dataId),u=e/2,a=function(g){for(var v=Math.ceil(g.length/4),b=new Float32Array(v),w=new Float32Array(v),_=0;_<g.length;_+=4)b[Math.floor(_/4)]=g[_],w[Math.floor(_/4)]=g[_+1];return{real:b,imag:w}}(i),s=Hr(a.real,a.imag).as1D(),l=function(g){for(var v=Math.floor(g.length/4),b=new Float32Array(v),w=new Float32Array(v),_=2;_<g.length;_+=4)b[Math.floor(_/4)]=g[_],w[Math.floor(_/4)]=g[_+1];return{real:b,imag:w}}(i),h=Hr(l.real,l.imag).as1D();s=this.fftRadix2(s,u,o),h=this.fftRadix2(h,u,o);var p=function(g,v){for(var b=new Float32Array(g/2),w=new Float32Array(g/2),_=0;_<Math.ceil(g/2);_++){var j=(v?2:-2)*Math.PI*(_/g);b[_]=Math.cos(j),w[_]=Math.sin(j)}return{real:b,imag:w}}(e,o),c=Hr(p.real,p.imag).mul(h),d=s.add(c),f=s.sub(c),m=zn(d).concat(zn(f)),y=So(d).concat(So(f));return Hr(m,y).as1D()},r.prototype.fourierTransformByMatmul=function(n,e,o){for(var i=new Float32Array(2*e),u=0;u<e;u++){for(var a=0,s=0,l=0;l<e;l++){var h=UE(u*l,e,o),p=Fg(n,l);a+=p.real*h.real-p.imag*h.imag,s+=p.real*h.imag+p.imag*h.real}o&&(a/=e,s/=e),BE(i,a,s,u)}return i},r.prototype.depthToSpace=function(n,e,o){ce(o==="NHWC",function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+o}),ce(e>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+e});for(var i=n.shape[0],u=n.shape[1],a=n.shape[2],s=n.shape[3],l=u*e,h=a*e,p=s/(e*e),c=this.readSync(n.dataId),d=new Float32Array(i*l*h*p),f=0,m=0;m<i;++m)for(var y=0;y<l;++y)for(var g=Math.floor(y/e),v=y%e,b=0;b<h;++b)for(var w=Math.floor(b/e),_=(v*e+b%e)*p,j=0;j<p;++j){var E=j+_+s*(w+a*(g+u*m));d[f++]=c[E]}return yn(d,[i,l,h,p])},r.prototype.broadcastedBinaryOp=function(n,e,o,i){var u=It(n.shape,e.shape),a=Ct(u,o),s=this.readSync(n.dataId),l=this.readSync(e.dataId),h=mi(n.shape,u),p=mi(e.shape,u),c=a.values;if(h.length+p.length===0)for(var d=0;d<c.length;++d)c[d]=i(s[d%s.length],l[d%l.length]);else{var f=this.bufferSync(n),m=this.bufferSync(e),y=function(g){var v=a.indexToLoc(g),b=v.slice(-n.rank);h.forEach(function(E){return b[E]=0});var w=f.locToIndex(b),_=v.slice(-e.rank);p.forEach(function(E){return _[E]=0});var j=m.locToIndex(_);c[g]=i(s[w],l[j])};for(d=0;d<c.length;++d)y(d)}return a.toTensor()},r.prototype.broadcastedBinaryComplexOp=function(n,e,o){var i=It(n.shape,e.shape),u=Ct(i,"float32"),a=Ct(i,"float32"),s=this.readSync(n.dataId),l=this.readSync(e.dataId),h=mi(n.shape,i),p=mi(e.shape,i),c=u.values,d=a.values;if(h.length+p.length===0)for(var f=0;f<c.length;f++){var m=f%s.length,y=f%l.length,g=o(s[2*m],s[2*m+1],l[2*y],l[2*y+1]);c[f]=g.real,d[f]=g.imag}else{var v=this.bufferSync(this.data.get(n.dataId).complexTensors.real),b=this.bufferSync(this.data.get(e.dataId).complexTensors.real),w=function(_){var j=u.indexToLoc(_),E=j.slice(-n.rank);h.forEach(function(D){return E[D]=0});var T=v.locToIndex(E),R=j.slice(-e.rank);p.forEach(function(D){return R[D]=0});var M=b.locToIndex(R),I=o(s[2*T],s[2*T+1],l[2*M],l[2*M+1]);c[_]=I.real,d[_]=I.imag};for(f=0;f<c.length;f++)w(f)}return this.complex(u.toTensor(),a.toTensor())},r.prototype.split=function(n,e,o){return xb(n,e,o)},r.prototype.dispose=function(){},r.prototype.floatPrecision=function(){return 32},r.prototype.epsilon=function(){return 1e-7},r.prototype.cropAndResize=function(n,e,o,i,u,a){for(var s=n.shape,l=s[0],h=s[1],p=s[2],c=s[3],d=e.shape[0],f=i[0],m=i[1],y=Ct([d,f,m,c],"float32"),g=this.readSync(e.dataId),v=this.readSync(o.dataId),b=this.readSync(n.dataId),w=n.strides,_=y.strides,j=0;j<d;j++){var E=4*j,T=g[E],R=g[E+1],M=g[E+2],I=g[E+3],D=v[j];if(!(D>=l))for(var L=f>1?(M-T)*(h-1)/(f-1):0,N=m>1?(I-R)*(p-1)/(m-1):0,W=0;W<f;W++){var q=f>1?T*(h-1)+W*L:.5*(T+M)*(h-1);if(q<0||q>h-1)for(var H=0;H<m;H++)for(var B=0;B<c;B++){var G=B+H*_[2]+W*_[1]+j*_[0];y.values[G]=a}else if(u==="bilinear"){var V=Math.floor(q),X=Math.ceil(q),te=q-V;for(H=0;H<m;H++)if((ne=m>1?R*(p-1)+H*N:.5*(R+I)*(p-1))<0||ne>p-1)for(B=0;B<c;B++)G=B+H*_[2]+W*_[1]+j*_[0],y.values[G]=a;else{var A=Math.floor(ne),O=Math.ceil(ne),U=ne-A;for(B=0;B<c;B++){var Y=b[G=B+A*w[2]+V*w[1]+D*w[0]],J=b[G=B+O*w[2]+V*w[1]+D*w[0]],ae=b[G=B+A*w[2]+X*w[1]+D*w[0]],ue=Y+(J-Y)*U,de=ae+(b[G=B+O*w[2]+X*w[1]+D*w[0]]-ae)*U;G=B+H*_[2]+W*_[1]+j*_[0],y.values[G]=ue+(de-ue)*te}}}else for(H=0;H<m;++H){var ne;if((ne=m>1?R*(p-1)+H*N:.5*(R+I)*(p-1))<0||ne>p-1)for(B=0;B<c;B++)G=B+H*_[2]+W*_[1]+j*_[0],y.values[G]=a;else{var le=Math.round(ne),me=Math.round(q);for(B=0;B<c;B++){var Q=B+le*w[2]+me*w[1]+D*w[0],pe=B+H*_[2]+W*_[1]+j*_[0];y.values[pe]=b[Q]}}}}}return y.toTensor()},r.prototype.sparseToDense=function(n,e,o,i){var u=bc(0,n,o),a=u.sliceRank,s=u.numUpdates,l=u.sliceSize,h=u.strides,p=u.outputSize;return this.scatter(n,e,o,p,l,s,a,h,i,!1)},r.prototype.gatherND=function(n,e){var o=e.shape,i=o[o.length-1],u=cb(n,e),a=u[0],s=u[1],l=u[2],h=u[3];if(s===0)return $r([],a,n.dtype);for(var p=new gu([s,l],n.dtype),c=this.readSync(e.dataId),d=this.readSync(n.dataId),f=0;f<s;f++){for(var m=[],y=0,g=0;g<i;g++){var v=c[f*i+g];y+=v*h[g],m.push(v)}if(y<0||y>=n.size/l)throw new Error("Invalid indices: "+m+" does not index into "+n.shape);for(var b=0;b<l;b++)p.values[f*l+b]=d[y*l+b]}return p.toTensor().reshape(a)},r.prototype.scatterND=function(n,e,o){var i=bc(0,n,o),u=i.sliceRank,a=i.numUpdates,s=i.sliceSize,l=i.strides,h=i.outputSize,p=ot(0);return this.scatter(n,e,o,h,s,a,u,l,p,!0)},r.prototype.fill=function(n,e,o){var i=lc(o=o||Tu(e),ht(n));return i.fill(e),Se.makeTensor(i,n,o,this)},r.prototype.onesLike=function(n){if(n.dtype==="string")throw new Error("onesLike is not supported for string tensors");return this.fill(n.shape,1,n.dtype)},r.prototype.zerosLike=function(n){var e=lc(n.dtype,ht(n.shape));return this.makeOutput(e,n.shape,n.dtype)},r.prototype.linspace=function(n,e,o){return vb(n,e,o)},r.prototype.scatter=function(n,e,o,i,u,a,s,l,h,p){var c=[i/u,u],d=this.readSync(n.dataId),f=this.readSync(e.dataId);if(i===0)return $r([],o,e.dtype);var m=new gu(c,e.dtype);m.values.fill(this.readSync(h.dataId)[0]);for(var y=0;y<a;y++){for(var g=[],v=0,b=0;b<s;b++){var w=d[y*s+b];g.push(w),v+=w*l[b]}if(v<0||v>=i/u)throw new Error("Invalid indices: "+g+" does not index into "+o);for(var _=0;_<u;_++)p?m.values[v*u+_]+=f[y*u+_]:m.values[v*u+_]=e.rank===0?f[0]:f[y*u+_]}return m.toTensor().reshape(o)},r}(mb);Se.registerBackend("cpu",function(){return new a3},1);for(var sf=0,av=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(t){var r=t.inputs,n=t.backend,e=t.attrs,o=r,i=o.boxes,u=o.scores,a=e,s=a.maxOutputSize,l=a.iouThreshold,h=a.scoreThreshold,p=a.softNmsSigma,c=n;Ve(i,"NonMaxSuppressionWithScore");var d=Bp(c.data.get(i.dataId).values,c.data.get(u.dataId).values,s,l,h,p);return[d.selectedIndices,d.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(t){var r=t.inputs,n=t.backend,e=r.x,o=n;Ve(e,"square");for(var i=o.data.get(e.dataId).values,u=new Float32Array(i.length),a=0;a<i.length;++a){var s=i[a];u[a]=s*s}return{dataId:o.write(u,e.shape,e.dtype),shape:e.shape,dtype:e.dtype}}},{kernelName:xu,backendName:"cpu",kernelFunc:function(t){var r=t.inputs,n=t.backend,e=r,o=e.a,i=e.b,u=n;Ve([o,i],xu);var a=u.data.get(o.dataId).values,s=u.data.get(i.dataId).values,l=function(c,d,f,m,y,g){var v=It(c,d),b=v.length,w=To(v),_=yu(y,ht(v)),j=c.length,E=d.length,T=To(c),R=To(d),M=mi(c,v),I=mi(d,v);if(M.length+I.length===0)for(var D=0;D<_.length;++D)_[D]=g(f[D%f.length],m[D%m.length]);else{var L=function(N){var W=yS(N,b,w),q=W.slice(-j);M.forEach(function(V){return q[V]=0});var H=Mg(q,j,T),B=W.slice(-E);I.forEach(function(V){return B[V]=0});var G=Mg(B,E,R);_[N]=g(f[H],m[G])};for(D=0;D<_.length;++D)L(D)}return[_,v]}(o.shape,i.shape,a,s,o.dtype,function(c,d){var f=c-d;return f*f}),h=l[0],p=l[1];return{dataId:u.write(h,p,o.dtype),shape:p,dtype:o.dtype}}}];sf<av.length;sf++)V1(av[sf]);var xa,s3=function(t){this.variableNames=["A"];var r=an(),n=t[0],e=t[1];this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+e+".0, "+n+`.0);

        vec4 values = `+r.texture2D+`(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `},u3=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=an(),n=t[0],e=t[1];this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(`+e+".0, "+n+`.0);
            vec4 values = `+r.texture2D+`(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        `+r.output+` = result;
      }
    `};for(var uf=0,sv=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(t){var r=t.inputs,n=t.backend,e=t.attrs,o=r.pixels,i=e.numChannels,u=typeof HTMLVideoElement<"u"&&o instanceof HTMLVideoElement,a=typeof HTMLImageElement<"u"&&o instanceof HTMLImageElement,s=u?[o.videoWidth,o.videoHeight]:[o.width,o.height],l=s[0],h=s[1],p=[h,l],c=[h,l,i];(a||u)&&(xa==null&&(xa=document.createElement("canvas").getContext("2d")),xa.canvas.width=l,xa.canvas.height=h,xa.drawImage(o,0,0,l,h),o=xa.canvas);var d=n.makeTensorInfo(p,"int32");n.texData.get(d.dataId).usage=In.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(d.dataId),o);var f=Ue().getBool("WEBGL_PACK")?new u3(c):new s3(c),m=n.runWebGLProgram(f,[d],"int32");return n.disposeData(d.dataId),m}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(t){var r=t.inputs,n=t.backend,e=t.attrs;hc("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var o=r,i=o.boxes,u=o.scores,a=e,s=a.maxOutputSize,l=a.iouThreshold,h=a.scoreThreshold,p=a.softNmsSigma,c=n,d=Bp(c.readSync(i.dataId),c.readSync(u.dataId),s,l,h,p);return[d.selectedIndices,d.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(t){var r=t.inputs,n=t.backend,e=r.x,o=n,i=new kt(e.shape,"return x * x;");return o.runWebGLProgram(i,[e],e.dtype)}},{kernelName:xu,backendName:"webgl",kernelFunc:function(t){var r=t.inputs,n=t.backend,e=r,o=e.a,i=e.b,u=n,a=Ue().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Fo("return (a - b) * (a - b);",o.shape,i.shape):new fr("return (a - b) * (a - b);",o.shape,i.shape);return u.compileAndRun(a,[o,i])}}];uf<sv.length;uf++)V1(sv[uf]);for(var lf=0,uv=[{kernelName:"Square",gradFunc:function(t,r){var n=r[0];return{x:function(){return t.mul(n.toFloat().mul(2))}}}},{kernelName:xu,gradFunc:function(t,r){var n=r[0],e=r[1],o=ot(2);return{a:function(){return un(t,un(o,Mr(n,e)))},b:function(){return un(t,un(o,Mr(e,n)))}}}}];lf<uv.length;lf++)iS(uv[lf]);var l3=function(){function t(){}return t.prototype.fetch=function(r,n){return fetch(r,n)},t.prototype.now=function(){return performance.now()},t.prototype.encode=function(r,n){if(n!=="utf-8"&&n!=="utf8")throw new Error("Browser's encoder only supports utf-8, but got "+n);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(r)},t.prototype.decode=function(r,n){return new TextDecoder(n).decode(r)},t}();Ue().get("IS_BROWSER")&&Ue().setPlatform("browser",new l3);var cf,c3=function(){return require("node-fetch")},d3=function(){function t(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}return t.prototype.fetch=function(r,n){return Ue().global.fetch!=null?Ue().global.fetch(r,n):(cf==null&&(cf=c3()),cf(r,n))},t.prototype.now=function(){var r=process.hrtime();return 1e3*r[0]+r[1]/1e6},t.prototype.encode=function(r,n){if(n!=="utf-8"&&n!=="utf8")throw new Error("Node built-in encoder only supports utf-8, but got "+n);return this.textEncoder.encode(r)},t.prototype.decode=function(r,n){return r.length===0?"":new this.util.TextDecoder(n).decode(r)},t}();Ue().get("IS_NODE")&&Ue().setPlatform("node",new d3);var Th={float32:4,int32:4,uint16:2,uint8:1,bool:1},Cc=4;function fx(t,r){for(var n={},e=0,o=function(a){var s=a.name,l=a.dtype,h=a.shape,p=ht(h),c=void 0;if("quantization"in a){var d=a.quantization;if(d.dtype!=="uint8"&&d.dtype!=="uint16")throw new Error("Weight "+a.name+" has unknown quantization dtype "+d.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var f=Th[d.dtype],m=t.slice(e,e+p*f),y=d.dtype==="uint8"?new Uint8Array(m):new Uint16Array(m);if(l==="float32")c=Float32Array.from(y,function(j){return j*d.scale+d.min});else{if(l!=="int32")throw new Error("Unsupported dtype in weight '"+s+"': "+l);c=Int32Array.from(y,function(j){return Math.round(j*d.scale+d.min)})}e+=p*f}else if(l==="string"){var g=ht(a.shape);c=[];for(var v=0;v<g;v++){var b=new Uint32Array(t.slice(e,e+Cc))[0];e+=Cc;var w=new Uint8Array(t.slice(e,e+b));c.push(w),e+=b}}else{var _=Th[l];if(m=t.slice(e,e+p*_),l==="float32")c=new Float32Array(m);else if(l==="int32")c=new Int32Array(m);else{if(l!=="bool")throw new Error("Unsupported dtype in weight '"+s+"': "+l);c=new Uint8Array(m)}e+=p*_}n[s]=$r(c,h,l)},i=0,u=r;i<u.length;i++)o(u[i]);return n}function f3(t){if(t===null)throw new Error("Invalid input value: "+JSON.stringify(t));var r=0,n=[];t.forEach(function(i){if(r+=i.byteLength,n.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+i.constructor.name)});var e=new Uint8Array(r),o=0;return n.forEach(function(i){e.set(new Uint8Array(i.buffer),o),o+=i.byteLength}),e.buffer}var Mh=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function lv(t){return Mh?Buffer.byteLength(t):new Blob([t]).size}function om(t){var r=0;t.forEach(function(o){r+=o.byteLength});var n=new Uint8Array(r),e=0;return t.forEach(function(o){n.set(new Uint8Array(o),e),e+=o.byteLength}),n.buffer}function cv(t){for(t=t.trim();t.endsWith("/");)t=t.slice(0,t.length-1);var r=t.split("/");return r[r.length-1]}function Ou(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:lv(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:lv(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:t.weightData.byteLength}}var An=function(){function t(){this.saveRouters=[],this.loadRouters=[]}return t.getInstance=function(){return t.instance==null&&(t.instance=new t),t.instance},t.registerSaveRouter=function(r){t.getInstance().saveRouters.push(r)},t.registerLoadRouter=function(r){t.getInstance().loadRouters.push(r)},t.getSaveHandlers=function(r){return t.getHandlers(r,"save")},t.getLoadHandlers=function(r,n){return t.getHandlers(r,"load",n)},t.getHandlers=function(r,n,e){var o=[];return(n==="load"?t.getInstance().loadRouters:t.getInstance().saveRouters).forEach(function(i){var u=i(r,e);u!==null&&o.push(u)}),o},t}(),Ya="://",Ci=function(){function t(){this.managers={}}return t.getInstance=function(){return t.instance==null&&(t.instance=new t),t.instance},t.registerManager=function(r,n){ce(r!=null,function(){return"scheme must not be undefined or null."}),r.endsWith(Ya)&&(r=r.slice(0,r.indexOf(Ya))),ce(r.length>0,function(){return"scheme must not be an empty string."});var e=t.getInstance();ce(e.managers[r]==null,function(){return"A model store manager is already registered for scheme '"+r+"'."}),e.managers[r]=n},t.getManager=function(r){var n=this.getInstance().managers[r];if(n==null)throw new Error("Cannot find model manager for scheme '"+r+"'");return n},t.getSchemes=function(){return Object.keys(this.getInstance().managers)},t}();function Ll(t){if(t.indexOf(Ya)===-1)throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+Ci.getSchemes().join(","));return{scheme:t.split(Ya)[0],path:t.split(Ya)[1]}}function dv(t,r,n){return n===void 0&&(n=!1),lt(this,void 0,void 0,function(){var e,o,i,u,a,s,l,h,p;return ct(this,function(c){switch(c.label){case 0:return ce(t!==r,function(){return"Old path and new path are the same: '"+t+"'"}),ce((e=An.getLoadHandlers(t)).length>0,function(){return"Copying failed because no load handler is found for source URL "+t+"."}),ce(e.length<2,function(){return"Copying failed because more than one ("+e.length+") load handlers for source URL "+t+"."}),o=e[0],ce((i=An.getSaveHandlers(r)).length>0,function(){return"Copying failed because no save handler is found for destination URL "+r+"."}),ce(i.length<2,function(){return"Copying failed because more than one ("+e.length+") save handlers for destination URL "+r+"."}),u=i[0],a=Ll(t).scheme,s=Ll(t).path,l=a===Ll(t).scheme,[4,o.load()];case 1:return h=c.sent(),n&&l?[4,Ci.getManager(a).removeModel(s)]:[3,3];case 2:c.sent(),c.label=3;case 3:return[4,u.save(h)];case 4:return p=c.sent(),!n||l?[3,6]:[4,Ci.getManager(a).removeModel(s)];case 5:c.sent(),c.label=6;case 6:return[2,p.modelArtifactsInfo]}})})}var Ki="models_store",yi="model_info_store";function hx(){if(!Ue().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var t=window||self,r=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(r==null)throw new Error("The current browser does not appear to support IndexedDB.");return r}function Rh(t){var r=t.result;r.createObjectStore(Ki,{keyPath:"modelPath"}),r.createObjectStore(yi,{keyPath:"modelPath"})}var Ka=function(){function t(r){if(this.indexedDB=hx(),r==null||!r)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=r}return t.prototype.save=function(r){return lt(this,void 0,void 0,function(){return ct(this,function(n){if(r.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,r)]})})},t.prototype.load=function(){return lt(this,void 0,void 0,function(){return ct(this,function(r){return[2,this.databaseAction(this.modelPath)]})})},t.prototype.databaseAction=function(r,n){var e=this;return new Promise(function(o,i){var u=e.indexedDB.open("tensorflowjs",1);u.onupgradeneeded=function(){return Rh(u)},u.onsuccess=function(){var a=u.result;if(n==null){var s=a.transaction(Ki,"readonly"),l=s.objectStore(Ki).get(e.modelPath);l.onsuccess=function(){if(l.result==null)return a.close(),i(new Error("Cannot find model with path '"+e.modelPath+"' in IndexedDB."));o(l.result.modelArtifacts)},l.onerror=function(m){return a.close(),i(l.error)},s.oncomplete=function(){return a.close()}}else{var h,p=Ou(n),c=a.transaction(yi,"readwrite"),d=c.objectStore(yi),f=d.put({modelPath:e.modelPath,modelArtifactsInfo:p});f.onsuccess=function(){var m=(h=a.transaction(Ki,"readwrite")).objectStore(Ki).put({modelPath:e.modelPath,modelArtifacts:n,modelArtifactsInfo:p});m.onsuccess=function(){return o({modelArtifactsInfo:p})},m.onerror=function(y){var g=(d=c.objectStore(yi)).delete(e.modelPath);g.onsuccess=function(){return a.close(),i(m.error)},g.onerror=function(v){return a.close(),i(m.error)}}},f.onerror=function(m){return a.close(),i(f.error)},c.oncomplete=function(){h==null?a.close():h.oncomplete=function(){return a.close()}}}},u.onerror=function(a){return i(u.error)}})},t.URL_SCHEME="indexeddb://",t}(),fv=function(t){return Ue().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Ka.URL_SCHEME)?(r=t.slice(Ka.URL_SCHEME.length),new Ka(r)):null;var r};An.registerSaveRouter(fv),An.registerLoadRouter(fv);var h3=function(){function t(){this.indexedDB=hx()}return t.prototype.listModels=function(){return lt(this,void 0,void 0,function(){var r=this;return ct(this,function(n){return[2,new Promise(function(e,o){var i=r.indexedDB.open("tensorflowjs",1);i.onupgradeneeded=function(){return Rh(i)},i.onsuccess=function(){var u=i.result,a=u.transaction(yi,"readonly"),s=a.objectStore(yi).getAll();s.onsuccess=function(){for(var l={},h=0,p=s.result;h<p.length;h++){var c=p[h];l[c.modelPath]=c.modelArtifactsInfo}e(l)},s.onerror=function(l){return u.close(),o(s.error)},a.oncomplete=function(){return u.close()}},i.onerror=function(u){return o(i.error)}})]})})},t.prototype.removeModel=function(r){return lt(this,void 0,void 0,function(){var n=this;return ct(this,function(e){var o;return r=(o=r).startsWith(Ka.URL_SCHEME)?o.slice(Ka.URL_SCHEME.length):o,[2,new Promise(function(i,u){var a=n.indexedDB.open("tensorflowjs",1);a.onupgradeneeded=function(){return Rh(a)},a.onsuccess=function(){var s,l=a.result,h=l.transaction(yi,"readwrite"),p=h.objectStore(yi),c=p.get(r);c.onsuccess=function(){if(c.result==null)return l.close(),u(new Error("Cannot find model with path '"+r+"' in IndexedDB."));var d=p.delete(r),f=function(){var m=(s=l.transaction(Ki,"readwrite")).objectStore(Ki).delete(r);m.onsuccess=function(){return i(c.result.modelArtifactsInfo)},m.onerror=function(y){return u(c.error)}};d.onsuccess=f,d.onerror=function(m){return f(),l.close(),u(c.error)}},c.onerror=function(d){return l.close(),u(c.error)},h.oncomplete=function(){s==null?l.close():s.oncomplete=function(){return l.close()}}},a.onerror=function(s){return u(a.error)}})]})})},t}();if(Ue().getBool("IS_BROWSER"))try{Ci.registerManager(Ka.URL_SCHEME,new h3)}catch{}var Go="/",Ca="tensorflowjs_models",px="info",p3="model_topology",m3="weight_specs",y3="weight_data",g3="model_metadata";function mx(t){return{info:[Ca,t,px].join(Go),topology:[Ca,t,p3].join(Go),weightSpecs:[Ca,t,m3].join(Go),weightData:[Ca,t,y3].join(Go),modelMetadata:[Ca,t,g3].join(Go)}}function v3(t){var r=t.split(Go);if(r.length<3)throw new Error("Invalid key format: "+t);return r.slice(1,r.length-1).join(Go)}var Qa=function(){function t(r){if(!Ue().getBool("IS_BROWSER")||typeof window>"u"||window.localStorage===void 0)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,r==null||!r)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=r,this.keys=mx(this.modelPath)}return t.prototype.save=function(r){return lt(this,void 0,void 0,function(){var n,e,o;return ct(this,function(i){if(r.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");n=JSON.stringify(r.modelTopology),e=JSON.stringify(r.weightSpecs),o=Ou(r);try{return this.LS.setItem(this.keys.info,JSON.stringify(o)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,e),this.LS.setItem(this.keys.weightData,function(u){if(Mh)return Buffer.from(u).toString("base64");for(var a=new Uint8Array(u),s="",l=0,h=a.length;l<h;l++)s+=String.fromCharCode(a[l]);return btoa(s)}(r.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:r.format,generatedBy:r.generatedBy,convertedBy:r.convertedBy,userDefinedMetadata:r.userDefinedMetadata})),[2,{modelArtifactsInfo:o}]}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+o.modelTopologyBytes+", weightSpecsBytes="+o.weightSpecsBytes+", weightDataBytes="+o.weightDataBytes+".")}return[2]})})},t.prototype.load=function(){return lt(this,void 0,void 0,function(){var r,n,e,o,i,u,a;return ct(this,function(s){if((r=JSON.parse(this.LS.getItem(this.keys.info)))==null)throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if(r.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(n={},(e=JSON.parse(this.LS.getItem(this.keys.topology)))==null)throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(n.modelTopology=e,(o=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))==null)throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(n.weightSpecs=o,(i=this.LS.getItem(this.keys.modelMetadata))!=null&&(u=JSON.parse(i),n.format=u.format,n.generatedBy=u.generatedBy,n.convertedBy=u.convertedBy,n.userDefinedMetadata=u.userDefinedMetadata),(a=this.LS.getItem(this.keys.weightData))==null)throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return n.weightData=function(l){if(Mh){var h=Buffer.from(l,"base64");return h.buffer.slice(h.byteOffset,h.byteOffset+h.byteLength)}for(var p=atob(l),c=new Uint8Array(p.length),d=0;d<p.length;++d)c.set([p.charCodeAt(d)],d);return c.buffer}(a),[2,n]})})},t.URL_SCHEME="localstorage://",t}(),hv=function(t){return Ue().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Qa.URL_SCHEME)?(r=t.slice(Qa.URL_SCHEME.length),new Qa(r)):null;var r};An.registerSaveRouter(hv),An.registerLoadRouter(hv);var b3=function(){function t(){ce(Ue().getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),ce(typeof window>"u"||window.localStorage!==void 0,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return t.prototype.listModels=function(){return lt(this,void 0,void 0,function(){var r,n,e,o,i,u;return ct(this,function(a){for(r={},n=Ca+Go,e=Go+px,o=0;o<this.LS.length;++o)(i=this.LS.key(o)).startsWith(n)&&i.endsWith(e)&&(u=v3(i),r[u]=JSON.parse(this.LS.getItem(i)));return[2,r]})})},t.prototype.removeModel=function(r){return lt(this,void 0,void 0,function(){var n,e;return ct(this,function(o){var i;if(r=(i=r).startsWith(Qa.URL_SCHEME)?i.slice(Qa.URL_SCHEME.length):i,n=mx(r),this.LS.getItem(n.info)==null)throw new Error("Cannot find model at path '"+r+"'");return e=JSON.parse(this.LS.getItem(n.info)),this.LS.removeItem(n.info),this.LS.removeItem(n.topology),this.LS.removeItem(n.weightSpecs),this.LS.removeItem(n.weightData),[2,e]})})},t}();if(Ue().getBool("IS_BROWSER"))try{Ci.registerManager(Qa.URL_SCHEME,new b3)}catch{}var x3="model",w3=".json",_3=".weights.bin";function pv(t){return new Promise(function(r){return setTimeout(r)}).then(t)}var df=function(){function t(r){if(!Ue().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");r.startsWith(t.URL_SCHEME)&&(r=r.slice(t.URL_SCHEME.length)),r!=null&&r.length!==0||(r=x3),this.modelTopologyFileName=r+w3,this.weightDataFileName=r+_3}return t.prototype.save=function(r){return lt(this,void 0,void 0,function(){var n,e,o,i,u,a;return ct(this,function(s){switch(s.label){case 0:if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(n=window.URL.createObjectURL(new Blob([r.weightData],{type:"application/octet-stream"})),!(r.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return e=[{paths:["./"+this.weightDataFileName],weights:r.weightSpecs}],o={modelTopology:r.modelTopology,format:r.format,generatedBy:r.generatedBy,convertedBy:r.convertedBy,weightsManifest:e},i=window.URL.createObjectURL(new Blob([JSON.stringify(o)],{type:"application/json"})),(u=this.jsonAnchor==null?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,u.href=i,[4,pv(function(){return u.dispatchEvent(new MouseEvent("click"))})];case 2:return s.sent(),r.weightData==null?[3,4]:((a=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,a.href=n,[4,pv(function(){return a.dispatchEvent(new MouseEvent("click"))})]);case 3:s.sent(),s.label=4;case 4:return[2,{modelArtifactsInfo:Ou(r)}]}})})},t.URL_SCHEME="downloads://",t}(),S3=function(){function t(r){if(r==null||r.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+r);this.files=r}return t.prototype.load=function(){return lt(this,void 0,void 0,function(){var r,n,e=this;return ct(this,function(o){return r=this.files[0],n=this.files.slice(1),[2,new Promise(function(i,u){var a=new FileReader;a.onload=function(s){var l=JSON.parse(s.target.result),h=l.modelTopology;if(h!=null){n.length===0&&i({modelTopology:h});var p=l.weightsManifest;if(p!=null){var c;try{c=e.checkManifestAndWeightFiles(p,n)}catch(y){return void u(y)}var d=[],f=[],m=[];p.forEach(function(y){y.paths.forEach(function(g){f.push(g),m.push(null)}),d.push.apply(d,y.weights)}),p.forEach(function(y){y.paths.forEach(function(g){var v=new FileReader;v.onload=function(b){var w=b.target.result,_=f.indexOf(g);m[_]=w,m.indexOf(null)===-1&&i({modelTopology:h,weightSpecs:d,weightData:om(m),format:l.format,generatedBy:l.generatedBy,convertedBy:l.convertedBy,userDefinedMetadata:l.userDefinedMetadata})},v.onerror=function(b){return u("Failed to weights data from file of path '"+g+"'.")},v.readAsArrayBuffer(c[g])})})}else u(new Error("weightManifest field is missing from file "+r.name))}else u(new Error("modelTopology field is missing from file "+r.name))},a.onerror=function(s){return u("Failed to read model topology and weights manifest JSON from file '"+r.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},a.readAsText(r)})]})})},t.prototype.checkManifestAndWeightFiles=function(r,n){for(var e=[],o=n.map(function(s){return cv(s.name)}),i={},u=0,a=r;u<a.length;u++)a[u].paths.forEach(function(s){var l=cv(s);if(e.indexOf(l)!==-1)throw new Error("Duplicate file basename found in weights manifest: '"+l+"'");if(e.push(l),o.indexOf(l)===-1)throw new Error("Weight file with basename '"+l+"' is not provided.");i[s]=n[o.indexOf(l)]});if(e.length!==n.length)throw new Error("Mismatch in the number of files in weights manifest ("+e.length+") and the number of weight files provided ("+n.length+").");return i},t}();function mv(t,r,n,e){(function(i){ce(i!=null&&Array.isArray(i)&&i.length>0,function(){return"promises must be a none empty array"})})(t),function(i,u){ce(i>=0&&i<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+i}),ce(u>=0&&u<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+u}),ce(u>=i,function(){return"startFraction must be no more than endFraction, but got startFraction "+i+" and endFraction "+u})}(n=n??0,e=e??1);var o=0;return Promise.all(t.map(function(i){return i.then(function(u){var a=n+ ++o/t.length*(e-n);return r(a),u}),i}))}function yx(t,r){return lt(this,void 0,void 0,function(){var n,e,o,i,u,a,s,l,h;return ct(this,function(p){switch(p.label){case 0:return r==null&&(r={}),n=r.fetchFunc==null?Ue().platform.fetch:r.fetchFunc,e=t.map(function(c){return n(c,r.requestInit,{isBinary:!0})}),o=0,i=.5,r.onProgress!=null?[3,2]:[4,Promise.all(e)];case 1:return u=p.sent(),[3,4];case 2:return[4,mv(e,r.onProgress,o,i)];case 3:u=p.sent(),p.label=4;case 4:return a=u.map(function(c){return c.arrayBuffer()}),s=.5,l=1,r.onProgress!=null?[3,6]:[4,Promise.all(a)];case 5:return h=p.sent(),[3,8];case 6:return[4,mv(a,r.onProgress,s,l)];case 7:h=p.sent(),p.label=8;case 8:return[2,h]}})})}function yv(t){var r=this;return function(n,e,o){return e===void 0&&(e=""),lt(r,void 0,void 0,function(){var i,u,a,s,l,h,p,c,d,f;return ct(this,function(m){switch(m.label){case 0:if(i=n.map(function(){return!1}),u={},a=o!=null?o.map(function(){return!1}):[],s=[],n.forEach(function(y,g){var v=0;y.weights.forEach(function(b){var w="quantization"in b?b.quantization.dtype:b.dtype,_=Th[w]*ht(b.shape),j=function(){i[g]=!0,u[g]==null&&(u[g]=[]),u[g].push({manifestEntry:b,groupOffset:v,sizeBytes:_})};o!=null?o.forEach(function(E,T){E===b.name&&(j(),a[T]=!0)}):j(),s.push(b.name),v+=_})}),!a.every(function(y){return y}))throw l=o.filter(function(y,g){return!a[g]}),new Error("Could not find weights in manifest with names: "+l.join(", ")+`. 
Manifest JSON has weights with names: `+s.join(", ")+".");return h=i.reduce(function(y,g,v){return g&&y.push(v),y},[]),p=[],h.forEach(function(y){n[y].paths.forEach(function(g){var v=e+(e.endsWith("/")?"":"/")+g;p.push(v)})}),[4,t(p)];case 1:return c=m.sent(),d={},f=0,h.forEach(function(y){for(var g=n[y].paths.length,v=0,b=0;b<g;b++)v+=c[f+b].byteLength;for(var w=new ArrayBuffer(v),_=new Uint8Array(w),j=0,E=0;E<g;E++){var T=new Uint8Array(c[f+E]);_.set(T,j),j+=T.byteLength}u[y].forEach(function(R){var M=fx(w.slice(R.groupOffset,R.groupOffset+R.sizeBytes),[R.manifestEntry]);for(var I in M)d[I]=M[I]}),f+=g}),[2,d]}})})}}An.registerSaveRouter(function(t){return Ue().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(df.URL_SCHEME)?function(r){return r===void 0&&(r="model"),new df(r)}(t.slice(df.URL_SCHEME.length)):null});var gx=function(){function t(r,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,n.fetchFunc!=null?(ce(typeof n.fetchFunc=="function",function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=n.fetchFunc):this.fetch=Ue().platform.fetch,ce(r!=null&&r.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(r)&&ce(r.length===2,function(){return"URL paths for http must have a length of 2, (actual length is "+r.length+")."}),this.path=r,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}return t.prototype.save=function(r){return lt(this,void 0,void 0,function(){var n,e,o,i;return ct(this,function(u){switch(u.label){case 0:if(r.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,e=[{paths:["./model.weights.bin"],weights:r.weightSpecs}],o={modelTopology:r.modelTopology,format:r.format,generatedBy:r.generatedBy,convertedBy:r.convertedBy,userDefinedMetadata:r.userDefinedMetadata,weightsManifest:e},n.body.append("model.json",new Blob([JSON.stringify(o)],{type:"application/json"}),"model.json"),r.weightData!=null&&n.body.append("model.weights.bin",new Blob([r.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,n)];case 1:if((i=u.sent()).ok)return[2,{modelArtifactsInfo:Ou(r),responses:[i]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+i.status+".")}})})},t.prototype.load=function(){return lt(this,void 0,void 0,function(){var r,n,e,o,i,u,a,s,l,h,p,c;return ct(this,function(d){switch(d.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(r=d.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+r.status+". Please verify this URL points to the model JSON of the model to load.");d.label=2;case 2:return d.trys.push([2,4,,5]),[4,r.json()];case 3:return n=d.sent(),[3,5];case 4:throw d.sent(),e="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?e+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":e+=" Please make sure the server is serving valid JSON for this request.",new Error(e);case 5:if(o=n.modelTopology,i=n.weightsManifest,u=n.generatedBy,a=n.convertedBy,s=n.format,l=n.userDefinedMetadata,o==null&&i==null)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return i==null?[3,7]:[4,this.loadWeights(i)];case 6:c=d.sent(),h=c[0],p=c[1],d.label=7;case 7:return[2,{modelTopology:o,weightSpecs:h,weightData:p,userDefinedMetadata:l,generatedBy:u,convertedBy:a,format:s}]}})})},t.prototype.loadWeights=function(r){return lt(this,void 0,void 0,function(){var n,e,o,i,u,a,s,l,h,p,c;return ct(this,function(d){switch(d.label){case 0:for(n=Array.isArray(this.path)?this.path[1]:this.path,e=function(f){var m=f.lastIndexOf("/"),y=f.lastIndexOf("?"),g=f.substring(0,m),v=y>m?f.substring(y):"";return[g+"/",v]}(n),o=e[0],i=e[1],u=this.weightPathPrefix||o,a=[],s=0,l=r;s<l.length;s++)h=l[s],a.push.apply(a,h.weights);return p=[],r.forEach(function(f){f.paths.forEach(function(m){p.push(u+m+i)})}),[4,yx(p,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return c=d.sent(),[2,[a,om(c)]]}})})},t.URL_SCHEME_REGEX=/^https?:\/\//,t}();function Ih(t){return t.match(gx.URL_SCHEME_REGEX)!=null}var gv=function(t,r){return typeof fetch>"u"?null:(Array.isArray(t)?t.every(function(n){return Ih(n)}):Ih(t))?Ah(t,{onProgress:r}):null};function Ah(t,r){return new gx(t,r)}An.registerSaveRouter(gv),An.registerLoadRouter(gv);var ff=function(){function t(r){this.modelArtifacts=r}return t.prototype.load=function(){return lt(this,void 0,void 0,function(){return ct(this,function(r){return[2,this.modelArtifacts]})})},t}(),E3=function(){function t(r){this.saveHandler=r}return t.prototype.save=function(r){return lt(this,void 0,void 0,function(){return ct(this,function(n){return[2,this.saveHandler(r)]})})},t}(),vx=Object.freeze({browserFiles:function(t){return new S3(t)},browserHTTPRequest:function(t,r){return Ah(t,r)},concatenateArrayBuffers:om,decodeWeights:fx,encodeWeights:function(t,r){return lt(this,void 0,void 0,function(){var n,e,o,i,u,a=this;return ct(this,function(s){switch(s.label){case 0:for(n=[],e=[],o=Array.isArray(t)?t.map(function(l){return l.name}):Object.keys(t),i=function(l){var h=o[l],p=Array.isArray(t)?t[l].tensor:t[h];if(p.dtype!=="float32"&&p.dtype!=="int32"&&p.dtype!=="bool"&&p.dtype!=="string")throw new Error("Unsupported dtype in weight '"+h+"': "+p.dtype);var c={name:h,shape:p.shape,dtype:p.dtype};if(p.dtype==="string"){var d=new Promise(function(f){return lt(a,void 0,void 0,function(){var m,y,g,v,b,w,_;return ct(this,function(j){switch(j.label){case 0:return[4,p.bytes()];case 1:for(m=j.sent(),y=m.reduce(function(E,T){return E+T.length},0)+Cc*m.length,g=new Uint8Array(y),v=0,b=0;b<m.length;b++)w=m[b],_=new Uint8Array(new Uint32Array([w.length]).buffer),g.set(_,v),v+=Cc,g.set(w,v),v+=w.length;return f(g),[2]}})})});e.push(d)}else e.push(p.data());r!=null&&(c.group=r),n.push(c)},u=0;u<o.length;++u)i(u);return[4,Promise.all(e)];case 1:return[2,{data:f3(s.sent()),specs:n}]}})})},fromMemory:function(t,r,n,e){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new ff(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new ff({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new ff({modelTopology:t,weightSpecs:r,weightData:n,trainingConfig:e}))},getLoadHandlers:function(t,r){return An.getLoadHandlers(t,r)},getModelArtifactsInfoForJSON:Ou,getSaveHandlers:function(t){return An.getSaveHandlers(t)},http:Ah,isHTTPScheme:Ih,loadWeights:function(t,r,n,e){return r===void 0&&(r=""),lt(this,void 0,void 0,function(){return ct(this,function(o){return[2,yv(function(i){return yx(i,{requestInit:e})})(t,r,n)]})})},registerLoadRouter:function(t){return An.registerLoadRouter(t)},registerSaveRouter:function(t){return An.registerSaveRouter(t)},weightsLoaderFactory:yv,withSaveHandler:function(t){return new E3(t)},copyModel:function(t,r){return lt(this,void 0,void 0,function(){return ct(this,function(n){return[2,dv(t,r,!1)]})})},listModels:function(){return lt(this,void 0,void 0,function(){var t,r,n,e,o,i,u;return ct(this,function(a){switch(a.label){case 0:t=Ci.getSchemes(),r={},n=0,e=t,a.label=1;case 1:return n<e.length?(o=e[n],[4,Ci.getManager(o).listModels()]):[3,4];case 2:for(u in i=a.sent())r[o+Ya+u]=i[u];a.label=3;case 3:return n++,[3,1];case 4:return[2,r]}})})},moveModel:function(t,r){return lt(this,void 0,void 0,function(){return ct(this,function(n){return[2,dv(t,r,!0)]})})},removeModel:function(t){return lt(this,void 0,void 0,function(){var r;return ct(this,function(n){return r=Ll(t),[2,Ci.getManager(r.scheme).removeModel(r.path)]})})}}),wa;xe({confusionMatrix_:function(t,r,n){var e=oe(t,"labels","confusionMatrix"),o=oe(r,"predictions","confusionMatrix");ce(n==null||n>0&&Number.isInteger(n),function(){return"If provided, numClasses must be a positive integer, but got "+n}),ce(e.rank===1,function(){return"Expected the rank of labels to be 1, but got "+e.rank}),ce(o.rank===1,function(){return"Expected the rank of predictions to be 1, but got "+o.rank}),ce(e.shape[0]===o.shape[0],function(){return"Mismatch in the number of examples: "+e.shape[0]+" vs. "+o.shape[0]+". Labels and predictions should have the same number of elements."}),ce(n>0&&Number.isInteger(n),function(){return"numClasses is required to be a positive integer, but got "+n});var i=Sh(e.asType("int32"),n),u=Sh(o.asType("int32"),n);return i.transpose().matMul(u).asType("int32")}});var j3=xe({fromPixels_:function(t,r){if(r===void 0&&(r=3),r>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(t==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,e=!1,o=!1,i=!1,u=!1;if(t.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&t instanceof ImageData)e=!0;else if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)o=!0;else if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)i=!0;else{if(t.getContext==null)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+t.constructor.name);u=!0}if(o&&o&&t.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(z1("FromPixels",Se.backendName)!=null)return Se.runKernel("FromPixels",{pixels:t},{numChannels:r});var a,s,l=o?[t.videoWidth,t.videoHeight]:[t.width,t.height],h=l[0],p=l[1];if(u?a=t.getContext("2d").getImageData(0,0,h,p).data:e||n?a=t.data:(i||o)&&(wa==null&&(wa=document.createElement("canvas").getContext("2d")),wa.canvas.width=h,wa.canvas.height=p,wa.drawImage(t,0,0,h,p),a=wa.getImageData(0,0,h,p).data),r===4)s=new Int32Array(a);else{var c=h*p;s=new Int32Array(c*r);for(var d=0;d<c;d++)for(var f=0;f<r;++f)s[d*r+f]=a[4*d+f]}return Pp(s,[p,h,r],"int32")}}),im=Object.freeze({toPixels:function(t,r){return lt(this,void 0,void 0,function(){var n,e,o,i,u,a,s,l,h,p,c,d,f,m,y,g,v,b,w,_,j,E,T;return ct(this,function(R){switch(R.label){case 0:if(n=oe(t,"img","toPixels"),t instanceof ir||(n=n.toInt()),n.rank!==2&&n.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+n.rank+".");if(e=n.shape.slice(0,2),o=e[0],i=e[1],(u=n.rank===2?1:n.shape[2])>4||u===2)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+u);return[4,n.data()];case 1:return a=R.sent(),s=n.min(),l=n.max(),[4,Promise.all([s.data(),l.data()])];case 2:if(h=R.sent(),p=h[0],c=h[1],d=p[0],f=c[0],s.dispose(),l.dispose(),n.dtype==="float32"){if(d<0||f>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+d+" - "+f+"].")}else{if(n.dtype!=="int32")throw new Error("Unsupported type for toPixels: "+n.dtype+". Please use float32 or int32 tensors.");if(d<0||f>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+d+" - "+f+"].")}for(m=n.dtype==="float32"?255:1,y=new Uint8ClampedArray(i*o*4),g=0;g<o*i;++g)v=void 0,b=void 0,w=void 0,_=void 0,u===1?(v=a[g]*m,b=a[g]*m,w=a[g]*m,_=255):u===3?(v=a[3*g]*m,b=a[3*g+1]*m,w=a[3*g+2]*m,_=255):u===4&&(v=a[4*g]*m,b=a[4*g+1]*m,w=a[4*g+2]*m,_=a[4*g+3]*m),y[(j=4*g)+0]=Math.round(v),y[j+1]=Math.round(b),y[j+2]=Math.round(w),y[j+3]=Math.round(_);return r!=null&&(r.width=i,r.height=o,E=r.getContext("2d"),T=new ImageData(y,i,o),E.putImageData(T,0,0)),n!==t&&n.dispose(),[2,y]}})})},fromPixels:j3}),C3=function(){function t(){}return t.prototype.getClassName=function(){return this.constructor.className},t.fromConfig=function(r,n){return new r(n)},t}(),k3=function(){function t(){this.classNameMap={}}return t.getMap=function(){return t.instance==null&&(t.instance=new t),t.instance},t.register=function(r){t.getMap().classNameMap[r.className]=[r,r.fromConfig]},t}();function fa(t){ce(t.className!=null,function(){return"Class being registered does not have the static className property defined."}),ce(typeof t.className=="string",function(){return"className is required to be a string, but got type "+typeof t.className}),ce(t.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),k3.register(t)}var ha=function(t){function r(){return t!==null&&t.apply(this,arguments)||this}return uo(r,t),r.prototype.minimize=function(n,e,o){e===void 0&&(e=!1);var i=this.computeGradients(n,o),u=i.value,a=i.grads;if(o!=null){var s=o.map(function(l){return{name:l.name,tensor:a[l.name]}});this.applyGradients(s)}else this.applyGradients(a);return Sn(a),e?u:(u.dispose(),null)},Object.defineProperty(r.prototype,"iterations",{get:function(){return this.iterations_==null&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),r.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},r.prototype.computeGradients=function(n,e){return NE(n,e)},r.prototype.dispose=function(){this.iterations_!=null&&Sn(this.iterations_)},r.prototype.saveIterations=function(){return lt(this,void 0,void 0,function(){return ct(this,function(n){return this.iterations_==null&&(this.iterations_=0),[2,{name:"iter",tensor:ot(this.iterations_,"int32")}]})})},r.prototype.getWeights=function(){return lt(this,void 0,void 0,function(){return ct(this,function(n){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},r.prototype.setWeights=function(n){return lt(this,void 0,void 0,function(){return ct(this,function(e){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())})})},r.prototype.extractIterations=function(n){return lt(this,void 0,void 0,function(){var e;return ct(this,function(o){switch(o.label){case 0:return e=this,[4,n[0].tensor.data()];case 1:return e.iterations_=o.sent()[0],[2,n.slice(1)]}})})},r}(C3);Object.defineProperty(ha,Symbol.hasInstance,{value:function(t){return t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null}});var T3=function(t){function r(n,e,o){o===void 0&&(o=null);var i=t.call(this)||this;return i.learningRate=n,i.rho=e,i.epsilon=o,i.accumulatedGrads=[],i.accumulatedUpdates=[],o==null&&(i.epsilon=Se.backend.epsilon()),i}return uo(r,t),r.prototype.applyGradients=function(n){var e=this;(Array.isArray(n)?n.map(function(o){return o.name}):Object.keys(n)).forEach(function(o,i){var u=Se.registeredVariables[o];e.accumulatedGrads[i]==null&&(e.accumulatedGrads[i]={originalName:o+"/accum_grad",variable:it(function(){return Dt(u).variable(!1)})}),e.accumulatedUpdates[i]==null&&(e.accumulatedUpdates[i]={originalName:o+"/accum_var",variable:it(function(){return Dt(u).variable(!1)})});var a=Array.isArray(n)?n[i].tensor:n[o];if(a!=null){var s=e.accumulatedGrads[i].variable,l=e.accumulatedUpdates[i].variable;it(function(){var h=s.mul(e.rho).add(a.square().mul(1-e.rho)),p=l.add(e.epsilon).sqrt().div(s.add(e.epsilon).sqrt()).mul(a),c=l.mul(e.rho).add(p.square().mul(1-e.rho));s.assign(h),l.assign(c);var d=p.mul(-e.learningRate).add(u);u.assign(d)})}}),this.incrementIterations()},r.prototype.dispose=function(){this.accumulatedUpdates!=null&&(Sn(this.accumulatedGrads.map(function(n){return n.variable})),Sn(this.accumulatedUpdates.map(function(n){return n.variable})))},r.prototype.getWeights=function(){return lt(this,void 0,void 0,function(){var n;return ct(this,function(e){switch(e.label){case 0:return n=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(n.map(function(o){return{name:o.originalName,tensor:o.variable}}))]}})})},r.prototype.setWeights=function(n){return lt(this,void 0,void 0,function(){var e;return ct(this,function(o){switch(o.label){case 0:return[4,this.extractIterations(n)];case 1:return n=o.sent(),e=n.length/2,this.accumulatedGrads=n.slice(0,e).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.accumulatedUpdates=n.slice(e,2*e).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),[2]}})})},r.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},r.fromConfig=function(n,e){return new n(e.learningRate,e.rho,e.epsilon)},r.className="Adadelta",r}(ha);fa(T3);var M3=function(t){function r(n,e){e===void 0&&(e=.1);var o=t.call(this)||this;return o.learningRate=n,o.initialAccumulatorValue=e,o.accumulatedGrads=[],o}return uo(r,t),r.prototype.applyGradients=function(n){var e=this;(Array.isArray(n)?n.map(function(o){return o.name}):Object.keys(n)).forEach(function(o,i){var u=Se.registeredVariables[o];e.accumulatedGrads[i]==null&&(e.accumulatedGrads[i]={originalName:o+"/accumulator",variable:it(function(){return Mo(u.shape,e.initialAccumulatorValue).variable(!1)})});var a=Array.isArray(n)?n[i].tensor:n[o];if(a!=null){var s=e.accumulatedGrads[i].variable;it(function(){var l=s.add(a.square());s.assign(l);var h=a.div(l.add(Se.backend.epsilon()).sqrt()).mul(-e.learningRate).add(u);u.assign(h)})}}),this.incrementIterations()},r.prototype.dispose=function(){this.accumulatedGrads!=null&&Sn(this.accumulatedGrads.map(function(n){return n.variable}))},r.prototype.getWeights=function(){return lt(this,void 0,void 0,function(){return ct(this,function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(this.accumulatedGrads.map(function(e){return{name:e.originalName,tensor:e.variable}}))]}})})},r.prototype.setWeights=function(n){return lt(this,void 0,void 0,function(){return ct(this,function(e){switch(e.label){case 0:return[4,this.extractIterations(n)];case 1:return n=e.sent(),this.accumulatedGrads=n.map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),[2]}})})},r.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},r.fromConfig=function(n,e){return new n(e.learningRate,e.initialAccumulatorValue)},r.className="Adagrad",r}(ha);fa(M3);var R3=function(t){function r(n,e,o,i){i===void 0&&(i=null);var u=t.call(this)||this;return u.learningRate=n,u.beta1=e,u.beta2=o,u.epsilon=i,u.accumulatedFirstMoment=[],u.accumulatedSecondMoment=[],it(function(){u.accBeta1=ot(e).variable(),u.accBeta2=ot(o).variable()}),i==null&&(u.epsilon=Se.backend.epsilon()),u}return uo(r,t),r.prototype.applyGradients=function(n){var e=this,o=Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n);it(function(){var i=Mr(1,e.accBeta1),u=Mr(1,e.accBeta2);o.forEach(function(a,s){var l=Se.registeredVariables[a];e.accumulatedFirstMoment[s]==null&&(e.accumulatedFirstMoment[s]={originalName:a+"/m",variable:it(function(){return Dt(l).variable(!1)})}),e.accumulatedSecondMoment[s]==null&&(e.accumulatedSecondMoment[s]={originalName:a+"/v",variable:it(function(){return Dt(l).variable(!1)})});var h=Array.isArray(n)?n[s].tensor:n[a];if(h!=null){var p=e.accumulatedFirstMoment[s].variable,c=e.accumulatedSecondMoment[s].variable,d=p.mul(e.beta1).add(h.mul(1-e.beta1)),f=c.mul(e.beta2).add(h.square().mul(1-e.beta2)),m=d.div(i),y=f.div(u);p.assign(d),c.assign(f);var g=m.div(y.sqrt().add(e.epsilon)).mul(-e.learningRate).add(l);l.assign(g)}}),e.accBeta1.assign(e.accBeta1.mul(e.beta1)),e.accBeta2.assign(e.accBeta2.mul(e.beta2))}),this.incrementIterations()},r.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&Sn(this.accumulatedFirstMoment.map(function(n){return n.variable})),this.accumulatedSecondMoment!=null&&Sn(this.accumulatedSecondMoment.map(function(n){return n.variable}))},r.prototype.getWeights=function(){return lt(this,void 0,void 0,function(){var n;return ct(this,function(e){switch(e.label){case 0:return n=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(n.map(function(o){return{name:o.originalName,tensor:o.variable}}))]}})})},r.prototype.setWeights=function(n){return lt(this,void 0,void 0,function(){var e,o=this;return ct(this,function(i){switch(i.label){case 0:return[4,this.extractIterations(n)];case 1:return n=i.sent(),it(function(){o.accBeta1.assign(Ec(o.beta1,o.iterations_+1)),o.accBeta2.assign(Ec(o.beta2,o.iterations_+1))}),e=n.length/2,this.accumulatedFirstMoment=n.slice(0,e).map(function(u){return{originalName:u.name,variable:u.tensor.variable(!1)}}),this.accumulatedSecondMoment=n.slice(e,2*e).map(function(u){return{originalName:u.name,variable:u.tensor.variable(!1)}}),[2]}})})},r.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},r.fromConfig=function(n,e){return new n(e.learningRate,e.beta1,e.beta2,e.epsilon)},r.className="Adam",r}(ha);fa(R3);var I3=function(t){function r(n,e,o,i,u){i===void 0&&(i=null),u===void 0&&(u=0);var a=t.call(this)||this;return a.learningRate=n,a.beta1=e,a.beta2=o,a.epsilon=i,a.decay=u,a.accumulatedFirstMoment=[],a.accumulatedWeightedInfNorm=[],it(function(){a.iteration=ot(0).variable(),a.accBeta1=ot(e).variable()}),i==null&&(a.epsilon=Se.backend.epsilon()),a}return uo(r,t),r.prototype.applyGradients=function(n){var e=this,o=Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n);it(function(){var i=Mr(1,e.accBeta1),u=ro(-e.learningRate,e.iteration.mul(e.decay).add(1));o.forEach(function(a,s){var l=Se.registeredVariables[a];e.accumulatedFirstMoment[s]==null&&(e.accumulatedFirstMoment[s]={originalName:a+"/m",variable:Dt(l).variable(!1)}),e.accumulatedWeightedInfNorm[s]==null&&(e.accumulatedWeightedInfNorm[s]={originalName:a+"/v",variable:Dt(l).variable(!1)});var h=Array.isArray(n)?n[s].tensor:n[a];if(h!=null){var p=e.accumulatedFirstMoment[s].variable,c=e.accumulatedWeightedInfNorm[s].variable,d=p.mul(e.beta1).add(h.mul(1-e.beta1)),f=c.mul(e.beta2),m=h.abs(),y=f.maximum(m);p.assign(d),c.assign(y);var g=u.div(i).mul(d.div(y.add(e.epsilon))).add(l);l.assign(g)}}),e.iteration.assign(e.iteration.add(1)),e.accBeta1.assign(e.accBeta1.mul(e.beta1))}),this.incrementIterations()},r.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&Sn(this.accumulatedFirstMoment.map(function(n){return n.variable})),this.accumulatedWeightedInfNorm!=null&&Sn(this.accumulatedWeightedInfNorm.map(function(n){return n.variable}))},r.prototype.getWeights=function(){return lt(this,void 0,void 0,function(){return ct(this,function(n){throw new Error("getWeights() is not implemented for Adamax yet.")})})},r.prototype.setWeights=function(n){return lt(this,void 0,void 0,function(){return ct(this,function(e){throw new Error("setWeights() is not implemented for Adamax yet.")})})},r.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},r.fromConfig=function(n,e){return new n(e.learningRate,e.beta1,e.beta2,e.epsilon,e.decay)},r.className="Adamax",r}(ha);fa(I3);var bx=function(t){function r(n){var e=t.call(this)||this;return e.learningRate=n,e.setLearningRate(n),e}return uo(r,t),r.prototype.applyGradients=function(n){var e=this;(Array.isArray(n)?n.map(function(o){return o.name}):Object.keys(n)).forEach(function(o,i){var u=Array.isArray(n)?n[i].tensor:n[o];if(u!=null){var a=Se.registeredVariables[o];it(function(){var s=e.c.mul(u).add(a);a.assign(s)})}}),this.incrementIterations()},r.prototype.setLearningRate=function(n){this.learningRate=n,this.c!=null&&this.c.dispose(),this.c=QS(ot(-n))},r.prototype.dispose=function(){this.c.dispose()},r.prototype.getWeights=function(){return lt(this,void 0,void 0,function(){return ct(this,function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()]]}})})},r.prototype.setWeights=function(n){return lt(this,void 0,void 0,function(){return ct(this,function(e){switch(e.label){case 0:return[4,this.extractIterations(n)];case 1:if((n=e.sent()).length!==0)throw new Error("SGD optimizer does not have settable weights.");return[2]}})})},r.prototype.getConfig=function(){return{learningRate:this.learningRate}},r.fromConfig=function(n,e){return new n(e.learningRate)},r.className="SGD",r}(ha);fa(bx);var A3=function(t){function r(n,e,o){o===void 0&&(o=!1);var i=t.call(this,n)||this;return i.learningRate=n,i.momentum=e,i.useNesterov=o,i.accumulations=[],i.m=ot(i.momentum),i}return uo(r,t),r.prototype.applyGradients=function(n){var e=this;(Array.isArray(n)?n.map(function(o){return o.name}):Object.keys(n)).forEach(function(o,i){var u=Se.registeredVariables[o];e.accumulations[i]==null&&(e.accumulations[i]={originalName:o+"/momentum",variable:it(function(){return Dt(u).variable(!1)})});var a=e.accumulations[i].variable,s=Array.isArray(n)?n[i].tensor:n[o];s!=null&&it(function(){var l,h=e.m.mul(a).add(s);l=e.useNesterov?e.c.mul(s.add(h.mul(e.m))).add(u):e.c.mul(h).add(u),a.assign(h),u.assign(l)})}),this.incrementIterations()},r.prototype.dispose=function(){this.m.dispose(),this.accumulations!=null&&Sn(this.accumulations.map(function(n){return n.variable}))},r.prototype.setMomentum=function(n){this.momentum=n},r.prototype.getWeights=function(){return lt(this,void 0,void 0,function(){return ct(this,function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(this.accumulations.map(function(e){return{name:e.originalName,tensor:e.variable}}))]}})})},r.prototype.setWeights=function(n){return lt(this,void 0,void 0,function(){return ct(this,function(e){switch(e.label){case 0:return[4,this.extractIterations(n)];case 1:return n=e.sent(),this.accumulations=n.map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),[2]}})})},r.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},r.fromConfig=function(n,e){return new n(e.learningRate,e.momentum,e.useNesterov)},r.className="Momentum",r}(bx);fa(A3);var P3=function(t){function r(n,e,o,i,u){e===void 0&&(e=.9),o===void 0&&(o=0),i===void 0&&(i=null),u===void 0&&(u=!1);var a=t.call(this)||this;if(a.learningRate=n,a.decay=e,a.momentum=o,a.epsilon=i,a.accumulatedMeanSquares=[],a.accumulatedMoments=[],a.accumulatedMeanGrads=[],a.centered=u,i==null&&(a.epsilon=Se.backend.epsilon()),n==null)throw new Error("learningRate for RMSPropOptimizer must be defined.");return a}return uo(r,t),r.prototype.applyGradients=function(n){var e=this;(Array.isArray(n)?n.map(function(o){return o.name}):Object.keys(n)).forEach(function(o,i){var u=Se.registeredVariables[o];e.accumulatedMeanSquares[i]==null&&(e.accumulatedMeanSquares[i]={originalName:o+"/rms",variable:it(function(){return Dt(u).variable(!1)})}),e.accumulatedMoments[i]==null&&(e.accumulatedMoments[i]={originalName:o+"/momentum",variable:it(function(){return Dt(u).variable(!1)})}),e.accumulatedMeanGrads[i]==null&&e.centered&&(e.accumulatedMeanGrads[i]={originalName:o+"/mg",variable:it(function(){return Dt(u).variable(!1)})});var a=Array.isArray(n)?n[i].tensor:n[o];if(a!=null){var s=e.accumulatedMeanSquares[i].variable,l=e.accumulatedMoments[i].variable;it(function(){var h=s.mul(e.decay).add(a.square().mul(1-e.decay));if(e.centered){var p=e.accumulatedMeanGrads[i].variable,c=p.mul(e.decay).add(a.mul(1-e.decay)),d=l.mul(e.momentum).add(a.mul(e.learningRate).div(h.sub(c.square().add(e.epsilon)).sqrt()));s.assign(h),p.assign(c),l.assign(d);var f=u.sub(d);u.assign(f)}else{var m=s.mul(e.decay).add(a.square().mul(1-e.decay));d=l.mul(e.momentum).add(a.mul(e.learningRate).div(m.add(e.epsilon).sqrt())),s.assign(m),l.assign(d),f=u.sub(d),u.assign(f)}})}}),this.incrementIterations()},r.prototype.dispose=function(){this.accumulatedMeanSquares!=null&&Sn(this.accumulatedMeanSquares.map(function(n){return n.variable})),this.accumulatedMeanGrads!=null&&this.centered&&Sn(this.accumulatedMeanGrads.map(function(n){return n.variable})),this.accumulatedMoments!=null&&Sn(this.accumulatedMoments.map(function(n){return n.variable}))},r.prototype.getWeights=function(){return lt(this,void 0,void 0,function(){var n;return ct(this,function(e){switch(e.label){case 0:return n=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&n.push.apply(n,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(n.map(function(o){return{name:o.originalName,tensor:o.variable}}))]}})})},r.prototype.setWeights=function(n){return lt(this,void 0,void 0,function(){var e;return ct(this,function(o){switch(o.label){case 0:return[4,this.extractIterations(n)];case 1:return n=o.sent(),e=this.centered?n.length/3:n.length/2,this.accumulatedMeanSquares=n.slice(0,e).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.accumulatedMoments=n.slice(e,2*e).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.centered&&(this.accumulatedMeanGrads=n.slice(2*e,3*e).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}})),[2]}})})},r.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},r.fromConfig=function(n,e){return new n(e.learningRate,e.decay,e.momentum,e.epsilon,e.centered)},r.className="RMSProp",r}(ha);fa(P3);ir.prototype.squaredDifference=function(t){return Db(this,t)},Le=i3;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ph=function(t,r){return Ph=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(var o in e)e.hasOwnProperty(o)&&(n[o]=e[o])},Ph(t,r)};function jt(t,r){Ph(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}var on=function(){return on=Object.assign||function(r){for(var n,e=1,o=arguments.length;e<o;e++){n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},on.apply(this,arguments)};function yt(t,r,n,e){function o(i){return i instanceof n?i:new n(function(u){u(i)})}return new(n||(n=Promise))(function(i,u){function a(h){try{l(e.next(h))}catch(p){u(p)}}function s(h){try{l(e.throw(h))}catch(p){u(p)}}function l(h){h.done?i(h.value):o(h.value).then(a,s)}l((e=e.apply(t,r||[])).next())})}function gt(t,r){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},e,o,i,u;return u={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(l){return function(h){return s([l,h])}}function s(l){if(e)throw new TypeError("Generator is already executing.");for(;n;)try{if(e=1,o&&(i=l[0]&2?o.return:l[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,l[1])).done)return i;switch(o=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,o=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=r.call(t,n)}catch(h){l=[6,h],o=0}finally{e=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Zs(){for(var t=0,r=0,n=arguments.length;r<n;r++)t+=arguments[r].length;for(var e=Array(t),o=0,r=0;r<n;r++)for(var i=arguments[r],u=0,a=i.length;u<a;u++,o++)e[o]=i[u];return e}var Za=function(){function t(r,n){if(!Ji(r)||!Ji(n))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:r,height:n}));this._width=r,this._height=n}return Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),t.prototype.reverse=function(){return new t(1/this.width,1/this.height)},t}();function rd(t,r){return t instanceof ir&&t.shape.length===r}function D3(t){return rd(t,2)}function nd(t){return rd(t,3)}function ki(t){return rd(t,4)}function O3(t){return t%1!==0}function vv(t){return t%2===0}function L3(t,r){r===void 0&&(r=2);var n=Math.pow(10,r);return Math.floor(t*n)/n}function bv(t){return t&&t.width&&t.height}function N3(t,r){var n=t.width,e=t.height,o=r/Math.max(e,n);return new Za(Math.round(n*o),Math.round(e*o))}function am(t){return t.reduce(function(r,n){return r.add(n)},new Ft(0,0)).div(new Ft(t.length,t.length))}function wu(t,r,n){return Array(t).fill(0).map(function(e,o){return r+o*n})}function Ji(t){return!!t&&t!==1/0&&t!==-1/0&&!isNaN(t)||t===0}function xv(t){return Ji(t)&&0<=t&&t<=1}var Ft=function(){function t(r,n){this._x=r,this._y=n}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),t.prototype.add=function(r){return new t(this.x+r.x,this.y+r.y)},t.prototype.sub=function(r){return new t(this.x-r.x,this.y-r.y)},t.prototype.mul=function(r){return new t(this.x*r.x,this.y*r.y)},t.prototype.div=function(r){return new t(this.x/r.x,this.y/r.y)},t.prototype.abs=function(){return new t(Math.abs(this.x),Math.abs(this.y))},t.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},t.prototype.floor=function(){return new t(Math.floor(this.x),Math.floor(this.y))},t}(),Ii=function(){function t(r,n){n===void 0&&(n=!0);var e=r||{},o=[e.left,e.top,e.right,e.bottom].every(Ji),i=[e.x,e.y,e.width,e.height].every(Ji);if(!i&&!o)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(e));var u=i?[e.x,e.y,e.width,e.height]:[e.left,e.top,e.right-e.left,e.bottom-e.top],a=u[0],s=u[1],l=u[2],h=u[3];t.assertIsValidBox({x:a,y:s,width:l,height:h},"Box.constructor",n),this._x=a,this._y=s,this._width=l,this._height=h}return t.isRect=function(r){return!!r&&[r.x,r.y,r.width,r.height].every(Ji)},t.assertIsValidBox=function(r,n,e){if(e===void 0&&(e=!1),!t.isRect(r))throw new Error(n+" - invalid box: "+JSON.stringify(r)+", expected object with properties x, y, width, height");if(!e&&(r.width<0||r.height<0))throw new Error(n+" - width ("+r.width+") and height ("+r.height+") must be positive numbers")},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topLeft",{get:function(){return new Ft(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topRight",{get:function(){return new Ft(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomLeft",{get:function(){return new Ft(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomRight",{get:function(){return new Ft(this.right,this.bottom)},enumerable:!0,configurable:!0}),t.prototype.round=function(){var r=[this.x,this.y,this.width,this.height].map(function(u){return Math.round(u)}),n=r[0],e=r[1],o=r[2],i=r[3];return new t({x:n,y:e,width:o,height:i})},t.prototype.floor=function(){var r=[this.x,this.y,this.width,this.height].map(function(u){return Math.floor(u)}),n=r[0],e=r[1],o=r[2],i=r[3];return new t({x:n,y:e,width:o,height:i})},t.prototype.toSquare=function(){var r=this,n=r.x,e=r.y,o=r.width,i=r.height,u=Math.abs(o-i);return o<i&&(n-=u/2,o+=u),i<o&&(e-=u/2,i+=u),new t({x:n,y:e,width:o,height:i})},t.prototype.rescale=function(r){var n=bv(r)?r.width:r,e=bv(r)?r.height:r;return new t({x:this.x*n,y:this.y*e,width:this.width*n,height:this.height*e})},t.prototype.pad=function(r,n){var e=[this.x-r/2,this.y-n/2,this.width+r,this.height+n],o=e[0],i=e[1],u=e[2],a=e[3];return new t({x:o,y:i,width:u,height:a})},t.prototype.clipAtImageBorders=function(r,n){var e=this,o=e.x,i=e.y,u=e.right,a=e.bottom,s=Math.max(o,0),l=Math.max(i,0),h=u-s,p=a-l,c=Math.min(h,r-s),d=Math.min(p,n-l);return new t({x:s,y:l,width:c,height:d}).floor()},t.prototype.shift=function(r,n){var e=this,o=e.width,i=e.height,u=this.x+r,a=this.y+n;return new t({x:u,y:a,width:o,height:i})},t.prototype.padAtBorders=function(r,n){var e=this.width+1,o=this.height+1,i=1,u=1,a=e,s=o,l=this.left,h=this.top,p=this.right,c=this.bottom;return p>n&&(a=-p+n+e,p=n),c>r&&(s=-c+r+o,c=r),l<1&&(s=2-l,l=1),h<1&&(s=2-h,h=1),{dy:u,edy:s,dx:i,edx:a,y:h,ey:c,x:l,ex:p,w:e,h:o}},t.prototype.calibrate=function(r){return new t({left:this.left+r.left*this.width,top:this.top+r.top*this.height,right:this.right+r.right*this.width,bottom:this.bottom+r.bottom*this.height}).toSquare().round()},t}(),od=function(t){jt(r,t);function r(n,e,o,i,u){return u===void 0&&(u=!1),t.call(this,{left:n,top:e,right:o,bottom:i},u)||this}return r}(Ii),xx=function(){function t(r,n,e,o,i){this._imageDims=new Za(i.width,i.height),this._score=r,this._classScore=n,this._className=e,this._box=new Ii(o).rescale(this._imageDims)}return Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativeBox",{get:function(){return new Ii(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),t.prototype.forSize=function(r,n){return new t(this.score,this.classScore,this.className,this.relativeBox,{width:r,height:n})},t}(),Do=function(t){jt(r,t);function r(n,e,o){return t.call(this,n,n,"",e,o)||this}return r.prototype.forSize=function(n,e){var o=t.prototype.forSize.call(this,n,e),i=o.score,u=o.relativeBox,a=o.imageDims;return new r(i,u,a)},r}(xx);function F3(t,r,n){n===void 0&&(n=!0);var e=Math.max(0,Math.min(t.right,r.right)-Math.max(t.left,r.left)),o=Math.max(0,Math.min(t.bottom,r.bottom)-Math.max(t.top,r.top)),i=e*o;return n?i/(t.area+r.area-i):i/Math.min(t.area,r.area)}function B3(t){var r=t.map(function(a){return a.x}),n=t.map(function(a){return a.y}),e=r.reduce(function(a,s){return s<a?s:a},1/0),o=n.reduce(function(a,s){return s<a?s:a},1/0),i=r.reduce(function(a,s){return a<s?s:a},0),u=n.reduce(function(a,s){return a<s?s:a},0);return new od(e,o,i,u)}function _u(t,r,n,e){e===void 0&&(e=!0);for(var o=r.map(function(a,s){return{score:a,boxIndex:s}}).sort(function(a,s){return a.score-s.score}).map(function(a){return a.boxIndex}),i=[],u=function(){var a=o.pop();i.push(a);for(var s=o,l=[],h=0;h<s.length;h++){var p=s[h],c=t[a],d=t[p];l.push(F3(c,d,e))}o=o.filter(function(f,m){return l[m]<=n})};o.length>0;)u();return i}function Lu(t,r){return it(function(){var n=r[0],e=r[1],o=r[2],i=Mo(Zs(t.shape.slice(0,3),[1]),n),u=Mo(Zs(t.shape.slice(0,3),[1]),e),a=Mo(Zs(t.shape.slice(0,3),[1]),o),s=Cr([i,u,a],3);return Mr(t,s)})}function U3(t,r){return r===void 0&&(r=!1),it(function(){var n=t.shape.slice(1),e=n[0],o=n[1];if(e===o)return t;var i=Math.abs(e-o),u=Math.round(i*(r?.5:1)),a=e>o?2:1,s=function(d){var f=t.shape.slice();return f[a]=d,Mo(f,0)},l=s(u),h=i-l.shape[a],p=r&&h?s(h):null,c=[p,t,l].filter(function(d){return!!d}).map(function(d){return d.toFloat()});return Cr(c,a)})}function hf(t){return 1/(1+Math.exp(-t))}var sm=function(t){jt(r,t);function r(n,e,o,i,u){return u===void 0&&(u=!1),t.call(this,{x:n,y:e,width:o,height:i},u)||this}return r}(Ii),G3=.5,z3=.43,V3=.45,kc=function(){function t(r,n,e){e===void 0&&(e=new Ft(0,0));var o=n.width,i=n.height;this._imgDims=new Za(o,i),this._shift=e,this._positions=r.map(function(u){return u.mul(new Ft(o,i)).add(e)})}return Object.defineProperty(t.prototype,"shift",{get:function(){return new Ft(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativePositions",{get:function(){var r=this;return this._positions.map(function(n){return n.sub(r._shift).div(new Ft(r.imageWidth,r.imageHeight))})},enumerable:!0,configurable:!0}),t.prototype.forSize=function(r,n){return new this.constructor(this.relativePositions,{width:r,height:n})},t.prototype.shiftBy=function(r,n){return new this.constructor(this.relativePositions,this._imgDims,new Ft(r,n))},t.prototype.shiftByPoint=function(r){return this.shiftBy(r.x,r.y)},t.prototype.align=function(r,n){if(n===void 0&&(n={}),r){var e=r instanceof Do?r.box.floor():new Ii(r);return this.shiftBy(e.x,e.y).align(null,n)}var o=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},n),i=o.useDlibAlignment,u=o.minBoxPadding;return i?this.alignDlib():this.alignMinBbox(u)},t.prototype.alignDlib=function(){var r=this.getRefPointsForAlignment(),n=r[0],e=r[1],o=r[2],i=function(p){return o.sub(p).magnitude()},u=(i(n)+i(e))/2,a=Math.floor(u/V3),s=am(r),l=Math.floor(Math.max(0,s.x-G3*a)),h=Math.floor(Math.max(0,s.y-z3*a));return new sm(l,h,Math.min(a,this.imageWidth+l),Math.min(a,this.imageHeight+h))},t.prototype.alignMinBbox=function(r){var n=B3(this.positions);return n.pad(n.width*r,n.height*r)},t.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},t}(),W3=function(t){jt(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.getRefPointsForAlignment=function(){var n=this.positions;return[n[0],n[1],am([n[3],n[4]])]},r}(kc),H3=function(t){jt(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.getJawOutline=function(){return this.positions.slice(0,17)},r.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},r.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},r.prototype.getNose=function(){return this.positions.slice(27,36)},r.prototype.getLeftEye=function(){return this.positions.slice(36,42)},r.prototype.getRightEye=function(){return this.positions.slice(42,48)},r.prototype.getMouth=function(){return this.positions.slice(48,68)},r.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(am)},r}(kc),wv=function(){function t(r,n){this._label=r,this._distance=n}return Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),t.prototype.toString=function(r){return r===void 0&&(r=!0),""+this.label+(r?" ("+L3(this.distance)+")":"")},t}(),_v=function(t){jt(r,t);function r(n,e){var o=t.call(this,n)||this;return o._label=e,o}return r.assertIsValidLabeledBox=function(n,e){if(Ii.assertIsValidBox(n,e),!Ji(n.label))throw new Error(e+" - expected property label ("+n.label+") to be a number")},Object.defineProperty(r.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),r}(Ii),Ba=function(){function t(r,n){if(typeof r!="string")throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(n)||n.some(function(e){return!(e instanceof Float32Array)}))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=r,this._descriptors=n}return Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),t.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map(function(r){return Array.from(r)})}},t.fromJSON=function(r){var n=r.descriptors.map(function(e){return new Float32Array(e)});return new t(r.label,n)},t}();(function(t){jt(r,t);function r(n,e,o,i){var u=t.call(this,n,e)||this;return u._score=o,u._classScore=i,u}return r.assertIsValidPredictedBox=function(n,e){if(_v.assertIsValidLabeledBox(n,e),!xv(n.score)||!xv(n.classScore))throw new Error(e+" - expected properties score ("+n.score+") and ("+n.classScore+") to be a number between [0, 1]")},Object.defineProperty(r.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),r})(_v);function q3(t){return t.detection instanceof Do}function um(t,r){var n={detection:r};return Object.assign({},t,n)}function wx(){var t=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")},r=function(){throw new Error("readFile - filesystem not available for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D,Image:HTMLImageElement,ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:t,readFile:r}}function _x(t){var r="";if(!t)try{t=require("fs")}catch(e){r=e.toString()}var n=t?function(e){return new Promise(function(o,i){t.readFile(e,function(u,a){return u?i(u):o(a)})})}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+r)};return{readFile:n}}function Sx(){var t=global.Canvas||global.HTMLCanvasElement,r=global.Image||global.HTMLImageElement,n=function(){if(t)return new t;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},e=function(){if(r)return new r;throw new Error("createImageElement - missing Image implementation for nodejs environment")},o=global.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},i=_x();return on({Canvas:t||function(){function u(){}return u}(),CanvasRenderingContext2D:global.CanvasRenderingContext2D||function(){function u(){}return u}(),Image:r||function(){function u(){}return u}(),ImageData:global.ImageData||function(){function u(){}return u}(),Video:global.HTMLVideoElement||function(){function u(){}return u}(),createCanvasElement:n,createImageElement:e,fetch:o},i)}function Ex(){return typeof window=="object"&&typeof document<"u"&&typeof HTMLImageElement<"u"&&typeof HTMLCanvasElement<"u"&&typeof HTMLVideoElement<"u"&&typeof ImageData<"u"&&typeof CanvasRenderingContext2D<"u"}function jx(){return typeof global=="object"&&typeof require=="function"&&typeof n2<"u"&&typeof process<"u"&&!!process.version}var Sr;function $3(){if(!Sr)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return Sr}function Dh(t){Sr=t}function lm(){Ex()&&Dh(wx()),jx()&&Dh(Sx())}function X3(t){if(Sr||lm(),!Sr)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var r=t.Canvas,n=r===void 0?Sr.Canvas:r,e=t.Image,o=e===void 0?Sr.Image:e;Sr.Canvas=n,Sr.Image=o,Sr.createCanvasElement=t.createCanvasElement||function(){return new n},Sr.createImageElement=t.createImageElement||function(){return new o},Sr.ImageData=t.ImageData||Sr.ImageData,Sr.Video=t.Video||Sr.Video,Sr.fetch=t.fetch||Sr.fetch,Sr.readFile=t.readFile||Sr.readFile}var cn={getEnv:$3,setEnv:Dh,initialize:lm,createBrowserEnv:wx,createFileSystem:_x,createNodejsEnv:Sx,monkeyPatch:X3,isBrowser:Ex,isNodejs:jx};lm();function Cx(t){return!cn.isNodejs()&&typeof t=="string"?document.getElementById(t):t}function aa(t){var r=cn.getEnv(),n=r.Canvas,e=r.CanvasRenderingContext2D;if(t instanceof e)return t;var o=Cx(t);if(!(o instanceof n))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var i=o.getContext("2d");if(!i)throw new Error("resolveContext2d - canvas 2d context is null");return i}var Sv;(function(t){t.TOP_LEFT="TOP_LEFT",t.TOP_RIGHT="TOP_RIGHT",t.BOTTOM_LEFT="BOTTOM_LEFT",t.BOTTOM_RIGHT="BOTTOM_RIGHT"})(Sv||(Sv={}));function kx(t){var r=cn.getEnv(),n=r.Image,e=r.Video;return t instanceof n&&t.complete||t instanceof e&&t.readyState>=3}function Y3(t){return new Promise(function(r,n){if(t instanceof cn.getEnv().Canvas||kx(t))return r();function e(i){i.currentTarget&&(i.currentTarget.removeEventListener("load",e),i.currentTarget.removeEventListener("error",o),r(i))}function o(i){i.currentTarget&&(i.currentTarget.removeEventListener("load",e),i.currentTarget.removeEventListener("error",o),n(i))}t.addEventListener("load",e),t.addEventListener("error",o)})}function Tx(t){var r=cn.getEnv(),n=r.Image,e=r.Video;return t instanceof n?new Za(t.naturalWidth,t.naturalHeight):t instanceof e?new Za(t.videoWidth,t.videoHeight):new Za(t.width,t.height)}function id(t){var r=t.width,n=t.height,e=cn.getEnv().createCanvasElement,o=e();return o.width=r,o.height=n,o}function cm(t,r){var n=cn.getEnv().ImageData;if(!(t instanceof n)&&!kx(t))throw new Error("createCanvasFromMedia - media has not finished loading yet");var e=r||Tx(t),o=e.width,i=e.height,u=id({width:o,height:i});return t instanceof n?aa(u).putImageData(t,0,0):aa(u).drawImage(t,0,0,o,i),u}function K3(t,r){return yt(this,void 0,void 0,function(){var n,e,o,i,u,a;return gt(this,function(s){switch(s.label){case 0:return n=r||cn.getEnv().createCanvasElement(),e=t.shape.slice(ki(t)?1:0),o=e[0],i=e[1],u=e[2],a=it(function(){return t.as3D(o,i,u).toInt()}),[4,im.toPixels(a,n)];case 1:return s.sent(),a.dispose(),[2,n]}})})}function Ev(t){var r=cn.getEnv(),n=r.Image,e=r.Canvas,o=r.Video;return t instanceof n||t instanceof e||t instanceof o}function Q3(t,r,n){n===void 0&&(n=!1);var e=cn.getEnv(),o=e.Image,i=e.Canvas;if(!(t instanceof o||t instanceof i))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var u=Tx(t),a=r/Math.max(u.height,u.width),s=a*u.width,l=a*u.height,h=id({width:r,height:r}),p=t instanceof i?t:cm(t),c=Math.abs(s-l)/2,d=n&&s<l?c:0,f=n&&l<s?c:0;return aa(h).drawImage(p,d,f,s,l),h}var Tc=function(){function t(r,n){var e=this;if(n===void 0&&(n=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(r))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+r);this._treatAsBatchInput=n,this._batchSize=r.length,r.forEach(function(o,i){if(nd(o)){e._imageTensors[i]=o,e._inputDimensions[i]=o.shape;return}if(ki(o)){var u=o.shape[0];if(u!==1)throw new Error("NetInput - tf.Tensor4D with batchSize "+u+" passed, but not supported in input array");e._imageTensors[i]=o,e._inputDimensions[i]=o.shape.slice(1);return}var a=o instanceof cn.getEnv().Canvas?o:cm(o);e._canvases[i]=a,e._inputDimensions[i]=[a.height,a.width,3]})}return Object.defineProperty(t.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"reshapedInputDimensions",{get:function(){var r=this;return wu(this.batchSize,0,1).map(function(n,e){return r.getReshapedInputDimensions(e)})},enumerable:!0,configurable:!0}),t.prototype.getInput=function(r){return this.canvases[r]||this.imageTensors[r]},t.prototype.getInputDimensions=function(r){return this._inputDimensions[r]},t.prototype.getInputHeight=function(r){return this._inputDimensions[r][0]},t.prototype.getInputWidth=function(r){return this._inputDimensions[r][1]},t.prototype.getReshapedInputDimensions=function(r){if(typeof this.inputSize!="number")throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");var n=this.getInputWidth(r),e=this.getInputHeight(r);return N3({width:n,height:e},this.inputSize)},t.prototype.toBatchTensor=function(r,n){var e=this;return n===void 0&&(n=!0),this._inputSize=r,it(function(){var o=wu(e.batchSize,0,1).map(function(u){var a=e.getInput(u);if(a instanceof ir){var s=ki(a)?a:a.expandDims();return s=U3(s,n),(s.shape[1]!==r||s.shape[2]!==r)&&(s=Jp.resizeBilinear(s,[r,r])),s.as3D(r,r,3)}if(a instanceof cn.getEnv().Canvas)return im.fromPixels(Q3(a,r,n));throw new Error("toBatchTensor - at batchIdx "+u+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+a)}),i=On(o.map(function(u){return u.toFloat()})).as4D(e.batchSize,r,r,3);return i})},t}();function Ur(t){return yt(this,void 0,void 0,function(){var r,n,e;return gt(this,function(o){switch(o.label){case 0:if(t instanceof Tc)return[2,t];if(r=Array.isArray(t)?t:[t],!r.length)throw new Error("toNetInput - empty array passed as input");return n=function(i){return Array.isArray(t)?" at input index "+i+":":""},e=r.map(Cx),e.forEach(function(i,u){if(!Ev(i)&&!nd(i)&&!ki(i))throw typeof r[u]=="string"?new Error("toNetInput -"+n(u)+" string passed, but could not resolve HTMLElement for element id "+r[u]):new Error("toNetInput -"+n(u)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id");if(ki(i)){var a=i.shape[0];if(a!==1)throw new Error("toNetInput -"+n(u)+" tf.Tensor4D with batchSize "+a+" passed, but not supported in input array")}}),[4,Promise.all(e.map(function(i){return Ev(i)&&Y3(i)}))];case 1:return o.sent(),[2,new Tc(e,Array.isArray(t))]}})})}function dm(t,r){return yt(this,void 0,void 0,function(){var n,e,o,i,u,a,s;return gt(this,function(l){switch(l.label){case 0:return n=cn.getEnv().Canvas,e=t,t instanceof n?[3,5]:[4,Ur(t)];case 1:if(o=l.sent(),o.batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return i=o.getInput(0),i instanceof n?(u=i,[3,4]):[3,2];case 2:return[4,K3(i)];case 3:u=l.sent(),l.label=4;case 4:e=u,l.label=5;case 5:return a=aa(e),s=r.map(function(h){return h instanceof Do?h.forSize(e.width,e.height).box.floor():h}).map(function(h){return h.clipAtImageBorders(e.width,e.height)}),[2,s.map(function(h){var p=h.x,c=h.y,d=h.width,f=h.height,m=id({width:d,height:f});return aa(m).putImageData(a.getImageData(p,c,d,f),0,0),m})]}})})}function fm(t,r){return yt(this,void 0,void 0,function(){return gt(this,function(n){if(!nd(t)&&!ki(t))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(ki(t)&&t.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,it(function(){var e=t.shape.slice(ki(t)?1:0),o=e[0],i=e[1],u=e[2],a=r.map(function(l){return l instanceof Do?l.forSize(i,o).box:l}).map(function(l){return l.clipAtImageBorders(i,o)}),s=a.map(function(l){var h=l.x,p=l.y,c=l.width,d=l.height;return tx(t.as3D(o,i,u),[p,h,0],[d,c,u])});return s})]})})}function Z3(t,r){return yt(this,void 0,void 0,function(){var n,e;return gt(this,function(o){switch(o.label){case 0:return n=cn.getEnv().fetch,[4,n(t,r)];case 1:if(e=o.sent(),!(e.status<400))throw new Error("failed to fetch: ("+e.status+") "+e.statusText+", from url: "+e.url);return[2,e]}})})}function J3(t){return yt(this,void 0,void 0,function(){return gt(this,function(r){switch(r.label){case 0:return[4,Z3(t)];case 1:return[2,r.sent().json()]}})})}function Mx(t,r){var n=r+"-weights_manifest.json";if(!t)return{modelBaseUri:"",manifestUri:n};if(t==="/")return{modelBaseUri:"/",manifestUri:"/"+n};var e=t.startsWith("http://")?"http://":t.startsWith("https://")?"https://":"";t=t.replace(e,"");var o=t.split("/").filter(function(a){return a}),i=t.endsWith(".json")?o[o.length-1]:n,u=e+(t.endsWith(".json")?o.slice(0,o.length-1):o).join("/");return u=t.startsWith("/")?"/"+u:u,{modelBaseUri:u,manifestUri:u==="/"?"/"+i:u+"/"+i}}function eM(t,r){return yt(this,void 0,void 0,function(){var n,e,o,i;return gt(this,function(u){switch(u.label){case 0:return n=Mx(t,r),e=n.manifestUri,o=n.modelBaseUri,[4,J3(e)];case 1:return i=u.sent(),[2,vx.loadWeights(i,o)]}})})}var Jo=function(){function t(r){this._name=r,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(t.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),t.prototype.getParamFromPath=function(r){var n=this.traversePropertyPath(r),e=n.obj,o=n.objProp;return e[o]},t.prototype.reassignParamFromPath=function(r,n){var e=this.traversePropertyPath(r),o=e.obj,i=e.objProp;o[i].dispose(),o[i]=n},t.prototype.getParamList=function(){var r=this;return this._paramMappings.map(function(n){var e=n.paramPath;return{path:e,tensor:r.getParamFromPath(e)}})},t.prototype.getTrainableParams=function(){return this.getParamList().filter(function(r){return r.tensor instanceof us})},t.prototype.getFrozenParams=function(){return this.getParamList().filter(function(r){return!(r.tensor instanceof us)})},t.prototype.variable=function(){var r=this;this.getFrozenParams().forEach(function(n){var e=n.path,o=n.tensor;r.reassignParamFromPath(e,o.variable())})},t.prototype.freeze=function(){var r=this;this.getTrainableParams().forEach(function(n){var e=n.path,o=n.tensor,i=$r(o.dataSync());o.dispose(),r.reassignParamFromPath(e,i)})},t.prototype.dispose=function(r){r===void 0&&(r=!0),this.getParamList().forEach(function(n){if(r&&n.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+n.path);n.tensor.dispose()}),this._params=void 0},t.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(r){var n=r.tensor;return Array.from(n.dataSync())}).reduce(function(r,n){return r.concat(n)}))},t.prototype.load=function(r){return yt(this,void 0,void 0,function(){return gt(this,function(n){switch(n.label){case 0:return r instanceof Float32Array?(this.extractWeights(r),[2]):[4,this.loadFromUri(r)];case 1:return n.sent(),[2]}})})},t.prototype.loadFromUri=function(r){return yt(this,void 0,void 0,function(){var n;return gt(this,function(e){switch(e.label){case 0:if(r&&typeof r!="string")throw new Error(this._name+".loadFromUri - expected model uri");return[4,eM(r,this.getDefaultModelName())];case 1:return n=e.sent(),this.loadFromWeightMap(n),[2]}})})},t.prototype.loadFromDisk=function(r){return yt(this,void 0,void 0,function(){var n,e,o,i,u,a,s,l,h,p;return gt(this,function(c){switch(c.label){case 0:if(r&&typeof r!="string")throw new Error(this._name+".loadFromDisk - expected model file path");return n=cn.getEnv().readFile,e=Mx(r,this.getDefaultModelName()),o=e.manifestUri,i=e.modelBaseUri,u=function(d){return Promise.all(d.map(function(f){return n(f).then(function(m){return m.buffer})}))},a=vx.weightsLoaderFactory(u),h=(l=JSON).parse,[4,n(o)];case 1:return s=h.apply(l,[c.sent().toString()]),[4,a(s,i)];case 2:return p=c.sent(),this.loadFromWeightMap(p),[2]}})})},t.prototype.loadFromWeightMap=function(r){var n=this.extractParamsFromWeigthMap(r),e=n.paramMappings,o=n.params;this._paramMappings=e,this._params=o},t.prototype.extractWeights=function(r){var n=this.extractParams(r),e=n.paramMappings,o=n.params;this._paramMappings=e,this._params=o},t.prototype.traversePropertyPath=function(r){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var n=r.split("/").reduce(function(i,u){if(!i.nextObj.hasOwnProperty(u))throw new Error("traversePropertyPath - object does not have property "+u+", for path "+r);return{obj:i.nextObj,objProp:u,nextObj:i.nextObj[u]}},{nextObj:this.params}),e=n.obj,o=n.objProp;if(!e||!o||!(e[o]instanceof ir))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+r);return{obj:e,objProp:o}},t}();function Pn(t,r,n){return it(function(){var e=Xp(t,r.depthwise_filter,r.pointwise_filter,n,"same");return e=Mt(e,r.bias),e})}function pf(t,r,n){return n===void 0&&(n=!1),it(function(){var e=ar(n?Mt(Xn(t,r.conv0.filters,[2,2],"same"),r.conv0.bias):Pn(t,r.conv0,[2,2])),o=Pn(e,r.conv1,[1,1]),i=ar(Mt(e,o)),u=Pn(i,r.conv2,[1,1]);return ar(Mt(e,Mt(o,u)))})}function vl(t,r,n,e){return n===void 0&&(n=!1),e===void 0&&(e=!0),it(function(){var o=ar(n?Mt(Xn(t,r.conv0.filters,e?[2,2]:[1,1],"same"),r.conv0.bias):Pn(t,r.conv0,e?[2,2]:[1,1])),i=Pn(o,r.conv1,[1,1]),u=ar(Mt(o,i)),a=Pn(u,r.conv2,[1,1]),s=ar(Mt(o,Mt(i,a))),l=Pn(s,r.conv3,[1,1]);return ar(Mt(o,Mt(i,Mt(a,l))))})}function ao(t,r,n,e){return n===void 0&&(n="same"),e===void 0&&(e=!1),it(function(){var o=Mt(Xn(t,r.filters,[1,1],n),r.bias);return e?ar(o):o})}function ei(t,r){Object.keys(t).forEach(function(n){r.some(function(e){return e.originalPath===n})||t[n].dispose()})}function ad(t,r){return function(n,e,o,i){var u=yn(t(n*e*o*o),[o,o,n,e]),a=wr(t(e));return r.push({paramPath:i+"/filters"},{paramPath:i+"/bias"}),{filters:u,bias:a}}}function hm(t,r){return function(n,e,o){var i=ji(t(n*e),[n,e]),u=wr(t(e));return r.push({paramPath:o+"/weights"},{paramPath:o+"/bias"}),{weights:i,bias:u}}}var Rx=function(){function t(r,n,e){this.depthwise_filter=r,this.pointwise_filter=n,this.bias=e}return t}();function pm(t,r){return function(n,e,o){var i=yn(t(9*n),[3,3,n,1]),u=yn(t(n*e),[1,1,n,e]),a=wr(t(e));return r.push({paramPath:o+"/depthwise_filter"},{paramPath:o+"/pointwise_filter"},{paramPath:o+"/bias"}),new Rx(i,u,a)}}function mm(t){return function(r){var n=t(r+"/depthwise_filter",4),e=t(r+"/pointwise_filter",4),o=t(r+"/bias",1);return new Rx(n,e,o)}}function Ni(t,r){return function(n,e,o){var i=t[n];if(!rd(i,e))throw new Error("expected weightMap["+n+"] to be a Tensor"+e+"D, instead have "+i);return r.push({originalPath:n,paramPath:o||n}),i}}function ti(t){var r=t;function n(o){var i=r.slice(0,o);return r=r.slice(o),i}function e(){return r}return{extractWeights:n,getRemainingWeights:e}}function Ix(t,r){var n=ad(t,r),e=pm(t,r);function o(u,a,s,l){l===void 0&&(l=!1);var h=l?n(u,a,3,s+"/conv0"):e(u,a,s+"/conv0"),p=e(a,a,s+"/conv1"),c=e(a,a,s+"/conv2");return{conv0:h,conv1:p,conv2:c}}function i(u,a,s,l){l===void 0&&(l=!1);var h=o(u,a,s,l),p=h.conv0,c=h.conv1,d=h.conv2,f=e(a,a,s+"/conv3");return{conv0:p,conv1:c,conv2:d,conv3:f}}return{extractDenseBlock3Params:o,extractDenseBlock4Params:i}}function tM(t){var r=[],n=ti(t),e=n.extractWeights,o=n.getRemainingWeights,i=Ix(e,r).extractDenseBlock4Params,u=i(3,32,"dense0",!0),a=i(32,64,"dense1"),s=i(64,128,"dense2"),l=i(128,256,"dense3");if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:r,params:{dense0:u,dense1:a,dense2:s,dense3:l}}}function Ax(t){return function(r){var n=t(r+"/filters",4),e=t(r+"/bias",1);return{filters:n,bias:e}}}function Px(t,r){var n=Ni(t,r),e=Ax(n),o=mm(n);function i(a,s){s===void 0&&(s=!1);var l=s?e(a+"/conv0"):o(a+"/conv0"),h=o(a+"/conv1"),p=o(a+"/conv2");return{conv0:l,conv1:h,conv2:p}}function u(a,s){s===void 0&&(s=!1);var l=s?e(a+"/conv0"):o(a+"/conv0"),h=o(a+"/conv1"),p=o(a+"/conv2"),c=o(a+"/conv3");return{conv0:l,conv1:h,conv2:p,conv3:c}}return{extractDenseBlock3Params:i,extractDenseBlock4Params:u}}function rM(t){var r=[],n=Px(t,r).extractDenseBlock4Params,e={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2"),dense3:n("dense3")};return ei(t,r),{params:e,paramMappings:r}}var Dx=function(t){jt(r,t);function r(){return t.call(this,"FaceFeatureExtractor")||this}return r.prototype.forwardInput=function(n){var e=this.params;if(!e)throw new Error("FaceFeatureExtractor - load model before inference");return it(function(){var o=n.toBatchTensor(112,!0),i=[122.782,117.001,104.298],u=Lu(o,i).div(ot(255)),a=vl(u,e.dense0,!0);return a=vl(a,e.dense1),a=vl(a,e.dense2),a=vl(a,e.dense3),a=Du(a,[7,7],[2,2],"valid"),a})},r.prototype.forward=function(n){return yt(this,void 0,void 0,function(){var e;return gt(this,function(o){switch(o.label){case 0:return e=this.forwardInput,[4,Ur(n)];case 1:return[2,e.apply(this,[o.sent()])]}})})},r.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},r.prototype.extractParamsFromWeigthMap=function(n){return rM(n)},r.prototype.extractParams=function(n){return tM(n)},r}(Jo);function Eo(t,r){return it(function(){return Mt(Jc(t,r.weights),r.bias)})}function nM(t,r,n){var e=[],o=ti(t),i=o.extractWeights,u=o.getRemainingWeights,a=hm(i,e),s=a(r,n,"fc");if(u().length!==0)throw new Error("weights remaing after extract: "+u().length);return{paramMappings:e,params:{fc:s}}}function oM(t){var r=[],n=Ni(t,r);function e(i){var u=n(i+"/weights",2),a=n(i+"/bias",1);return{weights:u,bias:a}}var o={fc:e("fc")};return ei(t,r),{params:o,paramMappings:r}}function Ox(t){var r={},n={};return Object.keys(t).forEach(function(e){var o=e.startsWith("fc")?n:r;o[e]=t[e]}),{featureExtractorMap:r,classifierMap:n}}var Lx=function(t){jt(r,t);function r(n,e){var o=t.call(this,n)||this;return o._faceFeatureExtractor=e,o}return Object.defineProperty(r.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),r.prototype.runNet=function(n){var e=this,o=this.params;if(!o)throw new Error(this._name+" - load model before inference");return it(function(){var i=n instanceof Tc?e.faceFeatureExtractor.forwardInput(n):n;return Eo(i.as2D(i.shape[0],-1),o.fc)})},r.prototype.dispose=function(n){n===void 0&&(n=!0),this.faceFeatureExtractor.dispose(n),t.prototype.dispose.call(this,n)},r.prototype.loadClassifierParams=function(n){var e=this.extractClassifierParams(n),o=e.params,i=e.paramMappings;this._params=o,this._paramMappings=i},r.prototype.extractClassifierParams=function(n){return nM(n,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},r.prototype.extractParamsFromWeigthMap=function(n){var e=Ox(n),o=e.featureExtractorMap,i=e.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(o),oM(i)},r.prototype.extractParams=function(n){var e=this.getClassifierChannelsIn(),o=this.getClassifierChannelsOut(),i=o*e+o,u=n.slice(0,n.length-i),a=n.slice(n.length-i);return this.faceFeatureExtractor.extractWeights(u),this.extractClassifierParams(a)},r}(Jo),jv=["neutral","happy","sad","angry","fearful","disgusted","surprised"],iM=function(){function t(r){var n=this;if(r.length!==7)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+r.length);jv.forEach(function(e,o){n[e]=r[o]})}return t.prototype.asSortedArray=function(){var r=this;return jv.map(function(n){return{expression:n,probability:r[n]}}).sort(function(n,e){return e.probability-n.probability})},t}(),aM=function(t){jt(r,t);function r(n){return n===void 0&&(n=new Dx),t.call(this,"FaceExpressionNet",n)||this}return r.prototype.forwardInput=function(n){var e=this;return it(function(){return Qo(e.runNet(n))})},r.prototype.forward=function(n){return yt(this,void 0,void 0,function(){var e;return gt(this,function(o){switch(o.label){case 0:return e=this.forwardInput,[4,Ur(n)];case 1:return[2,e.apply(this,[o.sent()])]}})})},r.prototype.predictExpressions=function(n){return yt(this,void 0,void 0,function(){var e,o,i,u,a=this;return gt(this,function(s){switch(s.label){case 0:return[4,Ur(n)];case 1:return e=s.sent(),[4,this.forwardInput(e)];case 2:return o=s.sent(),[4,Promise.all(kr(o).map(function(l){return yt(a,void 0,void 0,function(){var h;return gt(this,function(p){switch(p.label){case 0:return[4,l.data()];case 1:return h=p.sent(),l.dispose(),[2,h]}})})}))];case 3:return i=s.sent(),o.dispose(),u=i.map(function(l){return new iM(l)}),[2,e.isBatchInput?u:u[0]]}})})},r.prototype.getDefaultModelName=function(){return"face_expression_model"},r.prototype.getClassifierChannelsIn=function(){return 256},r.prototype.getClassifierChannelsOut=function(){return 7},r}(Lx);function Nx(t,r){var n={expressions:r};return Object.assign({},t,n)}function sM(t){return q3(t)&&t.landmarks instanceof kc&&t.unshiftedLandmarks instanceof kc&&t.alignedRect instanceof Do}function ym(t,r){var n=t.detection.box,e=r.shiftBy(n.x,n.y),o=e.align(),i=t.detection.imageDims,u=new Do(t.detection.score,o.rescale(i.reverse()),i),a={landmarks:e,unshiftedLandmarks:r,alignedRect:u};return Object.assign({},t,a)}function uM(t,r){var n=ad(t,r),e=pm(t,r);function o(u,a,s){var l=e(u,a,s+"/separable_conv0"),h=e(a,a,s+"/separable_conv1"),p=n(u,a,1,s+"/expansion_conv");return{separable_conv0:l,separable_conv1:h,expansion_conv:p}}function i(u,a){var s=e(u,u,a+"/separable_conv0"),l=e(u,u,a+"/separable_conv1"),h=e(u,u,a+"/separable_conv2");return{separable_conv0:s,separable_conv1:l,separable_conv2:h}}return{extractConvParams:n,extractSeparableConvParams:e,extractReductionBlockParams:o,extractMainBlockParams:i}}function lM(t,r){var n=[],e=ti(t),o=e.extractWeights,i=e.getRemainingWeights,u=uM(o,n),a=u.extractConvParams,s=u.extractSeparableConvParams,l=u.extractReductionBlockParams,h=u.extractMainBlockParams,p=a(3,32,3,"entry_flow/conv_in"),c=l(32,64,"entry_flow/reduction_block_0"),d=l(64,128,"entry_flow/reduction_block_1"),f={conv_in:p,reduction_block_0:c,reduction_block_1:d},m={};wu(r,0,1).forEach(function(b){m["main_block_"+b]=h(128,"middle_flow/main_block_"+b)});var y=l(128,256,"exit_flow/reduction_block"),g=s(256,512,"exit_flow/separable_conv"),v={reduction_block:y,separable_conv:g};if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:n,params:{entry_flow:f,middle_flow:m,exit_flow:v}}}function cM(t,r){var n=Ni(t,r),e=Ax(n),o=mm(n);function i(a){var s=o(a+"/separable_conv0"),l=o(a+"/separable_conv1"),h=e(a+"/expansion_conv");return{separable_conv0:s,separable_conv1:l,expansion_conv:h}}function u(a){var s=o(a+"/separable_conv0"),l=o(a+"/separable_conv1"),h=o(a+"/separable_conv2");return{separable_conv0:s,separable_conv1:l,separable_conv2:h}}return{extractConvParams:e,extractSeparableConvParams:o,extractReductionBlockParams:i,extractMainBlockParams:u}}function dM(t,r){var n=[],e=cM(t,n),o=e.extractConvParams,i=e.extractSeparableConvParams,u=e.extractReductionBlockParams,a=e.extractMainBlockParams,s=o("entry_flow/conv_in"),l=u("entry_flow/reduction_block_0"),h=u("entry_flow/reduction_block_1"),p={conv_in:s,reduction_block_0:l,reduction_block_1:h},c={};wu(r,0,1).forEach(function(y){c["main_block_"+y]=a("middle_flow/main_block_"+y)});var d=u("exit_flow/reduction_block"),f=i("exit_flow/separable_conv"),m={reduction_block:d,separable_conv:f};return ei(t,n),{params:{entry_flow:p,middle_flow:c,exit_flow:m},paramMappings:n}}function Fx(t,r,n){return Mt(Xn(t,r.filters,n,"same"),r.bias)}function mf(t,r,n){n===void 0&&(n=!0);var e=n?ar(t):t;return e=Pn(e,r.separable_conv0,[1,1]),e=Pn(ar(e),r.separable_conv1,[1,1]),e=Or(e,[3,3],[2,2],"same"),e=Mt(e,Fx(t,r.expansion_conv,[2,2])),e}function fM(t,r){var n=Pn(ar(t),r.separable_conv0,[1,1]);return n=Pn(ar(n),r.separable_conv1,[1,1]),n=Pn(ar(n),r.separable_conv2,[1,1]),n=Mt(n,t),n}var hM=function(t){jt(r,t);function r(n){var e=t.call(this,"TinyXception")||this;return e._numMainBlocks=n,e}return r.prototype.forwardInput=function(n){var e=this,o=this.params;if(!o)throw new Error("TinyXception - load model before inference");return it(function(){var i=n.toBatchTensor(112,!0),u=[122.782,117.001,104.298],a=Lu(i,u).div(ot(256)),s=ar(Fx(a,o.entry_flow.conv_in,[2,2]));return s=mf(s,o.entry_flow.reduction_block_0,!1),s=mf(s,o.entry_flow.reduction_block_1),wu(e._numMainBlocks,0,1).forEach(function(l){s=fM(s,o.middle_flow["main_block_"+l])}),s=mf(s,o.exit_flow.reduction_block),s=ar(Pn(s,o.exit_flow.separable_conv,[1,1])),s})},r.prototype.forward=function(n){return yt(this,void 0,void 0,function(){var e;return gt(this,function(o){switch(o.label){case 0:return e=this.forwardInput,[4,Ur(n)];case 1:return[2,e.apply(this,[o.sent()])]}})})},r.prototype.getDefaultModelName=function(){return"tiny_xception_model"},r.prototype.extractParamsFromWeigthMap=function(n){return dM(n,this._numMainBlocks)},r.prototype.extractParams=function(n){return lM(n,this._numMainBlocks)},r}(Jo);function pM(t){var r=[],n=ti(t),e=n.extractWeights,o=n.getRemainingWeights,i=hm(e,r),u=i(512,1,"fc/age"),a=i(512,2,"fc/gender");if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:r,params:{fc:{age:u,gender:a}}}}function mM(t){var r=[],n=Ni(t,r);function e(i){var u=n(i+"/weights",2),a=n(i+"/bias",1);return{weights:u,bias:a}}var o={fc:{age:e("fc/age"),gender:e("fc/gender")}};return ei(t,r),{params:o,paramMappings:r}}var Mc;(function(t){t.FEMALE="female",t.MALE="male"})(Mc||(Mc={}));var yM=function(t){jt(r,t);function r(n){n===void 0&&(n=new hM(2));var e=t.call(this,"AgeGenderNet")||this;return e._faceFeatureExtractor=n,e}return Object.defineProperty(r.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),r.prototype.runNet=function(n){var e=this,o=this.params;if(!o)throw new Error(this._name+" - load model before inference");return it(function(){var i=n instanceof Tc?e.faceFeatureExtractor.forwardInput(n):n,u=Du(i,[7,7],[2,2],"valid").as2D(i.shape[0],-1),a=Eo(u,o.fc.age).as1D(),s=Eo(u,o.fc.gender);return{age:a,gender:s}})},r.prototype.forwardInput=function(n){var e=this;return it(function(){var o=e.runNet(n),i=o.age,u=o.gender;return{age:i,gender:Qo(u)}})},r.prototype.forward=function(n){return yt(this,void 0,void 0,function(){var e;return gt(this,function(o){switch(o.label){case 0:return e=this.forwardInput,[4,Ur(n)];case 1:return[2,e.apply(this,[o.sent()])]}})})},r.prototype.predictAgeAndGender=function(n){return yt(this,void 0,void 0,function(){var e,o,i,u,a,s,l=this;return gt(this,function(h){switch(h.label){case 0:return[4,Ur(n)];case 1:return e=h.sent(),[4,this.forwardInput(e)];case 2:return o=h.sent(),i=kr(o.age),u=kr(o.gender),a=i.map(function(p,c){return{ageTensor:p,genderTensor:u[c]}}),[4,Promise.all(a.map(function(p){var c=p.ageTensor,d=p.genderTensor;return yt(l,void 0,void 0,function(){var f,m,y,g,v;return gt(this,function(b){switch(b.label){case 0:return[4,c.data()];case 1:return f=b.sent()[0],[4,d.data()];case 2:return m=b.sent()[0],y=m>.5,g=y?Mc.MALE:Mc.FEMALE,v=y?m:1-m,c.dispose(),d.dispose(),[2,{age:f,gender:g,genderProbability:v}]}})})}))];case 3:return s=h.sent(),o.age.dispose(),o.gender.dispose(),[2,e.isBatchInput?s:s[0]]}})})},r.prototype.getDefaultModelName=function(){return"age_gender_model"},r.prototype.dispose=function(n){n===void 0&&(n=!0),this.faceFeatureExtractor.dispose(n),t.prototype.dispose.call(this,n)},r.prototype.loadClassifierParams=function(n){var e=this.extractClassifierParams(n),o=e.params,i=e.paramMappings;this._params=o,this._paramMappings=i},r.prototype.extractClassifierParams=function(n){return pM(n)},r.prototype.extractParamsFromWeigthMap=function(n){var e=Ox(n),o=e.featureExtractorMap,i=e.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(o),mM(i)},r.prototype.extractParams=function(n){var e=1539,o=n.slice(0,n.length-e),i=n.slice(n.length-e);return this.faceFeatureExtractor.extractWeights(o),this.extractClassifierParams(i)},r}(Jo),Bx=function(t){jt(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.postProcess=function(n,e,o){var i=o.map(function(a){var s=a.width,l=a.height,h=e/Math.max(l,s);return{width:s*h,height:l*h}}),u=i.length;return it(function(){var a=function(c,d){return On([Mo([68],c),Mo([68],d)],1).as2D(1,136).as1D()},s=function(c,d){var f=i[c],m=f.width,y=f.height;return d(m,y)?Math.abs(m-y)/2:0},l=function(c){return s(c,function(d,f){return d<f})},h=function(c){return s(c,function(d,f){return f<d})},p=n.mul(Mo([u,136],e)).sub(On(Array.from(Array(u),function(c,d){return a(l(d),h(d))}))).div(On(Array.from(Array(u),function(c,d){return a(i[d].width,i[d].height)})));return p})},r.prototype.forwardInput=function(n){var e=this;return it(function(){var o=e.runNet(n);return e.postProcess(o,n.inputSize,n.inputDimensions.map(function(i){var u=i[0],a=i[1];return{height:u,width:a}}))})},r.prototype.forward=function(n){return yt(this,void 0,void 0,function(){var e;return gt(this,function(o){switch(o.label){case 0:return e=this.forwardInput,[4,Ur(n)];case 1:return[2,e.apply(this,[o.sent()])]}})})},r.prototype.detectLandmarks=function(n){return yt(this,void 0,void 0,function(){var e,o,i,u=this;return gt(this,function(a){switch(a.label){case 0:return[4,Ur(n)];case 1:return e=a.sent(),o=it(function(){return kr(u.forwardInput(e))}),[4,Promise.all(o.map(function(s,l){return yt(u,void 0,void 0,function(){var h,p,c,d,f;return gt(this,function(m){switch(m.label){case 0:return c=(p=Array).from,[4,s.data()];case 1:return h=c.apply(p,[m.sent()]),d=h.filter(function(y,g){return vv(g)}),f=h.filter(function(y,g){return!vv(g)}),[2,new H3(Array(68).fill(0).map(function(y,g){return new Ft(d[g],f[g])}),{height:e.getInputHeight(l),width:e.getInputWidth(l)})]}})})}))];case 2:return i=a.sent(),o.forEach(function(s){return s.dispose()}),[2,e.isBatchInput?i:i[0]]}})})},r.prototype.getClassifierChannelsOut=function(){return 136},r}(Lx),Ux=function(t){jt(r,t);function r(n){return n===void 0&&(n=new Dx),t.call(this,"FaceLandmark68Net",n)||this}return r.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},r.prototype.getClassifierChannelsIn=function(){return 256},r}(Bx);function gM(t){var r=[],n=Px(t,r).extractDenseBlock3Params,e={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2")};return ei(t,r),{params:e,paramMappings:r}}function vM(t){var r=[],n=ti(t),e=n.extractWeights,o=n.getRemainingWeights,i=Ix(e,r).extractDenseBlock3Params,u=i(3,32,"dense0",!0),a=i(32,64,"dense1"),s=i(64,128,"dense2");if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:r,params:{dense0:u,dense1:a,dense2:s}}}var bM=function(t){jt(r,t);function r(){return t.call(this,"TinyFaceFeatureExtractor")||this}return r.prototype.forwardInput=function(n){var e=this.params;if(!e)throw new Error("TinyFaceFeatureExtractor - load model before inference");return it(function(){var o=n.toBatchTensor(112,!0),i=[122.782,117.001,104.298],u=Lu(o,i).div(ot(255)),a=pf(u,e.dense0,!0);return a=pf(a,e.dense1),a=pf(a,e.dense2),a=Du(a,[14,14],[2,2],"valid"),a})},r.prototype.forward=function(n){return yt(this,void 0,void 0,function(){var e;return gt(this,function(o){switch(o.label){case 0:return e=this.forwardInput,[4,Ur(n)];case 1:return[2,e.apply(this,[o.sent()])]}})})},r.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},r.prototype.extractParamsFromWeigthMap=function(n){return gM(n)},r.prototype.extractParams=function(n){return vM(n)},r}(Jo),xM=function(t){jt(r,t);function r(n){return n===void 0&&(n=new bM),t.call(this,"FaceLandmark68TinyNet",n)||this}return r.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},r.prototype.getClassifierChannelsIn=function(){return 128},r}(Bx);(function(t){jt(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r})(Ux);function wM(t,r){return Mt(un(t,r.weights),r.biases)}function gm(t,r,n,e,o){o===void 0&&(o="same");var i=r.conv,u=i.filters,a=i.bias,s=Xn(t,u,n,o);return s=Mt(s,a),s=wM(s,r.scale),e?ar(s):s}function _M(t,r){return gm(t,r,[1,1],!0)}function Gx(t,r){return gm(t,r,[1,1],!1)}function zx(t,r){return gm(t,r,[2,2],!0,"valid")}function SM(t,r){function n(a,s,l){var h=t(a),p=h.length/(s*l*l);if(O3(p))throw new Error("depth has to be an integer: "+p+", weights.length: "+h.length+", numFilters: "+s+", filterSize: "+l);return it(function(){return Ri(yn(h,[s,p,l,l]),[2,3,1,0])})}function e(a,s,l,h){var p=n(a,s,l),c=wr(t(s));return r.push({paramPath:h+"/filters"},{paramPath:h+"/bias"}),{filters:p,bias:c}}function o(a,s){var l=wr(t(a)),h=wr(t(a));return r.push({paramPath:s+"/weights"},{paramPath:s+"/biases"}),{weights:l,biases:h}}function i(a,s,l,h){var p=e(a,s,l,h+"/conv"),c=o(s,h+"/scale");return{conv:p,scale:c}}function u(a,s,l,h,p){p===void 0&&(p=!1);var c=i((p?.5:1)*a,s,l,h+"/conv1"),d=i(a,s,l,h+"/conv2");return{conv1:c,conv2:d}}return{extractConvLayerParams:i,extractResidualLayerParams:u}}function EM(t){var r=ti(t),n=r.extractWeights,e=r.getRemainingWeights,o=[],i=SM(n,o),u=i.extractConvLayerParams,a=i.extractResidualLayerParams,s=u(4704,32,7,"conv32_down"),l=a(9216,32,3,"conv32_1"),h=a(9216,32,3,"conv32_2"),p=a(9216,32,3,"conv32_3"),c=a(36864,64,3,"conv64_down",!0),d=a(36864,64,3,"conv64_1"),f=a(36864,64,3,"conv64_2"),m=a(36864,64,3,"conv64_3"),y=a(147456,128,3,"conv128_down",!0),g=a(147456,128,3,"conv128_1"),v=a(147456,128,3,"conv128_2"),b=a(589824,256,3,"conv256_down",!0),w=a(589824,256,3,"conv256_1"),_=a(589824,256,3,"conv256_2"),j=a(589824,256,3,"conv256_down_out"),E=it(function(){return Ri(ji(n(256*128),[128,256]),[1,0])});if(o.push({paramPath:"fc"}),e().length!==0)throw new Error("weights remaing after extract: "+e().length);var T={conv32_down:s,conv32_1:l,conv32_2:h,conv32_3:p,conv64_down:c,conv64_1:d,conv64_2:f,conv64_3:m,conv128_down:y,conv128_1:g,conv128_2:v,conv256_down:b,conv256_1:w,conv256_2:_,conv256_down_out:j,fc:E};return{params:T,paramMappings:o}}function jM(t,r){var n=Ni(t,r);function e(u){var a=n(u+"/scale/weights",1),s=n(u+"/scale/biases",1);return{weights:a,biases:s}}function o(u){var a=n(u+"/conv/filters",4),s=n(u+"/conv/bias",1),l=e(u);return{conv:{filters:a,bias:s},scale:l}}function i(u){return{conv1:o(u+"/conv1"),conv2:o(u+"/conv2")}}return{extractConvLayerParams:o,extractResidualLayerParams:i}}function CM(t){var r=[],n=jM(t,r),e=n.extractConvLayerParams,o=n.extractResidualLayerParams,i=e("conv32_down"),u=o("conv32_1"),a=o("conv32_2"),s=o("conv32_3"),l=o("conv64_down"),h=o("conv64_1"),p=o("conv64_2"),c=o("conv64_3"),d=o("conv128_down"),f=o("conv128_1"),m=o("conv128_2"),y=o("conv256_down"),g=o("conv256_1"),v=o("conv256_2"),b=o("conv256_down_out"),w=t.fc;if(r.push({originalPath:"fc",paramPath:"fc"}),!D3(w))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+w);var _={conv32_down:i,conv32_1:u,conv32_2:a,conv32_3:s,conv64_down:l,conv64_1:h,conv64_2:p,conv64_3:c,conv128_down:d,conv128_1:f,conv128_2:m,conv256_down:y,conv256_1:g,conv256_2:v,conv256_down_out:b,fc:w};return ei(t,r),{params:_,paramMappings:r}}function go(t,r){var n=_M(t,r.conv1);return n=Gx(n,r.conv2),n=Mt(n,t),n=ar(n),n}function bl(t,r){var n=zx(t,r.conv1);n=Gx(n,r.conv2);var e=Du(t,2,2,"valid"),o=er(e.shape),i=e.shape[3]!==n.shape[3],u=e.shape[1]!==n.shape[1]||e.shape[2]!==n.shape[2];if(u){var a=Zs(n.shape);a[1]=1;var s=er(a);n=Cr([n,s],1);var l=Zs(n.shape);l[2]=1;var h=er(l);n=Cr([n,h],2)}return e=i?Cr([e,o],3):e,n=Mt(e,n),n=ar(n),n}var kM=function(t){jt(r,t);function r(){return t.call(this,"FaceRecognitionNet")||this}return r.prototype.forwardInput=function(n){var e=this.params;if(!e)throw new Error("FaceRecognitionNet - load model before inference");return it(function(){var o=n.toBatchTensor(150,!0).toFloat(),i=[122.782,117.001,104.298],u=Lu(o,i).div(ot(256)),a=zx(u,e.conv32_down);a=Or(a,3,2,"valid"),a=go(a,e.conv32_1),a=go(a,e.conv32_2),a=go(a,e.conv32_3),a=bl(a,e.conv64_down),a=go(a,e.conv64_1),a=go(a,e.conv64_2),a=go(a,e.conv64_3),a=bl(a,e.conv128_down),a=go(a,e.conv128_1),a=go(a,e.conv128_2),a=bl(a,e.conv256_down),a=go(a,e.conv256_1),a=go(a,e.conv256_2),a=bl(a,e.conv256_down_out);var s=a.mean([1,2]),l=Jc(s,e.fc);return l})},r.prototype.forward=function(n){return yt(this,void 0,void 0,function(){var e;return gt(this,function(o){switch(o.label){case 0:return e=this.forwardInput,[4,Ur(n)];case 1:return[2,e.apply(this,[o.sent()])]}})})},r.prototype.computeFaceDescriptor=function(n){return yt(this,void 0,void 0,function(){var e,o,i,u=this;return gt(this,function(a){switch(a.label){case 0:return[4,Ur(n)];case 1:return e=a.sent(),o=it(function(){return kr(u.forwardInput(e))}),[4,Promise.all(o.map(function(s){return s.data()}))];case 2:return i=a.sent(),o.forEach(function(s){return s.dispose()}),[2,e.isBatchInput?i:i[0]]}})})},r.prototype.getDefaultModelName=function(){return"face_recognition_model"},r.prototype.extractParamsFromWeigthMap=function(n){return CM(n)},r.prototype.extractParams=function(n){return EM(n)},r}(Jo);function Vx(t,r){var n={descriptor:r};return Object.assign({},t,n)}function Wx(t,r){var n={age:r};return Object.assign({},t,n)}function Hx(t,r,n){var e={gender:r,genderProbability:n};return Object.assign({},t,e)}var qx=function(){function t(r){var n=r===void 0?{}:r,e=n.minFaceSize,o=n.scaleFactor,i=n.maxNumScales,u=n.scoreThresholds,a=n.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=e||20,this._scaleFactor=o||.709,this._maxNumScales=i||10,this._scoreThresholds=u||[.6,.7,.7],this._scaleSteps=a,typeof this._minFaceSize!="number"||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if(typeof this._scaleFactor!="number"||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if(typeof this._maxNumScales!="number"||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||this._scoreThresholds.length!==3||this._scoreThresholds.some(function(s){return typeof s!="number"}))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(s){return typeof s!="number"})))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(t.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),t}();function TM(t,r){function n(s,l){var h=yn(t(9*s),[3,3,s,1]),p=wr(t(s)),c=wr(t(s)),d=wr(t(s)),f=wr(t(s));return r.push({paramPath:l+"/filters"},{paramPath:l+"/batch_norm_scale"},{paramPath:l+"/batch_norm_offset"},{paramPath:l+"/batch_norm_mean"},{paramPath:l+"/batch_norm_variance"}),{filters:h,batch_norm_scale:p,batch_norm_offset:c,batch_norm_mean:d,batch_norm_variance:f}}function e(s,l,h,p,c){var d=yn(t(s*l*h*h),[h,h,s,l]),f=wr(t(l));return r.push({paramPath:p+"/filters"},{paramPath:p+"/"+(c?"batch_norm_offset":"bias")}),{filters:d,bias:f}}function o(s,l,h,p){var c=e(s,l,h,p,!0),d=c.filters,f=c.bias;return{filters:d,batch_norm_offset:f}}function i(s,l,h){var p=n(s,h+"/depthwise_conv"),c=o(s,l,1,h+"/pointwise_conv");return{depthwise_conv:p,pointwise_conv:c}}function u(){var s=o(3,32,3,"mobilenetv1/conv_0"),l=i(32,64,"mobilenetv1/conv_1"),h=i(64,128,"mobilenetv1/conv_2"),p=i(128,128,"mobilenetv1/conv_3"),c=i(128,256,"mobilenetv1/conv_4"),d=i(256,256,"mobilenetv1/conv_5"),f=i(256,512,"mobilenetv1/conv_6"),m=i(512,512,"mobilenetv1/conv_7"),y=i(512,512,"mobilenetv1/conv_8"),g=i(512,512,"mobilenetv1/conv_9"),v=i(512,512,"mobilenetv1/conv_10"),b=i(512,512,"mobilenetv1/conv_11"),w=i(512,1024,"mobilenetv1/conv_12"),_=i(1024,1024,"mobilenetv1/conv_13");return{conv_0:s,conv_1:l,conv_2:h,conv_3:p,conv_4:c,conv_5:d,conv_6:f,conv_7:m,conv_8:y,conv_9:g,conv_10:v,conv_11:b,conv_12:w,conv_13:_}}function a(){var s=o(1024,256,1,"prediction_layer/conv_0"),l=o(256,512,3,"prediction_layer/conv_1"),h=o(512,128,1,"prediction_layer/conv_2"),p=o(128,256,3,"prediction_layer/conv_3"),c=o(256,128,1,"prediction_layer/conv_4"),d=o(128,256,3,"prediction_layer/conv_5"),f=o(256,64,1,"prediction_layer/conv_6"),m=o(64,128,3,"prediction_layer/conv_7"),y=e(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),g=e(512,9,1,"prediction_layer/box_predictor_0/class_predictor"),v=e(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),b=e(1024,18,1,"prediction_layer/box_predictor_1/class_predictor"),w=e(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),_=e(512,18,1,"prediction_layer/box_predictor_2/class_predictor"),j=e(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),E=e(256,18,1,"prediction_layer/box_predictor_3/class_predictor"),T=e(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),R=e(256,18,1,"prediction_layer/box_predictor_4/class_predictor"),M=e(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),I=e(128,18,1,"prediction_layer/box_predictor_5/class_predictor"),D={box_encoding_predictor:y,class_predictor:g},L={box_encoding_predictor:v,class_predictor:b},N={box_encoding_predictor:w,class_predictor:_},W={box_encoding_predictor:j,class_predictor:E},q={box_encoding_predictor:T,class_predictor:R},H={box_encoding_predictor:M,class_predictor:I};return{conv_0:s,conv_1:l,conv_2:h,conv_3:p,conv_4:c,conv_5:d,conv_6:f,conv_7:m,box_predictor_0:D,box_predictor_1:L,box_predictor_2:N,box_predictor_3:W,box_predictor_4:q,box_predictor_5:H}}return{extractMobilenetV1Params:u,extractPredictionLayerParams:a}}function MM(t){var r=[],n=ti(t),e=n.extractWeights,o=n.getRemainingWeights,i=TM(e,r),u=i.extractMobilenetV1Params,a=i.extractPredictionLayerParams,s=u(),l=a(),h=Pp(e(5118*4),[1,5118,4]),p={extra_dim:h};if(r.push({paramPath:"output_layer/extra_dim"}),o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{params:{mobilenetv1:s,prediction_layer:l,output_layer:p},paramMappings:r}}function RM(t,r){var n=Ni(t,r);function e(l,h,p){var c=n(l+"/Conv2d_"+h+"_pointwise/weights",4,p+"/filters"),d=n(l+"/Conv2d_"+h+"_pointwise/convolution_bn_offset",1,p+"/batch_norm_offset");return{filters:c,batch_norm_offset:d}}function o(l){var h="mobilenetv1/conv_"+l,p="MobilenetV1/Conv2d_"+l+"_depthwise",c=h+"/depthwise_conv",d=h+"/pointwise_conv",f=n(p+"/depthwise_weights",4,c+"/filters"),m=n(p+"/BatchNorm/gamma",1,c+"/batch_norm_scale"),y=n(p+"/BatchNorm/beta",1,c+"/batch_norm_offset"),g=n(p+"/BatchNorm/moving_mean",1,c+"/batch_norm_mean"),v=n(p+"/BatchNorm/moving_variance",1,c+"/batch_norm_variance");return{depthwise_conv:{filters:f,batch_norm_scale:m,batch_norm_offset:y,batch_norm_mean:g,batch_norm_variance:v},pointwise_conv:e("MobilenetV1",l,d)}}function i(){return{conv_0:e("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:o(1),conv_2:o(2),conv_3:o(3),conv_4:o(4),conv_5:o(5),conv_6:o(6),conv_7:o(7),conv_8:o(8),conv_9:o(9),conv_10:o(10),conv_11:o(11),conv_12:o(12),conv_13:o(13)}}function u(l,h){var p=n(l+"/weights",4,h+"/filters"),c=n(l+"/biases",1,h+"/bias");return{filters:p,bias:c}}function a(l){var h=u("Prediction/BoxPredictor_"+l+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+l+"/box_encoding_predictor"),p=u("Prediction/BoxPredictor_"+l+"/ClassPredictor","prediction_layer/box_predictor_"+l+"/class_predictor");return{box_encoding_predictor:h,class_predictor:p}}function s(){return{conv_0:e("Prediction",0,"prediction_layer/conv_0"),conv_1:e("Prediction",1,"prediction_layer/conv_1"),conv_2:e("Prediction",2,"prediction_layer/conv_2"),conv_3:e("Prediction",3,"prediction_layer/conv_3"),conv_4:e("Prediction",4,"prediction_layer/conv_4"),conv_5:e("Prediction",5,"prediction_layer/conv_5"),conv_6:e("Prediction",6,"prediction_layer/conv_6"),conv_7:e("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:a(0),box_predictor_1:a(1),box_predictor_2:a(2),box_predictor_3:a(3),box_predictor_4:a(4),box_predictor_5:a(5)}}return{extractMobilenetV1Params:i,extractPredictionLayerParams:s}}function IM(t){var r=[],n=RM(t,r),e=n.extractMobilenetV1Params,o=n.extractPredictionLayerParams,i=t["Output/extra_dim"];if(r.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!nd(i))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+i);var u={mobilenetv1:e(),prediction_layer:o(),output_layer:{extra_dim:i}};return ei(t,r),{params:u,paramMappings:r}}function bo(t,r,n){return it(function(){var e=Xn(t,r.filters,n,"same");return e=Mt(e,r.batch_norm_offset),Wp(e,0,6)})}var AM=.0010000000474974513;function PM(t,r,n){return it(function(){var e=Zc(t,r.filters,n,"same");return e=Ub(e,r.batch_norm_mean,r.batch_norm_variance,r.batch_norm_offset,r.batch_norm_scale,AM),Wp(e,0,6)})}function DM(t){return[2,4,6,12].some(function(r){return r===t})?[2,2]:[1,1]}function OM(t,r){return it(function(){var n=null,e=bo(t,r.conv_0,[2,2]),o=[r.conv_1,r.conv_2,r.conv_3,r.conv_4,r.conv_5,r.conv_6,r.conv_7,r.conv_8,r.conv_9,r.conv_10,r.conv_11,r.conv_12,r.conv_13];if(o.forEach(function(i,u){var a=u+1,s=DM(a);e=PM(e,i.depthwise_conv,s),e=bo(e,i.pointwise_conv,[1,1]),a===11&&(n=e)}),n===null)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:e,conv11:n}})}function LM(t,r,n,e,o){var i=t.shape[0],u=Math.min(n,i),a=r.map(function(h,p){return{score:h,boxIndex:p}}).filter(function(h){return h.score>o}).sort(function(h,p){return p.score-h.score}),s=function(h){return h<=e?1:0},l=[];return a.forEach(function(h){if(!(l.length>=u)){for(var p=h.score,c=l.length-1;c>=0;--c){var d=NM(t,h.boxIndex,l[c]);if(d!==0&&(h.score*=s(d),h.score<=o))break}p===h.score&&l.push(h.boxIndex)}}),l}function NM(t,r,n){var e=t.arraySync(),o=Math.min(e[r][0],e[r][2]),i=Math.min(e[r][1],e[r][3]),u=Math.max(e[r][0],e[r][2]),a=Math.max(e[r][1],e[r][3]),s=Math.min(e[n][0],e[n][2]),l=Math.min(e[n][1],e[n][3]),h=Math.max(e[n][0],e[n][2]),p=Math.max(e[n][1],e[n][3]),c=(u-o)*(a-i),d=(h-s)*(p-l);if(c<=0||d<=0)return 0;var f=Math.max(o,s),m=Math.max(i,l),y=Math.min(u,h),g=Math.min(a,p),v=Math.max(y-f,0)*Math.max(g-m,0);return v/(c+d-v)}function FM(t){var r=kr(Ri(t,[1,0])),n=[Mr(r[2],r[0]),Mr(r[3],r[1])],e=[Mt(r[0],ro(n[0],ot(2))),Mt(r[1],ro(n[1],ot(2)))];return{sizes:n,centers:e}}function BM(t,r){var n=FM(t),e=n.sizes,o=n.centers,i=kr(Ri(r,[1,0])),u=ro(un(kh(ro(i[2],ot(5))),e[0]),ot(2)),a=Mt(un(ro(i[0],ot(10)),e[0]),o[0]),s=ro(un(kh(ro(i[3],ot(5))),e[1]),ot(2)),l=Mt(un(ro(i[1],ot(10)),e[1]),o[1]);return Ri(On([Mr(a,u),Mr(l,s),Mt(a,u),Mt(l,s)]),[1,0])}function UM(t,r,n){return it(function(){var e=t.shape[0],o=BM(no($a(n.extra_dim,[e,1,1]),[-1,4]),no(t,[-1,4]));o=no(o,[e,o.shape[0]/e,4]);var i=Lb(Ro(r,[0,0,1],[-1,-1,-1])),u=Ro(i,[0,0,0],[-1,-1,1]);u=no(u,[e,u.shape[1]]);var a=kr(o),s=kr(u);return{boxes:a,scores:s}})}function _a(t,r){return it(function(){var n=t.shape[0],e=no(ao(t,r.box_encoding_predictor),[n,-1,1,4]),o=no(ao(t,r.class_predictor),[n,-1,3]);return{boxPredictionEncoding:e,classPrediction:o}})}function GM(t,r,n){return it(function(){var e=bo(t,n.conv_0,[1,1]),o=bo(e,n.conv_1,[2,2]),i=bo(o,n.conv_2,[1,1]),u=bo(i,n.conv_3,[2,2]),a=bo(u,n.conv_4,[1,1]),s=bo(a,n.conv_5,[2,2]),l=bo(s,n.conv_6,[1,1]),h=bo(l,n.conv_7,[2,2]),p=_a(r,n.box_predictor_0),c=_a(t,n.box_predictor_1),d=_a(o,n.box_predictor_2),f=_a(u,n.box_predictor_3),m=_a(s,n.box_predictor_4),y=_a(h,n.box_predictor_5),g=Cr([p.boxPredictionEncoding,c.boxPredictionEncoding,d.boxPredictionEncoding,f.boxPredictionEncoding,m.boxPredictionEncoding,y.boxPredictionEncoding],1),v=Cr([p.classPrediction,c.classPrediction,d.classPrediction,f.classPrediction,m.classPrediction,y.classPrediction],1);return{boxPredictions:g,classPredictions:v}})}var sd=function(){function t(r){var n=r===void 0?{}:r,e=n.minConfidence,o=n.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=e||.5,this._maxResults=o||100,typeof this._minConfidence!="number"||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if(typeof this._maxResults!="number")throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(t.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),t}(),$x=function(t){jt(r,t);function r(){return t.call(this,"SsdMobilenetv1")||this}return r.prototype.forwardInput=function(n){var e=this.params;if(!e)throw new Error("SsdMobilenetv1 - load model before inference");return it(function(){var o=n.toBatchTensor(512,!1).toFloat(),i=Mr(un(o,ot(.007843137718737125)),ot(1)),u=OM(i,e.mobilenetv1),a=GM(u.out,u.conv11,e.prediction_layer),s=a.boxPredictions,l=a.classPredictions;return UM(s,l,e.output_layer)})},r.prototype.forward=function(n){return yt(this,void 0,void 0,function(){var e;return gt(this,function(o){switch(o.label){case 0:return e=this.forwardInput,[4,Ur(n)];case 1:return[2,e.apply(this,[o.sent()])]}})})},r.prototype.locateFaces=function(n,e){return e===void 0&&(e={}),yt(this,void 0,void 0,function(){var o,i,u,a,s,l,h,p,c,d,f,m,y,g,v,b,w,_,j,E,T;return gt(this,function(R){switch(R.label){case 0:return o=new sd(e),i=o.maxResults,u=o.minConfidence,[4,Ur(n)];case 1:for(a=R.sent(),s=this.forwardInput(a),l=s.boxes,h=s.scores,p=l[0],c=h[0],d=1;d<l.length;d++)l[d].dispose(),h[d].dispose();return y=(m=Array).from,[4,c.data()];case 2:return f=y.apply(m,[R.sent()]),g=.5,v=LM(p,f,i,g,u),b=a.getReshapedInputDimensions(0),w=a.inputSize,_=w/b.width,j=w/b.height,E=p.arraySync(),T=v.map(function(M){var I=[Math.max(0,E[M][0]),Math.min(1,E[M][2])].map(function(H){return H*j}),D=I[0],L=I[1],N=[Math.max(0,E[M][1]),Math.min(1,E[M][3])].map(function(H){return H*_}),W=N[0],q=N[1];return new Do(f[M],new sm(W,D,q-W,L-D),{height:a.getInputHeight(0),width:a.getInputWidth(0)})}),p.dispose(),c.dispose(),[2,T]}})})},r.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},r.prototype.extractParamsFromWeigthMap=function(n){return IM(n)},r.prototype.extractParams=function(n){return MM(n)},r}(Jo);(function(t){jt(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r})($x);var zM=.4,VM=[new Ft(.738768,.874946),new Ft(2.42204,2.65704),new Ft(4.30971,7.04493),new Ft(10.246,4.59428),new Ft(12.6868,11.8741)],WM=[new Ft(1.603231,2.094468),new Ft(6.041143,7.080126),new Ft(2.882459,3.518061),new Ft(4.266906,5.178857),new Ft(9.041765,10.66308)],HM=[117.001,114.697,97.404],qM="tiny_yolov2_model",$M="tiny_yolov2_separable_conv_model",xl=function(t){return typeof t=="number"};function XM(t){if(!t)throw new Error("invalid config: "+t);if(typeof t.withSeparableConvs!="boolean")throw new Error("config.withSeparableConvs has to be a boolean, have: "+t.withSeparableConvs);if(!xl(t.iouThreshold)||t.iouThreshold<0||t.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+t.iouThreshold);if(!Array.isArray(t.classes)||!t.classes.length||!t.classes.every(function(r){return typeof r=="string"}))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(t.classes));if(!Array.isArray(t.anchors)||!t.anchors.length||!t.anchors.map(function(r){return r||{}}).every(function(r){return xl(r.x)&&xl(r.y)}))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(t.anchors));if(t.meanRgb&&(!Array.isArray(t.meanRgb)||t.meanRgb.length!==3||!t.meanRgb.every(xl)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(t.meanRgb))}function vm(t){return it(function(){var r=un(t,ot(.10000000149011612));return Mt(ar(Mr(t,r)),r)})}function ai(t,r){return it(function(){var n=ca(t,[[0,0],[1,1],[1,1],[0,0]]);return n=Xn(n,r.conv.filters,[1,1],"valid"),n=Mr(n,r.bn.sub),n=un(n,r.bn.truediv),n=Mt(n,r.conv.bias),vm(n)})}function si(t,r){return it(function(){var n=ca(t,[[0,0],[1,1],[1,1],[0,0]]);return n=Xp(n,r.depthwise_filter,r.pointwise_filter,[1,1],"valid"),n=Mt(n,r.bias),vm(n)})}function YM(t,r){var n=ad(t,r);function e(u,a){var s=wr(t(u)),l=wr(t(u));return r.push({paramPath:a+"/sub"},{paramPath:a+"/truediv"}),{sub:s,truediv:l}}function o(u,a,s){var l=n(u,a,3,s+"/conv"),h=e(a,s+"/bn");return{conv:l,bn:h}}var i=pm(t,r);return{extractConvParams:n,extractConvWithBatchNormParams:o,extractSeparableConvParams:i}}function KM(t,r,n,e){var o=ti(t),i=o.extractWeights,u=o.getRemainingWeights,a=[],s=YM(i,a),l=s.extractConvParams,h=s.extractConvWithBatchNormParams,p=s.extractSeparableConvParams,c;if(r.withSeparableConvs){var d=e[0],f=e[1],m=e[2],y=e[3],g=e[4],v=e[5],b=e[6],w=e[7],_=e[8],j=r.isFirstLayerConv2d?l(d,f,3,"conv0"):p(d,f,"conv0"),E=p(f,m,"conv1"),T=p(m,y,"conv2"),R=p(y,g,"conv3"),M=p(g,v,"conv4"),I=p(v,b,"conv5"),D=w?p(b,w,"conv6"):void 0,L=_?p(w,_,"conv7"):void 0,N=l(_||w||b,5*n,1,"conv8");c={conv0:j,conv1:E,conv2:T,conv3:R,conv4:M,conv5:I,conv6:D,conv7:L,conv8:N}}else{var d=e[0],f=e[1],m=e[2],y=e[3],g=e[4],v=e[5],b=e[6],w=e[7],_=e[8],j=h(d,f,"conv0"),E=h(f,m,"conv1"),T=h(m,y,"conv2"),R=h(y,g,"conv3"),M=h(g,v,"conv4"),I=h(v,b,"conv5"),D=h(b,w,"conv6"),L=h(w,_,"conv7"),N=l(_,5*n,1,"conv8");c={conv0:j,conv1:E,conv2:T,conv3:R,conv4:M,conv5:I,conv6:D,conv7:L,conv8:N}}if(u().length!==0)throw new Error("weights remaing after extract: "+u().length);return{params:c,paramMappings:a}}function QM(t,r){var n=Ni(t,r);function e(a){var s=n(a+"/sub",1),l=n(a+"/truediv",1);return{sub:s,truediv:l}}function o(a){var s=n(a+"/filters",4),l=n(a+"/bias",1);return{filters:s,bias:l}}function i(a){var s=o(a+"/conv"),l=e(a+"/bn");return{conv:s,bn:l}}var u=mm(n);return{extractConvParams:o,extractConvWithBatchNormParams:i,extractSeparableConvParams:u}}function ZM(t,r){var n=[],e=QM(t,n),o=e.extractConvParams,i=e.extractConvWithBatchNormParams,u=e.extractSeparableConvParams,a;if(r.withSeparableConvs){var s=r.filterSizes&&r.filterSizes.length||9;a={conv0:r.isFirstLayerConv2d?o("conv0"):u("conv0"),conv1:u("conv1"),conv2:u("conv2"),conv3:u("conv3"),conv4:u("conv4"),conv5:u("conv5"),conv6:s>7?u("conv6"):void 0,conv7:s>8?u("conv7"):void 0,conv8:o("conv8")}}else a={conv0:i("conv0"),conv1:i("conv1"),conv2:i("conv2"),conv3:i("conv3"),conv4:i("conv4"),conv5:i("conv5"),conv6:i("conv6"),conv7:i("conv7"),conv8:o("conv8")};return ei(t,n),{params:a,paramMappings:n}}var Cv;(function(t){t[t.XS=224]="XS",t[t.SM=320]="SM",t[t.MD=416]="MD",t[t.LG=608]="LG"})(Cv||(Cv={}));var bm=function(){function t(r){var n=r===void 0?{}:r,e=n.inputSize,o=n.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=e||416,this._scoreThreshold=o||.5,typeof this._inputSize!="number"||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if(typeof this._scoreThreshold!="number"||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(t.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),t}(),Xx=function(t){jt(r,t);function r(n){var e=t.call(this,"TinyYolov2")||this;return XM(n),e._config=n,e}return Object.defineProperty(r.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),r.prototype.runTinyYolov2=function(n,e){var o=ai(n,e.conv0);return o=Or(o,[2,2],[2,2],"same"),o=ai(o,e.conv1),o=Or(o,[2,2],[2,2],"same"),o=ai(o,e.conv2),o=Or(o,[2,2],[2,2],"same"),o=ai(o,e.conv3),o=Or(o,[2,2],[2,2],"same"),o=ai(o,e.conv4),o=Or(o,[2,2],[2,2],"same"),o=ai(o,e.conv5),o=Or(o,[2,2],[1,1],"same"),o=ai(o,e.conv6),o=ai(o,e.conv7),ao(o,e.conv8,"valid",!1)},r.prototype.runMobilenet=function(n,e){var o=this.config.isFirstLayerConv2d?vm(ao(n,e.conv0,"valid",!1)):si(n,e.conv0);return o=Or(o,[2,2],[2,2],"same"),o=si(o,e.conv1),o=Or(o,[2,2],[2,2],"same"),o=si(o,e.conv2),o=Or(o,[2,2],[2,2],"same"),o=si(o,e.conv3),o=Or(o,[2,2],[2,2],"same"),o=si(o,e.conv4),o=Or(o,[2,2],[2,2],"same"),o=si(o,e.conv5),o=Or(o,[2,2],[1,1],"same"),o=e.conv6?si(o,e.conv6):o,o=e.conv7?si(o,e.conv7):o,ao(o,e.conv8,"valid",!1)},r.prototype.forwardInput=function(n,e){var o=this,i=this.params;if(!i)throw new Error("TinyYolov2 - load model before inference");return it(function(){var u=n.toBatchTensor(e,!1).toFloat();return u=o.config.meanRgb?Lu(u,o.config.meanRgb):u,u=u.div(ot(256)),o.config.withSeparableConvs?o.runMobilenet(u,i):o.runTinyYolov2(u,i)})},r.prototype.forward=function(n,e){return yt(this,void 0,void 0,function(){var o;return gt(this,function(i){switch(i.label){case 0:return o=this.forwardInput,[4,Ur(n)];case 1:return[4,o.apply(this,[i.sent(),e])];case 2:return[2,i.sent()]}})})},r.prototype.detect=function(n,e){return e===void 0&&(e={}),yt(this,void 0,void 0,function(){var o,i,u,a,s,l,h,p,c,d,f,m,y,g,v=this;return gt(this,function(b){switch(b.label){case 0:return o=new bm(e),i=o.inputSize,u=o.scoreThreshold,[4,Ur(n)];case 1:return a=b.sent(),[4,this.forwardInput(a,i)];case 2:return s=b.sent(),l=it(function(){return kr(s)[0].expandDims()}),h={width:a.getInputWidth(0),height:a.getInputHeight(0)},[4,this.extractBoxes(l,a.getReshapedInputDimensions(0),u)];case 3:return p=b.sent(),s.dispose(),l.dispose(),c=p.map(function(w){return w.box}),d=p.map(function(w){return w.score}),f=p.map(function(w){return w.classScore}),m=p.map(function(w){return v.config.classes[w.label]}),y=_u(c.map(function(w){return w.rescale(i)}),d,this.config.iouThreshold,!0),g=y.map(function(w){return new xx(d[w],f[w],m[w],c[w],h)}),[2,g]}})})},r.prototype.getDefaultModelName=function(){return""},r.prototype.extractParamsFromWeigthMap=function(n){return ZM(n,this.config)},r.prototype.extractParams=function(n){var e=this.config.filterSizes||r.DEFAULT_FILTER_SIZES,o=e?e.length:void 0;if(o!==7&&o!==8&&o!==9)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+o+" filterSizes in config");return KM(n,this.config,this.boxEncodingSize,e)},r.prototype.extractBoxes=function(n,e,o){return yt(this,void 0,void 0,function(){var i,u,a,s,l,h,p,c,d,f,m,y,g,v,b,w,_,j,E,T,R,M,I,D,L,N,W,q,H,B=this;return gt(this,function(G){switch(G.label){case 0:return i=e.width,u=e.height,a=Math.max(i,u),s=a/i,l=a/u,h=n.shape[1],p=this.config.anchors.length,c=it(function(){var V=n.reshape([h,h,p,B.boxEncodingSize]),X=V.slice([0,0,0,0],[h,h,p,4]),te=V.slice([0,0,0,4],[h,h,p,1]),A=B.withClassScores?Qo(V.slice([0,0,0,5],[h,h,p,B.config.classes.length]),3):ot(0);return[X,te,A]}),d=c[0],f=c[1],m=c[2],y=[],[4,f.array()];case 1:return g=G.sent(),[4,d.array()];case 2:v=G.sent(),b=0,G.label=3;case 3:if(!(b<h))return[3,12];w=0,G.label=4;case 4:if(!(w<h))return[3,11];_=0,G.label=5;case 5:return _<p?(j=hf(g[b][w][_][0]),!o||j>o?(E=(w+hf(v[b][w][_][0]))/h*s,T=(b+hf(v[b][w][_][1]))/h*l,R=Math.exp(v[b][w][_][2])*this.config.anchors[_].x/h*s,M=Math.exp(v[b][w][_][3])*this.config.anchors[_].y/h*l,I=E-R/2,D=T-M/2,L={row:b,col:w,anchor:_},this.withClassScores?[4,this.extractPredictedClass(m,L)]:[3,7]):[3,9]):[3,10];case 6:return H=G.sent(),[3,8];case 7:H={classScore:1,label:0},G.label=8;case 8:N=H,W=N.classScore,q=N.label,y.push(on({box:new od(I,D,I+R,D+M),score:j,classScore:j*W,label:q},L)),G.label=9;case 9:return _++,[3,5];case 10:return w++,[3,4];case 11:return b++,[3,3];case 12:return d.dispose(),f.dispose(),m.dispose(),[2,y]}})})},r.prototype.extractPredictedClass=function(n,e){return yt(this,void 0,void 0,function(){var o,i,u,a;return gt(this,function(s){switch(s.label){case 0:return o=e.row,i=e.col,u=e.anchor,[4,n.array()];case 1:return a=s.sent(),[2,Array(this.config.classes.length).fill(0).map(function(l,h){return a[o][i][u][h]}).map(function(l,h){return{classScore:l,label:h}}).reduce(function(l,h){return l.classScore>h.classScore?l:h})]}})})},r.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],r}(Jo),JM=function(t){jt(r,t);function r(n){n===void 0&&(n=!0);var e=this,o=Object.assign({},{withSeparableConvs:n,iouThreshold:zM,classes:["face"]},n?{anchors:WM,meanRgb:HM}:{anchors:VM,withClassScores:!0});return e=t.call(this,o)||this,e}return Object.defineProperty(r.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),r.prototype.locateFaces=function(n,e){return yt(this,void 0,void 0,function(){var o;return gt(this,function(i){switch(i.label){case 0:return[4,this.detect(n,e)];case 1:return o=i.sent(),[2,o.map(function(u){return new Do(u.score,u.relativeBox,{width:u.imageWidth,height:u.imageHeight})})]}})})},r.prototype.getDefaultModelName=function(){return this.withSeparableConvs?$M:qM},r.prototype.extractParamsFromWeigthMap=function(n){return t.prototype.extractParamsFromWeigthMap.call(this,n)},r}(Xx),e4=function(t){jt(r,t);function r(){var n=t!==null&&t.apply(this,arguments)||this;return n._name="TinyFaceDetectorOptions",n}return r}(bm),Nu=function(){function t(){}return t.prototype.then=function(r){return yt(this,void 0,void 0,function(){var n;return gt(this,function(e){switch(e.label){case 0:return n=r,[4,this.run()];case 1:return[2,n.apply(void 0,[e.sent()])]}})})},t.prototype.run=function(){return yt(this,void 0,void 0,function(){return gt(this,function(r){throw new Error("ComposableTask - run is not implemented")})})},t}();function ud(t,r,n,e,o){return o===void 0&&(o=function(i){var u=i.alignedRect;return u}),yt(this,void 0,void 0,function(){var i,u,a,s,l;return gt(this,function(h){switch(h.label){case 0:return i=t.map(function(p){return sM(p)?o(p):p.detection}),a=e,a?[3,5]:r instanceof ir?[4,fm(r,i)]:[3,2];case 1:return s=h.sent(),[3,4];case 2:return[4,dm(r,i)];case 3:s=h.sent(),h.label=4;case 4:a=s,h.label=5;case 5:return u=a,[4,n(u)];case 6:return l=h.sent(),u.forEach(function(p){return p instanceof ir&&p.dispose()}),[2,l]}})})}function xm(t,r,n,e,o){return yt(this,void 0,void 0,function(){var i=this;return gt(this,function(u){return[2,ud([t],r,function(a){return yt(i,void 0,void 0,function(){return gt(this,function(s){return[2,n(a[0])]})})},e,o)]})})}function t4(t){return it(function(){return On(kr(t,3).reverse(),3)})}var wl=2,Rc=12;function r4(t,r){var n=ad(t,r),e=hm(t,r);function o(l,h){var p=wr(t(l));return r.push({paramPath:h}),p}function i(l,h,p){p===void 0&&(p=!1);var c=n(l[0],l[1],3,h+"/conv1"),d=o(l[1],h+"/prelu1_alpha"),f=n(l[1],l[2],3,h+"/conv2"),m=o(l[2],h+"/prelu2_alpha"),y=n(l[2],l[3],p?2:3,h+"/conv3"),g=o(l[3],h+"/prelu3_alpha");return{conv1:c,prelu1_alpha:d,conv2:f,prelu2_alpha:m,conv3:y,prelu3_alpha:g}}function u(){var l=i([3,10,16,32],"pnet"),h=n(32,2,1,"pnet/conv4_1"),p=n(32,4,1,"pnet/conv4_2");return on(on({},l),{conv4_1:h,conv4_2:p})}function a(){var l=i([3,28,48,64],"rnet",!0),h=e(576,128,"rnet/fc1"),p=o(128,"rnet/prelu4_alpha"),c=e(128,2,"rnet/fc2_1"),d=e(128,4,"rnet/fc2_2");return on(on({},l),{fc1:h,prelu4_alpha:p,fc2_1:c,fc2_2:d})}function s(){var l=i([3,32,64,64],"onet"),h=n(64,128,2,"onet/conv4"),p=o(128,"onet/prelu4_alpha"),c=e(1152,256,"onet/fc1"),d=o(256,"onet/prelu5_alpha"),f=e(256,2,"onet/fc2_1"),m=e(256,4,"onet/fc2_2"),y=e(256,10,"onet/fc2_3");return on(on({},l),{conv4:h,prelu4_alpha:p,fc1:c,prelu5_alpha:d,fc2_1:f,fc2_2:m,fc2_3:y})}return{extractPNetParams:u,extractRNetParams:a,extractONetParams:s}}function n4(t){var r=ti(t),n=r.extractWeights,e=r.getRemainingWeights,o=[],i=r4(n,o),u=i.extractPNetParams,a=i.extractRNetParams,s=i.extractONetParams,l=u(),h=a(),p=s();if(e().length!==0)throw new Error("weights remaing after extract: "+e().length);return{params:{pnet:l,rnet:h,onet:p},paramMappings:o}}function o4(t,r){var n=Ni(t,r);function e(h){var p=n(h+"/weights",4,h+"/filters"),c=n(h+"/bias",1);return{filters:p,bias:c}}function o(h){var p=n(h+"/weights",2),c=n(h+"/bias",1);return{weights:p,bias:c}}function i(h){return n(h,1)}function u(h){var p=e(h+"/conv1"),c=i(h+"/prelu1_alpha"),d=e(h+"/conv2"),f=i(h+"/prelu2_alpha"),m=e(h+"/conv3"),y=i(h+"/prelu3_alpha");return{conv1:p,prelu1_alpha:c,conv2:d,prelu2_alpha:f,conv3:m,prelu3_alpha:y}}function a(){var h=u("pnet"),p=e("pnet/conv4_1"),c=e("pnet/conv4_2");return on(on({},h),{conv4_1:p,conv4_2:c})}function s(){var h=u("rnet"),p=o("rnet/fc1"),c=i("rnet/prelu4_alpha"),d=o("rnet/fc2_1"),f=o("rnet/fc2_2");return on(on({},h),{fc1:p,prelu4_alpha:c,fc2_1:d,fc2_2:f})}function l(){var h=u("onet"),p=e("onet/conv4"),c=i("onet/prelu4_alpha"),d=o("onet/fc1"),f=i("onet/prelu5_alpha"),m=o("onet/fc2_1"),y=o("onet/fc2_2"),g=o("onet/fc2_3");return on(on({},h),{conv4:p,prelu4_alpha:c,fc1:d,prelu5_alpha:f,fc2_1:m,fc2_2:y,fc2_3:g})}return{extractPNetParams:a,extractRNetParams:s,extractONetParams:l}}function i4(t){var r=[],n=o4(t,r),e=n.extractPNetParams,o=n.extractRNetParams,i=n.extractONetParams,u=e(),a=o(),s=i();return ei(t,r),{params:{pnet:u,rnet:a,onet:s},paramMappings:r}}function Oh(t,r){var n=r[0],e=r[1];return{height:Math.floor(n*t),width:Math.floor(e*t)}}function a4(t,r,n){for(var e=n[0],o=n[1],i=Rc/t,u=[],a=Math.min(e,o)*i,s=0;a>=12;)u.push(i*Math.pow(r,s)),a=a*r,s+=1;return u}var wm=function(t){jt(r,t);function r(n,e,o,i){return t.call(this,{left:n,top:e,right:o,bottom:i},!0)||this}return r}(Ii);function Yx(t){return it(function(){return un(Mr(t,ot(127.5)),ot(.0078125))})}function Ja(t,r){return it(function(){return Mt(ar(t),un(r,Sc(ar(Sc(t)))))})}function _m(t,r,n){return n===void 0&&(n=!1),it(function(){var e=ao(t,r.conv1,"valid");return e=Ja(e,r.prelu1_alpha),e=Or(e,n?[2,2]:[3,3],[2,2],"same"),e=ao(e,r.conv2,"valid"),e=Ja(e,r.prelu2_alpha),e=n?e:Or(e,[3,3],[2,2],"valid"),e=ao(e,r.conv3,"valid"),e=Ja(e,r.prelu3_alpha),e})}function s4(t,r){return it(function(){var n=_m(t,r,!0),e=ao(n,r.conv4_1,"valid"),o=Gn(ed(e,3),3),i=Qo(Mr(e,o),3),u=ao(n,r.conv4_2,"valid");return{prob:i,regions:u}})}function u4(t,r){return it(function(){var n=Oh(r,t.shape.slice(1)),e=n.height,o=n.width,i=Jp.resizeBilinear(t,[e,o]),u=Yx(i);return Ri(u,[0,2,1,3])})}function l4(t,r,n,e){for(var o=[],i=t.arraySync(),u=0;u<t.shape[0];u++)for(var a=0;a<t.shape[1];a++)i[u][a]>=e&&o.push(new Ft(a,u));var s=o.map(function(l){var h=new od(Math.round((l.y*wl+1)/n),Math.round((l.x*wl+1)/n),Math.round((l.y*wl+Rc)/n),Math.round((l.x*wl+Rc)/n)),p=i[l.y][l.x],c=r.arraySync(),d=new wm(c[l.y][l.x][0],c[l.y][l.x][1],c[l.y][l.x][2],c[l.y][l.x][3]);return{cell:h,score:p,region:d}});return s}function c4(t,r,n,e,o){o.stage1=[];var i=r.map(function(c){return it(function(){var d={scale:c},f=u4(t,c),m=Date.now(),y=s4(f,e),g=y.prob,v=y.regions;d.pnet=Date.now()-m;var b=kr(kr(g,3)[1])[0],w=kr(v)[0];return{scoresTensor:b,regionsTensor:w,scale:c,statsForScale:d}})}),u=i.map(function(c){var d=c.scoresTensor,f=c.regionsTensor,m=c.scale,y=c.statsForScale,g=l4(d,f,m,n);if(d.dispose(),f.dispose(),!g.length)return o.stage1.push(y),[];var v=Date.now(),b=_u(g.map(function(w){return w.cell}),g.map(function(w){return w.score}),.5);return y.nms=Date.now()-v,y.numBoxes=b.length,o.stage1.push(y),b.map(function(w){return g[w]})}),a=u.reduce(function(c,d){return c.concat(d)},[]),s=[],l=[];if(a.length>0){var h=Date.now(),p=_u(a.map(function(c){return c.cell}),a.map(function(c){return c.score}),.7);o.stage1_nms=Date.now()-h,l=p.map(function(c){return a[c].score}),s=p.map(function(c){return a[c]}).map(function(c){var d=c.cell,f=c.region;return new od(d.left+f.left*d.width,d.top+f.top*d.height,d.right+f.right*d.width,d.bottom+f.bottom*d.height).toSquare().round()})}return{boxes:s,scores:l}}function Kx(t,r,n){var e=n.width,o=n.height;return yt(this,void 0,void 0,function(){var i,u,a,s=this;return gt(this,function(l){switch(l.label){case 0:return i=aa(t),[4,Promise.all(r.map(function(h){return yt(s,void 0,void 0,function(){var p,c,d,f,m,y,g,v;return gt(this,function(b){return p=h.padAtBorders(t.height,t.width),c=p.y,d=p.ey,f=p.x,m=p.ex,y=f-1,g=c-1,v=i.getImageData(y,g,m-y,d-g),[2,cn.isNodejs()?cm(v):createImageBitmap(v)]})})}))];case 1:return u=l.sent(),a=[],u.forEach(function(h){var p=id({width:e,height:o}),c=aa(p);c.drawImage(h,0,0,e,o);for(var d=c.getImageData(0,0,e,o).data,f=[],m=0;m<d.length;m+=4)f.push(d[m+2]),f.push(d[m+1]),f.push(d[m]);a.push(f)}),[2,a.map(function(h){var p=it(function(){var c=Ri(yn(h,[1,e,o,3]),[0,2,1,3]).toFloat();return Yx(c)});return p})]}})})}function d4(t,r){return it(function(){var n=_m(t,r),e=no(n,[n.shape[0],r.fc1.weights.shape[0]]),o=Eo(e,r.fc1),i=Ja(o,r.prelu4_alpha),u=Eo(i,r.fc2_1),a=Gn(ed(u,1),1),s=Qo(Mr(u,a),1),l=Eo(i,r.fc2_2),h=kr(s,1)[1];return{scores:h,regions:l}})}function f4(t,r,n,e,o){return yt(this,void 0,void 0,function(){var i,u,a,s,l,h,p,c,d,f,m,y,g,v;return gt(this,function(b){switch(b.label){case 0:return i=Date.now(),[4,Kx(t,r,{width:24,height:24})];case 1:return u=b.sent(),o.stage2_extractImagePatches=Date.now()-i,i=Date.now(),a=u.map(function(w){var _=d4(w,e);return w.dispose(),_}),o.stage2_rnet=Date.now()-i,s=a.length>1?Cr(a.map(function(w){return w.scores})):a[0].scores,p=(h=Array).from,[4,s.data()];case 2:return l=p.apply(h,[b.sent()]),s.dispose(),c=l.map(function(w,_){return{score:w,idx:_}}).filter(function(w){return w.score>n}).map(function(w){var _=w.idx;return _}),d=c.map(function(w){return r[w]}),f=c.map(function(w){return l[w]}),m=[],y=[],d.length>0&&(i=Date.now(),g=_u(d,f,.7),o.stage2_nms=Date.now()-i,v=g.map(function(w){var _=a[c[w]].regions.arraySync();return new wm(_[0][0],_[0][1],_[0][2],_[0][3])}),y=g.map(function(w){return f[w]}),m=g.map(function(w,_){return d[w].calibrate(v[_])})),a.forEach(function(w){w.regions.dispose(),w.scores.dispose()}),[2,{boxes:m,scores:y}]}})})}function h4(t,r){return it(function(){var n=_m(t,r);n=Or(n,[2,2],[2,2],"same"),n=ao(n,r.conv4,"valid"),n=Ja(n,r.prelu4_alpha);var e=no(n,[n.shape[0],r.fc1.weights.shape[0]]),o=Eo(e,r.fc1),i=Ja(o,r.prelu5_alpha),u=Eo(i,r.fc2_1),a=Gn(ed(u,1),1),s=Qo(Mr(u,a),1),l=Eo(i,r.fc2_2),h=Eo(i,r.fc2_3),p=kr(s,1)[1];return{scores:p,regions:l,points:h}})}function p4(t,r,n,e,o){return yt(this,void 0,void 0,function(){var i,u,a,s,l,h,p,c,d,f,m,y,g,v,b;return gt(this,function(w){switch(w.label){case 0:return i=Date.now(),[4,Kx(t,r,{width:48,height:48})];case 1:return u=w.sent(),o.stage3_extractImagePatches=Date.now()-i,i=Date.now(),a=u.map(function(_){var j=h4(_,e);return _.dispose(),j}),o.stage3_onet=Date.now()-i,s=a.length>1?Cr(a.map(function(_){return _.scores})):a[0].scores,p=(h=Array).from,[4,s.data()];case 2:return l=p.apply(h,[w.sent()]),s.dispose(),c=l.map(function(_,j){return{score:_,idx:j}}).filter(function(_){return _.score>n}).map(function(_){var j=_.idx;return j}),d=c.map(function(_){var j=a[_].regions.arraySync();return new wm(j[0][0],j[0][1],j[0][2],j[0][3])}),f=c.map(function(_,j){return r[_].calibrate(d[j])}),m=c.map(function(_){return l[_]}),y=[],g=[],v=[],f.length>0&&(i=Date.now(),b=_u(f,m,.7,!1),o.stage3_nms=Date.now()-i,y=b.map(function(_){return f[_]}),g=b.map(function(_){return m[_]}),v=b.map(function(_,j){return Array(5).fill(0).map(function(E,T){var R=a[_].points.arraySync();return new Ft(R[0][T]*(y[j].width+1)+y[j].left,R[0][T+5]*(y[j].height+1)+y[j].top)})})),a.forEach(function(_){_.regions.dispose(),_.scores.dispose(),_.points.dispose()}),[2,{boxes:y,scores:g,points:v}]}})})}var m4=function(t){jt(r,t);function r(){return t.call(this,"Mtcnn")||this}return r.prototype.load=function(n){return yt(this,void 0,void 0,function(){return gt(this,function(e){return console.warn("mtcnn is deprecated and will be removed soon"),[2,t.prototype.load.call(this,n)]})})},r.prototype.loadFromDisk=function(n){return yt(this,void 0,void 0,function(){return gt(this,function(e){return console.warn("mtcnn is deprecated and will be removed soon"),[2,t.prototype.loadFromDisk.call(this,n)]})})},r.prototype.forwardInput=function(n,e){return e===void 0&&(e={}),yt(this,void 0,void 0,function(){var o,i,u,a,s,l,h,p,c,d,f,m,y,g,v,b,w,_,j,E,T;return gt(this,function(R){switch(R.label){case 0:if(o=this.params,!o)throw new Error("Mtcnn - load model before inference");if(i=n.canvases[0],!i)throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return u={},a=Date.now(),s=it(function(){return t4(Gn(im.fromPixels(i)).toFloat())}),l=function(M){return s.dispose(),u.total=Date.now()-a,M},h=s.shape.slice(1),p=h[0],c=h[1],d=new qx(e),f=d.minFaceSize,m=d.scaleFactor,y=d.maxNumScales,g=d.scoreThresholds,v=d.scaleSteps,b=(v||a4(f,m,[p,c])).filter(function(M){var I=Oh(M,[p,c]);return Math.min(I.width,I.height)>Rc}).slice(0,y),u.scales=b,u.pyramid=b.map(function(M){return Oh(M,[p,c])}),w=Date.now(),[4,c4(s,b,g[0],o.pnet,u)];case 1:return _=R.sent(),u.total_stage1=Date.now()-w,_.boxes.length?(u.stage2_numInputBoxes=_.boxes.length,w=Date.now(),[4,f4(i,_.boxes,g[1],o.rnet,u)]):[2,l({results:[],stats:u})];case 2:return j=R.sent(),u.total_stage2=Date.now()-w,j.boxes.length?(u.stage3_numInputBoxes=j.boxes.length,w=Date.now(),[4,p4(i,j.boxes,g[2],o.onet,u)]):[2,l({results:[],stats:u})];case 3:return E=R.sent(),u.total_stage3=Date.now()-w,T=E.boxes.map(function(M,I){return ym(um({},new Do(E.scores[I],new sm(M.left/c,M.top/p,M.width/c,M.height/p),{height:p,width:c})),new W3(E.points[I].map(function(D){return D.sub(new Ft(M.left,M.top)).div(new Ft(M.width,M.height))}),{width:M.width,height:M.height}))}),[2,l({results:T,stats:u})]}})})},r.prototype.forward=function(n,e){return e===void 0&&(e={}),yt(this,void 0,void 0,function(){var o;return gt(this,function(i){switch(i.label){case 0:return o=this.forwardInput,[4,Ur(n)];case 1:return[4,o.apply(this,[i.sent(),e])];case 2:return[2,i.sent().results]}})})},r.prototype.forwardWithStats=function(n,e){return e===void 0&&(e={}),yt(this,void 0,void 0,function(){var o;return gt(this,function(i){switch(i.label){case 0:return o=this.forwardInput,[4,Ur(n)];case 1:return[2,o.apply(this,[i.sent(),e])]}})})},r.prototype.getDefaultModelName=function(){return"mtcnn_model"},r.prototype.extractParamsFromWeigthMap=function(n){return i4(n)},r.prototype.extractParams=function(n){return n4(n)},r}(Jo),y4=.4,g4=[new Ft(1.603231,2.094468),new Ft(6.041143,7.080126),new Ft(2.882459,3.518061),new Ft(4.266906,5.178857),new Ft(9.041765,10.66308)],v4=[117.001,114.697,97.404],b4=function(t){jt(r,t);function r(){var n=this,e={withSeparableConvs:!0,iouThreshold:y4,classes:["face"],anchors:g4,meanRgb:v4,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return n=t.call(this,e)||this,n}return Object.defineProperty(r.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),r.prototype.locateFaces=function(n,e){return yt(this,void 0,void 0,function(){var o;return gt(this,function(i){switch(i.label){case 0:return[4,this.detect(n,e)];case 1:return o=i.sent(),[2,o.map(function(u){return new Do(u.score,u.relativeBox,{width:u.imageWidth,height:u.imageHeight})})]}})})},r.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},r.prototype.extractParamsFromWeigthMap=function(n){return t.prototype.extractParamsFromWeigthMap.call(this,n)},r}(Xx),Nr={ssdMobilenetv1:new $x,tinyFaceDetector:new b4,tinyYolov2:new JM,mtcnn:new m4,faceLandmark68Net:new Ux,faceLandmark68TinyNet:new xM,faceRecognitionNet:new kM,faceExpressionNet:new aM,ageGenderNet:new yM},x4=function(t){return Nr.ssdMobilenetv1.load(t)},w4=function(t){return Nr.faceLandmark68Net.load(t)},_4=function(t){return Nr.faceRecognitionNet.load(t)},kv=function(t){return Nr.faceExpressionNet.load(t)},S4=function(t){return Nr.ageGenderNet.load(t)},Qx=function(t){jt(r,t);function r(n,e,o){var i=t.call(this)||this;return i.parentTask=n,i.input=e,i.extractedFaces=o,i}return r}(Nu),Sm=function(t){jt(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.run=function(){return yt(this,void 0,void 0,function(){var n,e,o=this;return gt(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return n=i.sent(),[4,ud(n,this.input,function(u){return yt(o,void 0,void 0,function(){return gt(this,function(a){switch(a.label){case 0:return[4,Promise.all(u.map(function(s){return Nr.faceExpressionNet.predictExpressions(s)}))];case 1:return[2,a.sent()]}})})},this.extractedFaces)];case 2:return e=i.sent(),[2,n.map(function(u,a){return Nx(u,e[a])})]}})})},r.prototype.withAgeAndGender=function(){return new km(this,this.input)},r}(Qx),Em=function(t){jt(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.run=function(){return yt(this,void 0,void 0,function(){var n,e;return gt(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return n=o.sent(),n?[4,xm(n,this.input,function(i){return Nr.faceExpressionNet.predictExpressions(i)},this.extractedFaces)]:[2];case 2:return e=o.sent(),[2,Nx(n,e)]}})})},r.prototype.withAgeAndGender=function(){return new Tm(this,this.input)},r}(Qx),jm=function(t){jt(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.withAgeAndGender=function(){return new Mm(this,this.input)},r.prototype.withFaceDescriptors=function(){return new Im(this,this.input)},r}(Sm),Cm=function(t){jt(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.withAgeAndGender=function(){return new Rm(this,this.input)},r.prototype.withFaceDescriptor=function(){return new Am(this,this.input)},r}(Em),Zx=function(t){jt(r,t);function r(n,e,o){var i=t.call(this)||this;return i.parentTask=n,i.input=e,i.extractedFaces=o,i}return r}(Nu),km=function(t){jt(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.run=function(){return yt(this,void 0,void 0,function(){var n,e,o=this;return gt(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return n=i.sent(),[4,ud(n,this.input,function(u){return yt(o,void 0,void 0,function(){return gt(this,function(a){switch(a.label){case 0:return[4,Promise.all(u.map(function(s){return Nr.ageGenderNet.predictAgeAndGender(s)}))];case 1:return[2,a.sent()]}})})},this.extractedFaces)];case 2:return e=i.sent(),[2,n.map(function(u,a){var s=e[a],l=s.age,h=s.gender,p=s.genderProbability;return Wx(Hx(u,h,p),l)})]}})})},r.prototype.withFaceExpressions=function(){return new Sm(this,this.input)},r}(Zx),Tm=function(t){jt(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.run=function(){return yt(this,void 0,void 0,function(){var n,e,o,i,u;return gt(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return n=a.sent(),n?[4,xm(n,this.input,function(s){return Nr.ageGenderNet.predictAgeAndGender(s)},this.extractedFaces)]:[2];case 2:return e=a.sent(),o=e.age,i=e.gender,u=e.genderProbability,[2,Wx(Hx(n,i,u),o)]}})})},r.prototype.withFaceExpressions=function(){return new Em(this,this.input)},r}(Zx),Mm=function(t){jt(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.withFaceExpressions=function(){return new jm(this,this.input)},r.prototype.withFaceDescriptors=function(){return new Im(this,this.input)},r}(km),Rm=function(t){jt(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.withFaceExpressions=function(){return new Cm(this,this.input)},r.prototype.withFaceDescriptor=function(){return new Am(this,this.input)},r}(Tm),Jx=function(t){jt(r,t);function r(n,e){var o=t.call(this)||this;return o.parentTask=n,o.input=e,o}return r}(Nu),Im=function(t){jt(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.run=function(){return yt(this,void 0,void 0,function(){var n,e;return gt(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return n=o.sent(),[4,ud(n,this.input,function(i){return Promise.all(i.map(function(u){return Nr.faceRecognitionNet.computeFaceDescriptor(u)}))},null,function(i){return i.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return e=o.sent(),[2,e.map(function(i,u){return Vx(n[u],i)})]}})})},r.prototype.withFaceExpressions=function(){return new jm(this,this.input)},r.prototype.withAgeAndGender=function(){return new Mm(this,this.input)},r}(Jx),Am=function(t){jt(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.run=function(){return yt(this,void 0,void 0,function(){var n,e;return gt(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return n=o.sent(),n?[4,xm(n,this.input,function(i){return Nr.faceRecognitionNet.computeFaceDescriptor(i)},null,function(i){return i.landmarks.align(null,{useDlibAlignment:!0})})]:[2];case 2:return e=o.sent(),[2,Vx(n,e)]}})})},r.prototype.withFaceExpressions=function(){return new Cm(this,this.input)},r.prototype.withAgeAndGender=function(){return new Rm(this,this.input)},r}(Jx),e2=function(t){jt(r,t);function r(n,e,o){var i=t.call(this)||this;return i.parentTask=n,i.input=e,i.useTinyLandmarkNet=o,i}return Object.defineProperty(r.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?Nr.faceLandmark68TinyNet:Nr.faceLandmark68Net},enumerable:!0,configurable:!0}),r}(Nu),E4=function(t){jt(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.run=function(){return yt(this,void 0,void 0,function(){var n,e,o,i,u,a=this;return gt(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return n=s.sent(),e=n.map(function(l){return l.detection}),this.input instanceof ir?[4,fm(this.input,e)]:[3,3];case 2:return i=s.sent(),[3,5];case 3:return[4,dm(this.input,e)];case 4:i=s.sent(),s.label=5;case 5:return o=i,[4,Promise.all(o.map(function(l){return a.landmarkNet.detectLandmarks(l)}))];case 6:return u=s.sent(),o.forEach(function(l){return l instanceof ir&&l.dispose()}),[2,n.map(function(l,h){return ym(l,u[h])})]}})})},r.prototype.withFaceExpressions=function(){return new jm(this,this.input)},r.prototype.withAgeAndGender=function(){return new Mm(this,this.input)},r.prototype.withFaceDescriptors=function(){return new Im(this,this.input)},r}(e2),j4=function(t){jt(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.run=function(){return yt(this,void 0,void 0,function(){var n,e,o,i,u;return gt(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return n=a.sent(),n?(e=n.detection,this.input instanceof ir?[4,fm(this.input,[e])]:[3,3]):[2];case 2:return i=a.sent(),[3,5];case 3:return[4,dm(this.input,[e])];case 4:i=a.sent(),a.label=5;case 5:return o=i,[4,this.landmarkNet.detectLandmarks(o[0])];case 6:return u=a.sent(),o.forEach(function(s){return s instanceof ir&&s.dispose()}),[2,ym(n,u)]}})})},r.prototype.withFaceExpressions=function(){return new Cm(this,this.input)},r.prototype.withAgeAndGender=function(){return new Rm(this,this.input)},r.prototype.withFaceDescriptor=function(){return new Am(this,this.input)},r}(e2),t2=function(t){jt(r,t);function r(n,e){e===void 0&&(e=new sd);var o=t.call(this)||this;return o.input=n,o.options=e,o}return r}(Nu),r2=function(t){jt(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.run=function(){return yt(this,void 0,void 0,function(){var n,e,o,i;return gt(this,function(u){switch(u.label){case 0:return n=this,e=n.input,o=n.options,o instanceof qx?[4,Nr.mtcnn.forward(e,o)]:[3,2];case 1:return[2,u.sent().map(function(a){return a.detection})];case 2:if(i=o instanceof e4?function(a){return Nr.tinyFaceDetector.locateFaces(a,o)}:o instanceof sd?function(a){return Nr.ssdMobilenetv1.locateFaces(a,o)}:o instanceof bm?function(a){return Nr.tinyYolov2.locateFaces(a,o)}:null,!i)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,i(e)]}})})},r.prototype.runAndExtendWithFaceDetections=function(){var n=this;return new Promise(function(e){return yt(n,void 0,void 0,function(){var o;return gt(this,function(i){switch(i.label){case 0:return[4,this.run()];case 1:return o=i.sent(),[2,e(o.map(function(u){return um({},u)}))]}})})})},r.prototype.withFaceLandmarks=function(n){return n===void 0&&(n=!1),new E4(this.runAndExtendWithFaceDetections(),this.input,n)},r.prototype.withFaceExpressions=function(){return new Sm(this.runAndExtendWithFaceDetections(),this.input)},r.prototype.withAgeAndGender=function(){return new km(this.runAndExtendWithFaceDetections(),this.input)},r}(t2);(function(t){jt(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.run=function(){return yt(this,void 0,void 0,function(){var n,e;return gt(this,function(o){switch(o.label){case 0:return[4,new r2(this.input,this.options)];case 1:return n=o.sent(),e=n[0],n.forEach(function(i){i.score>e.score&&(e=i)}),[2,e]}})})},r.prototype.runAndExtendWithFaceDetection=function(){var n=this;return new Promise(function(e){return yt(n,void 0,void 0,function(){var o;return gt(this,function(i){switch(i.label){case 0:return[4,this.run()];case 1:return o=i.sent(),[2,e(o?um({},o):void 0)]}})})})},r.prototype.withFaceLandmarks=function(n){return n===void 0&&(n=!1),new j4(this.runAndExtendWithFaceDetection(),this.input,n)},r.prototype.withFaceExpressions=function(){return new Em(this.runAndExtendWithFaceDetection(),this.input)},r.prototype.withAgeAndGender=function(){return new Tm(this.runAndExtendWithFaceDetection(),this.input)},r})(t2);function C4(t,r){return r===void 0&&(r=new sd),new r2(t,r)}function k4(t,r){if(t.length!==r.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var n=Array.from(t),e=Array.from(r);return Math.sqrt(n.map(function(o,i){return o-e[i]}).reduce(function(o,i){return o+Math.pow(i,2)},0))}var Tv=function(){function t(r,n){n===void 0&&(n=.6),this._distanceThreshold=n;var e=Array.isArray(r)?r:[r];if(!e.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var o=1,i=function(){return"person "+o++};this._labeledDescriptors=e.map(function(u){if(u instanceof Ba)return u;if(u instanceof Float32Array)return new Ba(i(),[u]);if(u.descriptor&&u.descriptor instanceof Float32Array)return new Ba(i(),[u.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}return Object.defineProperty(t.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),t.prototype.computeMeanDistance=function(r,n){return n.map(function(e){return k4(e,r)}).reduce(function(e,o){return e+o},0)/(n.length||1)},t.prototype.matchDescriptor=function(r){var n=this;return this.labeledDescriptors.map(function(e){var o=e.descriptors,i=e.label;return new wv(i,n.computeMeanDistance(r,o))}).reduce(function(e,o){return e.distance<o.distance?e:o})},t.prototype.findBestMatch=function(r){var n=this.matchDescriptor(r);return n.distance<this.distanceThreshold?n:new wv("unknown",n.distance)},t.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map(function(r){return r.toJSON()})}},t.fromJSON=function(r){var n=r.labeledDescriptors.map(function(e){return Ba.fromJSON(e)});return new t(n,r.distanceThreshold)},t}();const Bi="/FaceTracker/models";let T4=1;console.log(">>>>>>>");let _l,Ui={};function M4(t){console.log("P",t);let r=null,n=[];t.updateWithProps=a=>{a.onDetection(Ui)};function e(a,s,l){let h=Math.pow(l.midX-a,2),p=Math.pow(l.midY-s,2);return Number(Math.sqrt(h+p).toFixed(2))}function o(a,s){let l=100,h={distance:100,midX:0,midY:0,match:"unknown",d:[],isOn:!0};return Object.values(Ui).forEach(p=>{let c=e(a,s,p);c<l&&(l=c,h=p)}),console.log("MIN DIS:",l),l<30?(h.distance=l,h):null}function i(a){let s=!1,l=a.detection.box._x+a.detection.box._width/2,h=a.detection.box._y+a.detection.box._height/2,p;if(!_l)_l=new Tv([new Ba("P1",[a.descriptor])]),p={midX:l,midY:h,distance:100,match:"P1",d:[a.descriptor],isOn:!0},Ui.P1=p;else{const c=_l.findBestMatch(a.descriptor);if(c._label=="unknown"){let d=o(l,h);if(d)p=d,d.d.length<40&&(s=!0,d.d.push(a.descriptor));else{s=!0;let f={midX:l,midY:h,match:`P${++T4}`,d:[a.descriptor],distance:100,isOn:!0};Ui[f.match]=f,p=f}}else p=Ui[c._label],p.distance=e(l,h,p),p.d.length<40&&(s=!0,p.d.push(a.descriptor))}return s&&u(),p.midX=l,p.midY=h,p.isOn=!0,p}function u(){let a=[];Object.values(Ui).forEach(s=>{a.push(new Ba(s.match,s.d))}),_l=new Tv(a)}t.setup=async function(){await Nr.ssdMobilenetv1.loadFromUri(Bi),await w4(Bi),await _4(Bi),await kv(Bi),await x4(Bi),await S4(Bi),await kv(Bi),console.log("Loaded"),t.createCanvas(1280,720);const a={video:{mandatory:{minWidth:1280,minHeight:720}},audio:!1};r=t.createCapture(a,()=>{}),r.id("video_element"),r.size(1280,720),r.hide()},t.draw=async()=>{r&&(t.background(255),t.image(r,0,0),t.fill(0,0,0,0),Object.values(Ui).forEach(a=>a.isOn=!1),n.map(a=>{if(a){let s=i(a);t.strokeWeight(2),t.textSize(25);const l=a.detection.box._x+a.detection.box._width,h=a.detection.box._y+a.detection.box._height,p=`Name: ${s.match}`,c=t.textWidth(p);t.text(p,l-c-10,h-a.detection.box._height-20),t.textSize(15),t.strokeWeight(1);const d=`Gender: ${a.gender}`,f=t.textWidth(d);t.text(d,l-f-10,h-60);const m="Age: "+a.age.toFixed(0),y=t.textWidth(m);t.text(m,l-y-10,h-30);const g=a.expressions,v=Object.keys(g).map(E=>g[E]),b=Math.max(...v),w=Object.keys(g).filter(E=>g[E]===b)[0],_="Mood: "+w,j=t.textWidth(_);t.text(_,l-j-10,h-10),t.strokeWeight(4),t.stroke("rgb(100%,100%,100%)"),t.rect(a.detection.box._x,a.detection.box._y,a.detection.box._width,a.detection.box._height),s.data={age:a.age.toFixed(0),mood:w}}}),C4(r.id()).withFaceLandmarks().withFaceDescriptors().withAgeAndGender().withFaceExpressions().then(a=>{n=a}))}}function R4(t){const r=t.to,n=t.from;let e=r.getTime()-n.getTime(),o=Math.floor(e/(1e3*60*60)),i=Math.floor(e%(1e3*60*60)/(1e3*60)),u=Math.floor(e%(1e3*60)/1e3);return o+" hours, "+i+" minutes, "+u+" seconds"}const Sl={},I4=4e3;function A4(){const[t,r]=gn.useState(0),[n,e]=gn.useState({});return gn.useEffect(()=>{const i=setInterval(()=>{r(u=>(u+1)%1e3)},I4);return()=>{clearInterval(i)}},[]),mo("div",{className:"App",children:[mo("div",{className:"top-row",children:[ui(tS,{sketch:M4,onDetection:i=>{let u;Object.values(i).forEach(a=>{if(!Sl[a.match])u=new Date,Sl[a.match]=[{from:u,to:u}];else if(a.isOn){u=new Date;let l=Sl[a.match],h=l[l.length-1];const p=(u.getTime()-h.to.getTime())/1e3;console.log(p),p<14?h.to=u:l.push({from:u,to:u})}}),e(i)},update:t}),mo("div",{className:"room",children:[Object.values(n).filter(({isOn:i})=>i).map((i,u)=>{let a=(i.midX/1280*80).toFixed(1),s=(i.midY/720*20).toFixed(1);return ui("div",{className:"dot",style:{left:a+"%",top:s+"%"},children:i.match})}),ui("img",{src:"/public/floorPlan2.png"})]})]}),mo("div",{className:"info",children:[ui("h2",{children:"Info"}),mo("div",{children:[ui("div",{className:"gen-stat"}),ui("div",{className:"active-list",children:Object.values(n).filter(({isOn:i})=>i).map((i,u)=>{var l,h;let a=Sl[i.match],s=(a==null?void 0:a.length)>0?R4(a[a.length-1]):"No data";return mo("div",{className:"data-list",children:[ui("span",{className:"data-index",children:u}),mo("span",{children:["id: ",i.match," "]}),mo("span",{children:["age: ",(l=i.data)==null?void 0:l.age," "]}),mo("span",{children:["mood: ",(h=i.data)==null?void 0:h.mood," "]}),mo("span",{children:["active: ",s]})]},i.match)})})]})]})]})}yf.createRoot(document.getElementById("root")).render(ui(A4,{}))});export default P4();
